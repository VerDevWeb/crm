(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8792],{4442:(hn,Ct,ee)=>{"use strict";ee.d(Ct,{L:()=>v,a:()=>He,b:()=>re,c:()=>Se,d:()=>Ge,g:()=>ct}),ee(5531);const v="ionViewWillEnter",He="ionViewDidEnter",re="ionViewWillLeave",Se="ionViewDidLeave",Ge="ionViewWillUnload",ct=fe=>fe.classList.contains("ion-page")?fe:fe.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||fe},5531:(hn,Ct,ee)=>{"use strict";ee.d(Ct,{a:()=>qe,c:()=>Q,g:()=>Ge});class M{constructor(){this.m=new Map}reset(fe){this.m=new Map(Object.entries(fe))}get(fe,Y){const J=this.m.get(fe);return void 0!==J?J:Y}getBoolean(fe,Y=!1){const J=this.m.get(fe);return void 0===J?Y:"string"==typeof J?"true"===J:!!J}getNumber(fe,Y){const J=parseFloat(this.m.get(fe));return isNaN(J)?void 0!==Y?Y:NaN:J}set(fe,Y){this.m.set(fe,Y)}}const Q=new M,Ge=ct=>me(ct),qe=(ct,fe)=>("string"==typeof ct&&(fe=ct,ct=void 0),Ge(ct).includes(fe)),me=(ct=window)=>{if(typeof ct>"u")return[];ct.Ionic=ct.Ionic||{};let fe=ct.Ionic.platforms;return null==fe&&(fe=ct.Ionic.platforms=Ne(ct),fe.forEach(Y=>ct.document.documentElement.classList.add(`plt-${Y}`))),fe},Ne=ct=>{const fe=Q.get("platform");return Object.keys(Ft).filter(Y=>{const J=null==fe?void 0:fe[Y];return"function"==typeof J?J(ct):Ft[Y](ct)})},Te=ct=>!!(Ye(ct,/iPad/i)||Ye(ct,/Macintosh/i)&&at(ct)),Xe=ct=>Ye(ct,/android|sink/i),at=ct=>Pt(ct,"(any-pointer:coarse)"),ke=ct=>$e(ct)||tt(ct),$e=ct=>!!(ct.cordova||ct.phonegap||ct.PhoneGap),tt=ct=>{const fe=ct.Capacitor;return!(null==fe||!fe.isNative)},Ye=(ct,fe)=>fe.test(ct.navigator.userAgent),Pt=(ct,fe)=>{var Y;return null===(Y=ct.matchMedia)||void 0===Y?void 0:Y.call(ct,fe).matches},Ft={ipad:Te,iphone:ct=>Ye(ct,/iPhone/i),ios:ct=>Ye(ct,/iPhone|iPod/i)||Te(ct),android:Xe,phablet:ct=>{const fe=ct.innerWidth,Y=ct.innerHeight,J=Math.min(fe,Y),ie=Math.max(fe,Y);return J>390&&J<520&&ie>620&&ie<800},tablet:ct=>{const fe=ct.innerWidth,Y=ct.innerHeight,J=Math.min(fe,Y),ie=Math.max(fe,Y);return Te(ct)||(ct=>Xe(ct)&&!Ye(ct,/mobile/i))(ct)||J>460&&J<820&&ie>780&&ie<1400},cordova:$e,capacitor:tt,electron:ct=>Ye(ct,/electron/i),pwa:ct=>{var fe;return!!(null!==(fe=ct.matchMedia)&&void 0!==fe&&fe.call(ct,"(display-mode: standalone)").matches||ct.navigator.standalone)},mobile:at,mobileweb:ct=>at(ct)&&!ke(ct),desktop:ct=>!at(ct),hybrid:ke}},9986:(hn,Ct,ee)=>{"use strict";ee.d(Ct,{c:()=>He});var M=ee(8476);let Q;const x=(re,Se,Ge)=>{const qe=Se.startsWith("animation")?(re=>(void 0===Q&&(Q=void 0===re.style.animationName&&void 0!==re.style.webkitAnimationName?"-webkit-":""),Q))(re):"";re.style.setProperty(qe+Se,Ge)},v=(re=[],Se)=>{if(void 0!==Se){const Ge=Array.isArray(Se)?Se:[Se];return[...re,...Ge]}return re},He=re=>{let Se,Ge,qe,me,Ne,Re,Qe,nt,_t,Ye,At,Te=[],Ke=[],it=[],Xe=!1,vt={},We=[],at=[],pe={},ke=0,$e=!1,tt=!1,Pt=!0,Ft=!1,nn=!0,Kt=!1;const ct=re,fe=[],Y=[],J=[],ie=[],de=[],Ue=[],Le=[],pt=[],Mt=[],Dn=[],$t=[],gn="function"==typeof AnimationEffect||void 0!==M.w&&"function"==typeof M.w.AnimationEffect,In="function"==typeof Element&&"function"==typeof Element.prototype.animate&&gn,Mn=()=>$t,Ht=(lt,Qt)=>{const On=Qt.findIndex(cn=>cn.c===lt);On>-1&&Qt.splice(On,1)},Ze=(lt,Qt)=>((null!=Qt&&Qt.oneTimeCallback?Y:fe).push({c:lt,o:Qt}),At),Gt=()=>{In&&($t.forEach(lt=>{lt.cancel()}),$t.length=0)},Bn=()=>{Ue.forEach(lt=>{null!=lt&&lt.parentNode&&lt.parentNode.removeChild(lt)}),Ue.length=0},jn=()=>void 0!==Ne?Ne:Qe?Qe.getFill():"both",jt=()=>void 0!==nt?nt:void 0!==Re?Re:Qe?Qe.getDirection():"normal",mr=()=>$e?"linear":void 0!==qe?qe:Qe?Qe.getEasing():"linear",pn=()=>tt?0:void 0!==_t?_t:void 0!==Ge?Ge:Qe?Qe.getDuration():0,tr=()=>void 0!==me?me:Qe?Qe.getIterations():1,Vo=()=>void 0!==Ye?Ye:void 0!==Se?Se:Qe?Qe.getDelay():0,ti=()=>{0!==ke&&(ke--,0===ke&&((()=>{Mt.forEach(Ur=>Ur()),Dn.forEach(Ur=>Ur());const lt=Pt?1:0,Qt=We,On=at,cn=pe;ie.forEach(Ur=>{const ui=Ur.classList;Qt.forEach(Xi=>ui.add(Xi)),On.forEach(Xi=>ui.remove(Xi));for(const Xi in cn)cn.hasOwnProperty(Xi)&&x(Ur,Xi,cn[Xi])}),_t=void 0,nt=void 0,Ye=void 0,fe.forEach(Ur=>Ur.c(lt,At)),Y.forEach(Ur=>Ur.c(lt,At)),Y.length=0,nn=!0,Pt&&(Ft=!0),Pt=!0})(),Qe&&Qe.animationFinish()))},Js=()=>{(()=>{Le.forEach(cn=>cn()),pt.forEach(cn=>cn());const lt=Ke,Qt=it,On=vt;ie.forEach(cn=>{const Ur=cn.classList;lt.forEach(ui=>Ur.add(ui)),Qt.forEach(ui=>Ur.remove(ui));for(const ui in On)On.hasOwnProperty(ui)&&x(cn,ui,On[ui])})})(),Te.length>0&&In&&(ie.forEach(lt=>{const Qt=lt.animate(Te,{id:ct,delay:Vo(),duration:pn(),easing:mr(),iterations:tr(),fill:jn(),direction:jt()});Qt.pause(),$t.push(Qt)}),$t.length>0&&($t[0].onfinish=()=>{ti()})),Xe=!0},xr=lt=>{lt=Math.min(Math.max(lt,0),.9999),In&&$t.forEach(Qt=>{Qt.currentTime=Qt.effect.getComputedTiming().delay+pn()*lt,Qt.pause()})},mn=lt=>{$t.forEach(Qt=>{Qt.effect.updateTiming({delay:Vo(),duration:pn(),easing:mr(),iterations:tr(),fill:jn(),direction:jt()})}),void 0!==lt&&xr(lt)},Tn=(lt=!1,Qt=!0,On)=>(lt&&de.forEach(cn=>{cn.update(lt,Qt,On)}),In&&mn(On),At),Ao=()=>{Xe&&(In?$t.forEach(lt=>{lt.pause()}):ie.forEach(lt=>{x(lt,"animation-play-state","paused")}),Kt=!0)},_i=lt=>new Promise(Qt=>{null!=lt&&lt.sync&&(tt=!0,Ze(()=>tt=!1,{oneTimeCallback:!0})),Xe||Js(),Ft&&(In&&(xr(0),mn()),Ft=!1),nn&&(ke=de.length+1,nn=!1);const On=()=>{Ht(cn,Y),Qt()},cn=()=>{Ht(On,J),Qt()};Ze(cn,{oneTimeCallback:!0}),((lt,Qt)=>{J.push({c:lt,o:{oneTimeCallback:!0}})})(On),de.forEach(Ur=>{Ur.play()}),In?($t.forEach(lt=>{lt.play()}),(0===Te.length||0===ie.length)&&ti()):ti(),Kt=!1}),$o=(lt,Qt)=>{const On=Te[0];return void 0===On||void 0!==On.offset&&0!==On.offset?Te=[{offset:0,[lt]:Qt},...Te]:On[lt]=Qt,At};return At={parentAnimation:Qe,elements:ie,childAnimations:de,id:ct,animationFinish:ti,from:$o,to:(lt,Qt)=>{const On=Te[Te.length-1];return void 0===On||void 0!==On.offset&&1!==On.offset?Te=[...Te,{offset:1,[lt]:Qt}]:On[lt]=Qt,At},fromTo:(lt,Qt,On)=>$o(lt,Qt).to(lt,On),parent:lt=>(Qe=lt,At),play:_i,pause:()=>(de.forEach(lt=>{lt.pause()}),Ao(),At),stop:()=>{de.forEach(lt=>{lt.stop()}),Xe&&(Gt(),Xe=!1),$e=!1,tt=!1,nn=!0,nt=void 0,_t=void 0,Ye=void 0,ke=0,Ft=!1,Pt=!0,Kt=!1,J.forEach(lt=>lt.c(0,At)),J.length=0},destroy:lt=>(de.forEach(Qt=>{Qt.destroy(lt)}),(lt=>{Gt(),lt&&Bn()})(lt),ie.length=0,de.length=0,Te.length=0,fe.length=0,Y.length=0,Xe=!1,nn=!0,At),keyframes:lt=>{const Qt=Te!==lt;return Te=lt,Qt&&(lt=>{In&&Mn().forEach(Qt=>{const On=Qt.effect;if(On.setKeyframes)On.setKeyframes(lt);else{const cn=new KeyframeEffect(On.target,lt,On.getTiming());Qt.effect=cn}})})(Te),At},addAnimation:lt=>{if(null!=lt)if(Array.isArray(lt))for(const Qt of lt)Qt.parent(At),de.push(Qt);else lt.parent(At),de.push(lt);return At},addElement:lt=>{if(null!=lt)if(1===lt.nodeType)ie.push(lt);else if(lt.length>=0)for(let Qt=0;Qt<lt.length;Qt++)ie.push(lt[Qt]);else console.error("Invalid addElement value");return At},update:Tn,fill:lt=>(Ne=lt,Tn(!0),At),direction:lt=>(Re=lt,Tn(!0),At),iterations:lt=>(me=lt,Tn(!0),At),duration:lt=>(!In&&0===lt&&(lt=1),Ge=lt,Tn(!0),At),easing:lt=>(qe=lt,Tn(!0),At),delay:lt=>(Se=lt,Tn(!0),At),getWebAnimations:Mn,getKeyframes:()=>Te,getFill:jn,getDirection:jt,getDelay:Vo,getIterations:tr,getEasing:mr,getDuration:pn,afterAddRead:lt=>(Mt.push(lt),At),afterAddWrite:lt=>(Dn.push(lt),At),afterClearStyles:(lt=[])=>{for(const Qt of lt)pe[Qt]="";return At},afterStyles:(lt={})=>(pe=lt,At),afterRemoveClass:lt=>(at=v(at,lt),At),afterAddClass:lt=>(We=v(We,lt),At),beforeAddRead:lt=>(Le.push(lt),At),beforeAddWrite:lt=>(pt.push(lt),At),beforeClearStyles:(lt=[])=>{for(const Qt of lt)vt[Qt]="";return At},beforeStyles:(lt={})=>(vt=lt,At),beforeRemoveClass:lt=>(it=v(it,lt),At),beforeAddClass:lt=>(Ke=v(Ke,lt),At),onFinish:Ze,isRunning:()=>0!==ke&&!Kt,progressStart:(lt=!1,Qt)=>(de.forEach(On=>{On.progressStart(lt,Qt)}),Ao(),$e=lt,Xe||Js(),Tn(!1,!0,Qt),At),progressStep:lt=>(de.forEach(Qt=>{Qt.progressStep(lt)}),xr(lt),At),progressEnd:(lt,Qt,On)=>($e=!1,de.forEach(cn=>{cn.progressEnd(lt,Qt,On)}),void 0!==On&&(_t=On),Ft=!1,Pt=!0,0===lt?(nt="reverse"===jt()?"normal":"reverse","reverse"===nt&&(Pt=!1),In?(Tn(),xr(1-Qt)):(Ye=(1-Qt)*pn()*-1,Tn(!1,!1))):1===lt&&(In?(Tn(),xr(Qt)):(Ye=Qt*pn()*-1,Tn(!1,!1))),void 0!==lt&&!Qe&&_i(),At)}}},464:(hn,Ct,ee)=>{"use strict";ee.d(Ct,{E:()=>qe,a:()=>M,s:()=>Se});const M=me=>{try{if(me instanceof re)return me.value;if(!x()||"string"!=typeof me||""===me)return me;if(me.includes("onload="))return"";const Ne=document.createDocumentFragment(),Re=document.createElement("div");Ne.appendChild(Re),Re.innerHTML=me,He.forEach(Xe=>{const Qe=Ne.querySelectorAll(Xe);for(let vt=Qe.length-1;vt>=0;vt--){const We=Qe[vt];We.parentNode?We.parentNode.removeChild(We):Ne.removeChild(We);const at=h(We);for(let pe=0;pe<at.length;pe++)Q(at[pe])}});const Te=h(Ne);for(let Xe=0;Xe<Te.length;Xe++)Q(Te[Xe]);const Ke=document.createElement("div");Ke.appendChild(Ne);const it=Ke.querySelector("div");return null!==it?it.innerHTML:Ke.innerHTML}catch(Ne){return console.error(Ne),""}},Q=me=>{if(me.nodeType&&1!==me.nodeType)return;if(typeof NamedNodeMap<"u"&&!(me.attributes instanceof NamedNodeMap))return void me.remove();for(let Re=me.attributes.length-1;Re>=0;Re--){const Te=me.attributes.item(Re),Ke=Te.name;if(!v.includes(Ke.toLowerCase())){me.removeAttribute(Ke);continue}const it=Te.value,Xe=me[Ke];(null!=it&&it.toLowerCase().includes("javascript:")||null!=Xe&&Xe.toLowerCase().includes("javascript:"))&&me.removeAttribute(Ke)}const Ne=h(me);for(let Re=0;Re<Ne.length;Re++)Q(Ne[Re])},h=me=>null!=me.children?me.children:me.childNodes,x=()=>{var me;const Ne=window,Re=null===(me=null==Ne?void 0:Ne.Ionic)||void 0===me?void 0:me.config;return!Re||(Re.get?Re.get("sanitizerEnabled",!0):!0===Re.sanitizerEnabled||void 0===Re.sanitizerEnabled)},v=["class","id","href","src","name","slot"],He=["script","style","iframe","meta","link","object","embed"];class re{constructor(Ne){this.value=Ne}}const Se=me=>{const Ne=window,Re=Ne.Ionic;if(!Re||!Re.config||"Object"===Re.config.constructor.name)return Ne.Ionic=Ne.Ionic||{},Ne.Ionic.config=Object.assign(Object.assign({},Ne.Ionic.config),me),Ne.Ionic.config},qe=!1},8621:(hn,Ct,ee)=>{"use strict";ee.d(Ct,{C:()=>v,a:()=>h,d:()=>x});var M=ee(467),Q=ee(4920);const h=function(){var He=(0,M.A)(function*(re,Se,Ge,qe,me,Ne){var Re;if(re)return re.attachViewToDom(Se,Ge,me,qe);if(!(Ne||"string"==typeof Ge||Ge instanceof HTMLElement))throw new Error("framework delegate is missing");const Te="string"==typeof Ge?null===(Re=Se.ownerDocument)||void 0===Re?void 0:Re.createElement(Ge):Ge;return qe&&qe.forEach(Ke=>Te.classList.add(Ke)),me&&Object.assign(Te,me),Se.appendChild(Te),yield new Promise(Ke=>(0,Q.c)(Te,Ke)),Te});return function(Se,Ge,qe,me,Ne,Re){return He.apply(this,arguments)}}(),x=(He,re)=>{if(re){if(He)return He.removeViewFromDom(re.parentElement,re);re.remove()}return Promise.resolve()},v=()=>{let He,re;return{attachViewToDom:function(){var qe=(0,M.A)(function*(me,Ne,Re={},Te=[]){var Ke,it;let Xe;if(He=me,Ne){const vt="string"==typeof Ne?null===(Ke=He.ownerDocument)||void 0===Ke?void 0:Ke.createElement(Ne):Ne;Te.forEach(We=>vt.classList.add(We)),Object.assign(vt,Re),He.appendChild(vt),Xe=vt,yield new Promise(We=>(0,Q.c)(vt,We))}else if(He.children.length>0&&("ION-MODAL"===He.tagName||"ION-POPOVER"===He.tagName)&&!(Xe=He.children[0]).classList.contains("ion-delegate-host")){const We=null===(it=He.ownerDocument)||void 0===it?void 0:it.createElement("div");We.classList.add("ion-delegate-host"),Te.forEach(at=>We.classList.add(at)),We.append(...He.children),He.appendChild(We),Xe=We}const Qe=document.querySelector("ion-app")||document.body;return re=document.createComment("ionic teleport"),He.parentNode.insertBefore(re,He),Qe.appendChild(He),null!=Xe?Xe:He});return function(Ne,Re){return qe.apply(this,arguments)}}(),removeViewFromDom:()=>(He&&re&&(re.parentNode.insertBefore(He,re),re.remove()),Promise.resolve())}}},1970:(hn,Ct,ee)=>{"use strict";ee.d(Ct,{B:()=>x,G:()=>v});class Q{constructor(re,Se,Ge,qe,me){this.id=Se,this.name=Ge,this.disableScroll=me,this.priority=1e6*qe+Se,this.ctrl=re}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const re=this.ctrl.capture(this.name,this.id,this.priority);return re&&this.disableScroll&&this.ctrl.disableScroll(this.id),re}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class h{constructor(re,Se,Ge,qe){this.id=Se,this.disable=Ge,this.disableScroll=qe,this.ctrl=re}block(){if(this.ctrl){if(this.disable)for(const re of this.disable)this.ctrl.disableGesture(re,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const re of this.disable)this.ctrl.enableGesture(re,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const x="backdrop-no-scroll",v=new class M{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(re){var Se;return new Q(this,this.newID(),re.name,null!==(Se=re.priority)&&void 0!==Se?Se:0,!!re.disableScroll)}createBlocker(re={}){return new h(this,this.newID(),re.disable,!!re.disableScroll)}start(re,Se,Ge){return this.canStart(re)?(this.requestedStart.set(Se,Ge),!0):(this.requestedStart.delete(Se),!1)}capture(re,Se,Ge){if(!this.start(re,Se,Ge))return!1;const qe=this.requestedStart;let me=-1e4;if(qe.forEach(Ne=>{me=Math.max(me,Ne)}),me===Ge){this.capturedId=Se,qe.clear();const Ne=new CustomEvent("ionGestureCaptured",{detail:{gestureName:re}});return document.dispatchEvent(Ne),!0}return qe.delete(Se),!1}release(re){this.requestedStart.delete(re),this.capturedId===re&&(this.capturedId=void 0)}disableGesture(re,Se){let Ge=this.disabledGestures.get(re);void 0===Ge&&(Ge=new Set,this.disabledGestures.set(re,Ge)),Ge.add(Se)}enableGesture(re,Se){const Ge=this.disabledGestures.get(re);void 0!==Ge&&Ge.delete(Se)}disableScroll(re){this.disabledScroll.add(re),1===this.disabledScroll.size&&document.body.classList.add(x)}enableScroll(re){this.disabledScroll.delete(re),0===this.disabledScroll.size&&document.body.classList.remove(x)}canStart(re){return!(void 0!==this.capturedId||this.isDisabled(re))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(re){const Se=this.disabledGestures.get(re);return!!(Se&&Se.size>0)}newID(){return this.gestureId++,this.gestureId}}},6411:(hn,Ct,ee)=>{"use strict";ee.r(Ct),ee.d(Ct,{MENU_BACK_BUTTON_PRIORITY:()=>Ge,OVERLAY_BACK_BUTTON_PRIORITY:()=>Se,blockHardwareBackButton:()=>He,shouldUseCloseWatcher:()=>v,startHardwareBackButton:()=>re});var M=ee(467),Q=ee(8476),h=ee(3664);ee(9672);const v=()=>h.c.get("experimentalCloseWatcher",!1)&&void 0!==Q.w&&"CloseWatcher"in Q.w,He=()=>{document.addEventListener("backbutton",()=>{})},re=()=>{const qe=document;let me=!1;const Ne=()=>{if(me)return;let Re=0,Te=[];const Ke=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(Qe,vt){Te.push({priority:Qe,handler:vt,id:Re++})}}});qe.dispatchEvent(Ke);const it=function(){var Qe=(0,M.A)(function*(vt){try{if(null!=vt&&vt.handler){const We=vt.handler(Xe);null!=We&&(yield We)}}catch(We){console.error(We)}});return function(We){return Qe.apply(this,arguments)}}(),Xe=()=>{if(Te.length>0){let Qe={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};Te.forEach(vt=>{vt.priority>=Qe.priority&&(Qe=vt)}),me=!0,Te=Te.filter(vt=>vt.id!==Qe.id),it(Qe).then(()=>me=!1)}};Xe()};if(v()){let Re;const Te=()=>{null==Re||Re.destroy(),Re=new Q.w.CloseWatcher,Re.onclose=()=>{Ne(),Te()}};Te()}else qe.addEventListener("backbutton",Ne)},Se=100,Ge=99},4920:(hn,Ct,ee)=>{"use strict";ee.d(Ct,{a:()=>Se,b:()=>Ge,c:()=>h,d:()=>Te,e:()=>vt,f:()=>Re,g:()=>qe,h:()=>v,i:()=>re,j:()=>Ke,k:()=>x,l:()=>Ne,m:()=>it,n:()=>Qe,o:()=>We,p:()=>Xe,r:()=>me,s:()=>at,t:()=>M});const M=(pe,ke=0)=>new Promise($e=>{Q(pe,ke,$e)}),Q=(pe,ke=0,$e)=>{let tt,nt;const _t={passive:!0},Pt=()=>{tt&&tt()},Ft=nn=>{(void 0===nn||pe===nn.target)&&(Pt(),$e(nn))};return pe&&(pe.addEventListener("webkitTransitionEnd",Ft,_t),pe.addEventListener("transitionend",Ft,_t),nt=setTimeout(Ft,ke+500),tt=()=>{void 0!==nt&&(clearTimeout(nt),nt=void 0),pe.removeEventListener("webkitTransitionEnd",Ft,_t),pe.removeEventListener("transitionend",Ft,_t)}),Pt},h=(pe,ke)=>{pe.componentOnReady?pe.componentOnReady().then($e=>ke($e)):me(()=>ke(pe))},x=pe=>void 0!==pe.componentOnReady,v=(pe,ke=[])=>{const $e={};return ke.forEach(tt=>{pe.hasAttribute(tt)&&(null!==pe.getAttribute(tt)&&($e[tt]=pe.getAttribute(tt)),pe.removeAttribute(tt))}),$e},He=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],re=(pe,ke)=>{let $e=He;return ke&&ke.length>0&&($e=$e.filter(tt=>!ke.includes(tt))),v(pe,$e)},Se=(pe,ke,$e,tt)=>{var nt;if(typeof window<"u"){const _t=window,Ye=null===(nt=null==_t?void 0:_t.Ionic)||void 0===nt?void 0:nt.config;if(Ye){const Pt=Ye.get("_ael");if(Pt)return Pt(pe,ke,$e,tt);if(Ye._ael)return Ye._ael(pe,ke,$e,tt)}}return pe.addEventListener(ke,$e,tt)},Ge=(pe,ke,$e,tt)=>{var nt;if(typeof window<"u"){const _t=window,Ye=null===(nt=null==_t?void 0:_t.Ionic)||void 0===nt?void 0:nt.config;if(Ye){const Pt=Ye.get("_rel");if(Pt)return Pt(pe,ke,$e,tt);if(Ye._rel)return Ye._rel(pe,ke,$e,tt)}}return pe.removeEventListener(ke,$e,tt)},qe=(pe,ke=pe)=>pe.shadowRoot||ke,me=pe=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(pe):"function"==typeof requestAnimationFrame?requestAnimationFrame(pe):setTimeout(pe),Ne=pe=>!!pe.shadowRoot&&!!pe.attachShadow,Re=pe=>{if(pe.focus(),pe.classList.contains("ion-focusable")){const ke=pe.closest("ion-app");ke&&ke.setFocus([pe])}},Te=(pe,ke,$e,tt,nt)=>{if(pe||Ne(ke)){let _t=ke.querySelector("input.aux-input");_t||(_t=ke.ownerDocument.createElement("input"),_t.type="hidden",_t.classList.add("aux-input"),ke.appendChild(_t)),_t.disabled=nt,_t.name=$e,_t.value=tt||""}},Ke=(pe,ke,$e)=>Math.max(pe,Math.min(ke,$e)),it=(pe,ke)=>{if(!pe){const $e="ASSERT: "+ke;throw console.error($e),new Error($e)}},Xe=pe=>{if(pe){const ke=pe.changedTouches;if(ke&&ke.length>0){const $e=ke[0];return{x:$e.clientX,y:$e.clientY}}if(void 0!==pe.pageX)return{x:pe.pageX,y:pe.pageY}}return{x:0,y:0}},Qe=pe=>{const ke="rtl"===document.dir;switch(pe){case"start":return ke;case"end":return!ke;default:throw new Error(`"${pe}" is not a valid value for [side]. Use "start" or "end" instead.`)}},vt=(pe,ke)=>{const $e=pe._original||pe;return{_original:pe,emit:We($e.emit.bind($e),ke)}},We=(pe,ke=0)=>{let $e;return(...tt)=>{clearTimeout($e),$e=setTimeout(pe,ke,...tt)}},at=(pe,ke)=>{if(null!=pe||(pe={}),null!=ke||(ke={}),pe===ke)return!0;const $e=Object.keys(pe);if($e.length!==Object.keys(ke).length)return!1;for(const tt of $e)if(!(tt in ke)||pe[tt]!==ke[tt])return!1;return!0}},5465:(hn,Ct,ee)=>{"use strict";ee.d(Ct,{m:()=>Re});var M=ee(467),Q=ee(8476),h=ee(6411),x=ee(4929),v=ee(4920),He=ee(3664),re=ee(9986);const Se=Te=>(0,re.c)().duration(Te?400:300),Ge=Te=>{let Ke,it;const Xe=Te.width+8,Qe=(0,re.c)(),vt=(0,re.c)();Te.isEndSide?(Ke=Xe+"px",it="0px"):(Ke=-Xe+"px",it="0px"),Qe.addElement(Te.menuInnerEl).fromTo("transform",`translateX(${Ke})`,`translateX(${it})`);const at="ios"===(0,He.b)(Te),pe=at?.2:.25;return vt.addElement(Te.backdropEl).fromTo("opacity",.01,pe),Se(at).addAnimation([Qe,vt])},qe=Te=>{let Ke,it;const Xe=(0,He.b)(Te),Qe=Te.width;Te.isEndSide?(Ke=-Qe+"px",it=Qe+"px"):(Ke=Qe+"px",it=-Qe+"px");const vt=(0,re.c)().addElement(Te.menuInnerEl).fromTo("transform",`translateX(${it})`,"translateX(0px)"),We=(0,re.c)().addElement(Te.contentEl).fromTo("transform","translateX(0px)",`translateX(${Ke})`),at=(0,re.c)().addElement(Te.backdropEl).fromTo("opacity",.01,.32);return Se("ios"===Xe).addAnimation([vt,We,at])},me=Te=>{const Ke=(0,He.b)(Te),it=Te.width*(Te.isEndSide?-1:1)+"px",Xe=(0,re.c)().addElement(Te.contentEl).fromTo("transform","translateX(0px)",`translateX(${it})`);return Se("ios"===Ke).addAnimation(Xe)},Re=(()=>{const Te=new Map,Ke=[],it=function(){var J=(0,M.A)(function*(ie){const de=yield ke(ie,!0);return!!de&&de.open()});return function(de){return J.apply(this,arguments)}}(),Xe=function(){var J=(0,M.A)(function*(ie){const de=yield void 0!==ie?ke(ie,!0):$e();return void 0!==de&&de.close()});return function(de){return J.apply(this,arguments)}}(),Qe=function(){var J=(0,M.A)(function*(ie){const de=yield ke(ie,!0);return!!de&&de.toggle()});return function(de){return J.apply(this,arguments)}}(),vt=function(){var J=(0,M.A)(function*(ie,de){const Ue=yield ke(de);return Ue&&(Ue.disabled=!ie),Ue});return function(de,Ue){return J.apply(this,arguments)}}(),We=function(){var J=(0,M.A)(function*(ie,de){const Ue=yield ke(de);return Ue&&(Ue.swipeGesture=ie),Ue});return function(de,Ue){return J.apply(this,arguments)}}(),at=function(){var J=(0,M.A)(function*(ie){if(null!=ie){const de=yield ke(ie);return void 0!==de&&de.isOpen()}return void 0!==(yield $e())});return function(de){return J.apply(this,arguments)}}(),pe=function(){var J=(0,M.A)(function*(ie){const de=yield ke(ie);return!!de&&!de.disabled});return function(de){return J.apply(this,arguments)}}(),ke=function(){var J=(0,M.A)(function*(ie,de=!1){if(yield Y(),"start"===ie||"end"===ie){const Le=Ke.filter(Mt=>Mt.side===ie&&!Mt.disabled);if(Le.length>=1)return Le.length>1&&de&&(0,x.p)(`menuController queried for a menu on the "${ie}" side, but ${Le.length} menus were found. The first menu reference will be used. If this is not the behavior you want then pass the ID of the menu instead of its side.`,Le.map(Mt=>Mt.el)),Le[0].el;const pt=Ke.filter(Mt=>Mt.side===ie);if(pt.length>=1)return pt.length>1&&de&&(0,x.p)(`menuController queried for a menu on the "${ie}" side, but ${pt.length} menus were found. The first menu reference will be used. If this is not the behavior you want then pass the ID of the menu instead of its side.`,pt.map(Mt=>Mt.el)),pt[0].el}else if(null!=ie)return fe(Le=>Le.menuId===ie);return fe(Le=>!Le.disabled)||(Ke.length>0?Ke[0].el:void 0)});return function(de){return J.apply(this,arguments)}}(),$e=function(){var J=(0,M.A)(function*(){return yield Y(),At()});return function(){return J.apply(this,arguments)}}(),tt=function(){var J=(0,M.A)(function*(){return yield Y(),Kt()});return function(){return J.apply(this,arguments)}}(),nt=function(){var J=(0,M.A)(function*(){return yield Y(),ct()});return function(){return J.apply(this,arguments)}}(),_t=(J,ie)=>{Te.set(J,ie)},Ft=function(){var J=(0,M.A)(function*(ie,de,Ue){if(ct())return!1;if(de){const Le=yield $e();Le&&ie.el!==Le&&(yield Le.setOpen(!1,!1))}return ie._setOpen(de,Ue)});return function(de,Ue,Le){return J.apply(this,arguments)}}(),At=()=>fe(J=>J._isOpen),Kt=()=>Ke.map(J=>J.el),ct=()=>Ke.some(J=>J.isAnimating),fe=J=>{const ie=Ke.find(J);if(void 0!==ie)return ie.el},Y=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(J=>new Promise(ie=>(0,v.c)(J,ie))));return _t("reveal",me),_t("push",qe),_t("overlay",Ge),null==Q.d||Q.d.addEventListener("ionBackButton",J=>{const ie=At();ie&&J.detail.register(h.MENU_BACK_BUTTON_PRIORITY,()=>ie.close())}),{registerAnimation:_t,get:ke,getMenus:tt,getOpen:$e,isEnabled:pe,swipeGesture:We,isAnimating:nt,isOpen:at,enable:vt,toggle:Qe,close:Xe,open:it,_getOpenSync:At,_createAnimation:(J,ie)=>{const de=Te.get(J);if(!de)throw new Error("animation not registered");return de(ie)},_register:J=>{Ke.indexOf(J)<0&&Ke.push(J)},_unregister:J=>{const ie=Ke.indexOf(J);ie>-1&&Ke.splice(ie,1)},_setOpen:Ft}})()},8607:(hn,Ct,ee)=>{"use strict";ee.r(Ct),ee.d(Ct,{GESTURE_CONTROLLER:()=>M.G,createGesture:()=>Ge});var M=ee(1970);const Q=(Re,Te,Ke,it)=>{const Xe=h(Re)?{capture:!!it.capture,passive:!!it.passive}:!!it.capture;let Qe,vt;return Re.__zone_symbol__addEventListener?(Qe="__zone_symbol__addEventListener",vt="__zone_symbol__removeEventListener"):(Qe="addEventListener",vt="removeEventListener"),Re[Qe](Te,Ke,Xe),()=>{Re[vt](Te,Ke,Xe)}},h=Re=>{if(void 0===x)try{const Te=Object.defineProperty({},"passive",{get:()=>{x=!0}});Re.addEventListener("optsTest",()=>{},Te)}catch{x=!1}return!!x};let x;const re=Re=>Re instanceof Document?Re:Re.ownerDocument,Ge=Re=>{let Te=!1,Ke=!1,it=!0,Xe=!1;const Qe=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},Re),vt=Qe.canStart,We=Qe.onWillStart,at=Qe.onStart,pe=Qe.onEnd,ke=Qe.notCaptured,$e=Qe.onMove,tt=Qe.threshold,nt=Qe.passive,_t=Qe.blurOnStart,Ye={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},Pt=((Re,Te,Ke)=>{const it=Ke*(Math.PI/180),Xe="x"===Re,Qe=Math.cos(it),vt=Te*Te;let We=0,at=0,pe=!1,ke=0;return{start($e,tt){We=$e,at=tt,ke=0,pe=!0},detect($e,tt){if(!pe)return!1;const nt=$e-We,_t=tt-at,Ye=nt*nt+_t*_t;if(Ye<vt)return!1;const Pt=Math.sqrt(Ye),Ft=(Xe?nt:_t)/Pt;return ke=Ft>Qe?1:Ft<-Qe?-1:0,pe=!1,!0},isGesture:()=>0!==ke,getDirection:()=>ke}})(Qe.direction,Qe.threshold,Qe.maxAngle),Ft=M.G.createGesture({name:Re.gestureName,priority:Re.gesturePriority,disableScroll:Re.disableScroll}),Kt=()=>{Te&&(Xe=!1,$e&&$e(Ye))},ct=()=>!!Ft.capture()&&(Te=!0,it=!1,Ye.startX=Ye.currentX,Ye.startY=Ye.currentY,Ye.startTime=Ye.currentTime,We?We(Ye).then(Y):Y(),!0),Y=()=>{_t&&(()=>{if(typeof document<"u"){const Le=document.activeElement;null!=Le&&Le.blur&&Le.blur()}})(),at&&at(Ye),it=!0},J=()=>{Te=!1,Ke=!1,Xe=!1,it=!0,Ft.release()},ie=Le=>{const pt=Te,Mt=it;if(J(),Mt){if(qe(Ye,Le),pt)return void(pe&&pe(Ye));ke&&ke(Ye)}},de=((Re,Te,Ke,it,Xe)=>{let Qe,vt,We,at,pe,ke,$e,tt=0;const nt=fe=>{tt=Date.now()+2e3,Te(fe)&&(!vt&&Ke&&(vt=Q(Re,"touchmove",Ke,Xe)),We||(We=Q(fe.target,"touchend",Ye,Xe)),at||(at=Q(fe.target,"touchcancel",Ye,Xe)))},_t=fe=>{tt>Date.now()||Te(fe)&&(!ke&&Ke&&(ke=Q(re(Re),"mousemove",Ke,Xe)),$e||($e=Q(re(Re),"mouseup",Pt,Xe)))},Ye=fe=>{Ft(),it&&it(fe)},Pt=fe=>{nn(),it&&it(fe)},Ft=()=>{vt&&vt(),We&&We(),at&&at(),vt=We=at=void 0},nn=()=>{ke&&ke(),$e&&$e(),ke=$e=void 0},At=()=>{Ft(),nn()},Kt=(fe=!0)=>{fe?(Qe||(Qe=Q(Re,"touchstart",nt,Xe)),pe||(pe=Q(Re,"mousedown",_t,Xe))):(Qe&&Qe(),pe&&pe(),Qe=pe=void 0,At())};return{enable:Kt,stop:At,destroy:()=>{Kt(!1),it=Ke=Te=void 0}}})(Qe.el,Le=>{const pt=Ne(Le);return!(Ke||!it||(me(Le,Ye),Ye.startX=Ye.currentX,Ye.startY=Ye.currentY,Ye.startTime=Ye.currentTime=pt,Ye.velocityX=Ye.velocityY=Ye.deltaX=Ye.deltaY=0,Ye.event=Le,vt&&!1===vt(Ye))||(Ft.release(),!Ft.start()))&&(Ke=!0,0===tt?ct():(Pt.start(Ye.startX,Ye.startY),!0))},Le=>{Te?!Xe&&it&&(Xe=!0,qe(Ye,Le),requestAnimationFrame(Kt)):(qe(Ye,Le),Pt.detect(Ye.currentX,Ye.currentY)&&(!Pt.isGesture()||!ct())&&Ue())},ie,{capture:!1,passive:nt}),Ue=()=>{J(),de.stop(),ke&&ke(Ye)};return{enable(Le=!0){Le||(Te&&ie(void 0),J()),de.enable(Le)},destroy(){Ft.destroy(),de.destroy()}}},qe=(Re,Te)=>{if(!Te)return;const Ke=Re.currentX,it=Re.currentY,Xe=Re.currentTime;me(Te,Re);const Qe=Re.currentX,vt=Re.currentY,at=(Re.currentTime=Ne(Te))-Xe;if(at>0&&at<100){const ke=(vt-it)/at;Re.velocityX=(Qe-Ke)/at*.7+.3*Re.velocityX,Re.velocityY=.7*ke+.3*Re.velocityY}Re.deltaX=Qe-Re.startX,Re.deltaY=vt-Re.startY,Re.event=Te},me=(Re,Te)=>{let Ke=0,it=0;if(Re){const Xe=Re.changedTouches;if(Xe&&Xe.length>0){const Qe=Xe[0];Ke=Qe.clientX,it=Qe.clientY}else void 0!==Re.pageX&&(Ke=Re.pageX,it=Re.pageY)}Te.currentX=Ke,Te.currentY=it},Ne=Re=>Re.timeStamp||Date.now()},9672:(hn,Ct,ee)=>{"use strict";ee.d(Ct,{B:()=>He,a:()=>Da,b:()=>so,c:()=>Mt,d:()=>In,e:()=>wn,f:()=>ct,g:()=>Dn,h:()=>At,i:()=>gn,j:()=>Tn,k:()=>re,r:()=>yn,w:()=>ns});var M=ee(467);var x=Object.defineProperty,He={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1},re=U=>{const Z=new URL(U,gt.$resourcesUrl$);return Z.origin!==Fn.location.origin?Z.href:Z.pathname},Se={},Ne=U=>"object"==(U=typeof U)||"function"===U;function Re(U){var Z,ae,he;return null!=(he=null==(ae=null==(Z=U.head)?void 0:Z.querySelector('meta[name="csp-nonce"]'))?void 0:ae.getAttribute("content"))?he:void 0}((U,Z)=>{for(var ae in Z)x(U,ae,{get:Z[ae],enumerable:!0})})({},{err:()=>it,map:()=>Xe,ok:()=>Ke,unwrap:()=>Qe,unwrapErr:()=>vt});var Ke=U=>({isOk:!0,isErr:!1,value:U}),it=U=>({isOk:!1,isErr:!0,value:U});function Xe(U,Z){if(U.isOk){const ae=Z(U.value);return ae instanceof Promise?ae.then(he=>Ke(he)):Ke(ae)}if(U.isErr)return it(U.value);throw"should never get here"}var Qe=U=>{if(U.isOk)return U.value;throw U.value},vt=U=>{if(U.isErr)return U.value;throw U.value},nt="s-id",_t="sty-id",Ft="slot-fb{display:contents}slot-fb[hidden]{display:none}",nn="http://www.w3.org/1999/xlink",At=(U,Z,...ae)=>{let he=null,be=null,Ee=null,ut=!1,Tt=!1;const Et=[],Rt=Yt=>{for(let qt=0;qt<Yt.length;qt++)he=Yt[qt],Array.isArray(he)?Rt(he):null!=he&&"boolean"!=typeof he&&((ut="function"!=typeof U&&!Ne(he))&&(he=String(he)),ut&&Tt?Et[Et.length-1].$text$+=he:Et.push(ut?Kt(null,he):he),Tt=ut)};if(Rt(ae),Z){Z.key&&(be=Z.key),Z.name&&(Ee=Z.name);{const Yt=Z.className||Z.class;Yt&&(Z.class="object"!=typeof Yt?Yt:Object.keys(Yt).filter(qt=>Yt[qt]).join(" "))}}if("function"==typeof U)return U(null===Z?{}:Z,Et,Y);const zt=Kt(U,null);return zt.$attrs$=Z,Et.length>0&&(zt.$children$=Et),zt.$key$=be,zt.$name$=Ee,zt},Kt=(U,Z)=>({$flags$:0,$tag$:U,$text$:Z,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),ct={},Y={forEach:(U,Z)=>U.map(J).forEach(Z),map:(U,Z)=>U.map(J).map(Z).map(ie)},J=U=>({vattrs:U.$attrs$,vchildren:U.$children$,vkey:U.$key$,vname:U.$name$,vtag:U.$tag$,vtext:U.$text$}),ie=U=>{if("function"==typeof U.vtag){const ae={...U.vattrs};return U.vkey&&(ae.key=U.vkey),U.vname&&(ae.name=U.vname),At(U.vtag,ae,...U.vchildren||[])}const Z=Kt(U.vtag,U.vtext);return Z.$attrs$=U.vattrs,Z.$children$=U.vchildren,Z.$key$=U.vkey,Z.$name$=U.vname,Z},Ue=(U,Z,ae,he,be,Ee,ut)=>{let Tt,Et,Rt,zt;if(1===Ee.nodeType){for(Tt=Ee.getAttribute("c-id"),Tt&&(Et=Tt.split("."),(Et[0]===ut||"0"===Et[0])&&(Rt={$flags$:0,$hostId$:Et[0],$nodeId$:Et[1],$depth$:Et[2],$index$:Et[3],$tag$:Ee.tagName.toLowerCase(),$elm$:Ee,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},Z.push(Rt),Ee.removeAttribute("c-id"),U.$children$||(U.$children$=[]),U.$children$[Rt.$index$]=Rt,U=Rt,he&&"0"===Rt.$depth$&&(he[Rt.$index$]=Rt.$elm$))),zt=Ee.childNodes.length-1;zt>=0;zt--)Ue(U,Z,ae,he,be,Ee.childNodes[zt],ut);if(Ee.shadowRoot)for(zt=Ee.shadowRoot.childNodes.length-1;zt>=0;zt--)Ue(U,Z,ae,he,be,Ee.shadowRoot.childNodes[zt],ut)}else if(8===Ee.nodeType)Et=Ee.nodeValue.split("."),(Et[1]===ut||"0"===Et[1])&&(Tt=Et[0],Rt={$flags$:0,$hostId$:Et[1],$nodeId$:Et[2],$depth$:Et[3],$index$:Et[4],$elm$:Ee,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===Tt?(Rt.$elm$=Ee.nextSibling,Rt.$elm$&&3===Rt.$elm$.nodeType&&(Rt.$text$=Rt.$elm$.textContent,Z.push(Rt),Ee.remove(),U.$children$||(U.$children$=[]),U.$children$[Rt.$index$]=Rt,he&&"0"===Rt.$depth$&&(he[Rt.$index$]=Rt.$elm$))):Rt.$hostId$===ut&&("s"===Tt?(Rt.$tag$="slot",Ee["s-sn"]=Et[5]?Rt.$name$=Et[5]:"",Ee["s-sr"]=!0,he&&(Rt.$elm$=$r.createElement(Rt.$tag$),Rt.$name$&&Rt.$elm$.setAttribute("name",Rt.$name$),Ee.parentNode.insertBefore(Rt.$elm$,Ee),Ee.remove(),"0"===Rt.$depth$&&(he[Rt.$index$]=Rt.$elm$)),ae.push(Rt),U.$children$||(U.$children$=[]),U.$children$[Rt.$index$]=Rt):"r"===Tt&&(he?Ee.remove():(be["s-cr"]=Ee,Ee["s-cn"]=!0))));else if(U&&"style"===U.$tag$){const Yt=Kt(null,Ee.textContent);Yt.$elm$=Ee,Yt.$index$="0",U.$children$=[Yt]}},Le=(U,Z)=>{if(1===U.nodeType){let ae=0;for(;ae<U.childNodes.length;ae++)Le(U.childNodes[ae],Z);if(U.shadowRoot)for(ae=0;ae<U.shadowRoot.childNodes.length;ae++)Le(U.shadowRoot.childNodes[ae],Z)}else if(8===U.nodeType){const ae=U.nodeValue.split(".");"o"===ae[0]&&(Z.set(ae[1]+"."+ae[2],U),U.nodeValue="",U["s-en"]=ae[3])}},Mt=U=>Ds.push(U),Dn=U=>yr(U).$modeName$,gn=U=>yr(U).$hostElement$,In=(U,Z,ae)=>{const he=gn(U);return{emit:be=>Mn(he,Z,{bubbles:!!(4&ae),composed:!!(2&ae),cancelable:!!(1&ae),detail:be})}},Mn=(U,Z,ae)=>{const he=gt.ce(Z,ae);return U.dispatchEvent(he),he},er=new WeakMap,En=(U,Z,ae)=>{let he=na.get(U);ds&&ae?(he=he||new CSSStyleSheet,"string"==typeof he?he=Z:he.replaceSync(Z)):he=Z,na.set(U,he)},Dt=(U,Z,ae)=>{var he;const be=Ht(Z,ae),Ee=na.get(be);if(U=11===U.nodeType?U:$r,Ee)if("string"==typeof Ee){let Tt,ut=er.get(U=U.head||U);if(ut||er.set(U,ut=new Set),!ut.has(be)){if(U.host&&(Tt=U.querySelector(`[${_t}="${be}"]`)))Tt.innerHTML=Ee;else{Tt=$r.createElement("style"),Tt.innerHTML=Ee;const Et=null!=(he=gt.$nonce$)?he:Re($r);null!=Et&&Tt.setAttribute("nonce",Et),U.insertBefore(Tt,U.querySelector("link"))}4&Z.$flags$&&(Tt.innerHTML+=Ft),ut&&ut.add(be)}}else U.adoptedStyleSheets.includes(Ee)||(U.adoptedStyleSheets=[...U.adoptedStyleSheets,Ee]);return be},Ht=(U,Z)=>"sc-"+(Z&&32&U.$flags$?U.$tagName$+"-"+Z:U.$tagName$),Pe=U=>U.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),Ze=(U,Z,ae,he,be,Ee)=>{if(ae!==he){let ut=es(U,Z),Tt=Z.toLowerCase();if("class"===Z){const Et=U.classList,Rt=Gt(ae),zt=Gt(he);Et.remove(...Rt.filter(Yt=>Yt&&!zt.includes(Yt))),Et.add(...zt.filter(Yt=>Yt&&!Rt.includes(Yt)))}else if("style"===Z){for(const Et in ae)(!he||null==he[Et])&&(Et.includes("-")?U.style.removeProperty(Et):U.style[Et]="");for(const Et in he)(!ae||he[Et]!==ae[Et])&&(Et.includes("-")?U.style.setProperty(Et,he[Et]):U.style[Et]=he[Et])}else if("key"!==Z)if("ref"===Z)he&&he(U);else if(ut||"o"!==Z[0]||"n"!==Z[1]){const Et=Ne(he);if((ut||Et&&null!==he)&&!be)try{if(U.tagName.includes("-"))U[Z]=he;else{const zt=null==he?"":he;"list"===Z?ut=!1:(null==ae||U[Z]!=zt)&&(U[Z]=zt)}}catch{}let Rt=!1;Tt!==(Tt=Tt.replace(/^xlink\:?/,""))&&(Z=Tt,Rt=!0),null==he||!1===he?(!1!==he||""===U.getAttribute(Z))&&(Rt?U.removeAttributeNS(nn,Z):U.removeAttribute(Z)):(!ut||4&Ee||be)&&!Et&&(he=!0===he?"":he,Rt?U.setAttributeNS(nn,Z,he):U.setAttribute(Z,he))}else if(Z="-"===Z[2]?Z.slice(3):es(Fn,Tt)?Tt.slice(2):Tt[2]+Z.slice(3),ae||he){const Et=Z.endsWith(Bn);Z=Z.replace(ir,""),ae&&gt.rel(U,Z,ae,Et),he&&gt.ael(U,Z,he,Et)}}},et=/\s/,Gt=U=>U?U.split(et):[],Bn="Capture",ir=new RegExp(Bn+"$"),$n=(U,Z,ae)=>{const he=11===Z.$elm$.nodeType&&Z.$elm$.host?Z.$elm$.host:Z.$elm$,be=U&&U.$attrs$||Se,Ee=Z.$attrs$||Se;for(const ut of rn(Object.keys(be)))ut in Ee||Ze(he,ut,be[ut],void 0,ae,Z.$flags$);for(const ut of rn(Object.keys(Ee)))Ze(he,ut,be[ut],Ee[ut],ae,Z.$flags$)};function rn(U){return U.includes("ref")?[...U.filter(Z=>"ref"!==Z),"ref"]:U}var sn,Ln,pr,cr=!1,Wr=!1,kr=!1,ei=!1,Rn=(U,Z,ae,he)=>{var be;const Ee=Z.$children$[ae];let Tt,Et,Rt,ut=0;if(cr||(kr=!0,"slot"===Ee.$tag$&&(sn&&he.classList.add(sn+"-s"),Ee.$flags$|=Ee.$children$?2:1)),null!==Ee.$text$)Tt=Ee.$elm$=$r.createTextNode(Ee.$text$);else if(1&Ee.$flags$)Tt=Ee.$elm$=$r.createTextNode("");else{if(ei||(ei="svg"===Ee.$tag$),Tt=Ee.$elm$=$r.createElementNS(ei?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&Ee.$flags$?"slot-fb":Ee.$tag$),ei&&"foreignObject"===Ee.$tag$&&(ei=!1),$n(null,Ee,ei),(U=>null!=U)(sn)&&Tt["s-si"]!==sn&&Tt.classList.add(Tt["s-si"]=sn),Ee.$children$)for(ut=0;ut<Ee.$children$.length;++ut)Et=Rn(U,Ee,ut,Tt),Et&&Tt.appendChild(Et);"svg"===Ee.$tag$?ei=!1:"foreignObject"===Tt.tagName&&(ei=!0)}return Tt["s-hn"]=pr,3&Ee.$flags$&&(Tt["s-sr"]=!0,Tt["s-cr"]=Ln,Tt["s-sn"]=Ee.$name$||"",Tt["s-rf"]=null==(be=Ee.$attrs$)?void 0:be.ref,Rt=U&&U.$children$&&U.$children$[ae],Rt&&Rt.$tag$===Ee.$tag$&&U.$elm$&&Wi(U.$elm$)),Tt},Wi=U=>{gt.$flags$|=1;const Z=U.closest(pr.toLowerCase());if(null!=Z){const ae=Array.from(Z.childNodes).find(be=>be["s-cr"]),he=Array.from(U.childNodes);for(const be of ae?he.reverse():he)null!=be["s-sh"]&&(St(Z,be,null!=ae?ae:null),be["s-sh"]=void 0,kr=!0)}gt.$flags$&=-2},jn=(U,Z)=>{gt.$flags$|=1;const ae=Array.from(U.childNodes);if(U["s-sr"]){let he=U;for(;he=he.nextSibling;)he&&he["s-sn"]===U["s-sn"]&&he["s-sh"]===pr&&ae.push(he)}for(let he=ae.length-1;he>=0;he--){const be=ae[he];be["s-hn"]!==pr&&be["s-ol"]&&(St(qi(be),be,Vo(be)),be["s-ol"].remove(),be["s-ol"]=void 0,be["s-sh"]=void 0,kr=!0),Z&&jn(be,Z)}gt.$flags$&=-2},jt=(U,Z,ae,he,be,Ee)=>{let Tt,ut=U["s-cr"]&&U["s-cr"].parentNode||U;for(ut.shadowRoot&&ut.tagName===pr&&(ut=ut.shadowRoot);be<=Ee;++be)he[be]&&(Tt=Rn(null,ae,be,U),Tt&&(he[be].$elm$=Tt,St(ut,Tt,Vo(Z))))},mr=(U,Z,ae)=>{for(let he=Z;he<=ae;++he){const be=U[he];if(be){const Ee=be.$elm$;rt(be),Ee&&(Wr=!0,Ee["s-ol"]?Ee["s-ol"].remove():jn(Ee,!0),Ee.remove())}}},tr=(U,Z,ae=!1)=>U.$tag$===Z.$tag$&&("slot"===U.$tag$?U.$name$===Z.$name$:!!ae||U.$key$===Z.$key$),Vo=U=>U&&U["s-ol"]||U,qi=U=>(U["s-ol"]?U["s-ol"]:U).parentNode,ci=(U,Z,ae=!1)=>{const he=Z.$elm$=U.$elm$,be=U.$children$,Ee=Z.$children$,ut=Z.$tag$,Tt=Z.$text$;let Et;null===Tt?(ei="svg"===ut||"foreignObject"!==ut&&ei,"slot"!==ut||cr?$n(U,Z,ei):U.$name$!==Z.$name$&&(Z.$elm$["s-sn"]=Z.$name$||"",Wi(Z.$elm$.parentElement)),null!==be&&null!==Ee?((U,Z,ae,he,be=!1)=>{let vr,Xn,Ee=0,ut=0,Tt=0,Et=0,Rt=Z.length-1,zt=Z[0],Yt=Z[Rt],qt=he.length-1,_n=he[0],nr=he[qt];for(;Ee<=Rt&&ut<=qt;)if(null==zt)zt=Z[++Ee];else if(null==Yt)Yt=Z[--Rt];else if(null==_n)_n=he[++ut];else if(null==nr)nr=he[--qt];else if(tr(zt,_n,be))ci(zt,_n,be),zt=Z[++Ee],_n=he[++ut];else if(tr(Yt,nr,be))ci(Yt,nr,be),Yt=Z[--Rt],nr=he[--qt];else if(tr(zt,nr,be))("slot"===zt.$tag$||"slot"===nr.$tag$)&&jn(zt.$elm$.parentNode,!1),ci(zt,nr,be),St(U,zt.$elm$,Yt.$elm$.nextSibling),zt=Z[++Ee],nr=he[--qt];else if(tr(Yt,_n,be))("slot"===zt.$tag$||"slot"===nr.$tag$)&&jn(Yt.$elm$.parentNode,!1),ci(Yt,_n,be),St(U,Yt.$elm$,zt.$elm$),Yt=Z[--Rt],_n=he[++ut];else{for(Tt=-1,Et=Ee;Et<=Rt;++Et)if(Z[Et]&&null!==Z[Et].$key$&&Z[Et].$key$===_n.$key$){Tt=Et;break}Tt>=0?(Xn=Z[Tt],Xn.$tag$!==_n.$tag$?vr=Rn(Z&&Z[ut],ae,Tt,U):(ci(Xn,_n,be),Z[Tt]=void 0,vr=Xn.$elm$),_n=he[++ut]):(vr=Rn(Z&&Z[ut],ae,ut,U),_n=he[++ut]),vr&&St(qi(zt.$elm$),vr,Vo(zt.$elm$))}Ee>Rt?jt(U,null==he[qt+1]?null:he[qt+1].$elm$,ae,he,ut,qt):ut>qt&&mr(Z,Ee,Rt)})(he,be,Z,Ee,ae):null!==Ee?(null!==U.$text$&&(he.textContent=""),jt(he,null,Z,Ee,0,Ee.length-1)):null!==be&&mr(be,0,be.length-1),ei&&"svg"===ut&&(ei=!1)):(Et=he["s-cr"])?Et.parentNode.textContent=Tt:U.$text$!==Tt&&(he.data=Tt)},Ae=U=>{const Z=U.childNodes;for(const ae of Z)if(1===ae.nodeType){if(ae["s-sr"]){const he=ae["s-sn"];ae.hidden=!1;for(const be of Z)if(be!==ae)if(be["s-hn"]!==ae["s-hn"]||""!==he){if(1===be.nodeType&&(he===be.getAttribute("slot")||he===be["s-sn"])||3===be.nodeType&&he===be["s-sn"]){ae.hidden=!0;break}}else if(1===be.nodeType||3===be.nodeType&&""!==be.textContent.trim()){ae.hidden=!0;break}}Ae(ae)}},ye=[],Je=U=>{let Z,ae,he;for(const be of U.childNodes){if(be["s-sr"]&&(Z=be["s-cr"])&&Z.parentNode){ae=Z.parentNode.childNodes;const Ee=be["s-sn"];for(he=ae.length-1;he>=0;he--)if(Z=ae[he],!(Z["s-cn"]||Z["s-nr"]||Z["s-hn"]===be["s-hn"]||Z["s-sh"]&&Z["s-sh"]===be["s-hn"]))if(we(Z,Ee)){let ut=ye.find(Tt=>Tt.$nodeToRelocate$===Z);Wr=!0,Z["s-sn"]=Z["s-sn"]||Ee,ut?(ut.$nodeToRelocate$["s-sh"]=be["s-hn"],ut.$slotRefNode$=be):(Z["s-sh"]=be["s-hn"],ye.push({$slotRefNode$:be,$nodeToRelocate$:Z})),Z["s-sr"]&&ye.map(Tt=>{we(Tt.$nodeToRelocate$,Z["s-sn"])&&(ut=ye.find(Et=>Et.$nodeToRelocate$===Z),ut&&!Tt.$slotRefNode$&&(Tt.$slotRefNode$=ut.$slotRefNode$))})}else ye.some(ut=>ut.$nodeToRelocate$===Z)||ye.push({$nodeToRelocate$:Z})}1===be.nodeType&&Je(be)}},we=(U,Z)=>1===U.nodeType?null===U.getAttribute("slot")&&""===Z||U.getAttribute("slot")===Z:U["s-sn"]===Z||""===Z,rt=U=>{U.$attrs$&&U.$attrs$.ref&&U.$attrs$.ref(null),U.$children$&&U.$children$.map(rt)},St=(U,Z,ae)=>{const he=null==U?void 0:U.insertBefore(Z,ae);return kn(Z,U),he},Wt=U=>U?U["s-rsc"]||U["s-si"]||U["s-sc"]||Wt(U.parentElement):void 0,kn=(U,Z)=>{var ae,he,be;if(U&&Z){const Ee=U["s-rsc"],ut=Wt(Z);Ee&&null!=(ae=U.classList)&&ae.contains(Ee)&&U.classList.remove(Ee),ut&&(U["s-rsc"]=ut,(null==(he=U.classList)||!he.contains(ut))&&(null==(be=U.classList)||be.add(ut)))}},X=(U,Z)=>{Z&&!U.$onRenderResolve$&&Z["s-p"]&&Z["s-p"].push(new Promise(ae=>U.$onRenderResolve$=ae))},ar=(U,Z)=>{if(U.$flags$|=16,!(4&U.$flags$))return X(U,U.$ancestorComponent$),ns(()=>Rr(U,Z));U.$flags$|=512},Rr=(U,Z)=>{const he=U.$lazyInstance$;let be;return Z&&(U.$flags$|=256,U.$queuedListeners$&&(U.$queuedListeners$.map(([Ee,ut])=>Li(he,Ee,ut)),U.$queuedListeners$=void 0),be=Li(he,"componentWillLoad")),be=ti(be,()=>Li(he,"componentWillRender")),ti(be,()=>Js(U,he,Z))},ti=(U,Z)=>Aa(U)?U.then(Z):Z(),Aa=U=>U instanceof Promise||U&&U.then&&"function"==typeof U.then,Js=function(){var U=(0,M.A)(function*(Z,ae,he){var be;const Ee=Z.$hostElement$,Tt=Ee["s-rc"];he&&(U=>{const Z=U.$cmpMeta$,ae=U.$hostElement$,he=Z.$flags$,Ee=Dt(ae.shadowRoot?ae.shadowRoot:ae.getRootNode(),Z,U.$modeName$);10&he&&(ae["s-sc"]=Ee,ae.classList.add(Ee+"-h"),2&he&&ae.classList.add(Ee+"-s"))})(Z);xr(Z,ae,Ee,he),Tt&&(Tt.map(Rt=>Rt()),Ee["s-rc"]=void 0);{const Rt=null!=(be=Ee["s-p"])?be:[],zt=()=>mn(Z);0===Rt.length?zt():(Promise.all(Rt).then(zt),Z.$flags$|=4,Rt.length=0)}});return function(ae,he,be){return U.apply(this,arguments)}}(),xr=(U,Z,ae,he)=>{try{Z=Z.render&&Z.render(),U.$flags$&=-17,U.$flags$|=2,((U,Z,ae=!1)=>{var he,be,Ee,ut,Tt;const Et=U.$hostElement$,Rt=U.$cmpMeta$,zt=U.$vnode$||Kt(null,null),Yt=(U=>U&&U.$tag$===ct)(Z)?Z:At(null,null,Z);if(pr=Et.tagName,Rt.$attrsToReflect$&&(Yt.$attrs$=Yt.$attrs$||{},Rt.$attrsToReflect$.map(([qt,_n])=>Yt.$attrs$[_n]=Et[qt])),ae&&Yt.$attrs$)for(const qt of Object.keys(Yt.$attrs$))Et.hasAttribute(qt)&&!["key","ref","style","class"].includes(qt)&&(Yt.$attrs$[qt]=Et[qt]);if(Yt.$tag$=null,Yt.$flags$|=4,U.$vnode$=Yt,Yt.$elm$=zt.$elm$=Et.shadowRoot||Et,sn=Et["s-sc"],cr=!!(1&Rt.$flags$),Ln=Et["s-cr"],Wr=!1,ci(zt,Yt,ae),gt.$flags$|=1,kr){Je(Yt.$elm$);for(const qt of ye){const _n=qt.$nodeToRelocate$;if(!_n["s-ol"]){const nr=$r.createTextNode("");nr["s-nr"]=_n,St(_n.parentNode,_n["s-ol"]=nr,_n)}}for(const qt of ye){const _n=qt.$nodeToRelocate$,nr=qt.$slotRefNode$;if(nr){const vr=nr.parentNode;let Xn=nr.nextSibling;if(Xn&&1===Xn.nodeType){let Ir=null==(he=_n["s-ol"])?void 0:he.previousSibling;for(;Ir;){let Er=null!=(be=Ir["s-nr"])?be:null;if(Er&&Er["s-sn"]===_n["s-sn"]&&vr===Er.parentNode){for(Er=Er.nextSibling;Er===_n||null!=Er&&Er["s-sr"];)Er=null==Er?void 0:Er.nextSibling;if(!Er||!Er["s-nr"]){Xn=Er;break}}Ir=Ir.previousSibling}}(!Xn&&vr!==_n.parentNode||_n.nextSibling!==Xn)&&_n!==Xn&&(St(vr,_n,Xn),1===_n.nodeType&&(_n.hidden=null!=(Ee=_n["s-ih"])&&Ee)),_n&&"function"==typeof nr["s-rf"]&&nr["s-rf"](_n)}else 1===_n.nodeType&&(ae&&(_n["s-ih"]=null!=(ut=_n.hidden)&&ut),_n.hidden=!0)}}if(Wr&&Ae(Yt.$elm$),gt.$flags$&=-2,ye.length=0,2&Rt.$flags$)for(const qt of Yt.$elm$.childNodes)qt["s-hn"]!==pr&&!qt["s-sh"]&&(ae&&null==qt["s-ih"]&&(qt["s-ih"]=null!=(Tt=qt.hidden)&&Tt),qt.hidden=!0);Ln=void 0})(U,Z,he)}catch(be){ri(be,U.$hostElement$)}return null},mn=U=>{const ae=U.$hostElement$,be=U.$lazyInstance$,Ee=U.$ancestorComponent$;Li(be,"componentDidRender"),64&U.$flags$?Li(be,"componentDidUpdate"):(U.$flags$|=64,Uo(ae),Li(be,"componentDidLoad"),U.$onReadyResolve$(ae),Ee||Fi()),U.$onInstanceResolve$(ae),U.$onRenderResolve$&&(U.$onRenderResolve$(),U.$onRenderResolve$=void 0),512&U.$flags$&&ts(()=>ar(U,!1)),U.$flags$&=-517},Tn=U=>{{const Z=yr(U),ae=Z.$hostElement$.isConnected;return ae&&2==(18&Z.$flags$)&&ar(Z,!1),ae}},Fi=U=>{Uo($r.documentElement),ts(()=>Mn(Fn,"appload",{detail:{namespace:"ionic"}}))},Li=(U,Z,ae)=>{if(U&&U[Z])try{return U[Z](ae)}catch(he){ri(he)}},Uo=U=>U.classList.add("hydrated"),Bo=(U,Z,ae)=>{var he;const be=U.prototype;if(Z.$members$){U.watchers&&(Z.$watchers$=U.watchers);const Ee=Object.entries(Z.$members$);if(Ee.map(([ut,[Tt]])=>{31&Tt||2&ae&&32&Tt?Object.defineProperty(be,ut,{get(){return((U,Z)=>yr(this).$instanceValues$.get(Z))(0,ut)},set(Et){((U,Z,ae,he)=>{const be=yr(U);if(!be)throw new Error(`Couldn't find host element for "${he.$tagName$}" as it is unknown to this Stencil runtime. This usually happens when integrating a 3rd party Stencil component with another Stencil component or application. Please reach out to the maintainers of the 3rd party Stencil component or report this on the Stencil Discord server (https://chat.stenciljs.com) or comment on this similar [GitHub issue](https://github.com/ionic-team/stencil/issues/5457).`);const Ee=be.$hostElement$,ut=be.$instanceValues$.get(Z),Tt=be.$flags$,Et=be.$lazyInstance$;ae=((U,Z)=>null==U||Ne(U)?U:4&Z?"false"!==U&&(""===U||!!U):2&Z?parseFloat(U):1&Z?String(U):U)(ae,he.$members$[Z][0]);const Rt=Number.isNaN(ut)&&Number.isNaN(ae);if((!(8&Tt)||void 0===ut)&&ae!==ut&&!Rt&&(be.$instanceValues$.set(Z,ae),Et)){if(he.$watchers$&&128&Tt){const Yt=he.$watchers$[Z];Yt&&Yt.map(qt=>{try{Et[qt](ae,ut,Z)}catch(_n){ri(_n,Ee)}})}2==(18&Tt)&&ar(be,!1)}})(this,ut,Et,Z)},configurable:!0,enumerable:!0}):1&ae&&64&Tt&&Object.defineProperty(be,ut,{value(...Et){var Rt;const zt=yr(this);return null==(Rt=null==zt?void 0:zt.$onInstancePromise$)?void 0:Rt.then(()=>{var Yt;return null==(Yt=zt.$lazyInstance$)?void 0:Yt[ut](...Et)})}})}),1&ae){const ut=new Map;be.attributeChangedCallback=function(Tt,Et,Rt){gt.jmp(()=>{var zt;const Yt=ut.get(Tt);if(this.hasOwnProperty(Yt))Rt=this[Yt],delete this[Yt];else{if(be.hasOwnProperty(Yt)&&"number"==typeof this[Yt]&&this[Yt]==Rt)return;if(null==Yt){const qt=yr(this),_n=null==qt?void 0:qt.$flags$;if(_n&&!(8&_n)&&128&_n&&Rt!==Et){const nr=qt.$lazyInstance$,vr=null==(zt=Z.$watchers$)?void 0:zt[Tt];null==vr||vr.forEach(Xn=>{null!=nr[Xn]&&nr[Xn].call(nr,Rt,Et,Tt)})}return}}this[Yt]=(null!==Rt||"boolean"!=typeof this[Yt])&&Rt})},U.observedAttributes=Array.from(new Set([...Object.keys(null!=(he=Z.$watchers$)?he:{}),...Ee.filter(([Tt,Et])=>15&Et[0]).map(([Tt,Et])=>{var Rt;const zt=Et[1]||Tt;return ut.set(zt,Tt),512&Et[0]&&(null==(Rt=Z.$attrsToReflect$)||Rt.push([Tt,zt])),zt})]))}}return U},Do=function(){var U=(0,M.A)(function*(Z,ae,he,be){let Ee;if(!(32&ae.$flags$)){if(ae.$flags$|=32,he.$lazyBundleId$){if(Ee=El(he),Ee.then){const zt=()=>{};Ee=yield Ee,zt()}Ee.isProxied||(he.$watchers$=Ee.watchers,Bo(Ee,he,2),Ee.isProxied=!0);const Rt=()=>{};ae.$flags$|=8;try{new Ee(ae)}catch(zt){ri(zt)}ae.$flags$&=-9,ae.$flags$|=128,Rt(),Ki(ae.$lazyInstance$)}else Ee=Z.constructor,customElements.whenDefined(he.$tagName$).then(()=>ae.$flags$|=128);if(Ee.style){let Rt=Ee.style;"string"!=typeof Rt&&(Rt=Rt[ae.$modeName$=(U=>Ds.map(Z=>Z(U)).find(Z=>!!Z))(Z)]);const zt=Ht(he,ae.$modeName$);if(!na.has(zt)){const Yt=()=>{};En(zt,Rt,!!(1&he.$flags$)),Yt()}}}const ut=ae.$ancestorComponent$,Tt=()=>ar(ae,!0);ut&&ut["s-rc"]?ut["s-rc"].push(Tt):Tt()});return function(ae,he,be,Ee){return U.apply(this,arguments)}}(),Ki=U=>{Li(U,"connectedCallback")},So=U=>{const Z=U["s-cr"]=$r.createComment("");Z["s-cn"]=!0,St(U,Z,U.firstChild)},$o=U=>{Li(U,"disconnectedCallback")},jo=function(){var U=(0,M.A)(function*(Z){if(!(1&gt.$flags$)){const ae=yr(Z);ae.$rmListeners$&&(ae.$rmListeners$.map(he=>he()),ae.$rmListeners$=void 0),null!=ae&&ae.$lazyInstance$?$o(ae.$lazyInstance$):null!=ae&&ae.$onReadyPromise$&&ae.$onReadyPromise$.then(()=>$o(ae.$lazyInstance$))}});return function(ae){return U.apply(this,arguments)}}(),lt=U=>{const Z=U.cloneNode;U.cloneNode=function(ae){const he=this,be=he.shadowRoot&&Cl,Ee=Z.call(he,!!be&&ae);if(!be&&ae){let Tt,Et,ut=0;const Rt=["s-id","s-cr","s-lr","s-rc","s-sc","s-p","s-cn","s-sr","s-sn","s-hn","s-ol","s-nr","s-si","s-rf","s-rsc"];for(;ut<he.childNodes.length;ut++)Tt=he.childNodes[ut]["s-nr"],Et=Rt.every(zt=>!he.childNodes[ut][zt]),Tt&&(Ee.__appendChild?Ee.__appendChild(Tt.cloneNode(!0)):Ee.appendChild(Tt.cloneNode(!0))),Et&&Ee.appendChild(he.childNodes[ut].cloneNode(!0))}return Ee}},Qt=U=>{U.__appendChild=U.appendChild,U.appendChild=function(Z){const ae=Z["s-sn"]=ea(Z),he=Ho(this.childNodes,ae,this.tagName);if(he){const be=Xa(he,ae),Ee=be[be.length-1],ut=St(Ee.parentNode,Z,Ee.nextSibling);return Ae(this),ut}return this.__appendChild(Z)}},On=U=>{U.__removeChild=U.removeChild,U.removeChild=function(Z){if(Z&&typeof Z["s-sn"]<"u"){const ae=Ho(this.childNodes,Z["s-sn"],this.tagName);if(ae){const be=Xa(ae,Z["s-sn"]).find(Ee=>Ee===Z);if(be)return be.remove(),void Ae(this)}}return this.__removeChild(Z)}},cn=U=>{const Z=U.prepend;U.prepend=function(...ae){ae.forEach(he=>{"string"==typeof he&&(he=this.ownerDocument.createTextNode(he));const be=he["s-sn"]=ea(he),Ee=Ho(this.childNodes,be,this.tagName);if(Ee){const ut=document.createTextNode("");ut["s-nr"]=he,Ee["s-cr"].parentNode.__appendChild(ut),he["s-ol"]=ut;const Et=Xa(Ee,be)[0];return St(Et.parentNode,he,Et.nextSibling)}return 1===he.nodeType&&he.getAttribute("slot")&&(he.hidden=!0),Z.call(this,he)})}},Ur=U=>{U.append=function(...Z){Z.forEach(ae=>{"string"==typeof ae&&(ae=this.ownerDocument.createTextNode(ae)),this.appendChild(ae)})}},ui=U=>{const Z=U.insertAdjacentHTML;U.insertAdjacentHTML=function(ae,he){if("afterbegin"!==ae&&"beforeend"!==ae)return Z.call(this,ae,he);const be=this.ownerDocument.createElement("_");let Ee;if(be.innerHTML=he,"afterbegin"===ae)for(;Ee=be.firstChild;)this.prepend(Ee);else if("beforeend"===ae)for(;Ee=be.firstChild;)this.append(Ee)}},Xi=U=>{U.insertAdjacentText=function(Z,ae){this.insertAdjacentHTML(Z,ae)}},us=U=>{const Z=U.insertAdjacentElement;U.insertAdjacentElement=function(ae,he){return"afterbegin"!==ae&&"beforeend"!==ae?Z.call(this,ae,he):"afterbegin"===ae?(this.prepend(he),he):("beforeend"===ae&&this.append(he),he)}},Zs=U=>{const Z=Object.getOwnPropertyDescriptor(Node.prototype,"textContent");Object.defineProperty(U,"__textContent",Z),Object.defineProperty(U,"textContent",{get(){return" "+Br(this.childNodes).map(be=>{var Ee,ut;const Tt=[];let Et=be.nextSibling;for(;Et&&Et["s-sn"]===be["s-sn"];)(3===Et.nodeType||1===Et.nodeType)&&Tt.push(null!=(ut=null==(Ee=Et.textContent)?void 0:Ee.trim())?ut:""),Et=Et.nextSibling;return Tt.filter(Rt=>""!==Rt).join(" ")}).filter(be=>""!==be).join(" ")+" "},set(ae){Br(this.childNodes).forEach(be=>{let Ee=be.nextSibling;for(;Ee&&Ee["s-sn"]===be["s-sn"];){const ut=Ee;Ee=Ee.nextSibling,ut.remove()}if(""===be["s-sn"]){const ut=this.ownerDocument.createTextNode(ae);ut["s-sn"]="",St(be.parentElement,ut,be.nextSibling)}else be.remove()})}})},zo=(U,Z)=>{class ae extends Array{item(be){return this[be]}}if(8&Z.$flags$){const he=U.__lookupGetter__("childNodes");Object.defineProperty(U,"children",{get(){return this.childNodes.map(be=>1===be.nodeType)}}),Object.defineProperty(U,"childElementCount",{get:()=>U.children.length}),Object.defineProperty(U,"childNodes",{get(){const be=he.call(this);if(!(1&gt.$flags$)&&2&yr(this).$flags$){const Ee=new ae;for(let ut=0;ut<be.length;ut++){const Tt=be[ut]["s-nr"];Tt&&Ee.push(Tt)}return Ee}return ae.from(be)}})}},Br=U=>{const Z=[];for(const ae of Array.from(U))ae["s-sr"]&&Z.push(ae),Z.push(...Br(ae.childNodes));return Z},ea=U=>U["s-sn"]||1===U.nodeType&&U.getAttribute("slot")||"",Ho=(U,Z,ae)=>{let be,he=0;for(;he<U.length;he++)if(be=U[he],be["s-sr"]&&be["s-sn"]===Z&&be["s-hn"]===ae||(be=Ho(be.childNodes,Z,ae),be))return be;return null},Xa=(U,Z)=>{const ae=[U];for(;(U=U.nextSibling)&&U["s-sn"]===Z;)ae.push(U);return ae},so=(U,Z={})=>{var ae;const be=[],Ee=Z.exclude||[],ut=Fn.customElements,Tt=$r.head,Et=Tt.querySelector("meta[charset]"),Rt=$r.createElement("style"),zt=[],Yt=$r.querySelectorAll(`[${_t}]`);let qt,_n=!0,nr=0;for(Object.assign(gt,Z),gt.$resourcesUrl$=new URL(Z.resourcesUrl||"./",$r.baseURI).href,gt.$flags$|=2;nr<Yt.length;nr++)En(Yt[nr].getAttribute(_t),Pe(Yt[nr].innerHTML),!0);let vr=!1;if(U.map(Xn=>{Xn[1].map(Ir=>{var Er;const qr={$flags$:Ir[0],$tagName$:Ir[1],$members$:Ir[2],$listeners$:Ir[3]};4&qr.$flags$&&(vr=!0),qr.$members$=Ir[2],qr.$listeners$=Ir[3],qr.$attrsToReflect$=[],qr.$watchers$=null!=(Er=Ir[4])?Er:{};const Qi=qr.$tagName$,rs=class extends HTMLElement{constructor(Wo){super(Wo),or(Wo=this,qr),1&qr.$flags$&&Wo.attachShadow({mode:"open",delegatesFocus:!!(16&qr.$flags$)})}connectedCallback(){qt&&(clearTimeout(qt),qt=null),_n?zt.push(this):gt.jmp(()=>(U=>{if(!(1&gt.$flags$)){const Z=yr(U),ae=Z.$cmpMeta$,he=()=>{};if(1&Z.$flags$)Si(U,Z,ae.$listeners$),null!=Z&&Z.$lazyInstance$?Ki(Z.$lazyInstance$):null!=Z&&Z.$onReadyPromise$&&Z.$onReadyPromise$.then(()=>Ki(Z.$lazyInstance$));else{let be;if(Z.$flags$|=1,be=U.getAttribute(nt),be){if(1&ae.$flags$){const Ee=Dt(U.shadowRoot,ae,U.getAttribute("s-mode"));U.classList.remove(Ee+"-h",Ee+"-s")}((U,Z,ae,he)=>{const Ee=U.shadowRoot,ut=[],Et=Ee?[]:null,Rt=he.$vnode$=Kt(Z,null);gt.$orgLocNodes$||Le($r.body,gt.$orgLocNodes$=new Map),U[nt]=ae,U.removeAttribute(nt),Ue(Rt,ut,[],Et,U,U,ae),ut.map(zt=>{const Yt=zt.$hostId$+"."+zt.$nodeId$,qt=gt.$orgLocNodes$.get(Yt),_n=zt.$elm$;qt&&Cl&&""===qt["s-en"]&&qt.parentNode.insertBefore(_n,qt.nextSibling),Ee||(_n["s-hn"]=Z,qt&&(_n["s-ol"]=qt,_n["s-ol"]["s-nr"]=_n)),gt.$orgLocNodes$.delete(Yt)}),Ee&&Et.map(zt=>{zt&&Ee.appendChild(zt)})})(U,ae.$tagName$,be,Z)}be||12&ae.$flags$&&So(U);{let Ee=U;for(;Ee=Ee.parentNode||Ee.host;)if(1===Ee.nodeType&&Ee.hasAttribute("s-id")&&Ee["s-p"]||Ee["s-p"]){X(Z,Z.$ancestorComponent$=Ee);break}}ae.$members$&&Object.entries(ae.$members$).map(([Ee,[ut]])=>{if(31&ut&&U.hasOwnProperty(Ee)){const Tt=U[Ee];delete U[Ee],U[Ee]=Tt}}),Do(U,Z,ae)}he()}})(this))}disconnectedCallback(){gt.jmp(()=>jo(this))}componentOnReady(){return yr(this).$onReadyPromise$}};2&qr.$flags$&&((U,Z)=>{lt(U),Qt(U),Ur(U),cn(U),us(U),ui(U),Xi(U),Zs(U),zo(U,Z),On(U)})(rs.prototype,qr),qr.$lazyBundleId$=Xn[0],!Ee.includes(Qi)&&!ut.get(Qi)&&(be.push(Qi),ut.define(Qi,Bo(rs,qr,1)))})}),be.length>0&&(vr&&(Rt.textContent+=Ft),Rt.textContent+=be+"{visibility:hidden}.hydrated{visibility:inherit}",Rt.innerHTML.length)){Rt.setAttribute("data-styles","");const Xn=null!=(ae=gt.$nonce$)?ae:Re($r);null!=Xn&&Rt.setAttribute("nonce",Xn),Tt.insertBefore(Rt,Et?Et.nextSibling:Tt.firstChild)}_n=!1,zt.length?zt.map(Xn=>Xn.connectedCallback()):gt.jmp(()=>qt=setTimeout(Fi,30))},Si=(U,Z,ae,he)=>{ae&&ae.map(([be,Ee,ut])=>{const Tt=Kn(U,be),Et=ao(Z,ut),Rt=to(be);gt.ael(Tt,Ee,Et,Rt),(Z.$rmListeners$=Z.$rmListeners$||[]).push(()=>gt.rel(Tt,Ee,Et,Rt))})},ao=(U,Z)=>ae=>{try{256&U.$flags$?U.$lazyInstance$[Z](ae):(U.$queuedListeners$=U.$queuedListeners$||[]).push([Z,ae])}catch(he){ri(he)}},Kn=(U,Z)=>4&Z?$r:8&Z?Fn:16&Z?$r.body:U,to=U=>wl?{passive:!!(1&U),capture:!!(2&U)}:!!(2&U),ni=new WeakMap,yr=U=>ni.get(U),yn=(U,Z)=>ni.set(Z.$lazyInstance$=U,Z),or=(U,Z)=>{const ae={$flags$:0,$hostElement$:U,$cmpMeta$:Z,$instanceValues$:new Map};return ae.$onInstancePromise$=new Promise(he=>ae.$onInstanceResolve$=he),ae.$onReadyPromise$=new Promise(he=>ae.$onReadyResolve$=he),U["s-p"]=[],U["s-rc"]=[],Si(U,ae,Z.$listeners$),ni.set(U,ae)},es=(U,Z)=>Z in U,ri=(U,Z)=>(0,console.error)(U,Z),ta=new Map,El=(U,Z,ae)=>{const he=U.$tagName$.replace(/-/g,"_"),be=U.$lazyBundleId$,Ee=ta.get(be);return Ee?Ee[he]:ee(8996)(`./${be}.entry.js`).then(ut=>(ta.set(be,ut),ut[he]),ri)},na=new Map,Ds=[],Fn=typeof window<"u"?window:{},$r=Fn.document||{head:{}},gt={$flags$:0,$resourcesUrl$:"",jmp:U=>U(),raf:U=>requestAnimationFrame(U),ael:(U,Z,ae,he)=>U.addEventListener(Z,ae,he),rel:(U,Z,ae,he)=>U.removeEventListener(Z,ae,he),ce:(U,Z)=>new CustomEvent(U,Z)},Da=U=>{Object.assign(gt,U)},Cl=!0,wl=(()=>{let U=!1;try{$r.addEventListener("e",null,Object.defineProperty({},"passive",{get(){U=!0}}))}catch{}return U})(),ds=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch{}return!1})(),co=!1,ra=[],Sa=[],Po=(U,Z)=>ae=>{U.push(ae),co||(co=!0,Z&&4&gt.$flags$?ts(Vi):gt.raf(Vi))},Ss=U=>{for(let Z=0;Z<U.length;Z++)try{U[Z](performance.now())}catch(ae){ri(ae)}U.length=0},Vi=()=>{Ss(ra),Ss(Sa),(co=ra.length>0)&&gt.raf(Vi)},ts=U=>Promise.resolve(void 0).then(U),wn=Po(ra,!1),ns=Po(Sa,!0)},2725:(hn,Ct,ee)=>{"use strict";ee.d(Ct,{b:()=>Se,c:()=>Ge,d:()=>qe,e:()=>At,g:()=>fe,l:()=>Ft,s:()=>Kt,t:()=>Qe,w:()=>nn});var M=ee(467),Q=ee(3664),h=ee(9672),x=ee(4929),v=ee(4920);const Se="ionViewWillLeave",Ge="ionViewDidLeave",qe="ionViewWillUnload",me=Y=>{Y.tabIndex=-1,Y.focus()},Ne=Y=>null!==Y.offsetParent,Te="ion-last-focus",Xe_saveViewFocus=ie=>{if(Q.c.get("focusManagerPriority",!1)){const Ue=document.activeElement;null!==Ue&&null!=ie&&ie.contains(Ue)&&Ue.setAttribute(Te,"true")}},Xe_setViewFocus=ie=>{const de=Q.c.get("focusManagerPriority",!1);if(Array.isArray(de)&&!ie.contains(document.activeElement)){const Ue=ie.querySelector(`[${Te}]`);if(Ue&&Ne(Ue))return void me(Ue);for(const Le of de)switch(Le){case"content":const pt=ie.querySelector('main, [role="main"]');if(pt&&Ne(pt))return void me(pt);break;case"heading":const Mt=ie.querySelector('h1, [role="heading"][aria-level="1"]');if(Mt&&Ne(Mt))return void me(Mt);break;case"banner":const Dn=ie.querySelector('header, [role="banner"]');if(Dn&&Ne(Dn))return void me(Dn);break;default:(0,x.p)(`Unrecognized focus manager priority value ${Le}`)}me(ie)}},Qe=Y=>new Promise((J,ie)=>{(0,h.w)(()=>{vt(Y),We(Y).then(de=>{de.animation&&de.animation.destroy(),at(Y),J(de)},de=>{at(Y),ie(de)})})}),vt=Y=>{const J=Y.enteringEl,ie=Y.leavingEl;Xe_saveViewFocus(ie),ct(J,ie,Y.direction),Y.showGoBack?J.classList.add("can-go-back"):J.classList.remove("can-go-back"),Kt(J,!1),J.style.setProperty("pointer-events","none"),ie&&(Kt(ie,!1),ie.style.setProperty("pointer-events","none"))},We=function(){var Y=(0,M.A)(function*(J){const ie=yield pe(J);return ie&&h.B.isBrowser?ke(ie,J):$e(J)});return function(ie){return Y.apply(this,arguments)}}(),at=Y=>{const J=Y.enteringEl,ie=Y.leavingEl;J.classList.remove("ion-page-invisible"),J.style.removeProperty("pointer-events"),void 0!==ie&&(ie.classList.remove("ion-page-invisible"),ie.style.removeProperty("pointer-events")),Xe_setViewFocus(J)},pe=function(){var Y=(0,M.A)(function*(J){return J.leavingEl&&J.animated&&0!==J.duration?J.animationBuilder?J.animationBuilder:"ios"===J.mode?(yield Promise.resolve().then(ee.bind(ee,8454))).iosTransitionAnimation:(yield Promise.resolve().then(ee.bind(ee,3314))).mdTransitionAnimation:void 0});return function(ie){return Y.apply(this,arguments)}}(),ke=function(){var Y=(0,M.A)(function*(J,ie){yield tt(ie,!0);const de=J(ie.baseEl,ie);Ye(ie.enteringEl,ie.leavingEl);const Ue=yield _t(de,ie);return ie.progressCallback&&ie.progressCallback(void 0),Ue&&Pt(ie.enteringEl,ie.leavingEl),{hasCompleted:Ue,animation:de}});return function(ie,de){return Y.apply(this,arguments)}}(),$e=function(){var Y=(0,M.A)(function*(J){const ie=J.enteringEl,de=J.leavingEl,Ue=Q.c.get("focusManagerPriority",!1);return yield tt(J,Ue),Ye(ie,de),Pt(ie,de),{hasCompleted:!0}});return function(ie){return Y.apply(this,arguments)}}(),tt=function(){var Y=(0,M.A)(function*(J,ie){(void 0!==J.deepWait?J.deepWait:ie)&&(yield Promise.all([At(J.enteringEl),At(J.leavingEl)])),yield nt(J.viewIsReady,J.enteringEl)});return function(ie,de){return Y.apply(this,arguments)}}(),nt=function(){var Y=(0,M.A)(function*(J,ie){J&&(yield J(ie))});return function(ie,de){return Y.apply(this,arguments)}}(),_t=(Y,J)=>{const ie=J.progressCallback,de=new Promise(Ue=>{Y.onFinish(Le=>Ue(1===Le))});return ie?(Y.progressStart(!0),ie(Y)):Y.play(),de},Ye=(Y,J)=>{Ft(J,Se),Ft(Y,"ionViewWillEnter")},Pt=(Y,J)=>{Ft(Y,"ionViewDidEnter"),Ft(J,Ge)},Ft=(Y,J)=>{if(Y){const ie=new CustomEvent(J,{bubbles:!1,cancelable:!1});Y.dispatchEvent(ie)}},nn=()=>new Promise(Y=>(0,v.r)(()=>(0,v.r)(()=>Y()))),At=function(){var Y=(0,M.A)(function*(J){const ie=J;if(ie){if(null!=ie.componentOnReady){if(null!=(yield ie.componentOnReady()))return}else if(null!=ie.__registerHost)return void(yield new Promise(Ue=>(0,v.r)(Ue)));yield Promise.all(Array.from(ie.children).map(At))}});return function(ie){return Y.apply(this,arguments)}}(),Kt=(Y,J)=>{J?(Y.setAttribute("aria-hidden","true"),Y.classList.add("ion-page-hidden")):(Y.hidden=!1,Y.removeAttribute("aria-hidden"),Y.classList.remove("ion-page-hidden"))},ct=(Y,J,ie)=>{void 0!==Y&&(Y.style.zIndex="back"===ie?"99":"101"),void 0!==J&&(J.style.zIndex="100")},fe=Y=>Y.classList.contains("ion-page")?Y:Y.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||Y},4929:(hn,Ct,ee)=>{"use strict";ee.d(Ct,{a:()=>Q,b:()=>h,p:()=>M});const M=(x,...v)=>console.warn(`[Ionic Warning]: ${x}`,...v),Q=(x,...v)=>console.error(`[Ionic Error]: ${x}`,...v),h=(x,...v)=>console.error(`<${x.tagName.toLowerCase()}> must be used inside ${v.join(" or ")}.`)},8476:(hn,Ct,ee)=>{"use strict";ee.d(Ct,{d:()=>Q,w:()=>M});const M=typeof window<"u"?window:void 0,Q=typeof document<"u"?document:void 0},3664:(hn,Ct,ee)=>{"use strict";ee.d(Ct,{a:()=>me,b:()=>Kt,c:()=>h,i:()=>ct});var M=ee(9672);class Q{constructor(){this.m=new Map}reset(Y){this.m=new Map(Object.entries(Y))}get(Y,J){const ie=this.m.get(Y);return void 0!==ie?ie:J}getBoolean(Y,J=!1){const ie=this.m.get(Y);return void 0===ie?J:"string"==typeof ie?"true"===ie:!!ie}getNumber(Y,J){const ie=parseFloat(this.m.get(Y));return isNaN(ie)?void 0!==J?J:NaN:ie}set(Y,J){this.m.set(Y,J)}}const h=new Q,Ge="ionic-persist-config",me=(fe,Y)=>("string"==typeof fe&&(Y=fe,fe=void 0),(fe=>Ne(fe))(fe).includes(Y)),Ne=(fe=window)=>{if(typeof fe>"u")return[];fe.Ionic=fe.Ionic||{};let Y=fe.Ionic.platforms;return null==Y&&(Y=fe.Ionic.platforms=Re(fe),Y.forEach(J=>fe.document.documentElement.classList.add(`plt-${J}`))),Y},Re=fe=>{const Y=h.get("platform");return Object.keys(nn).filter(J=>{const ie=null==Y?void 0:Y[J];return"function"==typeof ie?ie(fe):nn[J](fe)})},Ke=fe=>!!(Pt(fe,/iPad/i)||Pt(fe,/Macintosh/i)&&pe(fe)),Qe=fe=>Pt(fe,/android|sink/i),pe=fe=>Ft(fe,"(any-pointer:coarse)"),$e=fe=>tt(fe)||nt(fe),tt=fe=>!!(fe.cordova||fe.phonegap||fe.PhoneGap),nt=fe=>{const Y=fe.Capacitor;return!(null==Y||!Y.isNative)},Pt=(fe,Y)=>Y.test(fe.navigator.userAgent),Ft=(fe,Y)=>{var J;return null===(J=fe.matchMedia)||void 0===J?void 0:J.call(fe,Y).matches},nn={ipad:Ke,iphone:fe=>Pt(fe,/iPhone/i),ios:fe=>Pt(fe,/iPhone|iPod/i)||Ke(fe),android:Qe,phablet:fe=>{const Y=fe.innerWidth,J=fe.innerHeight,ie=Math.min(Y,J),de=Math.max(Y,J);return ie>390&&ie<520&&de>620&&de<800},tablet:fe=>{const Y=fe.innerWidth,J=fe.innerHeight,ie=Math.min(Y,J),de=Math.max(Y,J);return Ke(fe)||(fe=>Qe(fe)&&!Pt(fe,/mobile/i))(fe)||ie>460&&ie<820&&de>780&&de<1400},cordova:tt,capacitor:nt,electron:fe=>Pt(fe,/electron/i),pwa:fe=>{var Y;return!!(null!==(Y=fe.matchMedia)&&void 0!==Y&&Y.call(fe,"(display-mode: standalone)").matches||fe.navigator.standalone)},mobile:pe,mobileweb:fe=>pe(fe)&&!$e(fe),desktop:fe=>!pe(fe),hybrid:$e};let At;const Kt=fe=>fe&&(0,M.g)(fe)||At,ct=(fe={})=>{if(typeof window>"u")return;const Y=window.document,J=window,ie=J.Ionic=J.Ionic||{},de={};fe._ael&&(de.ael=fe._ael),fe._rel&&(de.rel=fe._rel),fe._ce&&(de.ce=fe._ce),(0,M.a)(de);const Ue=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(fe=>{try{const Y=fe.sessionStorage.getItem(Ge);return null!==Y?JSON.parse(Y):{}}catch{return{}}})(J)),{persistConfig:!1}),ie.config),(fe=>{const Y={};return fe.location.search.slice(1).split("&").map(J=>J.split("=")).map(([J,ie])=>{try{return[decodeURIComponent(J),decodeURIComponent(ie)]}catch{return["",""]}}).filter(([J])=>((fe,Y)=>fe.substr(0,Y.length)===Y)(J,"ionic:")).map(([J,ie])=>[J.slice(6),ie]).forEach(([J,ie])=>{Y[J]=ie}),Y})(J)),fe);h.reset(Ue),h.getBoolean("persistConfig")&&((fe,Y)=>{try{fe.sessionStorage.setItem(Ge,JSON.stringify(Y))}catch{return}})(J,Ue),Ne(J),ie.config=h,ie.mode=At=h.get("mode",Y.documentElement.getAttribute("mode")||(me(J,"ios")?"ios":"md")),h.set("mode",At),Y.documentElement.setAttribute("mode",At),Y.documentElement.classList.add(At),h.getBoolean("_testing")&&h.set("animated",!1);const Le=Mt=>{var Dn;return null===(Dn=Mt.tagName)||void 0===Dn?void 0:Dn.startsWith("ION-")},pt=Mt=>["ios","md"].includes(Mt);(0,M.c)(Mt=>{for(;Mt;){const Dn=Mt.mode||Mt.getAttribute("mode");if(Dn){if(pt(Dn))return Dn;Le(Mt)&&console.warn('Invalid ionic mode: "'+Dn+'", expected: "ios" or "md"')}Mt=Mt.parentElement}return At})}},8454:(hn,Ct,ee)=>{"use strict";ee.r(Ct),ee.d(Ct,{iosTransitionAnimation:()=>Te,shadow:()=>Se});var M=ee(9986),Q=ee(2725);ee(8476),ee(3664),ee(9672);const re=it=>document.querySelector(`${it}.ion-cloned-element`),Se=it=>it.shadowRoot||it,Ge=it=>{const Xe="ION-TABS"===it.tagName?it:it.querySelector("ion-tabs"),Qe="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=Xe){const vt=Xe.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=vt?vt.querySelector(Qe):null}return it.querySelector(Qe)},qe=(it,Xe)=>{const Qe="ION-TABS"===it.tagName?it:it.querySelector("ion-tabs");let vt=[];if(null!=Qe){const We=Qe.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=We&&(vt=We.querySelectorAll("ion-buttons"))}else vt=it.querySelectorAll("ion-buttons");for(const We of vt){const at=We.closest("ion-header"),pe=at&&!at.classList.contains("header-collapse-condense-inactive"),ke=We.querySelector("ion-back-button"),$e=We.classList.contains("buttons-collapse");if(null!==ke&&("start"===We.slot||""===We.slot)&&($e&&pe&&Xe||!$e))return ke}return null},Ne=(it,Xe,Qe,vt,We,at,pe,ke,$e)=>{var tt,nt;const _t=Xe?`calc(100% - ${We.right+4}px)`:We.left-4+"px",Ye=Xe?"right":"left",Pt=Xe?"left":"right",Ft=Xe?"right":"left";let nn=1,At=1,Kt=`scale(${At})`;const ct="scale(1)";if(at&&pe){const et=(null===(tt=at.textContent)||void 0===tt?void 0:tt.trim())===(null===(nt=ke.textContent)||void 0===nt?void 0:nt.trim());nn=$e.width/pe.width,At=($e.height-Ke)/pe.height,Kt=et?`scale(${nn}, ${At})`:`scale(${At})`}const Y=Se(vt).querySelector("ion-icon").getBoundingClientRect(),J=Xe?Y.width/2-(Y.right-We.right)+"px":We.left-Y.width/2+"px",ie=Xe?`-${window.innerWidth-We.right}px`:`${We.left}px`,de=`${$e.top}px`,Ue=`${We.top}px`,Mt=Qe?[{offset:0,transform:`translate3d(${ie}, ${Ue}, 0)`},{offset:1,transform:`translate3d(${J}, ${de}, 0)`}]:[{offset:0,transform:`translate3d(${J}, ${de}, 0)`},{offset:1,transform:`translate3d(${ie}, ${Ue}, 0)`}],gn=Qe?[{offset:0,opacity:1,transform:ct},{offset:1,opacity:0,transform:Kt}]:[{offset:0,opacity:0,transform:Kt},{offset:1,opacity:1,transform:ct}],er=Qe?[{offset:0,opacity:1,transform:"scale(1)"},{offset:.2,opacity:0,transform:"scale(0.6)"},{offset:1,opacity:0,transform:"scale(0.6)"}]:[{offset:0,opacity:0,transform:"scale(0.6)"},{offset:.6,opacity:0,transform:"scale(0.6)"},{offset:1,opacity:1,transform:"scale(1)"}],En=(0,M.c)(),Dt=(0,M.c)(),rr=(0,M.c)(),Ht=re("ion-back-button"),Pe=Se(Ht).querySelector(".button-text"),Ze=Se(Ht).querySelector("ion-icon");Ht.text=vt.text,Ht.mode=vt.mode,Ht.icon=vt.icon,Ht.color=vt.color,Ht.disabled=vt.disabled,Ht.style.setProperty("display","block"),Ht.style.setProperty("position","fixed"),Dt.addElement(Ze),En.addElement(Pe),rr.addElement(Ht),rr.beforeStyles({position:"absolute",top:"0px",[Ft]:"0px"}).beforeAddWrite(()=>{vt.style.setProperty("display","none"),Ht.style.setProperty(Ye,_t)}).afterAddWrite(()=>{vt.style.setProperty("display",""),Ht.style.setProperty("display","none"),Ht.style.removeProperty(Ye)}).keyframes(Mt),En.beforeStyles({"transform-origin":`${Ye} top`}).keyframes(gn),Dt.beforeStyles({"transform-origin":`${Pt} center`}).keyframes(er),it.addAnimation([En,Dt,rr])},Re=(it,Xe,Qe,vt,We,at,pe,ke,$e)=>{var tt,nt;const _t=Xe?"right":"left",Ye=Xe?`calc(100% - ${We.right}px)`:`${We.left}px`,Ft=`${We.top}px`;let At=Xe?`-${window.innerWidth-pe.right-8}px`:`${pe.x+8}px`,Kt=.5;const ct="scale(1)";let fe=`scale(${Kt})`;if(ke&&$e){At=Xe?`-${window.innerWidth-$e.right-8}px`:$e.x-8+"px";const Dn=(null===(tt=ke.textContent)||void 0===tt?void 0:tt.trim())===(null===(nt=vt.textContent)||void 0===nt?void 0:nt.trim());Kt=$e.height/(at.height-Ke),fe=Dn?`scale(${$e.width/at.width}, ${Kt})`:`scale(${Kt})`}const ie=pe.top+pe.height/2-We.height*Kt/2+"px",Le=Qe?[{offset:0,opacity:0,transform:`translate3d(${At}, ${ie}, 0) ${fe}`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0px, ${Ft}, 0) ${ct}`}]:[{offset:0,opacity:.99,transform:`translate3d(0px, ${Ft}, 0) ${ct}`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${At}, ${ie}, 0) ${fe}`}],pt=re("ion-title"),Mt=(0,M.c)();pt.innerText=vt.innerText,pt.size=vt.size,pt.color=vt.color,Mt.addElement(pt),Mt.beforeStyles({"transform-origin":`${_t} top`,height:`${We.height}px`,display:"",position:"relative",[_t]:Ye}).beforeAddWrite(()=>{vt.style.setProperty("opacity","0")}).afterAddWrite(()=>{vt.style.setProperty("opacity",""),pt.style.setProperty("display","none")}).keyframes(Le),it.addAnimation(Mt)},Te=(it,Xe)=>{var Qe;try{const vt="cubic-bezier(0.32,0.72,0,1)",We="opacity",at="transform",pe="0%",$e="rtl"===it.ownerDocument.dir,tt=$e?"-99.5%":"99.5%",nt=$e?"33%":"-33%",_t=Xe.enteringEl,Ye=Xe.leavingEl,Pt="back"===Xe.direction,Ft=_t.querySelector(":scope > ion-content"),nn=_t.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),At=_t.querySelectorAll(":scope > ion-header > ion-toolbar"),Kt=(0,M.c)(),ct=(0,M.c)();if(Kt.addElement(_t).duration((null!==(Qe=Xe.duration)&&void 0!==Qe?Qe:0)||540).easing(Xe.easing||vt).fill("both").beforeRemoveClass("ion-page-invisible"),Ye&&null!=it){const ie=(0,M.c)();ie.addElement(it),Kt.addAnimation(ie)}if(Ft||0!==At.length||0!==nn.length?(ct.addElement(Ft),ct.addElement(nn)):ct.addElement(_t.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),Kt.addAnimation(ct),Pt?ct.beforeClearStyles([We]).fromTo("transform",`translateX(${nt})`,`translateX(${pe})`).fromTo(We,.8,1):ct.beforeClearStyles([We]).fromTo("transform",`translateX(${tt})`,`translateX(${pe})`),Ft){const ie=Se(Ft).querySelector(".transition-effect");if(ie){const de=ie.querySelector(".transition-cover"),Ue=ie.querySelector(".transition-shadow"),Le=(0,M.c)(),pt=(0,M.c)(),Mt=(0,M.c)();Le.addElement(ie).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),pt.addElement(de).beforeClearStyles([We]).fromTo(We,0,.1),Mt.addElement(Ue).beforeClearStyles([We]).fromTo(We,.03,.7),Le.addAnimation([pt,Mt]),ct.addAnimation([Le])}}const fe=_t.querySelector("ion-header.header-collapse-condense"),{forward:Y,backward:J}=((it,Xe,Qe,vt,We)=>{const at=qe(vt,Qe),pe=Ge(We),ke=Ge(vt),$e=qe(We,Qe),tt=null!==at&&null!==pe&&!Qe,nt=null!==ke&&null!==$e&&Qe;if(tt){const _t=pe.getBoundingClientRect(),Ye=at.getBoundingClientRect(),Pt=Se(at).querySelector(".button-text"),Ft=null==Pt?void 0:Pt.getBoundingClientRect(),At=Se(pe).querySelector(".toolbar-title").getBoundingClientRect();Re(it,Xe,Qe,pe,_t,At,Ye,Pt,Ft),Ne(it,Xe,Qe,at,Ye,Pt,Ft,pe,At)}else if(nt){const _t=ke.getBoundingClientRect(),Ye=$e.getBoundingClientRect(),Pt=Se($e).querySelector(".button-text"),Ft=null==Pt?void 0:Pt.getBoundingClientRect(),At=Se(ke).querySelector(".toolbar-title").getBoundingClientRect();Re(it,Xe,Qe,ke,_t,At,Ye,Pt,Ft),Ne(it,Xe,Qe,$e,Ye,Pt,Ft,ke,At)}return{forward:tt,backward:nt}})(Kt,$e,Pt,_t,Ye);if(At.forEach(ie=>{const de=(0,M.c)();de.addElement(ie),Kt.addAnimation(de);const Ue=(0,M.c)();Ue.addElement(ie.querySelector("ion-title"));const Le=(0,M.c)(),pt=Array.from(ie.querySelectorAll("ion-buttons,[menuToggle]")),Mt=ie.closest("ion-header"),Dn=null==Mt?void 0:Mt.classList.contains("header-collapse-condense-inactive");let $t;$t=pt.filter(Pt?En=>{const Dt=En.classList.contains("buttons-collapse");return Dt&&!Dn||!Dt}:En=>!En.classList.contains("buttons-collapse")),Le.addElement($t);const gn=(0,M.c)();gn.addElement(ie.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const In=(0,M.c)();In.addElement(Se(ie).querySelector(".toolbar-background"));const Mn=(0,M.c)(),er=ie.querySelector("ion-back-button");if(er&&Mn.addElement(er),de.addAnimation([Ue,Le,gn,In,Mn]),Le.fromTo(We,.01,1),gn.fromTo(We,.01,1),Pt)Dn||Ue.fromTo("transform",`translateX(${nt})`,`translateX(${pe})`).fromTo(We,.01,1),gn.fromTo("transform",`translateX(${nt})`,`translateX(${pe})`),Mn.fromTo(We,.01,1);else if(fe||Ue.fromTo("transform",`translateX(${tt})`,`translateX(${pe})`).fromTo(We,.01,1),gn.fromTo("transform",`translateX(${tt})`,`translateX(${pe})`),In.beforeClearStyles([We,"transform"]),(null==Mt?void 0:Mt.translucent)?In.fromTo("transform",$e?"translateX(-100%)":"translateX(100%)","translateX(0px)"):In.fromTo(We,.01,"var(--opacity)"),Y||Mn.fromTo(We,.01,1),er&&!Y){const Dt=(0,M.c)();Dt.addElement(Se(er).querySelector(".button-text")).fromTo("transform",$e?"translateX(-100px)":"translateX(100px)","translateX(0px)"),de.addAnimation(Dt)}}),Ye){const ie=(0,M.c)(),de=Ye.querySelector(":scope > ion-content"),Ue=Ye.querySelectorAll(":scope > ion-header > ion-toolbar"),Le=Ye.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if(de||0!==Ue.length||0!==Le.length?(ie.addElement(de),ie.addElement(Le)):ie.addElement(Ye.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),Kt.addAnimation(ie),Pt){ie.beforeClearStyles([We]).fromTo("transform",`translateX(${pe})`,$e?"translateX(-100%)":"translateX(100%)");const pt=(0,Q.g)(Ye);Kt.afterAddWrite(()=>{"normal"===Kt.getDirection()&&pt.style.setProperty("display","none")})}else ie.fromTo("transform",`translateX(${pe})`,`translateX(${nt})`).fromTo(We,1,.8);if(de){const pt=Se(de).querySelector(".transition-effect");if(pt){const Mt=pt.querySelector(".transition-cover"),Dn=pt.querySelector(".transition-shadow"),$t=(0,M.c)(),gn=(0,M.c)(),In=(0,M.c)();$t.addElement(pt).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),gn.addElement(Mt).beforeClearStyles([We]).fromTo(We,.1,0),In.addElement(Dn).beforeClearStyles([We]).fromTo(We,.7,.03),$t.addAnimation([gn,In]),ie.addAnimation([$t])}}Ue.forEach(pt=>{const Mt=(0,M.c)();Mt.addElement(pt);const Dn=(0,M.c)();Dn.addElement(pt.querySelector("ion-title"));const $t=(0,M.c)(),gn=pt.querySelectorAll("ion-buttons,[menuToggle]"),In=pt.closest("ion-header"),Mn=null==In?void 0:In.classList.contains("header-collapse-condense-inactive"),er=Array.from(gn).filter(Ze=>{const et=Ze.classList.contains("buttons-collapse");return et&&!Mn||!et});$t.addElement(er);const En=(0,M.c)(),Dt=pt.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");Dt.length>0&&En.addElement(Dt);const rr=(0,M.c)();rr.addElement(Se(pt).querySelector(".toolbar-background"));const Ht=(0,M.c)(),Pe=pt.querySelector("ion-back-button");if(Pe&&Ht.addElement(Pe),Mt.addAnimation([Dn,$t,En,Ht,rr]),Kt.addAnimation(Mt),Ht.fromTo(We,.99,0),$t.fromTo(We,.99,0),En.fromTo(We,.99,0),Pt){if(Mn||Dn.fromTo("transform",`translateX(${pe})`,$e?"translateX(-100%)":"translateX(100%)").fromTo(We,.99,0),En.fromTo("transform",`translateX(${pe})`,$e?"translateX(-100%)":"translateX(100%)"),rr.beforeClearStyles([We,"transform"]),(null==In?void 0:In.translucent)?rr.fromTo("transform","translateX(0px)",$e?"translateX(-100%)":"translateX(100%)"):rr.fromTo(We,"var(--opacity)",0),Pe&&!J){const et=(0,M.c)();et.addElement(Se(Pe).querySelector(".button-text")).fromTo("transform",`translateX(${pe})`,`translateX(${($e?-124:124)+"px"})`),Mt.addAnimation(et)}}else Mn||Dn.fromTo("transform",`translateX(${pe})`,`translateX(${nt})`).fromTo(We,.99,0).afterClearStyles([at,We]),En.fromTo("transform",`translateX(${pe})`,`translateX(${nt})`).afterClearStyles([at,We]),Ht.afterClearStyles([We]),Dn.afterClearStyles([We]),$t.afterClearStyles([We])})}return Kt}catch(vt){throw vt}},Ke=10},3314:(hn,Ct,ee)=>{"use strict";ee.r(Ct),ee.d(Ct,{mdTransitionAnimation:()=>He});var M=ee(9986),Q=ee(2725);ee(8476),ee(3664),ee(9672);const He=(re,Se)=>{var Ge,qe,me;const Te="back"===Se.direction,it=Se.leavingEl,Xe=(0,Q.g)(Se.enteringEl),Qe=Xe.querySelector("ion-toolbar"),vt=(0,M.c)();if(vt.addElement(Xe).fill("both").beforeRemoveClass("ion-page-invisible"),Te?vt.duration((null!==(Ge=Se.duration)&&void 0!==Ge?Ge:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):vt.duration((null!==(qe=Se.duration)&&void 0!==qe?qe:0)||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform","translateY(40px)","translateY(0px)").fromTo("opacity",.01,1),Qe){const We=(0,M.c)();We.addElement(Qe),vt.addAnimation(We)}if(it&&Te){vt.duration((null!==(me=Se.duration)&&void 0!==me?me:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const We=(0,M.c)();We.addElement((0,Q.g)(it)).onFinish(at=>{1===at&&We.elements.length>0&&We.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)","translateY(40px)").fromTo("opacity",1,0),vt.addAnimation(We)}return vt}},6002:(hn,Ct,ee)=>{"use strict";ee.d(Ct,{B:()=>gn,F:()=>Ht,G:()=>In,O:()=>Mn,a:()=>Xe,b:()=>Qe,c:()=>pe,d:()=>er,e:()=>En,f:()=>Y,g:()=>ie,h:()=>Le,i:()=>Mt,j:()=>$e,k:()=>tt,m:()=>We,n:()=>qe,o:()=>ct,q:()=>me,s:()=>$t,t:()=>ke});var M=ee(467),Q=ee(8476),h=ee(4920),x=ee(6411),v=ee(3664),He=ee(8621),re=ee(1970),Se=ee(4929);const Ge='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',qe=(Pe,Ze)=>{const et=Pe.querySelector(Ge);Ne(et,null!=Ze?Ze:Pe)},me=(Pe,Ze)=>{const et=Array.from(Pe.querySelectorAll(Ge));Ne(et.length>0?et[et.length-1]:null,null!=Ze?Ze:Pe)},Ne=(Pe,Ze)=>{let et=Pe;const Gt=null==Pe?void 0:Pe.shadowRoot;Gt&&(et=Gt.querySelector(Ge)||Pe),et?(0,h.f)(et):Ze.focus()};let Re=0,Te=0;const Ke=new WeakMap,it=Pe=>({create:Ze=>nt(Pe,Ze),dismiss:(Ze,et,Gt)=>nn(document,Ze,et,Pe,Gt),getTop:()=>(0,M.A)(function*(){return ct(document,Pe)})()}),Xe=it("ion-alert"),Qe=it("ion-action-sheet"),We=it("ion-modal"),pe=it("ion-popover"),ke=it("ion-toast"),$e=Pe=>{typeof document<"u"&&Ft(document);const Ze=Re++;Pe.overlayIndex=Ze},tt=Pe=>(Pe.hasAttribute("id")||(Pe.id="ion-overlay-"+ ++Te),Pe.id),nt=(Pe,Ze)=>typeof window<"u"&&typeof window.customElements<"u"?window.customElements.whenDefined(Pe).then(()=>{const et=document.createElement(Pe);return et.classList.add("overlay-hidden"),Object.assign(et,Object.assign(Object.assign({},Ze),{hasController:!0})),de(document).appendChild(et),new Promise(Gt=>(0,h.c)(et,Gt))}):Promise.resolve(),Ye=(Pe,Ze)=>{let et=Pe;const Gt=null==Pe?void 0:Pe.shadowRoot;Gt&&(et=Gt.querySelector(Ge)||Pe),et?(0,h.f)(et):Ze.focus()},Ft=Pe=>{0===Re&&(Re=1,Pe.addEventListener("focus",Ze=>{((Pe,Ze)=>{const et=ct(Ze,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker-legacy,ion-popover"),Gt=Pe.target;et&&Gt&&!et.classList.contains(Ht)&&(et.shadowRoot?(()=>{if(et.contains(Gt))et.lastFocus=Gt;else if("ION-TOAST"===Gt.tagName)Ye(et.lastFocus,et);else{const $n=et.lastFocus;qe(et),$n===Ze.activeElement&&me(et),et.lastFocus=Ze.activeElement}})():(()=>{if(et===Gt)et.lastFocus=void 0;else if("ION-TOAST"===Gt.tagName)Ye(et.lastFocus,et);else{const $n=(0,h.g)(et);if(!$n.contains(Gt))return;const rn=$n.querySelector(".ion-overlay-wrapper");if(!rn)return;if(rn.contains(Gt)||Gt===$n.querySelector("ion-backdrop"))et.lastFocus=Gt;else{const sn=et.lastFocus;qe(rn,et),sn===Ze.activeElement&&me(rn,et),et.lastFocus=Ze.activeElement}}})())})(Ze,Pe)},!0),Pe.addEventListener("ionBackButton",Ze=>{const et=ct(Pe);null!=et&&et.backdropDismiss&&Ze.detail.register(x.OVERLAY_BACK_BUTTON_PRIORITY,()=>{et.dismiss(void 0,gn)})}),(0,x.shouldUseCloseWatcher)()||Pe.addEventListener("keydown",Ze=>{if("Escape"===Ze.key){const et=ct(Pe);null!=et&&et.backdropDismiss&&et.dismiss(void 0,gn)}}))},nn=(Pe,Ze,et,Gt,Bn)=>{const ir=ct(Pe,Gt,Bn);return ir?ir.dismiss(Ze,et):Promise.reject("overlay does not exist")},Kt=(Pe,Ze)=>((Pe,Ze)=>(void 0===Ze&&(Ze="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker-legacy,ion-popover,ion-toast"),Array.from(Pe.querySelectorAll(Ze)).filter(et=>et.overlayIndex>0)))(Pe,Ze).filter(et=>!(Pe=>Pe.classList.contains("overlay-hidden"))(et)),ct=(Pe,Ze,et)=>{const Gt=Kt(Pe,Ze);return void 0===et?Gt[Gt.length-1]:Gt.find(Bn=>Bn.id===et)},fe=(Pe=!1)=>{const et=de(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");et&&(Pe?et.setAttribute("aria-hidden","true"):et.removeAttribute("aria-hidden"))},Y=function(){var Pe=(0,M.A)(function*(Ze,et,Gt,Bn,ir){var $n,rn;if(Ze.presented)return;fe(!0),document.body.classList.add(re.B),Dt(Ze.el),Ze.presented=!0,Ze.willPresent.emit(),null===($n=Ze.willPresentShorthand)||void 0===$n||$n.emit();const sn=(0,v.b)(Ze),Ln=Ze.enterAnimation?Ze.enterAnimation:v.c.get(et,"ios"===sn?Gt:Bn);(yield Ue(Ze,Ln,Ze.el,ir))&&(Ze.didPresent.emit(),null===(rn=Ze.didPresentShorthand)||void 0===rn||rn.emit()),"ION-TOAST"!==Ze.el.tagName&&J(Ze.el),Ze.keyboardClose&&(null===document.activeElement||!Ze.el.contains(document.activeElement))&&Ze.el.focus(),Ze.el.removeAttribute("aria-hidden")});return function(et,Gt,Bn,ir,$n){return Pe.apply(this,arguments)}}(),J=function(){var Pe=(0,M.A)(function*(Ze){let et=document.activeElement;if(!et)return;const Gt=null==et?void 0:et.shadowRoot;Gt&&(et=Gt.querySelector(Ge)||et),yield Ze.onDidDismiss(),(null===document.activeElement||document.activeElement===document.body)&&et.focus()});return function(et){return Pe.apply(this,arguments)}}(),ie=function(){var Pe=(0,M.A)(function*(Ze,et,Gt,Bn,ir,$n,rn){var sn,Ln;if(!Ze.presented)return!1;void 0!==Q.d&&1===Kt(Q.d).length&&(fe(!1),document.body.classList.remove(re.B)),Ze.presented=!1;try{Ze.el.style.setProperty("pointer-events","none"),Ze.willDismiss.emit({data:et,role:Gt}),null===(sn=Ze.willDismissShorthand)||void 0===sn||sn.emit({data:et,role:Gt});const cr=(0,v.b)(Ze),Wr=Ze.leaveAnimation?Ze.leaveAnimation:v.c.get(Bn,"ios"===cr?ir:$n);Gt!==In&&(yield Ue(Ze,Wr,Ze.el,rn)),Ze.didDismiss.emit({data:et,role:Gt}),null===(Ln=Ze.didDismissShorthand)||void 0===Ln||Ln.emit({data:et,role:Gt}),(Ke.get(Ze)||[]).forEach(ei=>ei.destroy()),Ke.delete(Ze),Ze.el.classList.add("overlay-hidden"),Ze.el.style.removeProperty("pointer-events"),void 0!==Ze.el.lastFocus&&(Ze.el.lastFocus=void 0)}catch(cr){console.error(cr)}return Ze.el.remove(),rr(),!0});return function(et,Gt,Bn,ir,$n,rn,sn){return Pe.apply(this,arguments)}}(),de=Pe=>Pe.querySelector("ion-app")||Pe.body,Ue=function(){var Pe=(0,M.A)(function*(Ze,et,Gt,Bn){Gt.classList.remove("overlay-hidden");const $n=et(Ze.el,Bn);(!Ze.animated||!v.c.getBoolean("animated",!0))&&$n.duration(0),Ze.keyboardClose&&$n.beforeAddWrite(()=>{const sn=Gt.ownerDocument.activeElement;null!=sn&&sn.matches("input,ion-input, ion-textarea")&&sn.blur()});const rn=Ke.get(Ze)||[];return Ke.set(Ze,[...rn,$n]),yield $n.play(),!0});return function(et,Gt,Bn,ir){return Pe.apply(this,arguments)}}(),Le=(Pe,Ze)=>{let et;const Gt=new Promise(Bn=>et=Bn);return pt(Pe,Ze,Bn=>{et(Bn.detail)}),Gt},pt=(Pe,Ze,et)=>{const Gt=Bn=>{(0,h.b)(Pe,Ze,Gt),et(Bn)};(0,h.a)(Pe,Ze,Gt)},Mt=Pe=>"cancel"===Pe||Pe===gn,Dn=Pe=>Pe(),$t=(Pe,Ze)=>{if("function"==typeof Pe)return v.c.get("_zoneGate",Dn)(()=>{try{return Pe(Ze)}catch(Gt){throw Gt}})},gn="backdrop",In="gesture",Mn=39,er=Pe=>{let et,Ze=!1;const Gt=(0,He.C)(),Bn=(rn=!1)=>{if(et&&!rn)return{delegate:et,inline:Ze};const{el:sn,hasController:Ln,delegate:pr}=Pe;return Ze=null!==sn.parentNode&&!Ln,et=Ze?pr||Gt:pr,{inline:Ze,delegate:et}};return{attachViewToDom:function(){var rn=(0,M.A)(function*(sn){const{delegate:Ln}=Bn(!0);if(Ln)return yield Ln.attachViewToDom(Pe.el,sn);const{hasController:pr}=Pe;if(pr&&void 0!==sn)throw new Error("framework delegate is missing");return null});return function(Ln){return rn.apply(this,arguments)}}(),removeViewFromDom:()=>{const{delegate:rn}=Bn();rn&&void 0!==Pe.el&&rn.removeViewFromDom(Pe.el.parentElement,Pe.el)}}},En=()=>{let Pe;const Ze=()=>{Pe&&(Pe(),Pe=void 0)};return{addClickListener:(Gt,Bn)=>{Ze();const ir=void 0!==Bn?document.getElementById(Bn):null;ir?Pe=((rn,sn)=>{const Ln=()=>{sn.present()};return rn.addEventListener("click",Ln),()=>{rn.removeEventListener("click",Ln)}})(ir,Gt):(0,Se.p)(`A trigger element with the ID "${Bn}" was not found in the DOM. The trigger element must be in the DOM when the "trigger" property is set on an overlay component.`,Gt)},removeClickListener:Ze}},Dt=Pe=>{var Ze;if(void 0===Q.d)return;const et=Kt(Q.d);for(let Gt=et.length-1;Gt>=0;Gt--){const Bn=et[Gt],ir=null!==(Ze=et[Gt+1])&&void 0!==Ze?Ze:Pe;(ir.hasAttribute("aria-hidden")||"ION-TOAST"!==ir.tagName)&&Bn.setAttribute("aria-hidden","true")}},rr=()=>{if(void 0===Q.d)return;const Pe=Kt(Q.d);for(let Ze=Pe.length-1;Ze>=0;Ze--){const et=Pe[Ze];if(et.removeAttribute("aria-hidden"),"ION-TOAST"!==et.tagName)break}},Ht="ion-disable-focus-trap"},5759:(hn,Ct,ee)=>{"use strict";var M={};ee.r(M),ee.d(M,{FirebaseError:()=>$t,SDK_VERSION:()=>Er,_DEFAULT_ENTRY_NAME:()=>Z,_addComponent:()=>ut,_addOrOverwriteComponent:()=>Tt,_apps:()=>he,_clearComponents:()=>_n,_components:()=>Ee,_getProvider:()=>Rt,_isFirebaseApp:()=>Yt,_isFirebaseServerApp:()=>qt,_registerComponent:()=>Et,_removeServiceInstance:()=>zt,_serverApps:()=>be,deleteApp:()=>Ya,getApp:()=>rs,getApps:()=>Wo,initializeApp:()=>qr,initializeServerApp:()=>Qi,onLog:()=>Ra,registerVersion:()=>Cr,setLogLevel:()=>uo});var Q=ee(345),h=ee(4438),x=ee(9246),v=ee(177);const re=function(n,e){if(!n)throw Se(e)},Se=function(n){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+n)},Ge=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=63&s|128):55296==(64512&s)&&r+1<n.length&&56320==(64512&n.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&n.charCodeAt(++r)),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=63&s|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=63&s|128)}return e},me={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const c=n[s],d=s+1<n.length,g=d?n[s+1]:0,I=s+2<n.length,T=I?n[s+2]:0;let K=(15&g)<<2|T>>6,ue=63&T;I||(ue=64,d||(K=64)),r.push(t[c>>2],t[(3&c)<<4|g>>4],t[K],t[ue])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Ge(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const c=n[t++];e[r++]=String.fromCharCode((31&s)<<6|63&c)}else if(s>239&&s<365){const I=((7&s)<<18|(63&n[t++])<<12|(63&n[t++])<<6|63&n[t++])-65536;e[r++]=String.fromCharCode(55296+(I>>10)),e[r++]=String.fromCharCode(56320+(1023&I))}else{const c=n[t++],d=n[t++];e[r++]=String.fromCharCode((15&s)<<12|(63&c)<<6|63&d)}}return e.join("")}(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const c=t[n.charAt(s++)],g=s<n.length?t[n.charAt(s)]:0;++s;const T=s<n.length?t[n.charAt(s)]:64;++s;const B=s<n.length?t[n.charAt(s)]:64;if(++s,null==c||null==g||null==T||null==B)throw new Ne;r.push(c<<2|g>>4),64!==T&&(r.push(g<<4&240|T>>2),64!==B&&r.push(T<<6&192|B))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Ne extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Re=function(n){const e=Ge(n);return me.encodeByteArray(e,!0)},Te=function(n){return Re(n).replace(/\./g,"")},Ke=function(n){try{return me.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Xe(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===n&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!Qe(t)||(n[t]=Xe(n[t],e[t]));return n}function Qe(n){return"__proto__"!==n}const ke=()=>{try{return function vt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const n=process.env.__FIREBASE_DEFAULTS__;return n?JSON.parse(n):void 0})()||(()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Ke(n[1]);return e&&JSON.parse(e)})()}catch(n){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`)}},nt=()=>{var n;return null===(n=ke())||void 0===n?void 0:n.config};class Ye{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}function Pt(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",s=n.iat||0,c=n.sub||n.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Te(JSON.stringify({alg:"none",type:"JWT"})),Te(JSON.stringify(d)),""].join(".")}function Ft(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function nn(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ft())}function At(){var n;const e=null===(n=ke())||void 0===n?void 0:n.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Kt(){return"object"==typeof self&&self.self===self}function ct(){const n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof n&&void 0!==n.id}function fe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function J(){const n=Ft();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Ue(){return!At()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Le(){try{return"object"==typeof indexedDB}catch{return!1}}class $t extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,$t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gn.prototype.create)}}class gn{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,c=this.errors[e],d=c?function In(n,e){return n.replace(Mn,(t,r)=>{const s=e[r];return null!=s?String(s):`<${r}?>`})}(c,r):"Error";return new $t(s,`${this.serviceName}: ${d} (${s}).`,r)}}const Mn=/\{\$([^}]+)}/g;function er(n){return JSON.parse(n)}function En(n){return JSON.stringify(n)}const Dt=function(n){let e={},t={},r={},s="";try{const c=n.split(".");e=er(Ke(c[0])||""),t=er(Ke(c[1])||""),s=c[2],r=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:r,signature:s}};function et(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Gt(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function Bn(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ir(n,e,t){const r={};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=e.call(t,n[s],s,n));return r}function $n(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const c=n[s],d=e[s];if(rn(c)&&rn(d)){if(!$n(c,d))return!1}else if(c!==d)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function rn(n){return null!==n&&"object"==typeof n}function Ln(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function pr(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,c]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(c)}}),e}function cr(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}class Wr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const r=this.W_;if("string"==typeof e)for(let B=0;B<16;B++)r[B]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let B=0;B<16;B++)r[B]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let B=16;B<80;B++){const K=r[B-3]^r[B-8]^r[B-14]^r[B-16];r[B]=4294967295&(K<<1|K>>>31)}let T,k,s=this.chain_[0],c=this.chain_[1],d=this.chain_[2],g=this.chain_[3],I=this.chain_[4];for(let B=0;B<80;B++){B<40?B<20?(T=g^c&(d^g),k=1518500249):(T=c^d^g,k=1859775393):B<60?(T=c&d|g&(c|d),k=2400959708):(T=c^d^g,k=3395469782);const K=(s<<5|s>>>27)+T+I+k+r[B]&4294967295;I=g,g=d,d=4294967295&(c<<30|c>>>2),c=s,s=K}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+d&4294967295,this.chain_[3]=this.chain_[3]+g&4294967295,this.chain_[4]=this.chain_[4]+I&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const r=t-this.blockSize;let s=0;const c=this.buf_;let d=this.inbuf_;for(;s<t;){if(0===d)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if("string"==typeof e){for(;s<t;)if(c[d]=e.charCodeAt(s),++d,++s,d===this.blockSize){this.compress_(c),d=0;break}}else for(;s<t;)if(c[d]=e[s],++d,++s,d===this.blockSize){this.compress_(c),d=0;break}}this.inbuf_=d,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=255&t,t/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let c=24;c>=0;c-=8)e[r]=this.chain_[s]>>c&255,++r;return e}}function kr(n,e){const t=new ei(n,e);return t.subscribe.bind(t)}class ei{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(void 0===e&&void 0===t&&void 0===r)throw new Error("Missing Observer.");s=function Wi(n,e){if("object"!=typeof n||null===n)return!1;for(const t of e)if(t in n&&"function"==typeof n[t])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:r},void 0===s.next&&(s.next=jn),void 0===s.error&&(s.error=jn),void 0===s.complete&&(s.complete=jn);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),c}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function jn(){}const jt=function(n,e,t,r){let s;if(r<e?s="at least "+e:r>t&&(s=0===t?"none":"no more than "+t),s)throw new Error(n+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+s+".")};function mr(n,e){return`${n} failed: ${e} argument `}function tr(n,e,t,r){if((!r||t)&&"function"!=typeof t)throw new Error(mr(n,e)+"must be a valid function.")}function Vo(n,e,t,r){if((!r||t)&&("object"!=typeof t||null===t))throw new Error(mr(n,e)+"must be a valid context object.")}const ci=function(n){let e=0;for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e};function xt(n){return n&&n._delegate?n._delegate:n}var X=ee(467);class ar{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Rr="[DEFAULT]";class ti{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Ye;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),s=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(s)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(c){if(s)return null;throw c}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function Js(n){return"EAGER"===n.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Rr})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:s});r.resolve(c)}catch{}}}}clearInstance(e=Rr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return(0,X.A)(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=Rr){return this.instances.has(e)}getOptions(e=Rr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[c,d]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(c)&&d.resolve(s);return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),c=null!==(r=this.onInitCallbacks.get(s))&&void 0!==r?r:new Set;c.add(e),this.onInitCallbacks.set(s,c);const d=this.instances.get(s);return d&&e(d,s),()=>{c.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===Rr?void 0:n),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var n;return r||null}normalizeInstanceIdentifier(e=Rr){return this.component?this.component.multipleInstances?e:Rr:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class xr{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ti(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const mn=[];var Tn=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(Tn||{});const Fi={debug:Tn.DEBUG,verbose:Tn.VERBOSE,info:Tn.INFO,warn:Tn.WARN,error:Tn.ERROR,silent:Tn.SILENT},Li=Tn.INFO,Uo={[Tn.DEBUG]:"log",[Tn.VERBOSE]:"log",[Tn.INFO]:"info",[Tn.WARN]:"warn",[Tn.ERROR]:"error"},Ao=(n,e,...t)=>{if(e<n.logLevel)return;const r=(new Date).toISOString(),s=Uo[e];if(!s)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[s](`[${r}]  ${n.name}:`,...t)};class qn{constructor(e){this.name=e,this._logLevel=Li,this._logHandler=Ao,this._userLogHandler=null,mn.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Tn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?Fi[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Tn.DEBUG,...e),this._logHandler(this,Tn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Tn.VERBOSE,...e),this._logHandler(this,Tn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Tn.INFO,...e),this._logHandler(this,Tn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Tn.WARN,...e),this._logHandler(this,Tn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Tn.ERROR,...e),this._logHandler(this,Tn.ERROR,...e)}}const Ki=(n,e)=>e.some(t=>n instanceof t);let _i,So;const Ro=new WeakMap,lt=new WeakMap,Qt=new WeakMap,On=new WeakMap,cn=new WeakMap;let Xi={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return lt.get(n);if("objectStoreNames"===e)return n.objectStoreNames||Qt.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Br(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function zo(n){return"function"==typeof n?function Zs(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function jo(){return So||(So=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(ea(this),e),Br(Ro.get(this))}:function(...e){return Br(n.apply(ea(this),e))}:function(e,...t){const r=n.call(ea(this),e,...t);return Qt.set(r,e.sort?e.sort():[e]),Br(r)}}(n):(n instanceof IDBTransaction&&function ui(n){if(lt.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",c),n.removeEventListener("error",d),n.removeEventListener("abort",d)},c=()=>{t(),s()},d=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",c),n.addEventListener("error",d),n.addEventListener("abort",d)});lt.set(n,e)}(n),Ki(n,function $o(){return _i||(_i=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,Xi):n)}function Br(n){if(n instanceof IDBRequest)return function Ur(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",c),n.removeEventListener("error",d)},c=()=>{t(Br(n.result)),s()},d=()=>{r(n.error),s()};n.addEventListener("success",c),n.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&Ro.set(t,n)}).catch(()=>{}),cn.set(e,n),e}(n);if(On.has(n))return On.get(n);const e=zo(n);return e!==n&&(On.set(n,e),cn.set(e,n)),e}const ea=n=>cn.get(n),so=["get","getKey","getAll","getAllKeys","count"],Si=["put","add","delete","clear"],ao=new Map;function Kn(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(ao.get(e))return ao.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=Si.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!so.includes(t))return;const c=function(){var d=(0,X.A)(function*(g,...I){const T=this.transaction(g,s?"readwrite":"readonly");let k=T.store;return r&&(k=k.index(I.shift())),(yield Promise.all([k[t](...I),s&&T.done]))[0]});return function(I){return d.apply(this,arguments)}}();return ao.set(e,c),c}!function us(n){Xi=n(Xi)}(n=>({...n,get:(e,t,r)=>Kn(e,t)||n.get(e,t,r),has:(e,t)=>!!Kn(e,t)||n.has(e,t)}));class to{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function lo(n){const e=n.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const ni="@firebase/app",yr="0.10.5",yn=new qn("@firebase/app"),Z="[DEFAULT]",ae={[ni]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},he=new Map,be=new Map,Ee=new Map;function ut(n,e){try{n.container.addComponent(e)}catch(t){yn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Tt(n,e){n.container.addOrOverwriteComponent(e)}function Et(n){const e=n.name;if(Ee.has(e))return yn.debug(`There were multiple attempts to register component ${e}.`),!1;Ee.set(e,n);for(const t of he.values())ut(t,n);for(const t of be.values())ut(t,n);return!0}function Rt(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function zt(n,e,t=Z){Rt(n,e).clearInstance(t)}function Yt(n){return void 0!==n.options}function qt(n){return void 0!==n.settings}function _n(){Ee.clear()}const vr=new gn("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Xn{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ar("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vr.create("app-deleted",{appName:this._name})}}class Ir extends Xn{constructor(e,t,r,s){const c=void 0!==t.automaticDataCollectionEnabled&&t.automaticDataCollectionEnabled,d={name:r,automaticDataCollectionEnabled:c};super(void 0!==e.apiKey?e:e.options,d,s),this._serverConfig=Object.assign({automaticDataCollectionEnabled:c},t),this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()}),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Cr(ni,yr,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,void 0!==e&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Ya(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw vr.create("server-app-deleted")}}const Er="10.12.2";function qr(n,e={}){let t=n;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:Z,automaticDataCollectionEnabled:!1},e),s=r.name;if("string"!=typeof s||!s)throw vr.create("bad-app-name",{appName:String(s)});if(t||(t=nt()),!t)throw vr.create("no-options");const c=he.get(s);if(c){if($n(t,c.options)&&$n(r,c.config))return c;throw vr.create("duplicate-app",{appName:s})}const d=new xr(s);for(const I of Ee.values())d.addComponent(I);const g=new Xn(t,r,d);return he.set(s,g),g}function Qi(n,e){if(Kt())throw vr.create("invalid-server-app-environment");let t;void 0===e.automaticDataCollectionEnabled&&(e.automaticDataCollectionEnabled=!1),t=Yt(n)?n.options:n;const r=Object.assign(Object.assign({},e),t);if(void 0!==r.releaseOnDeref&&delete r.releaseOnDeref,void 0!==e.releaseOnDeref&&typeof FinalizationRegistry>"u")throw vr.create("finalization-registry-not-supported",{});const c=""+(T=JSON.stringify(r),[...T].reduce((k,B)=>Math.imul(31,k)+B.charCodeAt(0)|0,0)),d=be.get(c);var T;if(d)return d.incRefCount(e.releaseOnDeref),d;const g=new xr(c);for(const T of Ee.values())g.addComponent(T);const I=new Ir(t,e,c,g);return be.set(c,I),I}function rs(n=Z){const e=he.get(n);if(!e&&n===Z&&nt())return qr();if(!e)throw vr.create("no-app",{appName:n});return e}function Wo(){return Array.from(he.values())}function Ya(n){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,X.A)(function*(n){let e=!1;const t=n.name;he.has(t)?(e=!0,he.delete(t)):be.has(t)&&n.decRefCount()<=0&&(be.delete(t),e=!0),e&&(yield Promise.all(n.container.getProviders().map(r=>r.delete())),n.isDeleted=!0)})).apply(this,arguments)}function Cr(n,e,t){var r;let s=null!==(r=ae[n])&&void 0!==r?r:n;t&&(s+=`-${t}`);const c=s.match(/\s|\//),d=e.match(/\s|\//);if(c||d){const g=[`Unable to register library "${s}" with version "${e}":`];return c&&g.push(`library name "${s}" contains illegal characters (whitespace or "/")`),c&&d&&g.push("and"),d&&g.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void yn.warn(g.join(" "))}Et(new ar(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}function Ra(n,e){if(null!==n&&"function"!=typeof n)throw vr.create("invalid-log-argument");!function Do(n,e){for(const t of mn){let r=null;e&&e.level&&(r=Fi[e.level]),t.userLogHandler=null===n?null:(s,c,...d)=>{const g=d.map(I=>{if(null==I)return null;if("string"==typeof I)return I;if("number"==typeof I||"boolean"==typeof I)return I.toString();if(I instanceof Error)return I.message;try{return JSON.stringify(I)}catch{return null}}).filter(I=>I).join(" ");c>=(null!=r?r:s.logLevel)&&n({level:Tn[c].toLowerCase(),message:g,args:d,type:s.name})}}}(n,e)}function uo(n){!function Bo(n){mn.forEach(e=>{e.setLogLevel(n)})}(n)}const jc="firebase-heartbeat-database",ac=1,Ui="firebase-heartbeat-store";let lr=null;function Ps(){return lr||(lr=function Ho(n,e,{blocked:t,upgrade:r,blocking:s,terminated:c}={}){const d=indexedDB.open(n,e),g=Br(d);return r&&d.addEventListener("upgradeneeded",I=>{r(Br(d.result),I.oldVersion,I.newVersion,Br(d.transaction),I)}),t&&d.addEventListener("blocked",I=>t(I.oldVersion,I.newVersion,I)),g.then(I=>{c&&I.addEventListener("close",()=>c()),s&&I.addEventListener("versionchange",T=>s(T.oldVersion,T.newVersion,T))}).catch(()=>{}),g}(jc,ac,{upgrade:(n,e)=>{if(0===e)try{n.createObjectStore(Ui)}catch(t){console.warn(t)}}}).catch(n=>{throw vr.create("idb-open",{originalErrorMessage:n.message})})),lr}function Pa(){return(Pa=(0,X.A)(function*(n){try{const t=(yield Ps()).transaction(Ui),r=yield t.objectStore(Ui).get(is(n));return yield t.done,r}catch(e){if(e instanceof $t)yn.warn(e.message);else{const t=vr.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});yn.warn(t.message)}}})).apply(this,arguments)}function Ms(n,e){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,X.A)(function*(n,e){try{const r=(yield Ps()).transaction(Ui,"readwrite");yield r.objectStore(Ui).put(e,is(n)),yield r.done}catch(t){if(t instanceof $t)yn.warn(t.message);else{const r=vr.create("idb-set",{originalErrorMessage:null==t?void 0:t.message});yn.warn(r.message)}}})).apply(this,arguments)}function is(n){return`${n.name}!${n.options.appId}`}class Tl{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new xs(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return(0,X.A)(function*(){var t,r;const c=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),d=Al();if((null!=(null===(t=e._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||(e._heartbeatsCache=yield e._heartbeatsCachePromise,null!=(null===(r=e._heartbeatsCache)||void 0===r?void 0:r.heartbeats)))&&e._heartbeatsCache.lastSentHeartbeatDate!==d&&!e._heartbeatsCache.heartbeats.some(g=>g.date===d))return e._heartbeatsCache.heartbeats.push({date:d,agent:c}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(g=>{const I=new Date(g.date).valueOf();return Date.now()-I<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return(0,X.A)(function*(){var t;if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null==(null===(t=e._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===e._heartbeatsCache.heartbeats.length)return"";const r=Al(),{heartbeatsToSend:s,unsentEntries:c}=function Dl(n,e=1024){const t=[];let r=n.slice();for(const s of n){const c=t.find(d=>d.agent===s.agent);if(c){if(c.dates.push(s.date),Sl(t)>e){c.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),Sl(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(e._heartbeatsCache.heartbeats),d=Te(JSON.stringify({version:2,heartbeats:s}));return e._heartbeatsCache.lastSentHeartbeatDate=r,c.length>0?(e._heartbeatsCache.heartbeats=c,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),d})()}}function Al(){return(new Date).toISOString().substring(0,10)}class xs{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,X.A)(function*(){return!!Le()&&function pt(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var c;e((null===(c=s.error)||void 0===c?void 0:c.message)||"")}}catch(t){e(t)}})}().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return(0,X.A)(function*(){if(yield e._canUseIndexedDBPromise){const r=yield function bl(n){return Pa.apply(this,arguments)}(e.app);return null!=r&&r.heartbeats?r:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(e){var t=this;return(0,X.A)(function*(){var r;if(yield t._canUseIndexedDBPromise){const c=yield t.read();return Ms(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:c.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return(0,X.A)(function*(){var r;if(yield t._canUseIndexedDBPromise){const c=yield t.read();return Ms(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:c.lastSentHeartbeatDate,heartbeats:[...c.heartbeats,...e.heartbeats]})}})()}}function Sl(n){return Te(JSON.stringify({version:2,heartbeats:n})).length}!function lc(n){Et(new ar("platform-logger",e=>new to(e),"PRIVATE")),Et(new ar("heartbeat",e=>new Tl(e),"PRIVATE")),Cr(ni,yr,n),Cr(ni,yr,"esm2017"),Cr("fire-js","")}("");class Ns{constructor(e,t){this._delegate=e,this.firebase=t,ut(e,new ar("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Ya(this._delegate)))}_getService(e,t=Z){var r;this._delegate.checkDestroyed();const s=this._delegate.container.getProvider(e);return!s.isInitialized()&&"EXPLICIT"===(null===(r=s.getComponent())||void 0===r?void 0:r.instantiationMode)&&s.initialize(),s.getImmediate({identifier:t})}_removeServiceInstance(e,t=Z){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){ut(this._delegate,e)}_addOrOverwriteComponent(e){Tt(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const j=new gn("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function ne(){const n=function F(n){const e={},t={__esModule:!0,initializeApp:function c(T,k={}){const B=qr(T,k);if(et(e,B.name))return e[B.name];const K=new n(B,t);return e[B.name]=K,K},app:s,registerVersion:Cr,setLogLevel:uo,onLog:Ra,apps:null,SDK_VERSION:Er,INTERNAL:{registerComponent:function g(T){const k=T.name,B=k.replace("-compat","");if(Et(T)&&"PUBLIC"===T.type){const K=(ue=s())=>{if("function"!=typeof ue[B])throw j.create("invalid-app-argument",{appName:k});return ue[B]()};void 0!==T.serviceProps&&Xe(K,T.serviceProps),t[B]=K,n.prototype[B]=function(...ue){return this._getService.bind(this,k).apply(this,T.multipleInstances?ue:[])}}return"PUBLIC"===T.type?t[B]:null},removeApp:function r(T){delete e[T]},useAsService:function I(T,k){return"serverAuth"===k?null:k},modularAPIs:M}};function s(T){if(!et(e,T=T||Z))throw j.create("no-app",{appName:T});return e[T]}return t.default=t,Object.defineProperty(t,"apps",{get:function d(){return Object.keys(e).map(T=>e[T])}}),s.App=n,t}(Ns);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:ne,extendNamespace:function e(t){Xe(n,t)},createSubscribe:kr,ErrorFactory:gn,deepExtend:Xe}),n}(),le=new qn("@firebase/app-compat");if(Kt()&&void 0!==self.firebase){le.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const n=self.firebase.SDK_VERSION;n&&n.indexOf("LITE")>=0&&le.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const di=$;!function xn(n){Cr("@firebase/app-compat","0.2.35",n)}(),di.registerVersion("firebase","10.12.2","app-compat");var fs=ee(1635);const Ja={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const cc=function Qu(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},sr=function zc(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},pi=new gn("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Yi=new qn("@firebase/auth");function ks(n,...e){Yi.logLevel<=Tn.ERROR&&Yi.error(`Auth (${Er}): ${n}`,...e)}function jr(n,...e){throw xa(n,...e)}function ii(n,...e){return xa(n,...e)}function Hc(n,e,t){const r=Object.assign(Object.assign({},sr()),{[e]:t});return new gn("auth","Firebase",r).create(e,{appName:n.name})}function Pi(n){return Hc(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Os(n,e,t){if(!(e instanceof t))throw t.name!==e.constructor.name&&jr(n,"argument-error"),Hc(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function xa(n,...e){if("string"!=typeof n){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return pi.create(n,...e)}function Bt(n,e,...t){if(!n)throw xa(e,...t)}function fo(n){const e="INTERNAL ASSERTION FAILED: "+n;throw ks(e),new Error(e)}function $i(n,e){n||fo(e)}function Rl(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.href)||""}function Pl(){return"http:"===Yu()||"https:"===Yu()}function Yu(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}class Fs{constructor(e,t){this.shortDelay=e,this.longDelay=t,$i(t>e,"Short delay should be less than long delay!"),this.isMobile=nn()||fe()}get(){return function uc(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Pl()||ct()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ps(n,e){$i(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class Gc{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void fo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void fo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void fo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ml={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},dc=new Fs(3e4,6e4);function Lr(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function zr(n,e,t,r){return Za.apply(this,arguments)}function Za(){return(Za=(0,X.A)(function*(n,e,t,r,s={}){return qo(n,s,(0,X.A)(function*(){let c={},d={};r&&("GET"===e?d=r:c={body:JSON.stringify(r)});const g=Ln(Object.assign({key:n.config.apiKey},d)).slice(1),I=yield n._getAdditionalHeaders();return I["Content-Type"]="application/json",n.languageCode&&(I["X-Firebase-Locale"]=n.languageCode),Gc.fetch()(ed(n,n.config.apiHost,t,g),Object.assign({method:e,headers:I,referrerPolicy:"no-referrer"},c))}))})).apply(this,arguments)}function qo(n,e,t){return sa.apply(this,arguments)}function sa(){return(sa=(0,X.A)(function*(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},Ml),e);try{const s=new el(n),c=yield Promise.race([t(),s.promise]);s.clearNetworkTimeout();const d=yield c.json();if("needConfirmation"in d)throw tl(n,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const g=c.ok?d.errorMessage:d.error.message,[I,T]=g.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===I)throw tl(n,"credential-already-in-use",d);if("EMAIL_EXISTS"===I)throw tl(n,"email-already-in-use",d);if("USER_DISABLED"===I)throw tl(n,"user-disabled",d);const k=r[I]||I.toLowerCase().replace(/[_\s]+/g,"-");if(T)throw Hc(n,k,T);jr(n,k)}}catch(s){if(s instanceof $t)throw s;jr(n,"network-request-failed",{message:String(s)})}})).apply(this,arguments)}function Ls(n,e,t,r){return Zu.apply(this,arguments)}function Zu(){return(Zu=(0,X.A)(function*(n,e,t,r,s={}){const c=yield zr(n,e,t,r,s);return"mfaPendingCredential"in c&&jr(n,"multi-factor-auth-required",{_serverResponse:c}),c})).apply(this,arguments)}function ed(n,e,t,r){const s=`${e}${t}?${r}`;return n.config.emulator?ps(n.config,s):`${n.config.apiScheme}://${s}`}function dh(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class el{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ii(this.auth,"network-request-failed")),dc.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function tl(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=ii(n,e,r);return s.customData._tokenResponse=t,s}function td(n){return void 0!==n&&void 0!==n.getResponse}function hh(n){return void 0!==n&&void 0!==n.enterprise}class Wc{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return dh(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}function E(){return(E=(0,X.A)(function*(n){return(yield zr(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function P(n,e){return m.apply(this,arguments)}function m(){return(m=(0,X.A)(function*(n,e){return zr(n,"GET","/v2/recaptchaConfig",Lr(n,e))})).apply(this,arguments)}function A(){return(A=(0,X.A)(function*(n,e){return zr(n,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function z(){return(z=(0,X.A)(function*(n,e){return zr(n,"POST","/v1/accounts:update",e)})).apply(this,arguments)}function te(n,e){return ve.apply(this,arguments)}function ve(){return(ve=(0,X.A)(function*(n,e){return zr(n,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function ft(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Qn(){return(Qn=(0,X.A)(function*(n,e=!1){const t=xt(n),r=yield t.getIdToken(e),s=Yn(r);Bt(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const c="object"==typeof s.firebase?s.firebase:void 0,d=null==c?void 0:c.sign_in_provider;return{claims:s,token:r,authTime:ft(An(s.auth_time)),issuedAtTime:ft(An(s.iat)),expirationTime:ft(An(s.exp)),signInProvider:d||null,signInSecondFactor:(null==c?void 0:c.sign_in_second_factor)||null}})).apply(this,arguments)}function An(n){return 1e3*Number(n)}function Yn(n){const[e,t,r]=n.split(".");if(void 0===e||void 0===t||void 0===r)return ks("JWT malformed, contained fewer than 3 sections"),null;try{const s=Ke(t);return s?JSON.parse(s):(ks("Failed to decode base64 JWT payload"),null)}catch(s){return ks("Caught error parsing JWT payload as JSON",null==s?void 0:s.toString()),null}}function zn(n){const e=Yn(n);return Bt(e,"internal-error"),Bt(typeof e.exp<"u","internal-error"),Bt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Pr(n,e){return ur.apply(this,arguments)}function ur(){return(ur=(0,X.A)(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(r){throw r instanceof $t&&function Lt({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})).apply(this,arguments)}class dn{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const s=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout((0,X.A)(function*(){yield t.iteration()}),r)}iteration(){var e=this;return(0,X.A)(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===(null==t?void 0:t.code)&&e.schedule(!0))}e.schedule()})()}}class wr{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ft(this.lastLoginAt),this.creationTime=ft(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Yr(n){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,X.A)(function*(n){var e;const t=n.auth,r=yield n.getIdToken(),s=yield Pr(n,te(t,{idToken:r}));Bt(null==s?void 0:s.users.length,t,"internal-error");const c=s.users[0];n._notifyReloadListener(c);const d=null!==(e=c.providerUserInfo)&&void 0!==e&&e.length?Nr(c.providerUserInfo):[],g=function oi(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}(n.providerData,d),k=!!n.isAnonymous&&!(n.email&&c.passwordHash||null!=g&&g.length),B={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:g,metadata:new wr(c.createdAt,c.lastLoginAt),isAnonymous:k};Object.assign(n,B)})).apply(this,arguments)}function Us(){return(Us=(0,X.A)(function*(n){const e=xt(n);yield Yr(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function Nr(n){return n.map(e=>{var{providerId:t}=e,r=(0,fs.Tt)(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function Vn(){return(Vn=(0,X.A)(function*(n,e){const t=yield qo(n,{},(0,X.A)(function*(){const r=Ln({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:c}=n.config,d=ed(n,s,"/v1/token",`key=${c}`),g=yield n._getAdditionalHeaders();return g["Content-Type"]="application/x-www-form-urlencoded",Gc.fetch()(d,{method:"POST",headers:g,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})).apply(this,arguments)}function fh(){return(fh=(0,X.A)(function*(n,e){return zr(n,"POST","/v2/accounts:revokeToken",Lr(n,e))})).apply(this,arguments)}class la{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Bt(e.idToken,"internal-error"),Bt(typeof e.idToken<"u","internal-error"),Bt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):zn(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Bt(0!==e.length,"internal-error");const t=zn(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){var r=this;return(0,X.A)(function*(){return t||!r.accessToken||r.isExpired?(Bt(r.refreshToken,e,"user-token-expired"),r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null):r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var r=this;return(0,X.A)(function*(){const{accessToken:s,refreshToken:c,expiresIn:d}=yield function aa(n,e){return Vn.apply(this,arguments)}(e,t);r.updateTokensAndExpiration(s,c,Number(d))})()}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:c}=t,d=new la;return r&&(Bt("string"==typeof r,"internal-error",{appName:e}),d.refreshToken=r),s&&(Bt("string"==typeof s,"internal-error",{appName:e}),d.accessToken=s),c&&(Bt("number"==typeof c,"internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new la,this.toJSON())}_performRefresh(){return fo("not implemented")}}function Or(n,e){Bt("string"==typeof n||typeof n>"u","internal-error",{appName:e})}class gs{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,c=(0,fs.Tt)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new dn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=c.displayName||null,this.email=c.email||null,this.emailVerified=c.emailVerified||!1,this.phoneNumber=c.phoneNumber||null,this.photoURL=c.photoURL||null,this.isAnonymous=c.isAnonymous||!1,this.tenantId=c.tenantId||null,this.providerData=c.providerData?[...c.providerData]:[],this.metadata=new wr(c.createdAt||void 0,c.lastLoginAt||void 0)}getIdToken(e){var t=this;return(0,X.A)(function*(){const r=yield Pr(t,t.stsTokenManager.getToken(t.auth,e));return Bt(r,t.auth,"internal-error"),t.accessToken!==r&&(t.accessToken=r,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),r})()}getIdTokenResult(e){return function Nn(n){return Qn.apply(this,arguments)}(this,e)}reload(){return function ji(n){return Us.apply(this,arguments)}(this)}_assign(e){this!==e&&(Bt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new gs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Bt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var r=this;return(0,X.A)(function*(){let s=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),s=!0),t&&(yield Yr(r)),yield r.auth._persistUserIfCurrent(r),s&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return(0,X.A)(function*(){if(qt(e.auth.app))return Promise.reject(Pi(e.auth));const t=yield e.getIdToken();return yield Pr(e,function p(n,e){return A.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,c,d,g,I,T,k;const B=null!==(r=t.displayName)&&void 0!==r?r:void 0,K=null!==(s=t.email)&&void 0!==s?s:void 0,ue=null!==(c=t.phoneNumber)&&void 0!==c?c:void 0,De=null!==(d=t.photoURL)&&void 0!==d?d:void 0,mt=null!==(g=t.tenantId)&&void 0!==g?g:void 0,ht=null!==(I=t._redirectEventId)&&void 0!==I?I:void 0,Zt=null!==(T=t.createdAt)&&void 0!==T?T:void 0,ln=null!==(k=t.lastLoginAt)&&void 0!==k?k:void 0,{uid:Xt,emailVerified:vn,isAnonymous:gr,providerData:Wn,stsTokenManager:xe}=t;Bt(Xt&&xe,e,"internal-error");const ge=la.fromJSON(this.name,xe);Bt("string"==typeof Xt,e,"internal-error"),Or(B,e.name),Or(K,e.name),Bt("boolean"==typeof vn,e,"internal-error"),Bt("boolean"==typeof gr,e,"internal-error"),Or(ue,e.name),Or(De,e.name),Or(mt,e.name),Or(ht,e.name),Or(Zt,e.name),Or(ln,e.name);const Ie=new gs({uid:Xt,auth:e,email:K,emailVerified:vn,displayName:B,isAnonymous:gr,photoURL:De,phoneNumber:ue,tenantId:mt,stsTokenManager:ge,createdAt:Zt,lastLoginAt:ln});return Wn&&Array.isArray(Wn)&&(Ie.providerData=Wn.map(Fe=>Object.assign({},Fe))),ht&&(Ie._redirectEventId=ht),Ie}static _fromIdTokenResponse(e,t,r=!1){return(0,X.A)(function*(){const s=new la;s.updateFromServerResponse(t);const c=new gs({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return yield Yr(c),c})()}static _fromGetAccountInfoResponse(e,t,r){return(0,X.A)(function*(){const s=t.users[0];Bt(void 0!==s.localId,"internal-error");const c=void 0!==s.providerUserInfo?Nr(s.providerUserInfo):[],d=!(s.email&&s.passwordHash||null!=c&&c.length),g=new la;g.updateFromIdToken(r);const I=new gs({uid:s.localId,auth:e,stsTokenManager:g,isAnonymous:d}),T={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new wr(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash||null!=c&&c.length)};return Object.assign(I,T),I})()}}const qc=new Map;function Ci(n){$i(n instanceof Function,"Expected a class definition");let e=qc.get(n);return e?($i(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,qc.set(n,e),e)}const Nl=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,X.A)(function*(){return!0})()}_set(t,r){var s=this;return(0,X.A)(function*(){s.storage[t]=r})()}_get(t){var r=this;return(0,X.A)(function*(){const s=r.storage[t];return void 0===s?null:s})()}_remove(t){var r=this;return(0,X.A)(function*(){delete r.storage[t]})()}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})();function ms(n,e,t){return`firebase:${n}:${e}:${t}`}class ca{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:c}=this.auth;this.fullUserKey=ms(this.userKey,s.apiKey,c),this.fullPersistenceKey=ms("persistence",s.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return(0,X.A)(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?gs._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return(0,X.A)(function*(){if(t.persistence===e)return;const r=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,r?t.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return(0,X.A)(function*(){if(!t.length)return new ca(Ci(Nl),e,r);const s=(yield Promise.all(t.map(function(){var T=(0,X.A)(function*(k){if(yield k._isAvailable())return k});return function(k){return T.apply(this,arguments)}}()))).filter(T=>T);let c=s[0]||Ci(Nl);const d=ms(r,e.config.apiKey,e.name);let g=null;for(const T of t)try{const k=yield T._get(d);if(k){const B=gs._fromJSON(e,k);T!==c&&(g=B),c=T;break}}catch{}const I=s.filter(T=>T._shouldAllowMigration);return c._shouldAllowMigration&&I.length?(c=I[0],g&&(yield c._set(d,g.toJSON())),yield Promise.all(t.map(function(){var T=(0,X.A)(function*(k){if(k!==c)try{yield k._remove(d)}catch{}});return function(k){return T.apply(this,arguments)}}())),new ca(c,e,r)):new ca(c,e,r)})()}}function po(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Na(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Jn(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(kl(e))return"Blackberry";if(gi(e))return"Webos";if(ph(e))return"Safari";if((e.includes("chrome/")||nd(e))&&!e.includes("edge/"))return"Chrome";if(nl(e))return"Android";{const r=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==r?void 0:r.length))return r[1]}return"Other"}function Jn(n=Ft()){return/firefox\//i.test(n)}function ph(n=Ft()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function nd(n=Ft()){return/crios\//i.test(n)}function Na(n=Ft()){return/iemobile/i.test(n)}function nl(n=Ft()){return/android/i.test(n)}function kl(n=Ft()){return/blackberry/i.test(n)}function gi(n=Ft()){return/webos/i.test(n)}function Ol(n=Ft()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Fl(n=Ft()){return Ol(n)||nl(n)||gi(n)||kl(n)||/windows phone/i.test(n)||Na(n)}function ua(n,e=[]){let t;switch(n){case"Browser":t=po(Ft());break;case"Worker":t=`${po(Ft())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Er}/${r}`}class Cm{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=c=>new Promise((d,g)=>{try{d(e(c))}catch(I){g(I)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return(0,X.A)(function*(){if(t.auth.currentUser===e)return;const r=[];try{for(const s of t.queue)yield s(e),s.onAbort&&r.push(s.onAbort)}catch(s){r.reverse();for(const c of r)try{c()}catch{}throw t.auth._errorFactory.create("login-blocked",{originalMessage:null==s?void 0:s.message})}})()}}function up(){return(up=(0,X.A)(function*(n,e={}){return zr(n,"GET","/v2/passwordPolicy",Lr(n,e))})).apply(this,arguments)}class dp{constructor(e){var t,r,s,c;const d=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=d.minPasswordLength)&&void 0!==t?t:6,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),void 0!==d.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),void 0!==d.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),void 0!==d.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),void 0!==d.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(s=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==s?s:"",this.forceUpgradeOnSignin=null!==(c=e.forceUpgradeOnSignin)&&void 0!==c&&c,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,c,d,g;const I={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,I),this.validatePasswordCharacterOptions(e,I),I.isValid&&(I.isValid=null===(t=I.meetsMinPasswordLength)||void 0===t||t),I.isValid&&(I.isValid=null===(r=I.meetsMaxPasswordLength)||void 0===r||r),I.isValid&&(I.isValid=null===(s=I.containsLowercaseLetter)||void 0===s||s),I.isValid&&(I.isValid=null===(c=I.containsUppercaseLetter)||void 0===c||c),I.isValid&&(I.isValid=null===(d=I.containsNumericCharacter)||void 0===d||d),I.isValid&&(I.isValid=null===(g=I.containsNonAlphanumericCharacter)||void 0===g||g),I}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){let r;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}class Fy{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ly(this),this.idTokenSubscription=new Ly(this),this.beforeStateQueue=new Cm(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pi,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,t){var r=this;return t&&(this._popupRedirectResolver=Ci(t)),this._initializationPromise=this.queue((0,X.A)(function*(){var s,c;if(!r._deleted&&(r.persistenceManager=yield ca.create(r,e),!r._deleted)){if(null!==(s=r._popupRedirectResolver)&&void 0!==s&&s._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(t),r.lastNotifiedUid=(null===(c=r.currentUser)||void 0===c?void 0:c.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return(0,X.A)(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUserFromIdToken(e){var t=this;return(0,X.A)(function*(){try{const r=yield te(t,{idToken:e}),s=yield gs._fromGetAccountInfoResponse(t,r,e);yield t.directlySetCurrentUser(s)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),yield t.directlySetCurrentUser(null)}})()}initializeCurrentUser(e){var t=this;return(0,X.A)(function*(){var r;if(qt(t.app)){const g=t.app.settings.authIdToken;return g?new Promise(I=>{setTimeout(()=>t.initializeCurrentUserFromIdToken(g).then(I,I))}):t.directlySetCurrentUser(null)}const s=yield t.assertedPersistence.getCurrentUser();let c=s,d=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const g=null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId,I=null==c?void 0:c._redirectEventId,T=yield t.tryRedirectSignIn(e);(!g||g===I)&&null!=T&&T.user&&(c=T.user,d=!0)}if(!c)return t.directlySetCurrentUser(null);if(!c._redirectEventId){if(d)try{yield t.beforeStateQueue.runMiddleware(c)}catch(g){c=s,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(g))}return c?t.reloadAndSetCurrentUserOrClear(c):t.directlySetCurrentUser(null)}return Bt(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===c._redirectEventId?t.directlySetCurrentUser(c):t.reloadAndSetCurrentUserOrClear(c)})()}tryRedirectSignIn(e){var t=this;return(0,X.A)(function*(){let r=null;try{r=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch{yield t._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var t=this;return(0,X.A)(function*(){try{yield Yr(e)}catch(r){if("auth/network-request-failed"!==(null==r?void 0:r.code))return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function Ju(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return(0,X.A)(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return(0,X.A)(function*(){if(qt(t.app))return Promise.reject(Pi(t));const r=e?xt(e):null;return r&&Bt(r.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(r&&r._clone(t))})()}_updateCurrentUser(e,t=!1){var r=this;return(0,X.A)(function*(){if(!r._deleted)return e&&Bt(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),t||(yield r.beforeStateQueue.runMiddleware(e)),r.queue((0,X.A)(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return(0,X.A)(function*(){return qt(e.app)?Promise.reject(Pi(e)):(yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0))})()}setPersistence(e){var t=this;return qt(this.app)?Promise.reject(Pi(this)):this.queue((0,X.A)(function*(){yield t.assertedPersistence.setPersistence(Ci(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){var t=this;return(0,X.A)(function*(){t._getPasswordPolicyInternal()||(yield t._updatePasswordPolicy());const r=t._getPasswordPolicyInternal();return r.schemaVersion!==t.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(t._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var e=this;return(0,X.A)(function*(){const t=yield function Oy(n){return up.apply(this,arguments)}(e),r=new dp(t);null===e.tenantId?e._projectPasswordPolicy=r:e._tenantPasswordPolicies[e.tenantId]=r})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new gn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){var t=this;return(0,X.A)(function*(){if(t.currentUser){const r=yield t.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};null!=t.tenantId&&(s.tenantId=t.tenantId),yield function xl(n,e){return fh.apply(this,arguments)}(t,s)}})()}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var r=this;return(0,X.A)(function*(){const s=yield r.getOrInitRedirectPersistenceManager(t);return null===e?s.removeCurrentUser():s.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return(0,X.A)(function*(){if(!t.redirectPersistenceManager){const r=e&&Ci(e)||t._popupRedirectResolver;Bt(r,t,"argument-error"),t.redirectPersistenceManager=yield ca.create(t,[Ci(r._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return(0,X.A)(function*(){var r,s;return t._isInitialized&&(yield t.queue((0,X.A)(function*(){}))),(null===(r=t._currentUser)||void 0===r?void 0:r._redirectEventId)===e?t._currentUser:(null===(s=t.redirectUser)||void 0===s?void 0:s._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return(0,X.A)(function*(){if(e===t.currentUser)return t.queue((0,X.A)(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const c="function"==typeof t?t:t.next.bind(t);let d=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(Bt(g,this,"internal-error"),g.then(()=>{d||c(this.currentUser)}),"function"==typeof t){const I=e.addObserver(t,r,s);return()=>{d=!0,I()}}{const I=e.addObserver(t);return()=>{d=!0,I()}}}directlySetCurrentUser(e){var t=this;return(0,X.A)(function*(){t.currentUser&&t.currentUser!==e&&t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh(),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Bt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ua(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return(0,X.A)(function*(){var t;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const s=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();s&&(r["X-Firebase-Client"]=s);const c=yield e._getAppCheckToken();return c&&(r["X-Firebase-AppCheck"]=c),r})()}_getAppCheckToken(){var e=this;return(0,X.A)(function*(){var t;const r=yield null===(t=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();return null!=r&&r.error&&function Ri(n,...e){Yi.logLevel<=Tn.WARN&&Yi.warn(`Auth (${Er}): ${n}`,...e)}(`Error while retrieving App Check token: ${r.error}`),null==r?void 0:r.token})()}}function Jr(n){return xt(n)}class Ly{constructor(e){this.auth=e,this.observer=null,this.addObserver=kr(t=>this.observer=t)}get next(){return Bt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let mh={loadJS:()=>(0,X.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bm(n){return mh.loadJS(n)}function eb(n){return`__${n}${Math.floor(1e6*Math.random())}`}class tb{constructor(e){this.type="recaptcha-enterprise",this.auth=Jr(e)}verify(e="verify",t=!1){var r=this;return(0,X.A)(function*(){function c(){return c=(0,X.A)(function*(g){if(!t){if(null==g.tenantId&&null!=g._agentRecaptchaConfig)return g._agentRecaptchaConfig.siteKey;if(null!=g.tenantId&&void 0!==g._tenantRecaptchaConfigs[g.tenantId])return g._tenantRecaptchaConfigs[g.tenantId].siteKey}return new Promise(function(){var I=(0,X.A)(function*(T,k){P(g,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(B=>{if(void 0!==B.recaptchaKey){const K=new Wc(B);return null==g.tenantId?g._agentRecaptchaConfig=K:g._tenantRecaptchaConfigs[g.tenantId]=K,T(K.siteKey)}k(new Error("recaptcha Enterprise site key undefined"))}).catch(B=>{k(B)})});return function(T,k){return I.apply(this,arguments)}}())}),c.apply(this,arguments)}function d(g,I,T){const k=window.grecaptcha;hh(k)?k.enterprise.ready(()=>{k.enterprise.execute(g,{action:e}).then(B=>{I(B)}).catch(()=>{I("NO_RECAPTCHA")})}):T(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((g,I)=>{(function s(g){return c.apply(this,arguments)})(r.auth).then(T=>{if(!t&&hh(window.grecaptcha))d(T,g,I);else{if(typeof window>"u")return void I(new Error("RecaptchaVerifier is only supported in browser"));let k=function Vy(){return mh.recaptchaEnterpriseScript}();0!==k.length&&(k+=T),bm(k).then(()=>{d(T,g,I)}).catch(B=>{I(B)})}}).catch(T=>{I(T)})})})()}}function nb(n,e,t){return hp.apply(this,arguments)}function hp(){return(hp=(0,X.A)(function*(n,e,t,r=!1){const s=new tb(n);let c;try{c=yield s.verify(t)}catch{c=yield s.verify(t,!0)}const d=Object.assign({},e);return Object.assign(d,r?{captchaResp:c}:{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d})).apply(this,arguments)}function w(n,e,t,r){return R.apply(this,arguments)}function R(){return R=(0,X.A)(function*(n,e,t,r){var s;if(null!==(s=n._getRecaptchaConfig())&&void 0!==s&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=yield nb(n,e,t,"getOobCode"===t);return r(n,c)}return r(n,e).catch(function(){var c=(0,X.A)(function*(d){if("auth/missing-recaptcha-token"===d.code){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const g=yield nb(n,e,t,"getOobCode"===t);return r(n,g)}return Promise.reject(d)});return function(d){return c.apply(this,arguments)}}())}),R.apply(this,arguments)}function Me(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Ve(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}class Pn{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return fo("not implemented")}_getIdTokenResponse(e){return fo("not implemented")}_linkToIdToken(e,t){return fo("not implemented")}_getReauthenticationResolver(e){return fo("not implemented")}}function si(n,e){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,X.A)(function*(n,e){return zr(n,"POST","/v1/accounts:resetPassword",Lr(n,e))})).apply(this,arguments)}function rl(){return(rl=(0,X.A)(function*(n,e){return zr(n,"POST","/v1/accounts:update",e)})).apply(this,arguments)}function ss(n,e){return Ll.apply(this,arguments)}function Ll(){return(Ll=(0,X.A)(function*(n,e){return zr(n,"POST","/v1/accounts:signUp",e)})).apply(this,arguments)}function Vl(){return(Vl=(0,X.A)(function*(n,e){return zr(n,"POST","/v1/accounts:update",Lr(n,e))})).apply(this,arguments)}function Uy(n,e){return Qc.apply(this,arguments)}function Qc(){return(Qc=(0,X.A)(function*(n,e){return Ls(n,"POST","/v1/accounts:signInWithPassword",Lr(n,e))})).apply(this,arguments)}function Hr(n,e){return fp.apply(this,arguments)}function fp(){return(fp=(0,X.A)(function*(n,e){return zr(n,"POST","/v1/accounts:sendOobCode",Lr(n,e))})).apply(this,arguments)}function Xo(){return(Xo=(0,X.A)(function*(n,e){return Hr(n,e)})).apply(this,arguments)}function TR(n,e){return rd.apply(this,arguments)}function rd(){return(rd=(0,X.A)(function*(n,e){return Hr(n,e)})).apply(this,arguments)}function _h(n,e){return _s.apply(this,arguments)}function _s(){return(_s=(0,X.A)(function*(n,e){return Hr(n,e)})).apply(this,arguments)}function gp(){return(gp=(0,X.A)(function*(n,e){return Hr(n,e)})).apply(this,arguments)}function ka(){return(ka=(0,X.A)(function*(n,e){return Ls(n,"POST","/v1/accounts:signInWithEmailLink",Lr(n,e))})).apply(this,arguments)}function By(){return(By=(0,X.A)(function*(n,e){return Ls(n,"POST","/v1/accounts:signInWithEmailLink",Lr(n,e))})).apply(this,arguments)}class vh extends Pn{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new vh(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new vh(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if(null!=t&&t.email&&null!=t&&t.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){var t=this;return(0,X.A)(function*(){switch(t.signInMethod){case"password":return w(e,{returnSecureToken:!0,email:t._email,password:t._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Uy);case"emailLink":return function DR(n,e){return ka.apply(this,arguments)}(e,{email:t._email,oobCode:t._password});default:jr(e,"internal-error")}})()}_linkToIdToken(e,t){var r=this;return(0,X.A)(function*(){switch(r.signInMethod){case"password":return w(e,{idToken:t,returnSecureToken:!0,email:r._email,password:r._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ss);case"emailLink":return function rb(n,e){return By.apply(this,arguments)}(e,{idToken:t,email:r._email,oobCode:r._password});default:jr(e,"internal-error")}})()}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}function il(n,e){return mp.apply(this,arguments)}function mp(){return(mp=(0,X.A)(function*(n,e){return Ls(n,"POST","/v1/accounts:signInWithIdp",Lr(n,e))})).apply(this,arguments)}class da extends Pn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new da(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):jr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,c=(0,fs.Tt)(t,["providerId","signInMethod"]);if(!r||!s)return null;const d=new da(r,s);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){return il(e,this.buildRequest())}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,il(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,il(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ln(t)}return e}}function hc(){return(hc=(0,X.A)(function*(n,e){return zr(n,"POST","/v1/accounts:sendVerificationCode",Lr(n,e))})).apply(this,arguments)}function Tm(){return(Tm=(0,X.A)(function*(n,e){return Ls(n,"POST","/v1/accounts:signInWithPhoneNumber",Lr(n,e))})).apply(this,arguments)}function jy(){return(jy=(0,X.A)(function*(n,e){const t=yield Ls(n,"POST","/v1/accounts:signInWithPhoneNumber",Lr(n,e));if(t.temporaryProof)throw tl(n,"account-exists-with-different-credential",t);return t})).apply(this,arguments)}const SR={USER_NOT_FOUND:"user-not-found"};function Am(){return(Am=(0,X.A)(function*(n,e){return Ls(n,"POST","/v1/accounts:signInWithPhoneNumber",Lr(n,Object.assign(Object.assign({},e),{operation:"REAUTH"})),SR)})).apply(this,arguments)}class Oa extends Pn{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Oa({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Oa({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return function Zn(n,e){return Tm.apply(this,arguments)}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return function zO(n,e){return jy.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return function RR(n,e){return Am.apply(this,arguments)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:s}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:s}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:s,temporaryProof:c}=e;return r||t||s||c?new Oa({verificationId:t,verificationCode:r,phoneNumber:s,temporaryProof:c}):null}}class vp{constructor(e){var t,r,s,c,d,g;const I=pr(cr(e)),T=null!==(t=I.apiKey)&&void 0!==t?t:null,k=null!==(r=I.oobCode)&&void 0!==r?r:null,B=function PR(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(s=I.mode)&&void 0!==s?s:null);Bt(T&&k&&B,"argument-error"),this.apiKey=T,this.operation=B,this.code=k,this.continueUrl=null!==(c=I.continueUrl)&&void 0!==c?c:null,this.languageCode=null!==(d=I.languageCode)&&void 0!==d?d:null,this.tenantId=null!==(g=I.tenantId)&&void 0!==g?g:null}static parseLink(e){const t=function MR(n){const e=pr(cr(n)).link,t=e?pr(cr(e)).deep_link_id:null,r=pr(cr(n)).deep_link_id;return(r?pr(cr(r)).link:null)||r||t||e||n}(e);try{return new vp(t)}catch{return null}}}let zy=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return vh._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){const s=vp.parseLink(r);return Bt(s,"argument-error"),vh._fromEmailAndCode(t,s.code,s.tenantId)}}return n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink",n})();class yt{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class dr extends yt{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class id extends dr{static credentialFromJSON(e){const t="string"==typeof e?JSON.parse(e):e;return Bt("providerId"in t&&"signInMethod"in t,"argument-error"),da._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return Bt(e.idToken||e.accessToken,"argument-error"),da._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return id.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return id.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:s,pendingToken:c,nonce:d,providerId:g}=e;if(!r&&!s&&!t&&!c||!g)return null;try{return new id(g)._credential({idToken:t,accessToken:r,nonce:d,pendingToken:c})}catch{return null}}}let Hy=(()=>{class n extends dr{constructor(){super("facebook.com")}static credential(t){return da._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch{return null}}}return n.FACEBOOK_SIGN_IN_METHOD="facebook.com",n.PROVIDER_ID="facebook.com",n})(),Xr=(()=>{class n extends dr{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return da._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:s}=t;if(!r&&!s)return null;try{return n.credential(r,s)}catch{return null}}}return n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com",n})(),Gy=(()=>{class n extends dr{constructor(){super("github.com")}static credential(t){return da._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch{return null}}}return n.GITHUB_SIGN_IN_METHOD="github.com",n.PROVIDER_ID="github.com",n})();class vs extends Pn{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return il(e,this.buildRequest())}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,il(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,il(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:r,signInMethod:s,pendingToken:c}=t;return r&&s&&c&&r===s?new vs(r,c):null}static _create(e,t){return new vs(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class yh extends yt{constructor(e){Bt(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return yh.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return yh.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=vs.fromJSON(e);return Bt(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:r}=e;if(!t||!r)return null;try{return vs._create(r,t)}catch{return null}}}let ib=(()=>{class n extends dr{constructor(){super("twitter.com")}static credential(t,r){return da._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:r,oauthTokenSecret:s}=t;if(!r||!s)return null;try{return n.credential(r,s)}catch{return null}}}return n.TWITTER_SIGN_IN_METHOD="twitter.com",n.PROVIDER_ID="twitter.com",n})();function xR(n,e){return Dm.apply(this,arguments)}function Dm(){return(Dm=(0,X.A)(function*(n,e){return Ls(n,"POST","/v1/accounts:signUp",Lr(n,e))})).apply(this,arguments)}class mi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,s=!1){return(0,X.A)(function*(){const c=yield gs._fromIdTokenResponse(e,r,s),d=Ul(r);return new mi({user:c,providerId:d,_tokenResponse:r,operationType:t})})()}static _forOperation(e,t,r){return(0,X.A)(function*(){yield e._updateTokensIfNecessary(r,!0);const s=Ul(r);return new mi({user:e,providerId:s,_tokenResponse:r,operationType:t})})()}}function Ul(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}function ha(){return(ha=(0,X.A)(function*(n){var e;if(qt(n.app))return Promise.reject(Pi(n));const t=Jr(n);if(yield t._initializationPromise,null!==(e=t.currentUser)&&void 0!==e&&e.isAnonymous)return new mi({user:t.currentUser,providerId:null,operationType:"signIn"});const r=yield xR(t,{returnSecureToken:!0}),s=yield mi._fromIdTokenResponse(t,"signIn",r,!0);return yield t._updateCurrentUser(s.user),s})).apply(this,arguments)}class Fa extends $t{constructor(e,t,r,s){var c;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Fa.prototype),this.customData={appName:e.name,tenantId:null!==(c=e.tenantId)&&void 0!==c?c:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new Fa(e,t,r,s)}}function sb(n,e,t,r){return("reauthenticate"===e?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(c=>{throw"auth/multi-factor-auth-required"===c.code?Fa._fromErrorAndOperation(n,c,e,r):c})}function qy(n){return new Set(n.map(({providerId:e})=>e).filter(e=>!!e))}function Ky(){return Ky=(0,X.A)(function*(n,e){const t=xt(n);yield Ih(!0,t,e);const{providerUserInfo:r}=yield function C(n,e){return z.apply(this,arguments)}(t.auth,{idToken:yield t.getIdToken(),deleteProvider:[e]}),s=qy(r||[]);return t.providerData=t.providerData.filter(c=>s.has(c.providerId)),s.has("phone")||(t.phoneNumber=null),yield t.auth._persistUserIfCurrent(t),t}),Ky.apply(this,arguments)}function Ip(n,e){return Ep.apply(this,arguments)}function Ep(){return(Ep=(0,X.A)(function*(n,e,t=!1){const r=yield Pr(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return mi._forOperation(n,"link",r)})).apply(this,arguments)}function Ih(n,e,t){return Eh.apply(this,arguments)}function Eh(){return(Eh=(0,X.A)(function*(n,e,t){yield Yr(e);const s=!1===n?"provider-already-linked":"no-such-provider";Bt(qy(e.providerData).has(t)===n,e.auth,s)})).apply(this,arguments)}function ab(n,e){return Sm.apply(this,arguments)}function Sm(){return(Sm=(0,X.A)(function*(n,e,t=!1){const{auth:r}=n;if(qt(r.app))return Promise.reject(Pi(r));const s="reauthenticate";try{const c=yield Pr(n,sb(r,s,e,n),t);Bt(c.idToken,r,"internal-error");const d=Yn(c.idToken);Bt(d,r,"internal-error");const{sub:g}=d;return Bt(n.uid===g,r,"user-mismatch"),mi._forOperation(n,s,c)}catch(c){throw"auth/user-not-found"===(null==c?void 0:c.code)&&jr(r,"user-mismatch"),c}})).apply(this,arguments)}function Rm(n,e){return Pm.apply(this,arguments)}function Pm(){return(Pm=(0,X.A)(function*(n,e,t=!1){if(qt(n.app))return Promise.reject(Pi(n));const r="signIn",s=yield sb(n,r,e),c=yield mi._fromIdTokenResponse(n,r,s);return t||(yield n._updateCurrentUser(c.user)),c})).apply(this,arguments)}function Cp(n,e){return Mm.apply(this,arguments)}function Mm(){return(Mm=(0,X.A)(function*(n,e){return Rm(Jr(n),e)})).apply(this,arguments)}function Xy(n,e){return wp.apply(this,arguments)}function wp(){return(wp=(0,X.A)(function*(n,e){const t=xt(n);return yield Ih(!1,t,e.providerId),Ip(t,e)})).apply(this,arguments)}function lb(n,e){return xo.apply(this,arguments)}function xo(){return(xo=(0,X.A)(function*(n,e){return ab(xt(n),e)})).apply(this,arguments)}function ai(){return(ai=(0,X.A)(function*(n,e){return Ls(n,"POST","/v1/accounts:signInWithCustomToken",Lr(n,e))})).apply(this,arguments)}function Qy(){return Qy=(0,X.A)(function*(n,e){if(qt(n.app))return Promise.reject(Pi(n));const t=Jr(n),r=yield function od(n,e){return ai.apply(this,arguments)}(t,{token:e,returnSecureToken:!0}),s=yield mi._fromIdTokenResponse(t,"signIn",r);return yield t._updateCurrentUser(s.user),s}),Qy.apply(this,arguments)}class bp{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Yy._fromServerResponse(e,t):"totpInfo"in t?xm._fromServerResponse(e,t):jr(e,"internal-error")}}class Yy extends bp{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Yy(t)}}class xm extends bp{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new xm(t)}}function Tp(n,e,t){var r;Bt((null===(r=t.url)||void 0===r?void 0:r.length)>0,n,"invalid-continue-uri"),Bt(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(Bt(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(Bt(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}function sd(n){return La.apply(this,arguments)}function La(){return(La=(0,X.A)(function*(n){const e=Jr(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})).apply(this,arguments)}function Ch(){return(Ch=(0,X.A)(function*(n,e,t){const r=Jr(n),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&Tp(r,s,t),yield w(r,s,"getOobCode",TR)})).apply(this,arguments)}function wh(){return wh=(0,X.A)(function*(n,e,t){yield si(xt(n),{oobCode:e,newPassword:t}).catch(function(){var r=(0,X.A)(function*(s){throw"auth/password-does-not-meet-requirements"===s.code&&sd(n),s});return function(s){return r.apply(this,arguments)}}())}),wh.apply(this,arguments)}function km(){return km=(0,X.A)(function*(n,e){yield function Xc(n,e){return Vl.apply(this,arguments)}(xt(n),{oobCode:e})}),km.apply(this,arguments)}function Zy(n,e){return e0.apply(this,arguments)}function e0(){return(e0=(0,X.A)(function*(n,e){const t=xt(n),r=yield si(t,{oobCode:e}),s=r.requestType;switch(Bt(s,t,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Bt(r.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Bt(r.mfaInfo,t,"internal-error");default:Bt(r.email,t,"internal-error")}let c=null;return r.mfaInfo&&(c=bp._fromServerResponse(Jr(t),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:c},operation:s}})).apply(this,arguments)}function ad(){return(ad=(0,X.A)(function*(n,e){const{data:t}=yield Zy(xt(n),e);return t.email})).apply(this,arguments)}function Ap(){return(Ap=(0,X.A)(function*(n,e,t){if(qt(n.app))return Promise.reject(Pi(n));const r=Jr(n),d=yield w(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",xR).catch(I=>{throw"auth/password-does-not-meet-requirements"===I.code&&sd(n),I}),g=yield mi._fromIdTokenResponse(r,"signIn",d);return yield r._updateCurrentUser(g.user),g})).apply(this,arguments)}function t0(){return(t0=(0,X.A)(function*(n,e,t){const r=Jr(n),s={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};(function c(d,g){Bt(g.handleCodeInApp,r,"argument-error"),g&&Tp(r,d,g)})(s,t),yield w(r,s,"getOobCode",_h)})).apply(this,arguments)}function Dp(){return(Dp=(0,X.A)(function*(n,e,t){if(qt(n.app))return Promise.reject(Pi(n));const r=xt(n),s=zy.credentialWithLink(e,t||Rl());return Bt(s._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Cp(r,s)})).apply(this,arguments)}function n0(){return(n0=(0,X.A)(function*(n,e){return zr(n,"POST","/v1/accounts:createAuthUri",Lr(n,e))})).apply(this,arguments)}function Pp(){return Pp=(0,X.A)(function*(n,e){const r={identifier:e,continueUri:Pl()?Rl():"http://localhost"},{signinMethods:s}=yield function Sp(n,e){return n0.apply(this,arguments)}(xt(n),r);return s||[]}),Pp.apply(this,arguments)}function cb(){return cb=(0,X.A)(function*(n,e){const t=xt(n),s={requestType:"VERIFY_EMAIL",idToken:yield n.getIdToken()};e&&Tp(t.auth,s,e);const{email:c}=yield function pp(n,e){return Xo.apply(this,arguments)}(t.auth,s);c!==n.email&&(yield n.reload())}),cb.apply(this,arguments)}function Fm(){return Fm=(0,X.A)(function*(n,e,t){const r=xt(n),c={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield n.getIdToken(),newEmail:e};t&&Tp(r.auth,c,t);const{email:d}=yield function AR(n,e){return gp.apply(this,arguments)}(r.auth,c);d!==n.email&&(yield n.reload())}),Fm.apply(this,arguments)}function Va(){return(Va=(0,X.A)(function*(n,e){return zr(n,"POST","/v1/accounts:update",e)})).apply(this,arguments)}function Th(){return Th=(0,X.A)(function*(n,{displayName:e,photoURL:t}){if(void 0===e&&void 0===t)return;const r=xt(n),c={idToken:yield r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},d=yield Pr(r,function UR(n,e){return Va.apply(this,arguments)}(r.auth,c));r.displayName=d.displayName||null,r.photoURL=d.photoUrl||null;const g=r.providerData.find(({providerId:I})=>"password"===I);g&&(g.displayName=r.displayName,g.photoURL=r.photoURL),yield r._updateTokensIfNecessary(d)}),Th.apply(this,arguments)}function Mp(n,e,t){return xp.apply(this,arguments)}function xp(){return xp=(0,X.A)(function*(n,e,t){const{auth:r}=n,c={idToken:yield n.getIdToken(),returnSecureToken:!0};e&&(c.email=e),t&&(c.password=t);const d=yield Pr(n,function no(n,e){return rl.apply(this,arguments)}(r,c));yield n._updateTokensIfNecessary(d,!0)}),xp.apply(this,arguments)}class ld{constructor(e,t,r={}){this.isNewUser=e,this.providerId=t,this.profile=r}}class o0 extends ld{constructor(e,t,r,s){super(e,t,r),this.username=s}}class hb extends ld{constructor(e,t){super(e,"facebook.com",t)}}class fb extends o0{constructor(e,t){super(e,"github.com",t,"string"==typeof(null==t?void 0:t.login)?null==t?void 0:t.login:null)}}class jR extends ld{constructor(e,t){super(e,"google.com",t)}}class Lm extends o0{constructor(e,t,r){super(e,"twitter.com",t,r)}}function cd(n){const{user:e,_tokenResponse:t}=n;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:function $R(n){var e,t;if(!n)return null;const{providerId:r}=n,s=n.rawUserInfo?JSON.parse(n.rawUserInfo):{},c=n.isNewUser||"identitytoolkit#SignupNewUserResponse"===n.kind;if(!r&&null!=n&&n.idToken){const d=null===(t=null===(e=Yn(n.idToken))||void 0===e?void 0:e.firebase)||void 0===t?void 0:t.sign_in_provider;if(d)return new ld(c,"anonymous"!==d&&"custom"!==d?d:null)}if(!r)return null;switch(r){case"facebook.com":return new hb(c,s);case"github.com":return new fb(c,s);case"google.com":return new jR(c,s);case"twitter.com":return new Lm(c,s,n.screenName||null);case"custom":case"anonymous":return new ld(c,null);default:return new ld(c,r,s)}}(t)}class Jc{constructor(e,t,r){this.type=e,this.credential=t,this.user=r}static _fromIdtoken(e,t){return new Jc("enroll",e,t)}static _fromMfaPendingCredential(e){return new Jc("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,r;if(null!=e&&e.multiFactorSession){if(null!==(t=e.multiFactorSession)&&void 0!==t&&t.pendingCredential)return Jc._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null!==(r=e.multiFactorSession)&&void 0!==r&&r.idToken)return Jc._fromIdtoken(e.multiFactorSession.idToken)}return null}}class Np{constructor(e,t,r){this.session=e,this.hints=t,this.signInResolver=r}static _fromError(e,t){const r=Jr(e),s=t.customData._serverResponse,c=(s.mfaInfo||[]).map(g=>bp._fromServerResponse(r,g));Bt(s.mfaPendingCredential,r,"internal-error");const d=Jc._fromMfaPendingCredential(s.mfaPendingCredential);return new Np(d,c,function(){var g=(0,X.A)(function*(I){const T=yield I._process(r,d);delete s.mfaInfo,delete s.mfaPendingCredential;const k=Object.assign(Object.assign({},s),{idToken:T.idToken,refreshToken:T.refreshToken});switch(t.operationType){case"signIn":const B=yield mi._fromIdTokenResponse(r,t.operationType,k);return yield r._updateCurrentUser(B.user),B;case"reauthenticate":return Bt(t.user,r,"internal-error"),mi._forOperation(t.user,t.operationType,k);default:jr(r,"internal-error")}});return function(I){return g.apply(this,arguments)}}())}resolveSignIn(e){var t=this;return(0,X.A)(function*(){return t.signInResolver(e)})()}}class l0{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(r=>bp._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new l0(e)}getSession(){var e=this;return(0,X.A)(function*(){return Jc._fromIdtoken(yield e.user.getIdToken(),e.user)})()}enroll(e,t){var r=this;return(0,X.A)(function*(){const s=e,c=yield r.getSession(),d=yield Pr(r.user,s._process(r.user.auth,c,t));return yield r.user._updateTokensIfNecessary(d),r.user.reload()})()}unenroll(e){var t=this;return(0,X.A)(function*(){const r="string"==typeof e?e:e.uid,s=yield t.user.getIdToken();try{const c=yield Pr(t.user,function mb(n,e){return zr(n,"POST","/v2/accounts/mfaEnrollment:withdraw",Lr(n,e))}(t.user.auth,{idToken:s,mfaEnrollmentId:r}));t.enrolledFactors=t.enrolledFactors.filter(({uid:d})=>d!==r),yield t.user._updateTokensIfNecessary(c),yield t.user.reload()}catch(c){throw c}})()}}const Um=new WeakMap,Bm="__sak";class QR{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Bm,"1"),this.storage.removeItem(Bm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const kp=(()=>{class n extends QR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function _b(){const n=Ft();return ph(n)||Ol(n)}()&&function cp(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Fl(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const s=this.storage.getItem(r),c=this.localCache[r];s!==c&&t(r,c,s)}}onStorageEvent(t,r=!1){if(!t.key)return void this.forAllChangedKeys((g,I,T)=>{this.notifyListeners(g,T)});const s=t.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const g=this.storage.getItem(s);if(t.newValue!==g)null!==t.newValue?this.storage.setItem(s,t.newValue):this.storage.removeItem(s);else if(this.localCache[s]===t.newValue&&!r)return}const c=()=>{const g=this.storage.getItem(s);!r&&this.localCache[s]===g||this.notifyListeners(s,g)},d=this.storage.getItem(s);!function gh(){return J()&&10===document.documentMode}()||d===t.newValue||t.newValue===t.oldValue?c():setTimeout(c,10)}notifyListeners(t,r){this.localCache[t]=r;const s=this.listeners[t];if(s)for(const c of Array.from(s))c(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:s}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(t,r){var s=()=>super._set,c=this;return(0,X.A)(function*(){yield s().call(c,t,r),c.localCache[t]=JSON.stringify(r)})()}_get(t){var r=()=>super._get,s=this;return(0,X.A)(function*(){const c=yield r().call(s,t);return s.localCache[t]=JSON.stringify(c),c})()}_remove(t){var r=()=>super._remove,s=this;return(0,X.A)(function*(){yield r().call(s,t),delete s.localCache[t]})()}}return n.type="LOCAL",n})(),Bl=(()=>{class n extends QR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})();let yb=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(c=>c.isListeningto(t));if(r)return r;const s=new n(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}handleEvent(t){var r=this;return(0,X.A)(function*(){const s=t,{eventId:c,eventType:d,data:g}=s.data,I=r.handlersMap[d];if(null==I||!I.size)return;s.ports[0].postMessage({status:"ack",eventId:c,eventType:d});const T=Array.from(I).map(function(){var B=(0,X.A)(function*(K){return K(s.origin,g)});return function(K){return B.apply(this,arguments)}}()),k=yield function fc(n){return Promise.all(n.map(function(){var e=(0,X.A)(function*(t){try{return{fulfilled:!0,value:yield t}}catch(r){return{fulfilled:!1,reason:r}}});return function(t){return e.apply(this,arguments)}}()))}(T);s.ports[0].postMessage({status:"done",eventId:c,eventType:d,response:k})})()}_subscribe(t,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||0===this.handlersMap[t].size)&&delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return n.receivers=[],n})();function $l(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(10*Math.random());return n+t}class YR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){var s=this;return(0,X.A)(function*(){const c=typeof MessageChannel<"u"?new MessageChannel:null;if(!c)throw new Error("connection_unavailable");let d,g;return new Promise((I,T)=>{const k=$l("",20);c.port1.start();const B=setTimeout(()=>{T(new Error("unsupported_event"))},r);g={messageChannel:c,onMessage(K){const ue=K;if(ue.data.eventId===k)switch(ue.data.status){case"ack":clearTimeout(B),d=setTimeout(()=>{T(new Error("timeout"))},3e3);break;case"done":clearTimeout(d),I(ue.data.response);break;default:clearTimeout(B),clearTimeout(d),T(new Error("invalid_response"))}}},s.handlers.add(g),c.port1.addEventListener("message",g.onMessage),s.target.postMessage({eventType:e,eventId:k,data:t},[c.port2])}).finally(()=>{g&&s.removeMessageHandler(g)})})()}}function ro(){return window}function Eb(){return typeof ro().WorkerGlobalScope<"u"&&"function"==typeof ro().importScripts}function Cb(){return(Cb=(0,X.A)(function*(){if(null==navigator||!navigator.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const wb="firebaseLocalStorageDb",Zc="firebaseLocalStorage",c0="fbase_key";class Op{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Sh(n,e){return n.transaction([Zc],e?"readwrite":"readonly").objectStore(Zc)}function u0(){const n=indexedDB.open(wb,1);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Zc,{keyPath:c0})}catch(s){t(s)}}),n.addEventListener("success",(0,X.A)(function*(){const r=n.result;r.objectStoreNames.contains(Zc)?e(r):(r.close(),yield function jl(){const n=indexedDB.deleteDatabase(wb);return new Op(n).toPromise()}(),e(yield u0()))}))})}function $m(n,e,t){return ud.apply(this,arguments)}function ud(){return(ud=(0,X.A)(function*(n,e,t){const r=Sh(n,!0).put({[c0]:e,value:t});return new Op(r).toPromise()})).apply(this,arguments)}function jm(){return(jm=(0,X.A)(function*(n,e){const t=Sh(n,!1).get(e),r=yield new Op(t).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function d0(n,e){const t=Sh(n,!0).delete(e);return new Op(t).toPromise()}const Rh=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var t=this;return(0,X.A)(function*(){return t.db||(t.db=yield u0()),t.db})()}_withRetries(t){var r=this;return(0,X.A)(function*(){let s=0;for(;;)try{const c=yield r._openDb();return yield t(c)}catch(c){if(s++>3)throw c;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var t=this;return(0,X.A)(function*(){return Eb()?t.initializeReceiver():t.initializeSender()})()}initializeReceiver(){var t=this;return(0,X.A)(function*(){t.receiver=yb._getInstance(function ZO(){return Eb()?self:null}()),t.receiver._subscribe("keyChanged",function(){var r=(0,X.A)(function*(s,c){return{keyProcessed:(yield t._poll()).includes(c.key)}});return function(s,c){return r.apply(this,arguments)}}()),t.receiver._subscribe("ping",function(){var r=(0,X.A)(function*(s,c){return["keyChanged"]});return function(s,c){return r.apply(this,arguments)}}())})()}initializeSender(){var t=this;return(0,X.A)(function*(){var r,s;if(t.activeServiceWorker=yield function YO(){return Cb.apply(this,arguments)}(),!t.activeServiceWorker)return;t.sender=new YR(t.activeServiceWorker);const c=yield t.sender._send("ping",{},800);c&&null!==(r=c[0])&&void 0!==r&&r.fulfilled&&null!==(s=c[0])&&void 0!==s&&s.value.includes("keyChanged")&&(t.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(t){var r=this;return(0,X.A)(function*(){if(r.sender&&r.activeServiceWorker&&function JO(){var n;return(null===(n=null==navigator?void 0:navigator.serviceWorker)||void 0===n?void 0:n.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:t},r.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,X.A)(function*(){try{if(!indexedDB)return!1;const t=yield u0();return yield $m(t,Bm,"1"),yield d0(t,Bm),!0}catch{}return!1})()}_withPendingWrite(t){var r=this;return(0,X.A)(function*(){r.pendingWrites++;try{yield t()}finally{r.pendingWrites--}})()}_set(t,r){var s=this;return(0,X.A)(function*(){return s._withPendingWrite((0,X.A)(function*(){return yield s._withRetries(c=>$m(c,t,r)),s.localCache[t]=r,s.notifyServiceWorker(t)}))})()}_get(t){var r=this;return(0,X.A)(function*(){const s=yield r._withRetries(c=>function JR(n,e){return jm.apply(this,arguments)}(c,t));return r.localCache[t]=s,s})()}_remove(t){var r=this;return(0,X.A)(function*(){return r._withPendingWrite((0,X.A)(function*(){return yield r._withRetries(s=>d0(s,t)),delete r.localCache[t],r.notifyServiceWorker(t)}))})()}_poll(){var t=this;return(0,X.A)(function*(){const r=yield t._withRetries(d=>{const g=Sh(d,!1).getAll();return new Op(g).toPromise()});if(!r)return[];if(0!==t.pendingWrites)return[];const s=[],c=new Set;if(0!==r.length)for(const{fbase_key:d,value:g}of r)c.add(d),JSON.stringify(t.localCache[d])!==JSON.stringify(g)&&(t.notifyListeners(d,g),s.push(d));for(const d of Object.keys(t.localCache))t.localCache[d]&&!c.has(d)&&(t.notifyListeners(d,null),s.push(d));return s})()}notifyListeners(t,r){this.localCache[t]=r;const s=this.listeners[t];if(s)for(const c of Array.from(s))c(r)}startPolling(){var t=this;this.stopPolling(),this.pollTimer=setInterval((0,X.A)(function*(){return t._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return n.type="LOCAL",n})(),Qo=1e12;class h0{constructor(e){this.auth=e,this.counter=Qo,this._widgets=new Map}render(e,t){const r=this.counter;return this._widgets.set(r,new Ab(e,this.auth.name,t||{})),this.counter++,r}reset(e){var t;const r=e||Qo;null===(t=this._widgets.get(r))||void 0===t||t.delete(),this._widgets.delete(r)}getResponse(e){var t;return(null===(t=this._widgets.get(e||Qo))||void 0===t?void 0:t.getResponse())||""}execute(e){var t=this;return(0,X.A)(function*(){var r;return null===(r=t._widgets.get(e||Qo))||void 0===r||r.execute(),""})()}}class Ab{constructor(e,t,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const s="string"==typeof e?document.getElementById(e):e;Bt(s,"argument-error",{appName:t}),this.container=s,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function f0(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<n;r++)e.push(t.charAt(Math.floor(62*Math.random())));return e.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const No=eb("rcb"),Fp=new Fs(3e4,6e4);class Db{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(e=ro().grecaptcha)||void 0===e||!e.render)}load(e,t=""){return Bt(function Sb(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&td(ro().grecaptcha)?Promise.resolve(ro().grecaptcha):new Promise((r,s)=>{const c=ro().setTimeout(()=>{s(ii(e,"network-request-failed"))},Fp.get());ro()[No]=()=>{ro().clearTimeout(c),delete ro()[No];const g=ro().grecaptcha;if(!g||!td(g))return void s(ii(e,"internal-error"));const I=g.render;g.render=(T,k)=>{const B=I(T,k);return this.counter++,B},this.hostLanguage=t,r(g)},bm(`${function Jw(){return mh.recaptchaV2Script}()}?${Ln({onload:No,render:"explicit",hl:t})}`).catch(()=>{clearTimeout(c),s(ii(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!(null===(t=ro().grecaptcha)||void 0===t||!t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class rP{load(e){return(0,X.A)(function*(){return new h0(e)})()}clearedOneInstance(){}}const p0="recaptcha",iP={theme:"light",type:"image"};class Rb{constructor(e,t,r=Object.assign({},iP)){this.parameters=r,this.type=p0,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Jr(e),this.isInvisible="invisible"===this.parameters.size,Bt(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const s="string"==typeof t?document.getElementById(t):t;Bt(s,this.auth,"argument-error"),this.container=s,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new rP:new Db,this.validateStartingState()}verify(){var e=this;return(0,X.A)(function*(){e.assertNotDestroyed();const t=yield e.render(),r=e.getAssertedRecaptcha();return r.getResponse(t)||new Promise(c=>{const d=g=>{g&&(e.tokenChangeListeners.delete(d),c(g))};e.tokenChangeListeners.add(d),e.isInvisible&&r.execute(t)})})()}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){Bt(!this.parameters.sitekey,this.auth,"argument-error"),Bt(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Bt(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(r=>r(t)),"function"==typeof e)e(t);else if("string"==typeof e){const r=ro()[e];"function"==typeof r&&r(t)}}}assertNotDestroyed(){Bt(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var e=this;return(0,X.A)(function*(){if(yield e.init(),!e.widgetId){let t=e.container;if(!e.isInvisible){const r=document.createElement("div");t.appendChild(r),t=r}e.widgetId=e.getAssertedRecaptcha().render(t,e.parameters)}return e.widgetId})()}init(){var e=this;return(0,X.A)(function*(){Bt(Pl()&&!Eb(),e.auth,"internal-error"),yield function oP(){let n=null;return new Promise(e=>{"complete"!==document.readyState?(n=()=>e(),window.addEventListener("load",n)):e()}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}(),e.recaptcha=yield e._recaptchaLoader.load(e.auth,e.auth.languageCode||void 0);const t=yield function Vs(n){return E.apply(this,arguments)}(e.auth);Bt(t,e.auth,"internal-error"),e.parameters.sitekey=t})()}getAssertedRecaptcha(){return Bt(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Gm{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Oa._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}function g0(){return(g0=(0,X.A)(function*(n,e,t){if(qt(n.app))return Promise.reject(Pi(n));const r=Jr(n),s=yield Lp(r,e,xt(t));return new Gm(s,c=>Cp(r,c))})).apply(this,arguments)}function m0(){return(m0=(0,X.A)(function*(n,e,t){const r=xt(n);yield Ih(!1,r,"phone");const s=yield Lp(r.auth,e,xt(t));return new Gm(s,c=>Xy(r,c))})).apply(this,arguments)}function Wm(){return(Wm=(0,X.A)(function*(n,e,t){const r=xt(n);if(qt(r.auth.app))return Promise.reject(Pi(r.auth));const s=yield Lp(r.auth,e,xt(t));return new Gm(s,c=>lb(r,c))})).apply(this,arguments)}function Lp(n,e,t){return Ph.apply(this,arguments)}function Ph(){return Ph=(0,X.A)(function*(n,e,t){var r;const s=yield t.verify();try{let c;if(Bt("string"==typeof s,n,"argument-error"),Bt(t.type===p0,n,"argument-error"),c="string"==typeof e?{phoneNumber:e}:e,"session"in c){const d=c.session;if("phoneNumber"in c)return Bt("enroll"===d.type,n,"internal-error"),(yield function gb(n,e){return zr(n,"POST","/v2/accounts/mfaEnrollment:start",Lr(n,e))}(n,{idToken:d.credential,phoneEnrollmentInfo:{phoneNumber:c.phoneNumber,recaptchaToken:s}})).phoneSessionInfo.sessionInfo;{Bt("signin"===d.type,n,"internal-error");const g=(null===(r=c.multiFactorHint)||void 0===r?void 0:r.uid)||c.multiFactorUid;return Bt(g,n,"missing-multi-factor-info"),(yield function ZR(n,e){return zr(n,"POST","/v2/accounts/mfaSignIn:start",Lr(n,e))}(n,{mfaPendingCredential:d.credential,mfaEnrollmentId:g,phoneSignInInfo:{recaptchaToken:s}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:d}=yield function $y(n,e){return hc.apply(this,arguments)}(n,{phoneNumber:c.phoneNumber,recaptchaToken:s});return d}}finally{t._reset()}}),Ph.apply(this,arguments)}function qm(){return(qm=(0,X.A)(function*(n,e){const t=xt(n);if(qt(t.auth.app))return Promise.reject(Pi(t.auth));yield Ip(t,e)})).apply(this,arguments)}let Mh=(()=>{class n{constructor(t){this.providerId=n.PROVIDER_ID,this.auth=Jr(t)}verifyPhoneNumber(t,r){return Lp(this.auth,t,xt(r))}static credential(t,r){return Oa._fromVerification(t,r)}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{phoneNumber:r,temporaryProof:s}=t;return r&&s?Oa._fromTokenResponse(r,s):null}}return n.PROVIDER_ID="phone",n.PHONE_SIGN_IN_METHOD="phone",n})();function eu(n,e){return e?Ci(e):(Bt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class _0 extends Pn{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return il(e,this._buildIdpRequest())}_linkToIdToken(e,t){return il(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return il(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function lP(n){return Rm(n.auth,new _0(n),n.bypassAuthState)}function cP(n){const{auth:e,user:t}=n;return Bt(t,e,"internal-error"),ab(t,new _0(n),n.bypassAuthState)}function uP(n){return Km.apply(this,arguments)}function Km(){return(Km=(0,X.A)(function*(n){const{auth:e,user:t}=n;return Bt(t,e,"internal-error"),Ip(t,new _0(n),n.bypassAuthState)})).apply(this,arguments)}class dP{constructor(e,t,r,s,c=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=(0,X.A)(function*(r,s){e.pendingPromise={resolve:r,reject:s};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(c){e.reject(c)}});return function(r,s){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return(0,X.A)(function*(){const{urlResponse:r,sessionId:s,postBody:c,tenantId:d,error:g,type:I}=e;if(g)return void t.reject(g);const T={auth:t.auth,requestUri:r,sessionId:s,tenantId:d||void 0,postBody:c||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(I)(T))}catch(k){t.reject(k)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return lP;case"linkViaPopup":case"linkViaRedirect":return uP;case"reauthViaPopup":case"reauthViaRedirect":return cP;default:jr(this.auth,"internal-error")}}resolve(e){$i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const xb=new Fs(2e3,1e4);function v0(){return(v0=(0,X.A)(function*(n,e,t){if(qt(n.app))return Promise.reject(ii(n,"operation-not-supported-in-this-environment"));const r=Jr(n);Os(n,e,yt);const s=eu(r,t);return new I0(r,"signInViaPopup",e,s).executeNotNull()})).apply(this,arguments)}function y0(){return(y0=(0,X.A)(function*(n,e,t){const r=xt(n);if(qt(r.auth.app))return Promise.reject(ii(r.auth,"operation-not-supported-in-this-environment"));Os(r.auth,e,yt);const s=eu(r.auth,t);return new I0(r.auth,"reauthViaPopup",e,s,r).executeNotNull()})).apply(this,arguments)}function Vp(){return(Vp=(0,X.A)(function*(n,e,t){const r=xt(n);Os(r.auth,e,yt);const s=eu(r.auth,t);return new I0(r.auth,"linkViaPopup",e,s,r).executeNotNull()})).apply(this,arguments)}let I0=(()=>{class n extends dP{constructor(t,r,s,c,d){super(t,r,c,d),this.provider=s,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){var t=this;return(0,X.A)(function*(){const r=yield t.execute();return Bt(r,t.auth,"internal-error"),r})()}onExecution(){var t=this;return(0,X.A)(function*(){$i(1===t.filter.length,"Popup operations only handle one event");const r=$l();t.authWindow=yield t.resolver._openPopup(t.auth,t.provider,t.filter[0],r),t.authWindow.associatedEvent=r,t.resolver._originValidation(t.auth).catch(s=>{t.reject(s)}),t.resolver._isIframeWebStorageSupported(t.auth,s=>{s||t.reject(ii(t.auth,"web-storage-unsupported"))}),t.pollUserCancellation()})()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(ii(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){const t=()=>{var r,s;this.pollId=null!==(s=null===(r=this.authWindow)||void 0===r?void 0:r.window)&&void 0!==s&&s.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ii(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(t,xb.get())};t()}}return n.currentPopupAction=null,n})();const tu="pendingRedirect",xh=new Map;class fP extends dP{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){var e=()=>super.execute,t=this;return(0,X.A)(function*(){let r=xh.get(t.auth._key());if(!r){try{const c=(yield function kb(n,e){return Up.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;r=()=>Promise.resolve(c)}catch(s){r=()=>Promise.reject(s)}xh.set(t.auth._key(),r)}return t.bypassAuthState||xh.set(t.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,r=this;return(0,X.A)(function*(){if("signInViaRedirect"===e.type)return t().call(r,e);if("unknown"!==e.type){if(e.eventId){const s=yield r.auth._redirectUserForId(e.eventId);if(s)return r.user=s,t().call(r,e);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return(0,X.A)(function*(){})()}cleanUp(){}}function Up(){return(Up=(0,X.A)(function*(n,e){const t=gP(e),r=Lb(n);if(!(yield r._isAvailable()))return!1;const s="true"===(yield r._get(t));return yield r._remove(t),s})).apply(this,arguments)}function Ob(n,e){return Fb.apply(this,arguments)}function Fb(){return(Fb=(0,X.A)(function*(n,e){return Lb(n)._set(gP(e),"true")})).apply(this,arguments)}function E0(n,e){xh.set(n._key(),e)}function Lb(n){return Ci(n._redirectPersistence)}function gP(n){return ms(tu,n.config.apiKey,n.name)}function tF(n,e,t){return function Xm(n,e,t){return C0.apply(this,arguments)}(n,e,t)}function C0(){return(C0=(0,X.A)(function*(n,e,t){if(qt(n.app))return Promise.reject(Pi(n));const r=Jr(n);Os(n,e,yt),yield r._initializationPromise;const s=eu(r,t);return yield Ob(s,r),s._openRedirect(r,e,"signInViaRedirect")})).apply(this,arguments)}function w0(n,e,t){return function b0(n,e,t){return nu.apply(this,arguments)}(n,e,t)}function nu(){return(nu=(0,X.A)(function*(n,e,t){const r=xt(n);if(Os(r.auth,e,yt),qt(r.auth.app))return Promise.reject(Pi(r.auth));yield r.auth._initializationPromise;const s=eu(r.auth,t);yield Ob(s,r.auth);const c=yield Oh(r);return s._openRedirect(r.auth,e,"reauthViaRedirect",c)})).apply(this,arguments)}function Qm(n,e,t){return function Ym(n,e,t){return ru.apply(this,arguments)}(n,e,t)}function ru(){return(ru=(0,X.A)(function*(n,e,t){const r=xt(n);Os(r.auth,e,yt),yield r.auth._initializationPromise;const s=eu(r.auth,t);yield Ih(!1,r,e.providerId),yield Ob(s,r.auth);const c=yield Oh(r);return s._openRedirect(r.auth,e,"linkViaRedirect",c)})).apply(this,arguments)}function iu(){return(iu=(0,X.A)(function*(n,e){return yield Jr(n)._initializationPromise,Nh(n,e,!1)})).apply(this,arguments)}function Nh(n,e){return kh.apply(this,arguments)}function kh(){return(kh=(0,X.A)(function*(n,e,t=!1){if(qt(n.app))return Promise.reject(Pi(n));const r=Jr(n),s=eu(r,e),d=yield new fP(r,s,t).execute();return d&&!t&&(delete d.user._redirectEventId,yield r._persistUserIfCurrent(d.user),yield r._setRedirectUser(null,e)),d})).apply(this,arguments)}function Oh(n){return Vb.apply(this,arguments)}function Vb(){return(Vb=(0,X.A)(function*(n){const e=$l(`${n.uid}:::`);return n._redirectEventId=e,yield n.auth._setRedirectUser(n),yield n.auth._persistUserIfCurrent(n),e})).apply(this,arguments)}class Fh{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function mP(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return A0(n);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!A0(e)){const s=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";t.onError(ii(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ub(e))}saveEventToCache(e){this.cachedEventUids.add(Ub(e)),this.lastProcessedEventTime=Date.now()}}function Ub(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function A0({type:n,error:e}){return"unknown"===n&&"auth/no-auth-event"===(null==e?void 0:e.code)}function Bb(n){return $p.apply(this,arguments)}function $p(){return($p=(0,X.A)(function*(n,e={}){return zr(n,"GET","/v1/projects",e)})).apply(this,arguments)}const $b=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_P=/^https?/;function dd(){return(dd=(0,X.A)(function*(n){if(n.config.emulator)return;const{authorizedDomains:e}=yield Bb(n);for(const t of e)try{if(jb(t))return}catch{}jr(n,"unauthorized-domain")})).apply(this,arguments)}function jb(n){const e=Rl(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const d=new URL(n);return""===d.hostname&&""===r?"chrome-extension:"===t&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===t&&d.hostname===r}if(!_P.test(t))return!1;if($b.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const D0=new Fs(3e4,6e4);function zb(){const n=ro().___jsl;if(null!=n&&n.H)for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}let S0=null;const yP=new Fs(5e3,15e3),Jm="__/auth/iframe",R0="emulator/auth/iframe",IP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Hb=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function P0(n){const e=n.config;Bt(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?ps(e,R0):`https://${n.config.authDomain}/${Jm}`,r={apiKey:e.apiKey,appName:n.name,v:Er},s=Hb.get(n.config.apiHost);s&&(r.eid=s);const c=n._getFrameworks();return c.length&&(r.fw=c.join(",")),`${t}?${Ln(r).slice(1)}`}function Lh(){return Lh=(0,X.A)(function*(n){const e=yield function jp(n){return S0=S0||function nF(n){return new Promise((e,t)=>{var r,s,c;function d(){zb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{zb(),t(ii(n,"network-request-failed"))},timeout:D0.get()})}if(null!==(s=null===(r=ro().gapi)||void 0===r?void 0:r.iframes)&&void 0!==s&&s.Iframe)e(gapi.iframes.getContext());else{if(null===(c=ro().gapi)||void 0===c||!c.load){const g=eb("iframefcb");return ro()[g]=()=>{gapi.load?d():t(ii(n,"network-request-failed"))},bm(`${function Zw(){return mh.gapiScript}()}?onload=${g}`).catch(I=>t(I))}d()}}).catch(e=>{throw S0=null,e})}(n),S0}(n),t=ro().gapi;return Bt(t,n,"internal-error"),e.open({where:document.body,url:P0(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IP,dontclear:!0},r=>new Promise(function(){var s=(0,X.A)(function*(c,d){yield r.restyle({setHideOnLeave:!1});const g=ii(n,"network-request-failed"),I=ro().setTimeout(()=>{d(g)},yP.get());function T(){ro().clearTimeout(I),c(r)}r.ping(T).then(T,()=>{d(g)})});return function(c,d){return s.apply(this,arguments)}}()))}),Lh.apply(this,arguments)}const Gb={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class hd{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const rF="__/auth/handler",t_="emulator/auth/handler",x0=encodeURIComponent("fac");function n_(n,e,t,r,s,c){return r_.apply(this,arguments)}function r_(){return(r_=(0,X.A)(function*(n,e,t,r,s,c){Bt(n.config.authDomain,n,"auth-domain-config-required"),Bt(n.config.apiKey,n,"invalid-api-key");const d={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Er,eventId:s};if(e instanceof yt){e.setDefaultLanguage(n.languageCode),d.providerId=e.providerId||"",Bn(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[k,B]of Object.entries(c||{}))d[k]=B}if(e instanceof dr){const k=e.getScopes().filter(B=>""!==B);k.length>0&&(d.scopes=k.join(","))}n.tenantId&&(d.tid=n.tenantId);const g=d;for(const k of Object.keys(g))void 0===g[k]&&delete g[k];const I=yield n._getAppCheckToken(),T=I?`#${x0}=${encodeURIComponent(I)}`:"";return`${function Kb({config:n}){return n.emulator?ps(n,t_):`https://${n.authDomain}/${rF}`}(n)}?${Ln(g).slice(1)}${T}`})).apply(this,arguments)}const i_="webStorageSupport",Xb=class wP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Bl,this._completeRedirectFn=Nh,this._overrideRedirectResult=E0}_openPopup(e,t,r,s){var c=this;return(0,X.A)(function*(){var d;$i(null===(d=c.eventManagers[e._key()])||void 0===d?void 0:d.manager,"_initialize() not called before _openPopup()");const g=yield n_(e,t,r,Rl(),s);return function EP(n,e,t,r=500,s=600){const c=Math.max((window.screen.availHeight-s)/2,0).toString(),d=Math.max((window.screen.availWidth-r)/2,0).toString();let g="";const I=Object.assign(Object.assign({},Gb),{width:r.toString(),height:s.toString(),top:c,left:d}),T=Ft().toLowerCase();t&&(g=nd(T)?"_blank":t),Jn(T)&&(e=e||"http://localhost",I.scrollbars="yes");const k=Object.entries(I).reduce((K,[ue,De])=>`${K}${ue}=${De},`,"");if(function Ko(n=Ft()){var e;return Ol(n)&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(T)&&"_self"!==g)return function CP(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}(e||"",g),new hd(null);const B=window.open(e||"",g,k);Bt(B,n,"popup-blocked");try{B.focus()}catch{}return new hd(B)}(e,g,$l())})()}_openRedirect(e,t,r,s){var c=this;return(0,X.A)(function*(){return yield c._originValidation(e),function Ib(n){ro().location.href=n}(yield n_(e,t,r,Rl(),s)),new Promise(()=>{})})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:c}=this.eventManagers[t];return s?Promise.resolve(s):($i(c,"If manager is not set, promise should be"),c)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){var t=this;return(0,X.A)(function*(){const r=yield function Zm(n){return Lh.apply(this,arguments)}(e),s=new Fh(e);return r.register("authEvent",c=>(Bt(null==c?void 0:c.authEvent,e,"invalid-auth-event"),{status:s.onEvent(c.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:s},t.iframes[e._key()]=r,s})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(i_,{type:i_},s=>{var c;const d=null===(c=null==s?void 0:s[0])||void 0===c?void 0:c[i_];void 0!==d&&t(!!d),jr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function vP(n){return dd.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Fl()||ph()||Ol()}};class Qb{constructor(e){this.factorId=e}_process(e,t,r){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,r);case"signin":return this._finalizeSignIn(e,t.credential);default:return fo("unexpected MultiFactorSessionType")}}}class N0 extends Qb{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new N0(e)}_finalizeEnroll(e,t,r){return function qR(n,e){return zr(n,"POST","/v2/accounts/mfaEnrollment:finalize",Lr(n,e))}(e,{idToken:t,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function eP(n,e){return zr(n,"POST","/v2/accounts/mfaSignIn:finalize",Lr(n,e))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let bP=(()=>{class n{constructor(){}static assertion(t){return N0._fromCredential(t)}}return n.FACTOR_ID="phone",n})();var TP="@firebase/auth";class iF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return(0,X.A)(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((null==r?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Bt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ol(){return window}ke(),function Yw(n){mh=n}({loadJS:n=>new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const c=ii("internal-error");c.customData=s,t(c)},r.type="text/javascript",r.charset="UTF-8",function pc(){var n,e;return null!==(e=null===(n=document.getElementsByTagName("head"))||void 0===n?void 0:n[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Jb(n){Et(new ar("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:g}=r.options;Bt(d&&!d.includes(":"),"invalid-api-key",{appName:r.name});const I={apiKey:d,authDomain:g,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ua(n)},T=new Fy(r,s,c,I);return function q(n,e){const t=(null==e?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Ci);null!=e&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,null==e?void 0:e.popupRedirectResolver)}(T,t),T},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Et(new ar("auth-internal",e=>{const t=Jr(e.getProvider("auth").getImmediate());return new iF(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Cr(TP,"1.7.4",function oF(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(n)),Cr(TP,"1.7.4","esm2017")}("Browser");function o_(){return o_=(0,X.A)(function*(n,e,t){var r;const{BuildInfo:s}=ol();$i(e.sessionId,"AuthEvent did not contain a session ID");const c=yield function cF(n){return s_.apply(this,arguments)}(e.sessionId),d={};return Ol()?d.ibi=s.packageName:nl()?d.apn=s.packageName:jr(n,"operation-not-supported-in-this-environment"),s.displayName&&(d.appDisplayName=s.displayName),d.sessionId=c,n_(n,t,e.type,void 0,null!==(r=e.eventId)&&void 0!==r?r:void 0,d)}),o_.apply(this,arguments)}function rT(){return rT=(0,X.A)(function*(n){const{BuildInfo:e}=ol(),t={};Ol()?t.iosBundleId=e.packageName:nl()?t.androidPackageName=e.packageName:jr(n,"operation-not-supported-in-this-environment"),yield Bb(n,t)}),rT.apply(this,arguments)}function zp(){return zp=(0,X.A)(function*(n,e,t){const{cordova:r}=ol();let s=()=>{};try{yield new Promise((c,d)=>{let g=null;function I(){var B;c();const K=null===(B=r.plugins.browsertab)||void 0===B?void 0:B.close;"function"==typeof K&&K(),"function"==typeof(null==t?void 0:t.close)&&t.close()}function T(){g||(g=window.setTimeout(()=>{d(ii(n,"redirect-cancelled-by-user"))},2e3))}function k(){"visible"===(null==document?void 0:document.visibilityState)&&T()}e.addPassiveListener(I),document.addEventListener("resume",T,!1),nl()&&document.addEventListener("visibilitychange",k,!1),s=()=>{e.removePassiveListener(I),document.removeEventListener("resume",T,!1),document.removeEventListener("visibilitychange",k,!1),g&&window.clearTimeout(g)}})}finally{s()}}),zp.apply(this,arguments)}function s_(){return s_=(0,X.A)(function*(n){const e=function PP(n){if($i(/[0-9a-zA-Z]+/.test(n),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(n);const e=new ArrayBuffer(n.length),t=new Uint8Array(e);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}(n),t=yield crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(s=>s.toString(16).padStart(2,"0")).join("")}),s_.apply(this,arguments)}class xP extends Fh{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}initialized(){var e=this;return(0,X.A)(function*(){yield e.initPromise})()}}function F0(n){return a_.apply(this,arguments)}function a_(){return a_=(0,X.A)(function*(n){const e=yield l_()._get(Vh(n));return e&&(yield l_()._remove(Vh(n))),e}),a_.apply(this,arguments)}function FP(){const n=[];for(let t=0;t<20;t++){const r=Math.floor(62*Math.random());n.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(r))}return n.join("")}function l_(){return Ci(kp)}function Vh(n){return ms("authEvent",n.config.apiKey,n.name)}function c_(n){if(null==n||!n.includes("?"))return{};const[e,...t]=n.split("?");return pr(t.join("?"))}const UP=class VP{constructor(){this._redirectPersistence=Bl,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Nh,this._overrideRedirectResult=E0}_initialize(e){var t=this;return(0,X.A)(function*(){const r=e._key();let s=t.eventManagers.get(r);return s||(s=new xP(e),t.eventManagers.set(r,s),t.attachCallbackListeners(e,s)),s})()}_openPopup(e){jr(e,"operation-not-supported-in-this-environment")}_openRedirect(e,t,r,s){var c=this;return(0,X.A)(function*(){!function lF(n){var e,t,r,s,c,d,g,I,T,k;const B=ol();Bt("function"==typeof(null===(e=null==B?void 0:B.universalLinks)||void 0===e?void 0:e.subscribe),n,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Bt(typeof(null===(t=null==B?void 0:B.BuildInfo)||void 0===t?void 0:t.packageName)<"u",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Bt("function"==typeof(null===(c=null===(s=null===(r=null==B?void 0:B.cordova)||void 0===r?void 0:r.plugins)||void 0===s?void 0:s.browsertab)||void 0===c?void 0:c.openUrl),n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Bt("function"==typeof(null===(I=null===(g=null===(d=null==B?void 0:B.cordova)||void 0===d?void 0:d.plugins)||void 0===g?void 0:g.browsertab)||void 0===I?void 0:I.isAvailable),n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Bt("function"==typeof(null===(k=null===(T=null==B?void 0:B.cordova)||void 0===T?void 0:T.InAppBrowser)||void 0===k?void 0:k.open),n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const d=yield c._initialize(e);yield d.initialized(),d.resetRedirect(),function pP(){xh.clear()}(),yield c._originValidation(e);const g=function NP(n,e,t=null){return{type:e,eventId:t,urlResponse:null,sessionId:FP(),postBody:null,tenantId:n.tenantId,error:ii(n,"no-auth-event")}}(e,r,s);yield function kP(n,e){return l_()._set(Vh(n),e)}(e,g);const I=yield function nT(n,e,t){return o_.apply(this,arguments)}(e,g,t),T=yield function aF(n){const{cordova:e}=ol();return new Promise(t=>{e.plugins.browsertab.isAvailable(r=>{let s=null;r?e.plugins.browsertab.openUrl(n):s=e.InAppBrowser.open(n,function Mo(n=Ft()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(n)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(n)}()?"_blank":"_system","location=yes"),t(s)})})}(I);return function O0(n,e,t){return zp.apply(this,arguments)}(e,d,T)})()}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function sF(n){return rT.apply(this,arguments)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:r,handleOpenURL:s,BuildInfo:c}=ol(),d=setTimeout((0,X.A)(function*(){yield F0(e),t.onEvent(V0())}),500),g=function(){var k=(0,X.A)(function*(B){clearTimeout(d);const K=yield F0(e);let ue=null;K&&null!=B&&B.url&&(ue=function OP(n,e){var t,r;const s=function L0(n){const e=c_(n),t=e.link?decodeURIComponent(e.link):void 0,r=c_(t).link,s=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return c_(s).link||s||r||t||n}(e);if(s.includes("/__/auth/callback")){const c=c_(s),d=c.firebaseError?function LP(n){try{return JSON.parse(n)}catch{return null}}(decodeURIComponent(c.firebaseError)):null,g=null===(r=null===(t=null==d?void 0:d.code)||void 0===t?void 0:t.split("auth/"))||void 0===r?void 0:r[1],I=g?ii(g):null;return I?{type:n.type,eventId:n.eventId,tenantId:n.tenantId,error:I,urlResponse:null,sessionId:null,postBody:null}:{type:n.type,eventId:n.eventId,tenantId:n.tenantId,sessionId:n.sessionId,urlResponse:s,postBody:null}}return null}(K,B.url)),t.onEvent(ue||V0())});return function(K){return k.apply(this,arguments)}}();typeof r<"u"&&"function"==typeof r.subscribe&&r.subscribe(null,g);const I=s,T=`${c.packageName.toLowerCase()}://`;ol().handleOpenURL=function(){var k=(0,X.A)(function*(B){if(B.toLowerCase().startsWith(T)&&g({url:B}),"function"==typeof I)try{I(B)}catch(K){console.error(K)}});return function(B){return k.apply(this,arguments)}}()}};function V0(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ii("no-auth-event")}}function Hp(){var n;return(null===(n=null==self?void 0:self.location)||void 0===n?void 0:n.protocol)||null}function zP(n=Ft()){return!("file:"!==Hp()&&"ionic:"!==Hp()&&"capacitor:"!==Hp()||!n.toLowerCase().match(/iphone|ipad|ipod|android/))}function sT(){try{const n=self.localStorage,e=$l();if(n)return n.setItem(e,"1"),n.removeItem(e),!function GP(n=Ft()){return function Gp(){return J()&&11===(null==document?void 0:document.documentMode)}()||function HP(n=Ft()){return/Edge\/\d+/.test(n)}(n)}()||Le()}catch{return u_()&&Le()}return!1}function u_(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function U0(){return(function oT(){return"http:"===Hp()||"https:"===Hp()}()||ct()||zP())&&!function uF(){return fe()||At()}()&&sT()&&!u_()}function aT(){return zP()&&typeof document<"u"}function B0(){return B0=(0,X.A)(function*(){return!!aT()&&new Promise(n=>{const e=setTimeout(()=>{n(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(e),n(!0)})})}),B0.apply(this,arguments)}const pa={LOCAL:"local",NONE:"none",SESSION:"session"},gd=Bt,KP="persistence";function Wp(n){return lT.apply(this,arguments)}function lT(){return lT=(0,X.A)(function*(n){yield n._initializationPromise;const e=XP(),t=ms(KP,n.config.apiKey,n.name);e&&e.setItem(t,n._getPersistence())}),lT.apply(this,arguments)}function XP(){var n;try{return(null===(n=function qP(){return typeof window<"u"?window:null}())||void 0===n?void 0:n.sessionStorage)||null}catch{return null}}const fF=Bt;class md{constructor(){this.browserResolver=Ci(Xb),this.cordovaResolver=Ci(UP),this.underlyingResolver=null,this._redirectPersistence=Bl,this._completeRedirectFn=Nh,this._overrideRedirectResult=E0}_initialize(e){var t=this;return(0,X.A)(function*(){return yield t.selectUnderlyingResolver(),t.assertedUnderlyingResolver._initialize(e)})()}_openPopup(e,t,r,s){var c=this;return(0,X.A)(function*(){return yield c.selectUnderlyingResolver(),c.assertedUnderlyingResolver._openPopup(e,t,r,s)})()}_openRedirect(e,t,r,s){var c=this;return(0,X.A)(function*(){return yield c.selectUnderlyingResolver(),c.assertedUnderlyingResolver._openRedirect(e,t,r,s)})()}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return aT()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return fF(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var e=this;return(0,X.A)(function*(){if(e.underlyingResolver)return;const t=yield function WP(){return B0.apply(this,arguments)}();e.underlyingResolver=t?e.cordovaResolver:e.browserResolver})()}}function cT(n){return n.unwrap()}function h_(n){return j0(n)}function j0(n){const{_tokenResponse:e}=n instanceof $t?n.customData:n;if(!e)return null;if(!(n instanceof $t)&&"temporaryProof"in e&&"phoneNumber"in e)return Mh.credentialFromResult(n);const t=e.providerId;if(!t||t===Ja.PASSWORD)return null;let r;switch(t){case Ja.GOOGLE:r=Xr;break;case Ja.FACEBOOK:r=Hy;break;case Ja.GITHUB:r=Gy;break;case Ja.TWITTER:r=ib;break;default:const{oauthIdToken:s,oauthAccessToken:c,oauthTokenSecret:d,pendingToken:g,nonce:I}=e;return c||d||s||g?g?t.startsWith("saml.")?vs._create(t,g):da._fromParams({providerId:t,signInMethod:t,pendingToken:g,idToken:s,accessToken:c}):new id(t).credential({idToken:s,accessToken:c,rawNonce:I}):null}return n instanceof $t?r.credentialFromError(n):r.credentialFromResult(n)}function ys(n,e){return e.catch(t=>{throw t instanceof $t&&function $0(n,e){var t;const r=null===(t=e.customData)||void 0===t?void 0:t._tokenResponse;if("auth/multi-factor-auth-required"===(null==e?void 0:e.code))e.resolver=new uT(n,function Vm(n,e){var t;const r=xt(n),s=e;return Bt(e.customData.operationType,r,"argument-error"),Bt(null===(t=s.customData._serverResponse)||void 0===t?void 0:t.mfaPendingCredential,r,"argument-error"),Np._fromError(r,s)}(n,e));else if(r){const s=j0(e),c=e;s&&(c.credential=s,c.tenantId=r.tenantId||void 0,c.email=r.email||void 0,c.phoneNumber=r.phoneNumber||void 0)}}(n,t),t}).then(t=>{const s=t.user;return{operationType:t.operationType,credential:h_(t),additionalUserInfo:cd(t),user:Bs.getOrCreate(s)}})}function z0(n,e){return H0.apply(this,arguments)}function H0(){return H0=(0,X.A)(function*(n,e){const t=yield e;return{verificationId:t.verificationId,confirm:r=>ys(n,t.confirm(r))}}),H0.apply(this,arguments)}class uT{constructor(e,t){this.resolver=t,this.auth=function d_(n){return n.wrapped()}(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return ys(cT(this.auth),this.resolver.resolveSignIn(e))}}class Bs{constructor(e){this._delegate=e,this.multiFactor=function XR(n){const e=xt(n);return Um.has(e)||Um.set(e,l0._fromUser(e)),Um.get(e)}(e)}static getOrCreate(e){return Bs.USER_MAP.has(e)||Bs.USER_MAP.set(e,new Bs(e)),Bs.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}linkWithCredential(e){var t=this;return(0,X.A)(function*(){return ys(t.auth,Xy(t._delegate,e))})()}linkWithPhoneNumber(e,t){var r=this;return(0,X.A)(function*(){return z0(r.auth,function aP(n,e,t){return m0.apply(this,arguments)}(r._delegate,e,t))})()}linkWithPopup(e){var t=this;return(0,X.A)(function*(){return ys(t.auth,function Nb(n,e,t){return Vp.apply(this,arguments)}(t._delegate,e,md))})()}linkWithRedirect(e){var t=this;return(0,X.A)(function*(){return yield Wp(Jr(t.auth)),Qm(t._delegate,e,md)})()}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}reauthenticateWithCredential(e){var t=this;return(0,X.A)(function*(){return ys(t.auth,lb(t._delegate,e))})()}reauthenticateWithPhoneNumber(e,t){return z0(this.auth,function Pb(n,e,t){return Wm.apply(this,arguments)}(this._delegate,e,t))}reauthenticateWithPopup(e){return ys(this.auth,function eF(n,e,t){return y0.apply(this,arguments)}(this._delegate,e,md))}reauthenticateWithRedirect(e){var t=this;return(0,X.A)(function*(){return yield Wp(Jr(t.auth)),w0(t._delegate,e,md)})()}sendEmailVerification(e){return function Om(n,e){return cb.apply(this,arguments)}(this._delegate,e)}unlink(e){var t=this;return(0,X.A)(function*(){return yield function NR(n,e){return Ky.apply(this,arguments)}(t._delegate,e),t})()}updateEmail(e){return function r0(n,e){const t=xt(n);return qt(t.auth.app)?Promise.reject(Pi(t.auth)):Mp(t,e,null)}(this._delegate,e)}updatePassword(e){return function db(n,e){return Mp(xt(n),null,e)}(this._delegate,e)}updatePhoneNumber(e){return function Mb(n,e){return qm.apply(this,arguments)}(this._delegate,e)}updateProfile(e){return function BR(n,e){return Th.apply(this,arguments)}(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return function ub(n,e,t){return Fm.apply(this,arguments)}(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Bs.USER_MAP=new WeakMap;const Yo=Bt;let Ua=(()=>{class n{constructor(t,r){if(this.app=t,r.isInitialized())return this._delegate=r.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:s}=t.options;Yo(s,"invalid-api-key",{appName:t.name}),Yo(s,"invalid-api-key",{appName:t.name});const c=typeof window<"u"?md:void 0;this._delegate=r.initialize({options:{persistence:pF(s,t.name),popupRedirectResolver:c}}),this._delegate._updateErrorMap(cc),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Bs.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(t){this._delegate.languageCode=t}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(t){this._delegate.tenantId=t}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(t,r){!function oe(n,e,t){const r=Jr(n);Bt(r._canInitEmulator,r,"emulator-config-failed"),Bt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!(null==t||!t.disableWarnings),c=Me(e),{host:d,port:g}=function wt(n){const e=Me(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const c=s[1];return{host:c,port:Ve(r.substr(c.length+1))}}{const[c,d]=r.split(":");return{host:c,port:Ve(d)}}}(e);r.config.emulator={url:`${c}//${d}${null===g?"":`:${g}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:d,port:g,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||function Jt(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",n):n())}()}(this._delegate,t,r)}applyActionCode(t){return function Jy(n,e){return km.apply(this,arguments)}(this._delegate,t)}checkActionCode(t){return Zy(this._delegate,t)}confirmPasswordReset(t,r){return function Nm(n,e,t){return wh.apply(this,arguments)}(this._delegate,t,r)}createUserWithEmailAndPassword(t,r){var s=this;return(0,X.A)(function*(){return ys(s._delegate,function FR(n,e,t){return Ap.apply(this,arguments)}(s._delegate,t,r))})()}fetchProvidersForEmail(t){return this.fetchSignInMethodsForEmail(t)}fetchSignInMethodsForEmail(t){return function Rp(n,e){return Pp.apply(this,arguments)}(this._delegate,t)}isSignInWithEmailLink(t){return function GO(n,e){const t=vp.parseLink(e);return"EMAIL_SIGNIN"===(null==t?void 0:t.operation)}(0,t)}getRedirectResult(){var t=this;return(0,X.A)(function*(){Yo(U0(),t._delegate,"operation-not-supported-in-this-environment");const r=yield function Bp(n,e){return iu.apply(this,arguments)}(t._delegate,md);return r?ys(t._delegate,Promise.resolve(r)):{credential:null,user:null}})()}addFrameworkForLogging(t){!function iT(n,e){Jr(n)._logFramework(e)}(this._delegate,t)}onAuthStateChanged(t,r,s){const{next:c,error:d,complete:g}=G0(t,r,s);return this._delegate.onAuthStateChanged(c,d,g)}onIdTokenChanged(t,r,s){const{next:c,error:d,complete:g}=G0(t,r,s);return this._delegate.onIdTokenChanged(c,d,g)}sendSignInLinkToEmail(t,r){return function VR(n,e,t){return t0.apply(this,arguments)}(this._delegate,t,r)}sendPasswordResetEmail(t,r){return function OR(n,e,t){return Ch.apply(this,arguments)}(this._delegate,t,r||void 0)}setPersistence(t){var r=this;return(0,X.A)(function*(){let s;switch(function dF(n,e){gd(Object.values(pa).includes(e),n,"invalid-persistence-type"),fe()?gd(e!==pa.SESSION,n,"unsupported-persistence-type"):At()?gd(e===pa.NONE,n,"unsupported-persistence-type"):u_()?gd(e===pa.NONE||e===pa.LOCAL&&Le(),n,"unsupported-persistence-type"):gd(e===pa.NONE||sT(),n,"unsupported-persistence-type")}(r._delegate,t),t){case pa.SESSION:s=Bl;break;case pa.LOCAL:s=(yield Ci(Rh)._isAvailable())?Rh:kp;break;case pa.NONE:s=Nl;break;default:return jr("argument-error",{appName:r._delegate.name})}return r._delegate.setPersistence(s)})()}signInAndRetrieveDataWithCredential(t){return this.signInWithCredential(t)}signInAnonymously(){return ys(this._delegate,function ob(n){return ha.apply(this,arguments)}(this._delegate))}signInWithCredential(t){return ys(this._delegate,Cp(this._delegate,t))}signInWithCustomToken(t){return ys(this._delegate,function kR(n,e){return Qy.apply(this,arguments)}(this._delegate,t))}signInWithEmailAndPassword(t,r){return ys(this._delegate,function LR(n,e,t){return qt(n.app)?Promise.reject(Pi(n)):Cp(xt(n),zy.credential(e,t)).catch(function(){var r=(0,X.A)(function*(s){throw"auth/password-does-not-meet-requirements"===s.code&&sd(n),s});return function(s){return r.apply(this,arguments)}}())}(this._delegate,t,r))}signInWithEmailLink(t,r){return ys(this._delegate,function WO(n,e,t){return Dp.apply(this,arguments)}(this._delegate,t,r))}signInWithPhoneNumber(t,r){return z0(this._delegate,function sP(n,e,t){return g0.apply(this,arguments)}(this._delegate,t,r))}signInWithPopup(t){var r=this;return(0,X.A)(function*(){return Yo(U0(),r._delegate,"operation-not-supported-in-this-environment"),ys(r._delegate,function hP(n,e,t){return v0.apply(this,arguments)}(r._delegate,t,md))})()}signInWithRedirect(t){var r=this;return(0,X.A)(function*(){return Yo(U0(),r._delegate,"operation-not-supported-in-this-environment"),yield Wp(r._delegate),tF(r._delegate,t,md)})()}updateCurrentUser(t){return this._delegate.updateCurrentUser(t)}verifyPasswordResetCode(t){return function bh(n,e){return ad.apply(this,arguments)}(this._delegate,t)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return n.Persistence=pa,n})();function G0(n,e,t){let r=n;"function"!=typeof n&&({next:r,error:e,complete:t}=n);const s=r;return{next:d=>s(d&&Bs.getOrCreate(d)),error:e,complete:t}}function pF(n,e){const t=function hF(n,e){const t=XP();if(!t)return[];const r=ms(KP,n,e);switch(t.getItem(r)){case pa.NONE:return[Nl];case pa.LOCAL:return[Rh,Bl];case pa.SESSION:return[Bl];default:return[]}}(n,e);if(typeof self<"u"&&!t.includes(Rh)&&t.push(Rh),typeof window<"u")for(const r of[kp,Bl])t.includes(r)||t.push(r);return t.includes(Nl)||t.push(Nl),t}class W0{constructor(){this.providerId="phone",this._delegate=new Mh(cT(di.auth()))}static credential(e,t){return Mh.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}W0.PHONE_SIGN_IN_METHOD=Mh.PHONE_SIGN_IN_METHOD,W0.PROVIDER_ID=Mh.PROVIDER_ID;const gF=Bt;class mF{constructor(e,t,r=di.app()){var s;gF(null===(s=r.options)||void 0===s?void 0:s.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new Rb(r.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function hT(n){n.INTERNAL.registerComponent(new ar("auth-compat",e=>{const t=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new Ua(t,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:zy,FacebookAuthProvider:Hy,GithubAuthProvider:Gy,GoogleAuthProvider:Xr,OAuthProvider:id,SAMLAuthProvider:yh,PhoneAuthProvider:W0,PhoneMultiFactorGenerator:bP,RecaptchaVerifier:mF,TwitterAuthProvider:ib,Auth:Ua,AuthCredential:Pn,Error:$t}).setInstantiationMode("LAZY").setMultipleInstances(!1)),n.registerVersion("@firebase/auth-compat","0.5.9")}(di);var gc,f_,QP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},qp={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function s(xe,ge,Ie){Ie||(Ie=0);var Fe=Array(16);if("string"==typeof ge)for(var Be=0;16>Be;++Be)Fe[Be]=ge.charCodeAt(Ie++)|ge.charCodeAt(Ie++)<<8|ge.charCodeAt(Ie++)<<16|ge.charCodeAt(Ie++)<<24;else for(Be=0;16>Be;++Be)Fe[Be]=ge[Ie++]|ge[Ie++]<<8|ge[Ie++]<<16|ge[Ie++]<<24;var st=xe.g[3],Ce=(ge=xe.g[0])+(st^(Ie=xe.g[1])&((Be=xe.g[2])^st))+Fe[0]+3614090360&4294967295;Ce=(Ie=(Be=(st=(ge=(Ie=(Be=(st=(ge=(Ie=(Be=(st=(ge=(Ie=(Be=(st=(ge=(Ie=(Be=(st=(ge=(Ie=(Be=(st=(ge=(Ie=(Be=(st=(ge=(Ie=(Be=(st=(ge=(Ie=(Be=(st=(ge=(Ie=(Be=(st=(ge=(Ie=(Be=(st=(ge=(Ie=(Be=(st=(ge=(Ie=(Be=(st=(ge=(Ie=(Be=(st=(ge=(Ie=(Be=(st=(ge=Ie+(Ce<<7&4294967295|Ce>>>25))+((Ce=st+(Be^ge&(Ie^Be))+Fe[1]+3905402710&4294967295)<<12&4294967295|Ce>>>20))+((Ce=Be+(Ie^st&(ge^Ie))+Fe[2]+606105819&4294967295)<<17&4294967295|Ce>>>15))+((Ce=Ie+(ge^Be&(st^ge))+Fe[3]+3250441966&4294967295)<<22&4294967295|Ce>>>10))+((Ce=ge+(st^Ie&(Be^st))+Fe[4]+4118548399&4294967295)<<7&4294967295|Ce>>>25))+((Ce=st+(Be^ge&(Ie^Be))+Fe[5]+1200080426&4294967295)<<12&4294967295|Ce>>>20))+((Ce=Be+(Ie^st&(ge^Ie))+Fe[6]+2821735955&4294967295)<<17&4294967295|Ce>>>15))+((Ce=Ie+(ge^Be&(st^ge))+Fe[7]+4249261313&4294967295)<<22&4294967295|Ce>>>10))+((Ce=ge+(st^Ie&(Be^st))+Fe[8]+1770035416&4294967295)<<7&4294967295|Ce>>>25))+((Ce=st+(Be^ge&(Ie^Be))+Fe[9]+2336552879&4294967295)<<12&4294967295|Ce>>>20))+((Ce=Be+(Ie^st&(ge^Ie))+Fe[10]+4294925233&4294967295)<<17&4294967295|Ce>>>15))+((Ce=Ie+(ge^Be&(st^ge))+Fe[11]+2304563134&4294967295)<<22&4294967295|Ce>>>10))+((Ce=ge+(st^Ie&(Be^st))+Fe[12]+1804603682&4294967295)<<7&4294967295|Ce>>>25))+((Ce=st+(Be^ge&(Ie^Be))+Fe[13]+4254626195&4294967295)<<12&4294967295|Ce>>>20))+((Ce=Be+(Ie^st&(ge^Ie))+Fe[14]+2792965006&4294967295)<<17&4294967295|Ce>>>15))+((Ce=Ie+(ge^Be&(st^ge))+Fe[15]+1236535329&4294967295)<<22&4294967295|Ce>>>10))+((Ce=ge+(Be^st&(Ie^Be))+Fe[1]+4129170786&4294967295)<<5&4294967295|Ce>>>27))+((Ce=st+(Ie^Be&(ge^Ie))+Fe[6]+3225465664&4294967295)<<9&4294967295|Ce>>>23))+((Ce=Be+(ge^Ie&(st^ge))+Fe[11]+643717713&4294967295)<<14&4294967295|Ce>>>18))+((Ce=Ie+(st^ge&(Be^st))+Fe[0]+3921069994&4294967295)<<20&4294967295|Ce>>>12))+((Ce=ge+(Be^st&(Ie^Be))+Fe[5]+3593408605&4294967295)<<5&4294967295|Ce>>>27))+((Ce=st+(Ie^Be&(ge^Ie))+Fe[10]+38016083&4294967295)<<9&4294967295|Ce>>>23))+((Ce=Be+(ge^Ie&(st^ge))+Fe[15]+3634488961&4294967295)<<14&4294967295|Ce>>>18))+((Ce=Ie+(st^ge&(Be^st))+Fe[4]+3889429448&4294967295)<<20&4294967295|Ce>>>12))+((Ce=ge+(Be^st&(Ie^Be))+Fe[9]+568446438&4294967295)<<5&4294967295|Ce>>>27))+((Ce=st+(Ie^Be&(ge^Ie))+Fe[14]+3275163606&4294967295)<<9&4294967295|Ce>>>23))+((Ce=Be+(ge^Ie&(st^ge))+Fe[3]+4107603335&4294967295)<<14&4294967295|Ce>>>18))+((Ce=Ie+(st^ge&(Be^st))+Fe[8]+1163531501&4294967295)<<20&4294967295|Ce>>>12))+((Ce=ge+(Be^st&(Ie^Be))+Fe[13]+2850285829&4294967295)<<5&4294967295|Ce>>>27))+((Ce=st+(Ie^Be&(ge^Ie))+Fe[2]+4243563512&4294967295)<<9&4294967295|Ce>>>23))+((Ce=Be+(ge^Ie&(st^ge))+Fe[7]+1735328473&4294967295)<<14&4294967295|Ce>>>18))+((Ce=Ie+(st^ge&(Be^st))+Fe[12]+2368359562&4294967295)<<20&4294967295|Ce>>>12))+((Ce=ge+(Ie^Be^st)+Fe[5]+4294588738&4294967295)<<4&4294967295|Ce>>>28))+((Ce=st+(ge^Ie^Be)+Fe[8]+2272392833&4294967295)<<11&4294967295|Ce>>>21))+((Ce=Be+(st^ge^Ie)+Fe[11]+1839030562&4294967295)<<16&4294967295|Ce>>>16))+((Ce=Ie+(Be^st^ge)+Fe[14]+4259657740&4294967295)<<23&4294967295|Ce>>>9))+((Ce=ge+(Ie^Be^st)+Fe[1]+2763975236&4294967295)<<4&4294967295|Ce>>>28))+((Ce=st+(ge^Ie^Be)+Fe[4]+1272893353&4294967295)<<11&4294967295|Ce>>>21))+((Ce=Be+(st^ge^Ie)+Fe[7]+4139469664&4294967295)<<16&4294967295|Ce>>>16))+((Ce=Ie+(Be^st^ge)+Fe[10]+3200236656&4294967295)<<23&4294967295|Ce>>>9))+((Ce=ge+(Ie^Be^st)+Fe[13]+681279174&4294967295)<<4&4294967295|Ce>>>28))+((Ce=st+(ge^Ie^Be)+Fe[0]+3936430074&4294967295)<<11&4294967295|Ce>>>21))+((Ce=Be+(st^ge^Ie)+Fe[3]+3572445317&4294967295)<<16&4294967295|Ce>>>16))+((Ce=Ie+(Be^st^ge)+Fe[6]+76029189&4294967295)<<23&4294967295|Ce>>>9))+((Ce=ge+(Ie^Be^st)+Fe[9]+3654602809&4294967295)<<4&4294967295|Ce>>>28))+((Ce=st+(ge^Ie^Be)+Fe[12]+3873151461&4294967295)<<11&4294967295|Ce>>>21))+((Ce=Be+(st^ge^Ie)+Fe[15]+530742520&4294967295)<<16&4294967295|Ce>>>16))+((Ce=Ie+(Be^st^ge)+Fe[2]+3299628645&4294967295)<<23&4294967295|Ce>>>9))+((Ce=ge+(Be^(Ie|~st))+Fe[0]+4096336452&4294967295)<<6&4294967295|Ce>>>26))+((Ce=st+(Ie^(ge|~Be))+Fe[7]+1126891415&4294967295)<<10&4294967295|Ce>>>22))+((Ce=Be+(ge^(st|~Ie))+Fe[14]+2878612391&4294967295)<<15&4294967295|Ce>>>17))+((Ce=Ie+(st^(Be|~ge))+Fe[5]+4237533241&4294967295)<<21&4294967295|Ce>>>11))+((Ce=ge+(Be^(Ie|~st))+Fe[12]+1700485571&4294967295)<<6&4294967295|Ce>>>26))+((Ce=st+(Ie^(ge|~Be))+Fe[3]+2399980690&4294967295)<<10&4294967295|Ce>>>22))+((Ce=Be+(ge^(st|~Ie))+Fe[10]+4293915773&4294967295)<<15&4294967295|Ce>>>17))+((Ce=Ie+(st^(Be|~ge))+Fe[1]+2240044497&4294967295)<<21&4294967295|Ce>>>11))+((Ce=ge+(Be^(Ie|~st))+Fe[8]+1873313359&4294967295)<<6&4294967295|Ce>>>26))+((Ce=st+(Ie^(ge|~Be))+Fe[15]+4264355552&4294967295)<<10&4294967295|Ce>>>22))+((Ce=Be+(ge^(st|~Ie))+Fe[6]+2734768916&4294967295)<<15&4294967295|Ce>>>17))+((Ce=Ie+(st^(Be|~ge))+Fe[13]+1309151649&4294967295)<<21&4294967295|Ce>>>11))+((st=(ge=Ie+((Ce=ge+(Be^(Ie|~st))+Fe[4]+4149444226&4294967295)<<6&4294967295|Ce>>>26))+((Ce=st+(Ie^(ge|~Be))+Fe[11]+3174756917&4294967295)<<10&4294967295|Ce>>>22))^((Be=st+((Ce=Be+(ge^(st|~Ie))+Fe[2]+718787259&4294967295)<<15&4294967295|Ce>>>17))|~ge))+Fe[9]+3951481745&4294967295,xe.g[0]=xe.g[0]+ge&4294967295,xe.g[1]=xe.g[1]+(Be+(Ce<<21&4294967295|Ce>>>11))&4294967295,xe.g[2]=xe.g[2]+Be&4294967295,xe.g[3]=xe.g[3]+st&4294967295}function d(xe,ge){this.h=ge;for(var Ie=[],Fe=!0,Be=xe.length-1;0<=Be;Be--){var st=0|xe[Be];Fe&&st==ge||(Ie[Be]=st,Fe=!1)}this.g=Ie}(function e(xe,ge){function Ie(){}Ie.prototype=ge.prototype,xe.D=ge.prototype,xe.prototype=new Ie,xe.prototype.constructor=xe,xe.C=function(Fe,Be,st){for(var Ce=Array(arguments.length-2),ah=2;ah<arguments.length;ah++)Ce[ah-2]=arguments[ah];return ge.prototype[Be].apply(Fe,Ce)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(xe,ge){void 0===ge&&(ge=xe.length);for(var Ie=ge-this.blockSize,Fe=this.B,Be=this.h,st=0;st<ge;){if(0==Be)for(;st<=Ie;)s(this,xe,st),st+=this.blockSize;if("string"==typeof xe){for(;st<ge;)if(Fe[Be++]=xe.charCodeAt(st++),Be==this.blockSize){s(this,Fe),Be=0;break}}else for(;st<ge;)if(Fe[Be++]=xe[st++],Be==this.blockSize){s(this,Fe),Be=0;break}}this.h=Be,this.o+=ge},r.prototype.v=function(){var xe=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);xe[0]=128;for(var ge=1;ge<xe.length-8;++ge)xe[ge]=0;var Ie=8*this.o;for(ge=xe.length-8;ge<xe.length;++ge)xe[ge]=255&Ie,Ie/=256;for(this.u(xe),xe=Array(16),ge=Ie=0;4>ge;++ge)for(var Fe=0;32>Fe;Fe+=8)xe[Ie++]=this.g[ge]>>>Fe&255;return xe};var g={};function I(xe){return-128<=xe&&128>xe?function c(xe,ge){var Ie=g;return Object.prototype.hasOwnProperty.call(Ie,xe)?Ie[xe]:Ie[xe]=ge(xe)}(xe,function(ge){return new d([0|ge],0>ge?-1:0)}):new d([0|xe],0>xe?-1:0)}function T(xe){if(isNaN(xe)||!isFinite(xe))return B;if(0>xe)return ht(T(-xe));for(var ge=[],Ie=1,Fe=0;xe>=Ie;Fe++)ge[Fe]=xe/Ie|0,Ie*=4294967296;return new d(ge,0)}var B=I(0),K=I(1),ue=I(16777216);function De(xe){if(0!=xe.h)return!1;for(var ge=0;ge<xe.g.length;ge++)if(0!=xe.g[ge])return!1;return!0}function mt(xe){return-1==xe.h}function ht(xe){for(var ge=xe.g.length,Ie=[],Fe=0;Fe<ge;Fe++)Ie[Fe]=~xe.g[Fe];return new d(Ie,~xe.h).add(K)}function Zt(xe,ge){return xe.add(ht(ge))}function ln(xe,ge){for(;(65535&xe[ge])!=xe[ge];)xe[ge+1]+=xe[ge]>>>16,xe[ge]&=65535,ge++}function Xt(xe,ge){this.g=xe,this.h=ge}function vn(xe,ge){if(De(ge))throw Error("division by zero");if(De(xe))return new Xt(B,B);if(mt(xe))return ge=vn(ht(xe),ge),new Xt(ht(ge.g),ht(ge.h));if(mt(ge))return ge=vn(xe,ht(ge)),new Xt(ht(ge.g),ge.h);if(30<xe.g.length){if(mt(xe)||mt(ge))throw Error("slowDivide_ only works with positive integers.");for(var Ie=K,Fe=ge;0>=Fe.l(xe);)Ie=gr(Ie),Fe=gr(Fe);var Be=Wn(Ie,1),st=Wn(Fe,1);for(Fe=Wn(Fe,2),Ie=Wn(Ie,2);!De(Fe);){var Ce=st.add(Fe);0>=Ce.l(xe)&&(Be=Be.add(Ie),st=Ce),Fe=Wn(Fe,1),Ie=Wn(Ie,1)}return ge=Zt(xe,Be.j(ge)),new Xt(Be,ge)}for(Be=B;0<=xe.l(ge);){for(Ie=Math.max(1,Math.floor(xe.m()/ge.m())),Fe=48>=(Fe=Math.ceil(Math.log(Ie)/Math.LN2))?1:Math.pow(2,Fe-48),Ce=(st=T(Ie)).j(ge);mt(Ce)||0<Ce.l(xe);)Ce=(st=T(Ie-=Fe)).j(ge);De(st)&&(st=K),Be=Be.add(st),xe=Zt(xe,Ce)}return new Xt(Be,xe)}function gr(xe){for(var ge=xe.g.length+1,Ie=[],Fe=0;Fe<ge;Fe++)Ie[Fe]=xe.i(Fe)<<1|xe.i(Fe-1)>>>31;return new d(Ie,xe.h)}function Wn(xe,ge){var Ie=ge>>5;ge%=32;for(var Fe=xe.g.length-Ie,Be=[],st=0;st<Fe;st++)Be[st]=0<ge?xe.i(st+Ie)>>>ge|xe.i(st+Ie+1)<<32-ge:xe.i(st+Ie);return new d(Be,xe.h)}(n=d.prototype).m=function(){if(mt(this))return-ht(this).m();for(var xe=0,ge=1,Ie=0;Ie<this.g.length;Ie++){var Fe=this.i(Ie);xe+=(0<=Fe?Fe:4294967296+Fe)*ge,ge*=4294967296}return xe},n.toString=function(xe){if(2>(xe=xe||10)||36<xe)throw Error("radix out of range: "+xe);if(De(this))return"0";if(mt(this))return"-"+ht(this).toString(xe);for(var ge=T(Math.pow(xe,6)),Ie=this,Fe="";;){var Be=vn(Ie,ge).g,st=((0<(Ie=Zt(Ie,Be.j(ge))).g.length?Ie.g[0]:Ie.h)>>>0).toString(xe);if(De(Ie=Be))return st+Fe;for(;6>st.length;)st="0"+st;Fe=st+Fe}},n.i=function(xe){return 0>xe?0:xe<this.g.length?this.g[xe]:this.h},n.l=function(xe){return mt(xe=Zt(this,xe))?-1:De(xe)?0:1},n.abs=function(){return mt(this)?ht(this):this},n.add=function(xe){for(var ge=Math.max(this.g.length,xe.g.length),Ie=[],Fe=0,Be=0;Be<=ge;Be++){var st=Fe+(65535&this.i(Be))+(65535&xe.i(Be)),Ce=(st>>>16)+(this.i(Be)>>>16)+(xe.i(Be)>>>16);Fe=Ce>>>16,Ie[Be]=(Ce&=65535)<<16|(st&=65535)}return new d(Ie,-2147483648&Ie[Ie.length-1]?-1:0)},n.j=function(xe){if(De(this)||De(xe))return B;if(mt(this))return mt(xe)?ht(this).j(ht(xe)):ht(ht(this).j(xe));if(mt(xe))return ht(this.j(ht(xe)));if(0>this.l(ue)&&0>xe.l(ue))return T(this.m()*xe.m());for(var ge=this.g.length+xe.g.length,Ie=[],Fe=0;Fe<2*ge;Fe++)Ie[Fe]=0;for(Fe=0;Fe<this.g.length;Fe++)for(var Be=0;Be<xe.g.length;Be++){var st=this.i(Fe)>>>16,Ce=65535&this.i(Fe),ah=xe.i(Be)>>>16,xw=65535&xe.i(Be);Ie[2*Fe+2*Be]+=Ce*xw,ln(Ie,2*Fe+2*Be),Ie[2*Fe+2*Be+1]+=st*xw,ln(Ie,2*Fe+2*Be+1),Ie[2*Fe+2*Be+1]+=Ce*ah,ln(Ie,2*Fe+2*Be+1),Ie[2*Fe+2*Be+2]+=st*ah,ln(Ie,2*Fe+2*Be+2)}for(Fe=0;Fe<ge;Fe++)Ie[Fe]=Ie[2*Fe+1]<<16|Ie[2*Fe];for(Fe=ge;Fe<2*ge;Fe++)Ie[Fe]=0;return new d(Ie,0)},n.A=function(xe){return vn(this,xe).h},n.and=function(xe){for(var ge=Math.max(this.g.length,xe.g.length),Ie=[],Fe=0;Fe<ge;Fe++)Ie[Fe]=this.i(Fe)&xe.i(Fe);return new d(Ie,this.h&xe.h)},n.or=function(xe){for(var ge=Math.max(this.g.length,xe.g.length),Ie=[],Fe=0;Fe<ge;Fe++)Ie[Fe]=this.i(Fe)|xe.i(Fe);return new d(Ie,this.h|xe.h)},n.xor=function(xe){for(var ge=Math.max(this.g.length,xe.g.length),Ie=[],Fe=0;Fe<ge;Fe++)Ie[Fe]=this.i(Fe)^xe.i(Fe);return new d(Ie,this.h^xe.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,f_=qp.Md5=r,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=T,d.fromString=function k(xe,ge){if(0==xe.length)throw Error("number format error: empty string");if(2>(ge=ge||10)||36<ge)throw Error("radix out of range: "+ge);if("-"==xe.charAt(0))return ht(k(xe.substring(1),ge));if(0<=xe.indexOf("-"))throw Error('number format error: interior "-" character');for(var Ie=T(Math.pow(ge,8)),Fe=B,Be=0;Be<xe.length;Be+=8){var st=Math.min(8,xe.length-Be),Ce=parseInt(xe.substring(Be,Be+st),ge);8>st?(st=T(Math.pow(ge,st)),Fe=Fe.j(st).add(T(Ce))):Fe=(Fe=Fe.j(Ie)).add(T(Ce))}return Fe},gc=qp.Integer=d}).apply(typeof QP<"u"?QP:typeof self<"u"?self:typeof window<"u"?window:{});var g_,q0,_d,Kp,m_,K0,X0,fT,pT,p_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$s={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(y,L,G){return y==Array.prototype||y==Object.prototype||(y[L]=G.value),y},r=function t(y){y=["object"==typeof globalThis&&globalThis,y,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof p_&&p_];for(var L=0;L<y.length;++L){var G=y[L];if(G&&G.Math==Math)return G}throw Error("Cannot find global object")}(this);!function s(y,L){if(L)e:{var G=r;y=y.split(".");for(var se=0;se<y.length-1;se++){var je=y[se];if(!(je in G))break e;G=G[je]}(L=L(se=G[y=y[y.length-1]]))!=se&&null!=L&&e(G,y,{configurable:!0,writable:!0,value:L})}}("Array.prototype.values",function(y){return y||function(){return function c(y,L){y instanceof String&&(y+="");var G=0,se=!1,je={next:function(){if(!se&&G<y.length){var It=G++;return{value:L(It,y[It]),done:!1}}return se=!0,{done:!0,value:void 0}}};return je[Symbol.iterator]=function(){return je},je}(this,function(L,G){return G})}});var d=d||{},g=this||self;function I(y){var L=typeof y;return"array"==(L="object"!=L?L:y?Array.isArray(y)?"array":L:"null")||"object"==L&&"number"==typeof y.length}function T(y){var L=typeof y;return"object"==L&&null!=y||"function"==L}function k(y,L,G){return y.call.apply(y.bind,arguments)}function B(y,L,G){if(!y)throw Error();if(2<arguments.length){var se=Array.prototype.slice.call(arguments,2);return function(){var je=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(je,se),y.apply(L,je)}}return function(){return y.apply(L,arguments)}}function K(y,L,G){return(K=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?k:B).apply(null,arguments)}function ue(y,L){var G=Array.prototype.slice.call(arguments,1);return function(){var se=G.slice();return se.push.apply(se,arguments),y.apply(this,se)}}function De(y,L){function G(){}G.prototype=L.prototype,y.aa=L.prototype,y.prototype=new G,y.prototype.constructor=y,y.Qb=function(se,je,It){for(var on=Array(arguments.length-2),Ei=2;Ei<arguments.length;Ei++)on[Ei-2]=arguments[Ei];return L.prototype[je].apply(se,on)}}function mt(y){const L=y.length;if(0<L){const G=Array(L);for(let se=0;se<L;se++)G[se]=y[se];return G}return[]}function ht(y,L){for(let G=1;G<arguments.length;G++){const se=arguments[G];if(I(se)){const je=y.length||0,It=se.length||0;y.length=je+It;for(let on=0;on<It;on++)y[je+on]=se[on]}else y.push(se)}}function ln(y){return/^[\s\xa0]*$/.test(y)}function Xt(){var y=g.navigator;return y&&(y=y.userAgent)?y:""}function vn(y){return vn[" "](y),y}vn[" "]=function(){};var gr=!(-1==Xt().indexOf("Gecko")||-1!=Xt().toLowerCase().indexOf("webkit")&&-1==Xt().indexOf("Edge")||-1!=Xt().indexOf("Trident")||-1!=Xt().indexOf("MSIE")||-1!=Xt().indexOf("Edge"));function Wn(y,L,G){for(const se in y)L.call(G,y[se],se,y)}function ge(y){const L={};for(const G in y)L[G]=y[G];return L}const Ie="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Fe(y,L){let G,se;for(let je=1;je<arguments.length;je++){for(G in se=arguments[je],se)y[G]=se[G];for(let It=0;It<Ie.length;It++)G=Ie[It],Object.prototype.hasOwnProperty.call(se,G)&&(y[G]=se[G])}}function Be(y){var L=1;y=y.split(":");const G=[];for(;0<L&&y.length;)G.push(y.shift()),L--;return y.length&&G.push(y.join(":")),G}function st(y){g.setTimeout(()=>{throw y},0)}function Ce(){var y=vO;let L=null;return y.g&&(L=y.g,y.g=y.g.next,y.g||(y.h=null),L.next=null),L}var xw=new class Zt{constructor(L,G){this.i=L,this.j=G,this.h=0,this.g=null}get(){let L;return 0<this.h?(this.h--,L=this.g,this.g=L.next,L.next=null):L=this.i(),L}}(()=>new r$,y=>y.reset());class r${constructor(){this.next=this.g=this.h=null}set(L,G){this.h=L,this.g=G,this.next=null}reset(){this.next=this.g=this.h=null}}let Nw,kw=!1,vO=new class ah{constructor(){this.h=this.g=null}add(L,G){const se=xw.get();se.set(L,G),this.h?this.h.next=se:this.g=se,this.h=se}},$V=()=>{const y=g.Promise.resolve(void 0);Nw=()=>{y.then(i$)}};var i$=()=>{for(var y;y=Ce();){try{y.h.call(y.g)}catch(G){st(G)}var L=xw;L.j(y),100>L.h&&(L.h++,y.next=L.g,L.g=y)}kw=!1};function ip(){this.s=this.s,this.C=this.C}function Ks(y,L){this.type=y,this.g=this.target=L,this.defaultPrevented=!1}ip.prototype.s=!1,ip.prototype.ma=function(){this.s||(this.s=!0,this.N())},ip.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},Ks.prototype.h=function(){this.defaultPrevented=!0};var o$=function(){if(!g.addEventListener||!Object.defineProperty)return!1;var y=!1,L=Object.defineProperty({},"passive",{get:function(){y=!0}});try{const G=()=>{};g.addEventListener("test",G,L),g.removeEventListener("test",G,L)}catch{}return y}();function Ow(y,L){if(Ks.call(this,y?y.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,y){var G=this.type=y.type,se=y.changedTouches&&y.changedTouches.length?y.changedTouches[0]:null;if(this.target=y.target||y.srcElement,this.g=L,L=y.relatedTarget){if(gr){e:{try{vn(L.nodeName);var je=!0;break e}catch{}je=!1}je||(L=null)}}else"mouseover"==G?L=y.fromElement:"mouseout"==G&&(L=y.toElement);this.relatedTarget=L,se?(this.clientX=void 0!==se.clientX?se.clientX:se.pageX,this.clientY=void 0!==se.clientY?se.clientY:se.pageY,this.screenX=se.screenX||0,this.screenY=se.screenY||0):(this.clientX=void 0!==y.clientX?y.clientX:y.pageX,this.clientY=void 0!==y.clientY?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0),this.button=y.button,this.key=y.key||"",this.ctrlKey=y.ctrlKey,this.altKey=y.altKey,this.shiftKey=y.shiftKey,this.metaKey=y.metaKey,this.pointerId=y.pointerId||0,this.pointerType="string"==typeof y.pointerType?y.pointerType:s$[y.pointerType]||"",this.state=y.state,this.i=y,y.defaultPrevented&&Ow.aa.h.call(this)}}De(Ow,Ks);var s$={2:"touch",3:"pen",4:"mouse"};Ow.prototype.h=function(){Ow.aa.h.call(this);var y=this.i;y.preventDefault?y.preventDefault():y.returnValue=!1};var Fw="closure_listenable_"+(1e6*Math.random()|0),a$=0;function l$(y,L,G,se,je){this.listener=y,this.proxy=null,this.src=L,this.type=G,this.capture=!!se,this.ha=je,this.key=++a$,this.da=this.fa=!1}function sR(y){y.da=!0,y.listener=null,y.proxy=null,y.src=null,y.ha=null}function aR(y){this.src=y,this.g={},this.h=0}function yO(y,L){var G=L.type;if(G in y.g){var It,se=y.g[G],je=Array.prototype.indexOf.call(se,L,void 0);(It=0<=je)&&Array.prototype.splice.call(se,je,1),It&&(sR(L),0==y.g[G].length&&(delete y.g[G],y.h--))}}function IO(y,L,G,se){for(var je=0;je<y.length;++je){var It=y[je];if(!It.da&&It.listener==L&&It.capture==!!G&&It.ha==se)return je}return-1}aR.prototype.add=function(y,L,G,se,je){var It=y.toString();(y=this.g[It])||(y=this.g[It]=[],this.h++);var on=IO(y,L,se,je);return-1<on?(L=y[on],G||(L.fa=!1)):((L=new l$(L,this.src,It,!!se,je)).fa=G,y.push(L)),L};var EO="closure_lm_"+(1e6*Math.random()|0),CO={};function jV(y,L,G,se,je){if(se&&se.once)return HV(y,L,G,se,je);if(Array.isArray(L)){for(var It=0;It<L.length;It++)jV(y,L[It],G,se,je);return null}return G=AO(G),y&&y[Fw]?y.K(L,G,T(se)?!!se.capture:!!se,je):zV(y,L,G,!1,se,je)}function zV(y,L,G,se,je,It){if(!L)throw Error("Invalid event type");var on=T(je)?!!je.capture:!!je,Ei=bO(y);if(Ei||(y[EO]=Ei=new aR(y)),(G=Ei.add(L,G,se,on,It)).proxy)return G;if(se=function c$(){const L=u$;return function y(G){return L.call(y.src,y.listener,G)}}(),G.proxy=se,se.src=y,se.listener=G,y.addEventListener)o$||(je=on),void 0===je&&(je=!1),y.addEventListener(L.toString(),se,je);else if(y.attachEvent)y.attachEvent(WV(L.toString()),se);else{if(!y.addListener||!y.removeListener)throw Error("addEventListener and attachEvent are unavailable.");y.addListener(se)}return G}function HV(y,L,G,se,je){if(Array.isArray(L)){for(var It=0;It<L.length;It++)HV(y,L[It],G,se,je);return null}return G=AO(G),y&&y[Fw]?y.L(L,G,T(se)?!!se.capture:!!se,je):zV(y,L,G,!0,se,je)}function GV(y,L,G,se,je){if(Array.isArray(L))for(var It=0;It<L.length;It++)GV(y,L[It],G,se,je);else se=T(se)?!!se.capture:!!se,G=AO(G),y&&y[Fw]?(y=y.i,(L=String(L).toString())in y.g&&-1<(G=IO(It=y.g[L],G,se,je))&&(sR(It[G]),Array.prototype.splice.call(It,G,1),0==It.length&&(delete y.g[L],y.h--))):y&&(y=bO(y))&&(L=y.g[L.toString()],y=-1,L&&(y=IO(L,G,se,je)),(G=-1<y?L[y]:null)&&wO(G))}function wO(y){if("number"!=typeof y&&y&&!y.da){var L=y.src;if(L&&L[Fw])yO(L.i,y);else{var G=y.type,se=y.proxy;L.removeEventListener?L.removeEventListener(G,se,y.capture):L.detachEvent?L.detachEvent(WV(G),se):L.addListener&&L.removeListener&&L.removeListener(se),(G=bO(L))?(yO(G,y),0==G.h&&(G.src=null,L[EO]=null)):sR(y)}}}function WV(y){return y in CO?CO[y]:CO[y]="on"+y}function u$(y,L){if(y.da)y=!0;else{L=new Ow(L,this);var G=y.listener,se=y.ha||y.src;y.fa&&wO(y),y=G.call(se,L)}return y}function bO(y){return(y=y[EO])instanceof aR?y:null}var TO="__closure_events_fn_"+(1e9*Math.random()>>>0);function AO(y){return"function"==typeof y?y:(y[TO]||(y[TO]=function(L){return y.handleEvent(L)}),y[TO])}function Xs(){ip.call(this),this.i=new aR(this),this.M=this,this.F=null}function ba(y,L){var G,se=y.F;if(se)for(G=[];se;se=se.F)G.push(se);if(y=y.M,se=L.type||L,"string"==typeof L)L=new Ks(L,y);else if(L instanceof Ks)L.target=L.target||y;else{var je=L;Fe(L=new Ks(se,y),je)}if(je=!0,G)for(var It=G.length-1;0<=It;It--){var on=L.g=G[It];je=lR(on,se,!0,L)&&je}if(je=lR(on=L.g=y,se,!0,L)&&je,je=lR(on,se,!1,L)&&je,G)for(It=0;It<G.length;It++)je=lR(on=L.g=G[It],se,!1,L)&&je}function lR(y,L,G,se){if(!(L=y.i.g[String(L)]))return!0;L=L.concat();for(var je=!0,It=0;It<L.length;++It){var on=L[It];if(on&&!on.da&&on.capture==G){var Ei=on.listener,As=on.ha||on.src;on.fa&&yO(y.i,on),je=!1!==Ei.call(As,se)&&je}}return je&&!se.defaultPrevented}function qV(y,L,G){if("function"==typeof y)G&&(y=K(y,G));else{if(!y||"function"!=typeof y.handleEvent)throw Error("Invalid listener argument");y=K(y.handleEvent,y)}return 2147483647<Number(L)?-1:g.setTimeout(y,L||0)}function KV(y){y.g=qV(()=>{y.g=null,y.i&&(y.i=!1,KV(y))},y.l);const L=y.h;y.h=null,y.m.apply(null,L)}De(Xs,ip),Xs.prototype[Fw]=!0,Xs.prototype.removeEventListener=function(y,L,G,se){GV(this,y,L,G,se)},Xs.prototype.N=function(){if(Xs.aa.N.call(this),this.i){var L,y=this.i;for(L in y.g){for(var G=y.g[L],se=0;se<G.length;se++)sR(G[se]);delete y.g[L],y.h--}}this.F=null},Xs.prototype.K=function(y,L,G,se){return this.i.add(String(y),L,!1,G,se)},Xs.prototype.L=function(y,L,G,se){return this.i.add(String(y),L,!0,G,se)};class d$ extends ip{constructor(L,G){super(),this.m=L,this.l=G,this.h=null,this.i=!1,this.g=null}j(L){this.h=arguments,this.g?this.i=!0:KV(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Lw(y){ip.call(this),this.h=y,this.g={}}De(Lw,ip);var XV=[];function QV(y){Wn(y.g,function(L,G){this.g.hasOwnProperty(G)&&wO(L)},y),y.g={}}Lw.prototype.N=function(){Lw.aa.N.call(this),QV(this)},Lw.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var DO=g.JSON.stringify,h$=g.JSON.parse,f$=class{stringify(y){return g.JSON.stringify(y,void 0)}parse(y){return g.JSON.parse(y,void 0)}};function SO(){}function JV(){}SO.prototype.h=null;var Vw={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function RO(){Ks.call(this,"d")}function PO(){Ks.call(this,"c")}De(RO,Ks),De(PO,Ks);var vm={},ZV=null;function cR(){return ZV=ZV||new Xs}function e2(y){Ks.call(this,vm.La,y)}function Uw(y){const L=cR();ba(L,new e2(L))}function t2(y,L){Ks.call(this,vm.STAT_EVENT,y),this.stat=L}function Ta(y){const L=cR();ba(L,new t2(L,y))}function n2(y,L){Ks.call(this,vm.Ma,y),this.size=L}function Bw(y,L){if("function"!=typeof y)throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){y()},L)}function $w(){this.g=!0}function My(y,L,G,se){y.info(function(){return"XMLHTTP TEXT ("+L+"): "+function _$(y,L){if(!y.g)return L;if(!L)return null;try{var G=JSON.parse(L);if(G)for(y=0;y<G.length;y++)if(Array.isArray(G[y])){var se=G[y];if(!(2>se.length)){var je=se[1];if(Array.isArray(je)&&!(1>je.length)){var It=je[0];if("noop"!=It&&"stop"!=It&&"close"!=It)for(var on=1;on<je.length;on++)je[on]=""}}}return DO(G)}catch{return L}}(y,G)+(se?" "+se:"")})}vm.La="serverreachability",De(e2,Ks),vm.STAT_EVENT="statevent",De(t2,Ks),vm.Ma="timingevent",De(n2,Ks),$w.prototype.xa=function(){this.g=!1},$w.prototype.info=function(){};var MO,uR={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},r2={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function dR(){}function op(y,L,G,se){this.j=y,this.i=L,this.l=G,this.R=se||1,this.U=new Lw(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new i2}function i2(){this.i=null,this.g="",this.h=!1}De(dR,SO),dR.prototype.g=function(){return new XMLHttpRequest},dR.prototype.i=function(){return{}},MO=new dR;var o2={},xO={};function NO(y,L,G){y.L=1,y.v=gR(lh(L)),y.m=G,y.P=!0,s2(y,null)}function s2(y,L){y.F=Date.now(),hR(y),y.A=lh(y.v);var G=y.A,se=y.R;Array.isArray(se)||(se=[String(se)]),I2(G.i,"t",se),y.C=0,G=y.j.J,y.h=new i2,y.g=V2(y.j,G?L:null,!y.m),0<y.O&&(y.M=new d$(K(y.Y,y,y.g),y.O)),L=y.U,G=y.g,se=y.ca;var je="readystatechange";Array.isArray(je)||(je&&(XV[0]=je.toString()),je=XV);for(var It=0;It<je.length;It++){var on=jV(G,je[It],se||L.handleEvent,!1,L.h||L);if(!on)break;L.g[on.key]=on}L=y.H?ge(y.H):{},y.m?(y.u||(y.u="POST"),L["Content-Type"]="application/x-www-form-urlencoded",y.g.ea(y.A,y.u,y.m,L)):(y.u="GET",y.g.ea(y.A,y.u,null,L)),Uw(),function p$(y,L,G,se,je,It){y.info(function(){if(y.g)if(It)for(var on="",Ei=It.split("&"),As=0;As<Ei.length;As++){var Qr=Ei[As].split("=");if(1<Qr.length){var Qs=Qr[0];Qr=Qr[1];var Ys=Qs.split("_");on=2<=Ys.length&&"type"==Ys[1]?on+(Qs+"=")+Qr+"&":on+(Qs+"=redacted&")}}else on=null;else on=It;return"XMLHTTP REQ ("+se+") [attempt "+je+"]: "+L+"\n"+G+"\n"+on})}(y.i,y.u,y.A,y.l,y.R,y.m)}function a2(y){return!!y.g&&"GET"==y.u&&2!=y.L&&y.j.Ca}function v$(y,L){var G=y.C,se=L.indexOf("\n",G);return-1==se?xO:(G=Number(L.substring(G,se)),isNaN(G)?o2:(se+=1)+G>L.length?xO:(L=L.slice(se,se+G),y.C=se+G,L))}function hR(y){y.S=Date.now()+y.I,l2(y,y.I)}function l2(y,L){if(null!=y.B)throw Error("WatchDog timer not null");y.B=Bw(K(y.ba,y),L)}function kO(y){y.B&&(g.clearTimeout(y.B),y.B=null)}function jw(y){0==y.j.G||y.J||k2(y.j,y)}function ym(y){kO(y);var L=y.M;L&&"function"==typeof L.ma&&L.ma(),y.M=null,QV(y.U),y.g&&(L=y.g,y.g=null,L.abort(),L.ma())}function OO(y,L){try{var G=y.j;if(0!=G.G&&(G.g==y||FO(G.h,y)))if(!y.K&&FO(G.h,y)&&3==G.G){try{var se=G.Da.g.parse(L)}catch{se=null}if(Array.isArray(se)&&3==se.length){var je=se;if(0==je[0]){e:if(!G.u){if(G.g){if(!(G.g.F+3e3<y.F))break e;IR(G),vR(G)}BO(G),Ta(18)}}else G.za=je[1],0<G.za-G.T&&37500>je[2]&&G.F&&0==G.v&&!G.C&&(G.C=Bw(K(G.Za,G),6e3));if(1>=d2(G.h)&&G.ca){try{G.ca()}catch{}G.ca=void 0}}else Em(G,11)}else if((y.K||G.g==y)&&IR(G),!ln(L))for(je=G.Da.g.parse(L),L=0;L<je.length;L++){let Qr=je[L];if(G.T=Qr[0],Qr=Qr[1],2==G.G)if("c"==Qr[0]){G.K=Qr[1],G.ia=Qr[2];const Qs=Qr[3];null!=Qs&&(G.la=Qs,G.j.info("VER="+G.la));const Ys=Qr[4];null!=Ys&&(G.Aa=Ys,G.j.info("SVER="+G.Aa));const ky=Qr[5];null!=ky&&"number"==typeof ky&&0<ky&&(G.L=se=1.5*ky,G.j.info("backChannelRequestTimeoutMs_="+se)),se=G;const $c=y.g;if($c){const CR=$c.g?$c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(CR){var It=se.h;It.g||-1==CR.indexOf("spdy")&&-1==CR.indexOf("quic")&&-1==CR.indexOf("h2")||(It.j=It.l,It.g=new Set,It.h&&(LO(It,It.h),It.h=null))}if(se.D){const jO=$c.g?$c.g.getResponseHeader("X-HTTP-Session-Id"):null;jO&&(se.ya=jO,Oi(se.I,se.D,jO))}}G.G=3,G.l&&G.l.ua(),G.ba&&(G.R=Date.now()-y.F,G.j.info("Handshake RTT: "+G.R+"ms"));var on=y;if((se=G).qa=L2(se,se.J?se.ia:null,se.W),on.K){h2(se.h,on);var Ei=on,As=se.L;As&&(Ei.I=As),Ei.B&&(kO(Ei),hR(Ei)),se.g=on}else x2(se);0<G.i.length&&yR(G)}else"stop"!=Qr[0]&&"close"!=Qr[0]||Em(G,7);else 3==G.G&&("stop"==Qr[0]||"close"==Qr[0]?"stop"==Qr[0]?Em(G,7):UO(G):"noop"!=Qr[0]&&G.l&&G.l.ta(Qr),G.v=0)}Uw()}catch{}}op.prototype.ca=function(y){y=y.target;const L=this.M;L&&3==ch(y)?L.j():this.Y(y)},op.prototype.Y=function(y){try{if(y==this.g)e:{const Ys=ch(this.g);var L=this.g.Ba();if(this.g.Z(),!(3>Ys)&&(3!=Ys||this.g&&(this.h.h||this.g.oa()||D2(this.g)))){this.J||4!=Ys||7==L||Uw(),kO(this);var G=this.g.Z();this.X=G;t:if(a2(this)){var se=D2(this.g);y="";var je=se.length,It=4==ch(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ym(this),jw(this);var on="";break t}this.h.i=new g.TextDecoder}for(L=0;L<je;L++)this.h.h=!0,y+=this.h.i.decode(se[L],{stream:!(It&&L==je-1)});se.length=0,this.h.g+=y,this.C=0,on=this.h.g}else on=this.g.oa();if(this.o=200==G,function g$(y,L,G,se,je,It,on){y.info(function(){return"XMLHTTP RESP ("+se+") [ attempt "+je+"]: "+L+"\n"+G+"\n"+It+" "+on})}(this.i,this.u,this.A,this.l,this.R,Ys,G),this.o){if(this.T&&!this.K){t:{if(this.g){var Ei,As=this.g;if((Ei=As.g?As.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ln(Ei)){var Qr=Ei;break t}}Qr=null}if(!(G=Qr)){this.o=!1,this.s=3,Ta(12),ym(this),jw(this);break e}My(this.i,this.l,G,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,OO(this,G)}if(this.P){let $c;for(G=!0;!this.J&&this.C<on.length;){if($c=v$(this,on),$c==xO){4==Ys&&(this.s=4,Ta(14),G=!1),My(this.i,this.l,null,"[Incomplete Response]");break}if($c==o2){this.s=4,Ta(15),My(this.i,this.l,on,"[Invalid Chunk]"),G=!1;break}My(this.i,this.l,$c,null),OO(this,$c)}if(a2(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=Ys||0!=on.length||this.h.h||(this.s=1,Ta(16),G=!1),this.o=this.o&&G,G){if(0<on.length&&!this.W){this.W=!0;var Qs=this.j;Qs.g==this&&Qs.ba&&!Qs.M&&(Qs.j.info("Great, no buffering proxy detected. Bytes received: "+on.length),$O(Qs),Qs.M=!0,Ta(11))}}else My(this.i,this.l,on,"[Invalid Chunked Response]"),ym(this),jw(this)}else My(this.i,this.l,on,null),OO(this,on);4==Ys&&ym(this),this.o&&!this.J&&(4==Ys?k2(this.j,this):(this.o=!1,hR(this)))}else(function O$(y){const L={};y=(y.g&&2<=ch(y)&&y.g.getAllResponseHeaders()||"").split("\r\n");for(let se=0;se<y.length;se++){if(ln(y[se]))continue;var G=Be(y[se]);const je=G[0];if("string"!=typeof(G=G[1]))continue;G=G.trim();const It=L[je]||[];L[je]=It,It.push(G)}!function xe(y,L){for(const G in y)L.call(void 0,y[G],G,y)}(L,function(se){return se.join(", ")})})(this.g),400==G&&0<on.indexOf("Unknown SID")?(this.s=3,Ta(12)):(this.s=0,Ta(13)),ym(this),jw(this)}}}catch{}},op.prototype.cancel=function(){this.J=!0,ym(this)},op.prototype.ba=function(){this.B=null;const y=Date.now();0<=y-this.S?(function m$(y,L){y.info(function(){return"TIMEOUT: "+L})}(this.i,this.A),2!=this.L&&(Uw(),Ta(17)),ym(this),this.s=2,jw(this)):l2(this,this.S-y)};var y$=class{constructor(y,L){this.g=y,this.map=L}};function c2(y){this.l=y||10,y=g.PerformanceNavigationTiming?0<(y=g.performance.getEntriesByType("navigation")).length&&("hq"==y[0].nextHopProtocol||"h2"==y[0].nextHopProtocol):!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=y?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function u2(y){return!!y.h||!!y.g&&y.g.size>=y.j}function d2(y){return y.h?1:y.g?y.g.size:0}function FO(y,L){return y.h?y.h==L:!!y.g&&y.g.has(L)}function LO(y,L){y.g?y.g.add(L):y.h=L}function h2(y,L){y.h&&y.h==L?y.h=null:y.g&&y.g.has(L)&&y.g.delete(L)}function f2(y){if(null!=y.h)return y.i.concat(y.h.D);if(null!=y.g&&0!==y.g.size){let L=y.i;for(const G of y.g.values())L=L.concat(G.D);return L}return mt(y.i)}function p2(y,L){if(y.forEach&&"function"==typeof y.forEach)y.forEach(L,void 0);else if(I(y)||"string"==typeof y)Array.prototype.forEach.call(y,L,void 0);else for(var G=function E$(y){if(y.na&&"function"==typeof y.na)return y.na();if(!y.V||"function"!=typeof y.V){if(typeof Map<"u"&&y instanceof Map)return Array.from(y.keys());if(!(typeof Set<"u"&&y instanceof Set)){if(I(y)||"string"==typeof y){var L=[];y=y.length;for(var G=0;G<y;G++)L.push(G);return L}L=[],G=0;for(const se in y)L[G++]=se;return L}}}(y),se=function I$(y){if(y.V&&"function"==typeof y.V)return y.V();if(typeof Map<"u"&&y instanceof Map||typeof Set<"u"&&y instanceof Set)return Array.from(y.values());if("string"==typeof y)return y.split("");if(I(y)){for(var L=[],G=y.length,se=0;se<G;se++)L.push(y[se]);return L}for(se in L=[],G=0,y)L[G++]=y[se];return L}(y),je=se.length,It=0;It<je;It++)L.call(void 0,se[It],G&&G[It],y)}c2.prototype.cancel=function(){if(this.i=f2(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const y of this.g.values())y.cancel();this.g.clear()}};var g2=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Im(y){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,y instanceof Im){this.h=y.h,fR(this,y.j),this.o=y.o,this.g=y.g,pR(this,y.s),this.l=y.l;var L=y.i,G=new Gw;G.i=L.i,L.g&&(G.g=new Map(L.g),G.h=L.h),m2(this,G),this.m=y.m}else y&&(L=String(y).match(g2))?(this.h=!1,fR(this,L[1]||"",!0),this.o=zw(L[2]||""),this.g=zw(L[3]||"",!0),pR(this,L[4]),this.l=zw(L[5]||"",!0),m2(this,L[6]||"",!0),this.m=zw(L[7]||"")):(this.h=!1,this.i=new Gw(null,this.h))}function lh(y){return new Im(y)}function fR(y,L,G){y.j=G?zw(L,!0):L,y.j&&(y.j=y.j.replace(/:$/,""))}function pR(y,L){if(L){if(L=Number(L),isNaN(L)||0>L)throw Error("Bad port number "+L);y.s=L}else y.s=null}function m2(y,L,G){L instanceof Gw?(y.i=L,function S$(y,L){L&&!y.j&&(sp(y),y.i=null,y.g.forEach(function(G,se){var je=se.toLowerCase();se!=je&&(v2(this,se),I2(this,je,G))},y)),y.j=L}(y.i,y.h)):(G||(L=Hw(L,A$)),y.i=new Gw(L,y.h))}function Oi(y,L,G){y.i.set(L,G)}function gR(y){return Oi(y,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),y}function zw(y,L){return y?L?decodeURI(y.replace(/%25/g,"%2525")):decodeURIComponent(y):""}function Hw(y,L,G){return"string"==typeof y?(y=encodeURI(y).replace(L,w$),G&&(y=y.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y):null}function w$(y){return"%"+((y=y.charCodeAt(0))>>4&15).toString(16)+(15&y).toString(16)}Im.prototype.toString=function(){var y=[],L=this.j;L&&y.push(Hw(L,_2,!0),":");var G=this.g;return(G||"file"==L)&&(y.push("//"),(L=this.o)&&y.push(Hw(L,_2,!0),"@"),y.push(encodeURIComponent(String(G)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(G=this.s)&&y.push(":",String(G))),(G=this.l)&&(this.g&&"/"!=G.charAt(0)&&y.push("/"),y.push(Hw(G,"/"==G.charAt(0)?T$:b$,!0))),(G=this.i.toString())&&y.push("?",G),(G=this.m)&&y.push("#",Hw(G,D$)),y.join("")};var _2=/[#\/\?@]/g,b$=/[#\?:]/g,T$=/[#\?]/g,A$=/[#\?@]/g,D$=/#/g;function Gw(y,L){this.h=this.g=null,this.i=y||null,this.j=!!L}function sp(y){y.g||(y.g=new Map,y.h=0,y.i&&function C$(y,L){if(y){y=y.split("&");for(var G=0;G<y.length;G++){var se=y[G].indexOf("="),je=null;if(0<=se){var It=y[G].substring(0,se);je=y[G].substring(se+1)}else It=y[G];L(It,je?decodeURIComponent(je.replace(/\+/g," ")):"")}}}(y.i,function(L,G){y.add(decodeURIComponent(L.replace(/\+/g," ")),G)}))}function v2(y,L){sp(y),L=xy(y,L),y.g.has(L)&&(y.i=null,y.h-=y.g.get(L).length,y.g.delete(L))}function y2(y,L){return sp(y),L=xy(y,L),y.g.has(L)}function I2(y,L,G){v2(y,L),0<G.length&&(y.i=null,y.g.set(xy(y,L),mt(G)),y.h+=G.length)}function xy(y,L){return L=String(L),y.j&&(L=L.toLowerCase()),L}function ap(y,L,G,se,je){try{je&&(je.onload=null,je.onerror=null,je.onabort=null,je.ontimeout=null),se(G)}catch{}}function M$(){this.g=new f$}function x$(y,L,G){const se=G||"";try{p2(y,function(je,It){let on=je;T(je)&&(on=DO(je)),L.push(se+It+"="+encodeURIComponent(on))})}catch(je){throw L.push(se+"type="+encodeURIComponent("_badmap")),je}}function Ww(y){this.l=y.Ub||null,this.j=y.eb||!1}function mR(y,L){Xs.call(this),this.D=y,this.o=L,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function E2(y){y.j.read().then(y.Pa.bind(y)).catch(y.ga.bind(y))}function qw(y){y.readyState=4,y.l=null,y.j=null,y.v=null,Kw(y)}function Kw(y){y.onreadystatechange&&y.onreadystatechange.call(y)}function C2(y){let L="";return Wn(y,function(G,se){L+=se,L+=":",L+=G,L+="\r\n"}),L}function VO(y,L,G){e:{for(se in G){var se=!1;break e}se=!0}se||(G=C2(G),"string"==typeof y?null!=G&&encodeURIComponent(String(G)):Oi(y,L,G))}function oo(y){Xs.call(this),this.headers=new Map,this.o=y||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=Gw.prototype).add=function(y,L){sp(this),this.i=null,y=xy(this,y);var G=this.g.get(y);return G||this.g.set(y,G=[]),G.push(L),this.h+=1,this},n.forEach=function(y,L){sp(this),this.g.forEach(function(G,se){G.forEach(function(je){y.call(L,je,se,this)},this)},this)},n.na=function(){sp(this);const y=Array.from(this.g.values()),L=Array.from(this.g.keys()),G=[];for(let se=0;se<L.length;se++){const je=y[se];for(let It=0;It<je.length;It++)G.push(L[se])}return G},n.V=function(y){sp(this);let L=[];if("string"==typeof y)y2(this,y)&&(L=L.concat(this.g.get(xy(this,y))));else{y=Array.from(this.g.values());for(let G=0;G<y.length;G++)L=L.concat(y[G])}return L},n.set=function(y,L){return sp(this),this.i=null,y2(this,y=xy(this,y))&&(this.h-=this.g.get(y).length),this.g.set(y,[L]),this.h+=1,this},n.get=function(y,L){return y&&0<(y=this.V(y)).length?String(y[0]):L},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const y=[],L=Array.from(this.g.keys());for(var G=0;G<L.length;G++){var se=L[G];const It=encodeURIComponent(String(se)),on=this.V(se);for(se=0;se<on.length;se++){var je=It;""!==on[se]&&(je+="="+encodeURIComponent(String(on[se]))),y.push(je)}}return this.i=y.join("&")},De(Ww,SO),Ww.prototype.g=function(){return new mR(this.l,this.j)},Ww.prototype.i=function(y){return function(){return y}}({}),De(mR,Xs),(n=mR.prototype).open=function(y,L){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=y,this.A=L,this.readyState=1,Kw(this)},n.send=function(y){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const L={headers:this.u,method:this.B,credentials:this.m,cache:void 0};y&&(L.body=y),(this.D||g).fetch(new Request(this.A,L)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,qw(this)),this.readyState=0},n.Sa=function(y){if(this.g&&(this.l=y,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=y.headers,this.readyState=2,Kw(this)),this.g&&(this.readyState=3,Kw(this),this.g)))if("arraybuffer"===this.responseType)y.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in y){if(this.j=y.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;E2(this)}else y.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(y){if(this.g){if(this.o&&y.value)this.response.push(y.value);else if(!this.o){var L=y.value?y.value:new Uint8Array(0);(L=this.v.decode(L,{stream:!y.done}))&&(this.response=this.responseText+=L)}y.done?qw(this):Kw(this),3==this.readyState&&E2(this)}},n.Ra=function(y){this.g&&(this.response=this.responseText=y,qw(this))},n.Qa=function(y){this.g&&(this.response=y,qw(this))},n.ga=function(){this.g&&qw(this)},n.setRequestHeader=function(y,L){this.u.append(y,L)},n.getResponseHeader=function(y){return this.h&&this.h.get(y.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const y=[],L=this.h.entries();for(var G=L.next();!G.done;)y.push((G=G.value)[0]+": "+G[1]),G=L.next();return y.join("\r\n")},Object.defineProperty(mR.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(y){this.m=y?"include":"same-origin"}}),De(oo,Xs);var N$=/^https?$/i,k$=["POST","PUT"];function w2(y,L){y.h=!1,y.g&&(y.j=!0,y.g.abort(),y.j=!1),y.l=L,y.m=5,b2(y),_R(y)}function b2(y){y.A||(y.A=!0,ba(y,"complete"),ba(y,"error"))}function T2(y){if(y.h&&typeof d<"u"&&(!y.v[1]||4!=ch(y)||2!=y.Z()))if(y.u&&4==ch(y))qV(y.Ea,0,y);else if(ba(y,"readystatechange"),4==ch(y)){y.h=!1;try{const on=y.Z();e:switch(on){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var L=!0;break e;default:L=!1}var G;if(!(G=L)){var se;if(se=0===on){var je=String(y.D).match(g2)[1]||null;!je&&g.self&&g.self.location&&(je=g.self.location.protocol.slice(0,-1)),se=!N$.test(je?je.toLowerCase():"")}G=se}if(G)ba(y,"complete"),ba(y,"success");else{y.m=6;try{var It=2<ch(y)?y.g.statusText:""}catch{It=""}y.l=It+" ["+y.Z()+"]",b2(y)}}finally{_R(y)}}}function _R(y,L){if(y.g){A2(y);const G=y.g,se=y.v[0]?()=>{}:null;y.g=null,y.v=null,L||ba(y,"ready");try{G.onreadystatechange=se}catch{}}}function A2(y){y.I&&(g.clearTimeout(y.I),y.I=null)}function ch(y){return y.g?y.g.readyState:0}function D2(y){try{if(!y.g)return null;if("response"in y.g)return y.g.response;switch(y.H){case"":case"text":return y.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in y.g)return y.g.mozResponseArrayBuffer}return null}catch{return null}}function Xw(y,L,G){return G&&G.internalChannelParams&&G.internalChannelParams[y]||L}function S2(y){this.Aa=0,this.i=[],this.j=new $w,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Xw("failFast",!1,y),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Xw("baseRetryDelayMs",5e3,y),this.cb=Xw("retryDelaySeedMs",1e4,y),this.Wa=Xw("forwardChannelMaxRetries",2,y),this.wa=Xw("forwardChannelRequestTimeoutMs",2e4,y),this.pa=y&&y.xmlHttpFactory||void 0,this.Xa=y&&y.Tb||void 0,this.Ca=y&&y.useFetchStreams||!1,this.L=void 0,this.J=y&&y.supportsCrossDomainXhr||!1,this.K="",this.h=new c2(y&&y.concurrentRequestLimit),this.Da=new M$,this.P=y&&y.fastHandshake||!1,this.O=y&&y.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=y&&y.Rb||!1,y&&y.xa&&this.j.xa(),y&&y.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&y&&y.detectBufferingProxy||!1,this.ja=void 0,y&&y.longPollingTimeout&&0<y.longPollingTimeout&&(this.ja=y.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function UO(y){if(R2(y),3==y.G){var L=y.U++,G=lh(y.I);if(Oi(G,"SID",y.K),Oi(G,"RID",L),Oi(G,"TYPE","terminate"),Qw(y,G),(L=new op(y,y.j,L)).L=2,L.v=gR(lh(G)),G=!1,g.navigator&&g.navigator.sendBeacon)try{G=g.navigator.sendBeacon(L.v.toString(),"")}catch{}!G&&g.Image&&((new Image).src=L.v,G=!0),G||(L.g=V2(L.j,null),L.g.ea(L.v)),L.F=Date.now(),hR(L)}F2(y)}function vR(y){y.g&&($O(y),y.g.cancel(),y.g=null)}function R2(y){vR(y),y.u&&(g.clearTimeout(y.u),y.u=null),IR(y),y.h.cancel(),y.s&&("number"==typeof y.s&&g.clearTimeout(y.s),y.s=null)}function yR(y){if(!u2(y.h)&&!y.s){y.s=!0;var L=y.Ga;Nw||$V(),kw||(Nw(),kw=!0),vO.add(L,y),y.B=0}}function P2(y,L){var G;G=L?L.l:y.U++;const se=lh(y.I);Oi(se,"SID",y.K),Oi(se,"RID",G),Oi(se,"AID",y.T),Qw(y,se),y.m&&y.o&&VO(se,y.m,y.o),G=new op(y,y.j,G,y.B+1),null===y.m&&(G.H=y.o),L&&(y.i=L.D.concat(y.i)),L=M2(y,G,1e3),G.I=Math.round(.5*y.wa)+Math.round(.5*y.wa*Math.random()),LO(y.h,G),NO(G,se,L)}function Qw(y,L){y.H&&Wn(y.H,function(G,se){Oi(L,se,G)}),y.l&&p2({},function(G,se){Oi(L,se,G)})}function M2(y,L,G){G=Math.min(y.i.length,G);var se=y.l?K(y.l.Na,y.l,y):null;e:{var je=y.i;let It=-1;for(;;){const on=["count="+G];-1==It?0<G?(It=je[0].g,on.push("ofs="+It)):It=0:on.push("ofs="+It);let Ei=!0;for(let As=0;As<G;As++){let Qr=je[As].g;const Qs=je[As].map;if(Qr-=It,0>Qr)It=Math.max(0,je[As].g-100),Ei=!1;else try{x$(Qs,on,"req"+Qr+"_")}catch{se&&se(Qs)}}if(Ei){se=on.join("&");break e}}}return y=y.i.splice(0,G),L.D=y,se}function x2(y){if(!y.g&&!y.u){y.Y=1;var L=y.Fa;Nw||$V(),kw||(Nw(),kw=!0),vO.add(L,y),y.v=0}}function BO(y){return!(y.g||y.u||3<=y.v||(y.Y++,y.u=Bw(K(y.Fa,y),O2(y,y.v)),y.v++,0))}function $O(y){null!=y.A&&(g.clearTimeout(y.A),y.A=null)}function N2(y){y.g=new op(y,y.j,"rpc",y.Y),null===y.m&&(y.g.H=y.o),y.g.O=0;var L=lh(y.qa);Oi(L,"RID","rpc"),Oi(L,"SID",y.K),Oi(L,"AID",y.T),Oi(L,"CI",y.F?"0":"1"),!y.F&&y.ja&&Oi(L,"TO",y.ja),Oi(L,"TYPE","xmlhttp"),Qw(y,L),y.m&&y.o&&VO(L,y.m,y.o),y.L&&(y.g.I=y.L);var G=y.g;y=y.ia,G.L=1,G.v=gR(lh(L)),G.m=null,G.P=!0,s2(G,y)}function IR(y){null!=y.C&&(g.clearTimeout(y.C),y.C=null)}function k2(y,L){var G=null;if(y.g==L){IR(y),$O(y),y.g=null;var se=2}else{if(!FO(y.h,L))return;G=L.D,h2(y.h,L),se=1}if(0!=y.G)if(L.o)if(1==se){G=L.m?L.m.length:0,L=Date.now()-L.F;var je=y.B;ba(se=cR(),new n2(se,G)),yR(y)}else x2(y);else if(3==(je=L.s)||0==je&&0<L.X||!(1==se&&function F$(y,L){return!(d2(y.h)>=y.h.j-(y.s?1:0)||(y.s?(y.i=L.D.concat(y.i),0):1==y.G||2==y.G||y.B>=(y.Va?0:y.Wa)||(y.s=Bw(K(y.Ga,y,L),O2(y,y.B)),y.B++,0)))}(y,L)||2==se&&BO(y)))switch(G&&0<G.length&&(L=y.h,L.i=L.i.concat(G)),je){case 1:Em(y,5);break;case 4:Em(y,10);break;case 3:Em(y,6);break;default:Em(y,2)}}function O2(y,L){let G=y.Ta+Math.floor(Math.random()*y.cb);return y.isActive()||(G*=2),G*L}function Em(y,L){if(y.j.info("Error code "+L),2==L){var G=K(y.fb,y),se=y.Xa;const je=!se;se=new Im(se||"//www.google.com/images/cleardot.gif"),g.location&&"http"==g.location.protocol||fR(se,"https"),gR(se),je?function R$(y,L){const G=new $w;if(g.Image){const se=new Image;se.onload=ue(ap,G,"TestLoadImage: loaded",!0,L,se),se.onerror=ue(ap,G,"TestLoadImage: error",!1,L,se),se.onabort=ue(ap,G,"TestLoadImage: abort",!1,L,se),se.ontimeout=ue(ap,G,"TestLoadImage: timeout",!1,L,se),g.setTimeout(function(){se.ontimeout&&se.ontimeout()},1e4),se.src=y}else L(!1)}(se.toString(),G):function P$(y,L){new $w;const se=new AbortController,je=setTimeout(()=>{se.abort(),ap(0,0,!1,L)},1e4);fetch(y,{signal:se.signal}).then(It=>{clearTimeout(je),ap(0,0,!!It.ok,L)}).catch(()=>{clearTimeout(je),ap(0,0,!1,L)})}(se.toString(),G)}else Ta(2);y.G=0,y.l&&y.l.sa(L),F2(y),R2(y)}function F2(y){if(y.G=0,y.ka=[],y.l){const L=f2(y.h);(0!=L.length||0!=y.i.length)&&(ht(y.ka,L),ht(y.ka,y.i),y.h.i.length=0,mt(y.i),y.i.length=0),y.l.ra()}}function L2(y,L,G){var se=G instanceof Im?lh(G):new Im(G);if(""!=se.g)L&&(se.g=L+"."+se.g),pR(se,se.s);else{var je=g.location;se=je.protocol,L=L?L+"."+je.hostname:je.hostname,je=+je.port;var It=new Im(null);se&&fR(It,se),L&&(It.g=L),je&&pR(It,je),G&&(It.l=G),se=It}return L=y.ya,(G=y.D)&&L&&Oi(se,G,L),Oi(se,"VER",y.la),Qw(y,se),se}function V2(y,L,G){if(L&&!y.J)throw Error("Can't create secondary domain capable XhrIo object.");return(L=new oo(y.Ca&&!y.pa?new Ww({eb:G}):y.pa)).Ha(y.J),L}function U2(){}function ER(){}function Il(y,L){Xs.call(this),this.g=new S2(L),this.l=y,this.h=L&&L.messageUrlParams||null,y=L&&L.messageHeaders||null,L&&L.clientProtocolHeaderRequired&&(y?y["X-Client-Protocol"]="webchannel":y={"X-Client-Protocol":"webchannel"}),this.g.o=y,y=L&&L.initMessageHeaders||null,L&&L.messageContentType&&(y?y["X-WebChannel-Content-Type"]=L.messageContentType:y={"X-WebChannel-Content-Type":L.messageContentType}),L&&L.va&&(y?y["X-WebChannel-Client-Profile"]=L.va:y={"X-WebChannel-Client-Profile":L.va}),this.g.S=y,(y=L&&L.Sb)&&!ln(y)&&(this.g.m=y),this.v=L&&L.supportsCrossDomainXhr||!1,this.u=L&&L.sendRawJson||!1,(L=L&&L.httpSessionIdParam)&&!ln(L)&&(this.g.D=L,null!==(y=this.h)&&L in y&&L in(y=this.h)&&delete y[L]),this.j=new Ny(this)}function B2(y){RO.call(this),y.__headers__&&(this.headers=y.__headers__,this.statusCode=y.__status__,delete y.__headers__,delete y.__status__);var L=y.__sm__;if(L){e:{for(const G in L){y=G;break e}y=void 0}(this.i=y)&&(y=this.i,L=null!==L&&y in L?L[y]:void 0),this.data=L}else this.data=y}function $2(){PO.call(this),this.status=1}function Ny(y){this.g=y}(n=oo.prototype).Ha=function(y){this.J=y},n.ea=function(y,L,G,se){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+y);L=L?L.toUpperCase():"GET",this.D=y,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():MO.g(),this.v=function YV(y){return y.h||(y.h=y.i())}(this.o?this.o:MO),this.g.onreadystatechange=K(this.Ea,this);try{this.B=!0,this.g.open(L,String(y),!0),this.B=!1}catch(It){return void w2(this,It)}if(y=G||"",G=new Map(this.headers),se)if(Object.getPrototypeOf(se)===Object.prototype)for(var je in se)G.set(je,se[je]);else{if("function"!=typeof se.keys||"function"!=typeof se.get)throw Error("Unknown input type for opt_headers: "+String(se));for(const It of se.keys())G.set(It,se.get(It))}se=Array.from(G.keys()).find(It=>"content-type"==It.toLowerCase()),je=g.FormData&&y instanceof g.FormData,!(0<=Array.prototype.indexOf.call(k$,L,void 0))||se||je||G.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[It,on]of G)this.g.setRequestHeader(It,on);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{A2(this),this.u=!0,this.g.send(y),this.u=!1}catch(It){w2(this,It)}},n.abort=function(y){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=y||7,ba(this,"complete"),ba(this,"abort"),_R(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_R(this,!0)),oo.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?T2(this):this.bb())},n.bb=function(){T2(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<ch(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(y){if(this.g){var L=this.g.responseText;return y&&0==L.indexOf(y)&&(L=L.substring(y.length)),h$(L)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=S2.prototype).la=8,n.G=1,n.connect=function(y,L,G,se){Ta(0),this.W=y,this.H=L||{},G&&void 0!==se&&(this.H.OSID=G,this.H.OAID=se),this.F=this.X,this.I=L2(this,null,this.W),yR(this)},n.Ga=function(y){if(this.s)if(this.s=null,1==this.G){if(!y){this.U=Math.floor(1e5*Math.random()),y=this.U++;const je=new op(this,this.j,y);let It=this.o;if(this.S&&(It?(It=ge(It),Fe(It,this.S)):It=this.S),null!==this.m||this.O||(je.H=It,It=null),this.P)e:{for(var L=0,G=0;G<this.i.length;G++){var se=this.i[G];if(void 0===(se="__data__"in se.map&&"string"==typeof(se=se.map.__data__)?se.length:void 0))break;if(4096<(L+=se)){L=G;break e}if(4096===L||G===this.i.length-1){L=G+1;break e}}L=1e3}else L=1e3;L=M2(this,je,L),Oi(G=lh(this.I),"RID",y),Oi(G,"CVER",22),this.D&&Oi(G,"X-HTTP-Session-Id",this.D),Qw(this,G),It&&(this.O?L="headers="+encodeURIComponent(String(C2(It)))+"&"+L:this.m&&VO(G,this.m,It)),LO(this.h,je),this.Ua&&Oi(G,"TYPE","init"),this.P?(Oi(G,"$req",L),Oi(G,"SID","null"),je.T=!0,NO(je,G,null)):NO(je,G,L),this.G=2}}else 3==this.G&&(y?P2(this,y):0==this.i.length||u2(this.h)||P2(this))},n.Fa=function(){if(this.u=null,N2(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var y=2*this.R;this.j.info("BP detection timer enabled: "+y),this.A=Bw(K(this.ab,this),y)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ta(10),vR(this),N2(this))},n.Za=function(){null!=this.C&&(this.C=null,vR(this),BO(this),Ta(19))},n.fb=function(y){y?(this.j.info("Successfully pinged google.com"),Ta(2)):(this.j.info("Failed to ping google.com"),Ta(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=U2.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},ER.prototype.g=function(y,L){return new Il(y,L)},De(Il,Xs),Il.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Il.prototype.close=function(){UO(this.g)},Il.prototype.o=function(y){var L=this.g;if("string"==typeof y){var G={};G.__data__=y,y=G}else this.u&&((G={}).__data__=DO(y),y=G);L.i.push(new y$(L.Ya++,y)),3==L.G&&yR(L)},Il.prototype.N=function(){this.g.l=null,delete this.j,UO(this.g),delete this.g,Il.aa.N.call(this)},De(B2,RO),De($2,PO),De(Ny,U2),Ny.prototype.ua=function(){ba(this.g,"a")},Ny.prototype.ta=function(y){ba(this.g,new B2(y))},Ny.prototype.sa=function(y){ba(this.g,new $2)},Ny.prototype.ra=function(){ba(this.g,"b")},ER.prototype.createWebChannel=ER.prototype.g,Il.prototype.send=Il.prototype.o,Il.prototype.open=Il.prototype.m,Il.prototype.close=Il.prototype.close,pT=$s.createWebChannelTransport=function(){return new ER},fT=$s.getStatEventTarget=function(){return cR()},X0=$s.Event=vm,K0=$s.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},uR.NO_ERROR=0,uR.TIMEOUT=8,uR.HTTP_ERROR=6,m_=$s.ErrorCode=uR,r2.COMPLETE="complete",Kp=$s.EventType=r2,JV.EventType=Vw,Vw.OPEN="a",Vw.CLOSE="b",Vw.ERROR="c",Vw.MESSAGE="d",Xs.prototype.listen=Xs.prototype.K,_d=$s.WebChannel=JV,q0=$s.FetchXmlHttpFactory=Ww,oo.prototype.listenOnce=oo.prototype.L,oo.prototype.getLastError=oo.prototype.Ka,oo.prototype.getLastErrorCode=oo.prototype.Ba,oo.prototype.getStatus=oo.prototype.Z,oo.prototype.getResponseJson=oo.prototype.Oa,oo.prototype.getResponseText=oo.prototype.oa,oo.prototype.send=oo.prototype.ea,oo.prototype.setWithCredentials=oo.prototype.Ha,g_=$s.XhrIo=oo}).apply(typeof p_<"u"?p_:typeof self<"u"?self:typeof window<"u"?window:{});const gT="@firebase/firestore";class mo{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}mo.UNAUTHENTICATED=new mo(null),mo.GOOGLE_CREDENTIALS=new mo("google-credentials-uid"),mo.FIRST_PARTY=new mo("first-party-uid"),mo.MOCK_USER=new mo("mock-user");let zl="10.12.1";const sl=new qn("@firebase/firestore");function ou(){return sl.logLevel}function Vt(n,...e){if(sl.logLevel<=Tn.DEBUG){const t=e.map(mc);sl.debug(`Firestore (${zl}): ${n}`,...t)}}function Mi(n,...e){if(sl.logLevel<=Tn.ERROR){const t=e.map(mc);sl.error(`Firestore (${zl}): ${n}`,...t)}}function Is(n,...e){if(sl.logLevel<=Tn.WARN){const t=e.map(mc);sl.warn(`Firestore (${zl}): ${n}`,...t)}}function mc(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function un(n="Unexpected state"){const e=`FIRESTORE (${zl}) INTERNAL ASSERTION FAILED: `+n;throw Mi(e),new Error(e)}function Cn(n,e){n||un()}function en(n,e){return n}const dt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class kt extends $t{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class io{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Q0{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class mT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(mo.UNAUTHENTICATED))}shutdown(){}}class Y0{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class _T{constructor(e){this.t=e,this.currentUser=mo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let s=this.i;const c=T=>this.i!==s?(s=this.i,t(T)):Promise.resolve();let d=new io;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new io,e.enqueueRetryable(()=>c(this.currentUser))};const g=()=>{const T=d;e.enqueueRetryable((0,X.A)(function*(){yield T.promise,yield c(r.currentUser)}))},I=T=>{Vt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=T,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(T=>I(T)),setTimeout(()=>{if(!this.auth){const T=this.t.getImmediate({optional:!0});T?I(T):(Vt("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new io)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Vt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Cn("string"==typeof r.accessToken),new Q0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Cn(null===e||"string"==typeof e),new mo(e)}}class __{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=mo.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Xp{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new __(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(mo.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class J0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Z0{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=c=>{null!=c.error&&Vt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.R;return this.R=c.token,Vt("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>r(c))};const s=c=>{Vt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.appCheck.addTokenListener(this.o)};this.A.onInit(c=>s(c)),setTimeout(()=>{if(!this.appCheck){const c=this.A.getImmediate({optional:!0});c?s(c):Vt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Cn("string"==typeof t.token),this.R=t.token,new J0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function vT(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class y_{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const s=vT(40);for(let c=0;c<s.length;++c)r.length<20&&s[c]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(s[c]%62))}return r}}function Hn(n,e){return n<e?-1:n>e?1:0}function Bh(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function eI(n){return n+"\0"}class wi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new kt(dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new kt(dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new kt(dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new kt(dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return wi.fromMillis(Date.now())}static fromDate(e){return wi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new wi(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Hn(this.nanoseconds,e.nanoseconds):Hn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Sn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Sn(e)}static min(){return new Sn(new wi(0,0))}static max(){return new Sn(new wi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Qp{constructor(e,t,r){void 0===t?t=0:t>e.length&&un(),void 0===r?r=e.length-t:r>e.length-t&&un(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Qp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Qp?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const c=e.get(s),d=t.get(s);if(c<d)return-1;if(c>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class br extends Qp{construct(e,t,r){return new br(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new kt(dt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new br(t)}static emptyPath(){return new br([])}}const yT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fn extends Qp{construct(e,t,r){return new fn(e,t,r)}static isValidIdentifier(e){return yT.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new fn(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const c=()=>{if(0===r.length)throw new kt(dt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;s<e.length;){const g=e[s];if("\\"===g){if(s+1===e.length)throw new kt(dt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const I=e[s+1];if("\\"!==I&&"."!==I&&"`"!==I)throw new kt(dt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=I,s+=2}else"`"===g?(d=!d,s++):"."!==g||d?(r+=g,s++):(c(),s++)}if(c(),d)throw new kt(dt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fn(t)}static emptyPath(){return new fn([])}}class tn{constructor(e){this.path=e}static fromPath(e){return new tn(br.fromString(e))}static fromName(e){return new tn(br.fromString(e).popFirst(5))}static empty(){return new tn(br.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===br.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return br.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new tn(new br(e.slice()))}}class vd{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function su(n){return n.fields.find(e=>2===e.kind)}function au(n){return n.fields.filter(e=>2!==e.kind)}vd.UNKNOWN_ID=-1;class yd{constructor(e,t){this.fieldPath=e,this.kind=t}}class al{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new al(0,js.min())}}function E_(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Sn.fromTimestamp(1e9===r?new wi(t+1,0):new wi(t,r));return new js(s,tn.empty(),e)}function $h(n){return new js(n.readTime,n.key,-1)}class js{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new js(Sn.min(),tn.empty(),-1)}static max(){return new js(Sn.max(),tn.empty(),-1)}}function Yp(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=tn.comparator(n.documentKey,e.documentKey),0!==t?t:Hn(n.largestBatchId,e.largestBatchId))}const C_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class w_{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function _c(n){return Jp.apply(this,arguments)}function Jp(){return Jp=(0,X.A)(function*(n){if(n.code!==dt.FAILED_PRECONDITION||n.message!==C_)throw n;Vt("LocalStore","Unexpectedly lost primary lease")}),Jp.apply(this,arguments)}class ze{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&un(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ze((r,s)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,s)},this.catchCallback=c=>{this.wrapFailure(t,c).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ze?t:ze.resolve(t)}catch(t){return ze.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ze.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ze.reject(t)}static resolve(e){return new ze((t,r)=>{t(e)})}static reject(e){return new ze((t,r)=>{r(e)})}static waitFor(e){return new ze((t,r)=>{let s=0,c=0,d=!1;e.forEach(g=>{++s,g.next(()=>{++c,d&&c===s&&t()},I=>r(I))}),d=!0,c===s&&t()})}static or(e){let t=ze.resolve(!1);for(const r of e)t=t.next(s=>s?ze.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,c)=>{r.push(t.call(this,s,c))}),this.waitFor(r)}static mapArray(e,t){return new ze((r,s)=>{const c=e.length,d=new Array(c);let g=0;for(let I=0;I<c;I++){const T=I;t(e[T]).next(k=>{d[T]=k,++g,g===c&&r(d)},k=>s(k))}})}static doWhile(e,t){return new ze((r,s)=>{const c=()=>{!0===e()?t().next(()=>{c()},s):r()};c()})}}class b_{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new io,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Zp(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const s=rI(r.target.error);this.V.reject(new Zp(e,s))}}static open(e,t,r,s){try{return new b_(t,e.transaction(s,r))}catch(c){throw new Zp(t,c)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Vt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new eM(t)}}class Hl{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===Hl.S(Ft())&&Mi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Vt("SimpleDb","Removing database:",e),cu(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Le())return!1;if(Hl.C())return!0;const e=Ft(),t=Hl.S(e),r=0<t&&t<10,s=tI(e),c=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||c)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.v)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){var t=this;return(0,X.A)(function*(){return t.db||(Vt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,s)=>{const c=indexedDB.open(t.name,t.version);c.onsuccess=d=>{r(d.target.result)},c.onblocked=()=>{s(new Zp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=d=>{const g=d.target.error;s("VersionError"===g.name?new kt(dt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new kt(dt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new Zp(e,g))},c.onupgradeneeded=d=>{Vt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.p.O(d.target.result,c.transaction,d.oldVersion,t.version).next(()=>{Vt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.N&&(t.db.onversionchange=r=>t.N(r)),t.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,s){var c=this;return(0,X.A)(function*(){const d="readonly"===t;let g=0;for(;;){++g;try{c.db=yield c.M(e);const I=b_.open(c.db,e,d?"readonly":"readwrite",r),T=s(I).next(k=>(I.g(),k)).catch(k=>(I.abort(k),ze.reject(k))).toPromise();return T.catch(()=>{}),yield I.m,T}catch(I){const T=I,k="FirebaseError"!==T.name&&g<3;if(Vt("SimpleDb","Transaction failed with error:",T.message,"Retrying:",k),c.close(),!k)return Promise.reject(T)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function tI(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class ZP{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return cu(this.B.delete())}}class Zp extends kt{constructor(e,t){super(dt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function lu(n){return"IndexedDbTransactionError"===n.name}class eM{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Vt("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Vt("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),cu(r)}add(e){return Vt("SimpleDb","ADD",this.store.name,e,e),cu(this.store.add(e))}get(e){return cu(this.store.get(e)).next(t=>(void 0===t&&(t=null),Vt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Vt("SimpleDb","DELETE",this.store.name,e),cu(this.store.delete(e))}count(){return Vt("SimpleDb","COUNT",this.store.name),cu(this.store.count())}U(e,t){const r=this.options(e,t),s=r.index?this.store.index(r.index):this.store;if("function"==typeof s.getAll){const c=s.getAll(r.range);return new ze((d,g)=>{c.onerror=I=>{g(I.target.error)},c.onsuccess=I=>{d(I.target.result)}})}{const c=this.cursor(r),d=[];return this.W(c,(g,I)=>{d.push(I)}).next(()=>d)}}G(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ze((s,c)=>{r.onerror=d=>{c(d.target.error)},r.onsuccess=d=>{s(d.target.result)}})}j(e,t){Vt("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const s=this.cursor(r);return this.W(s,(c,d,g)=>g.delete())}J(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.W(s,t)}Y(e){const t=this.cursor({});return new ze((r,s)=>{t.onerror=c=>{const d=rI(c.target.error);s(d)},t.onsuccess=c=>{const d=c.target.result;d?e(d.primaryKey,d.value).next(g=>{g?d.continue():r()}):r()}})}W(e,t){const r=[];return new ze((s,c)=>{e.onerror=d=>{c(d.target.error)},e.onsuccess=d=>{const g=d.target.result;if(!g)return void s();const I=new ZP(g),T=t(g.primaryKey,g.value,I);if(T instanceof ze){const k=T.catch(B=>(I.done(),ze.reject(B)));r.push(k)}I.isDone?s():null===I.K?g.continue():g.continue(I.K)}}).next(()=>ze.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function cu(n){return new ze((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const s=rI(r.target.error);t(s)}})}let nI=!1;function rI(n){const e=Hl.S(Ft());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new kt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return nI||(nI=!0,setTimeout(()=>{throw r},0)),r}}return n}class tM{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var t=this;Vt("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,X.A)(function*(){t.task=null;try{Vt("IndexBackfiller",`Documents written: ${yield t.Z.ee()}`)}catch(r){lu(r)?Vt("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield _c(r)}yield t.X(6e4)}))}}class zs{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){var t=this;return(0,X.A)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.te(r,e))})()}te(e,t){const r=new Set;let s=t,c=!0;return ze.doWhile(()=>!0===c&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(d=>{if(null!==d&&!r.has(d))return Vt("IndexBackfiller",`Processing collection: ${d}`),this.ne(e,d,s).next(g=>{s-=g,r.add(d)});c=!1})).next(()=>t-s)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(c=>{const d=c.changes;return this.localStore.indexManager.updateIndexEntries(e,d).next(()=>this.re(s,c)).next(g=>(Vt("IndexBackfiller",`Updating offset: ${g}`),this.localStore.indexManager.updateCollectionGroup(e,t,g))).next(()=>d.size)}))}re(e,t){let r=e;return t.changes.forEach((s,c)=>{const d=$h(c);Yp(d,r)>0&&(r=d)}),new js(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let ga=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=s=>this.ie(s),this.se=s=>r.writeSequenceNumber(s))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function eg(n){return null==n}function T_(n){return 0===n&&1/n==-1/0}function A_(n){return"number"==typeof n&&Number.isInteger(n)&&!T_(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Jo(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=ET(e)),e=nM(n.get(t),e);return ET(e)}function nM(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const c=n.charAt(s);switch(c){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=c}}return t}function ET(n){return n+"\x01\x01"}function Gl(n){const e=n.length;if(Cn(e>=2),2===e)return Cn("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),br.emptyPath();const t=e-2,r=[];let s="";for(let c=0;c<e;){const d=n.indexOf("\x01",c);switch((d<0||d>t)&&un(),n.charAt(d+1)){case"\x01":const g=n.substring(c,d);let I;0===s.length?I=g:(s+=g,I=s,s=""),r.push(I);break;case"\x10":s+=n.substring(c,d),s+="\0";break;case"\x11":s+=n.substring(c,d+1);break;default:un()}c=d+2}return new br(r)}const iI=["userId","batchId"];function D_(n,e){return[n,Jo(e)]}function CT(n,e,t){return[n,Jo(e),t]}const oI={},rM=["prefixPath","collectionGroup","readTime","documentId"],iM=["prefixPath","collectionGroup","documentId"],oM=["collectionGroup","readTime","prefixPath","documentId"],sM=["canonicalId","targetId"],aM=["targetId","path"],Wl=["path","targetId"],sI=["collectionId","parent"],lM=["indexId","uid"],cM=["uid","sequenceNumber"],wT=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],bT=["indexId","uid","orderedDocumentKey"],S_=["userId","collectionPath","documentId"],aI=["userId","collectionPath","largestBatchId"],_F=["userId","collectionGroup","largestBatchId"],lI=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],TT=[...lI,"documentOverlays"],cI=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],tg=cI,R_=[...tg,"indexConfiguration","indexState","indexEntries"],vc=R_;class uI extends w_{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function ko(n,e){const t=en(n);return Hl.F(t._e,e)}function P_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function uu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function dI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Gr{constructor(e,t){this.comparator=e,this.root=t||_o.EMPTY}insert(e,t){return new Gr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,_o.BLACK,null,null))}remove(e){return new Gr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_o.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new du(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new du(this.root,e,this.comparator,!1)}getReverseIterator(){return new du(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new du(this.root,e,this.comparator,!0)}}class du{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,t&&s&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(0===c){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _o{constructor(e,t,r,s,c){this.key=e,this.value=t,this.color=null!=r?r:_o.RED,this.left=null!=s?s:_o.EMPTY,this.right=null!=c?c:_o.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,c){return new _o(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=s?s:this.left,null!=c?c:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const c=r(e,s.key);return s=c<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===c?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return _o.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return _o.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_o.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_o.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw un();const e=this.left.check();if(e!==this.right.check())throw un();return e+(this.isRed()?0:1)}}_o.EMPTY=null,_o.RED=!0,_o.BLACK=!1,_o.EMPTY=new class{constructor(){this.size=0}get key(){throw un()}get value(){throw un()}get color(){throw un()}get left(){throw un()}get right(){throw un()}copy(e,t,r,s,c){return this}insert(e,t,r){return new _o(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Vr{constructor(e){this.comparator=e,this.data=new Gr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new hI(this.data.getIterator())}getIteratorFrom(e){return new hI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Vr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,c=r.getNext().key;if(0!==this.comparator(s,c))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Vr(this.comparator);return t.data=e,t}}class hI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Id(n){return n.hasNext()?n.getNext():void 0}class Hs{constructor(e){this.fields=e,e.sort(fn.comparator)}static empty(){return new Hs([])}unionWith(e){let t=new Vr(fn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Hs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Bh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class AT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class vo{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new AT("Invalid base64 string: "+c):c}}(e);return new vo(t)}static fromUint8Array(e){const t=function(s){let c="";for(let d=0;d<s.length;++d)c+=String.fromCharCode(s[d]);return c}(e);return new vo(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Hn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vo.EMPTY_BYTE_STRING=new vo("");const DT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ba(n){if(Cn(!!n),"string"==typeof n){let e=0;const t=DT.exec(n);if(Cn(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:zi(n.seconds),nanos:zi(n.nanos)}}function zi(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function hu(n){return"string"==typeof n?vo.fromBase64String(n):vo.fromUint8Array(n)}function M_(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function x_(n){const e=n.mapValue.fields.__previous_value__;return M_(e)?x_(e):e}function zh(n){const e=Ba(n.mapValue.fields.__local_write_time__.timestampValue);return new wi(e.seconds,e.nanos)}class dM{constructor(e,t,r,s,c,d,g,I,T){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.longPollingOptions=I,this.useFetchStreams=T}}class fu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new fu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof fu&&e.projectId===this.projectId&&e.database===this.database}}const yc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Hh={nullValue:"NULL_VALUE"};function Ic(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?M_(n)?4:PT(n)?9007199254740991:10:un()}function Gs(n,e){if(n===e)return!0;const t=Ic(n);if(t!==Ic(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return zh(n).isEqual(zh(e));case 3:return function(s,c){if("string"==typeof s.timestampValue&&"string"==typeof c.timestampValue&&s.timestampValue.length===c.timestampValue.length)return s.timestampValue===c.timestampValue;const d=Ba(s.timestampValue),g=Ba(c.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return c=e,hu(n.bytesValue).isEqual(hu(c.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,c){return zi(s.geoPointValue.latitude)===zi(c.geoPointValue.latitude)&&zi(s.geoPointValue.longitude)===zi(c.geoPointValue.longitude)}(n,e);case 2:return function(s,c){if("integerValue"in s&&"integerValue"in c)return zi(s.integerValue)===zi(c.integerValue);if("doubleValue"in s&&"doubleValue"in c){const d=zi(s.doubleValue),g=zi(c.doubleValue);return d===g?T_(d)===T_(g):isNaN(d)&&isNaN(g)}return!1}(n,e);case 9:return Bh(n.arrayValue.values||[],e.arrayValue.values||[],Gs);case 10:return function(s,c){const d=s.mapValue.fields||{},g=c.mapValue.fields||{};if(P_(d)!==P_(g))return!1;for(const I in d)if(d.hasOwnProperty(I)&&(void 0===g[I]||!Gs(d[I],g[I])))return!1;return!0}(n,e);default:return un()}var c}function Ec(n,e){return void 0!==(n.values||[]).find(t=>Gs(t,e))}function $a(n,e){if(n===e)return 0;const t=Ic(n),r=Ic(e);if(t!==r)return Hn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Hn(n.booleanValue,e.booleanValue);case 2:return function(c,d){const g=zi(c.integerValue||c.doubleValue),I=zi(d.integerValue||d.doubleValue);return g<I?-1:g>I?1:g===I?0:isNaN(g)?isNaN(I)?0:-1:1}(n,e);case 3:return ST(n.timestampValue,e.timestampValue);case 4:return ST(zh(n),zh(e));case 5:return Hn(n.stringValue,e.stringValue);case 6:return function(c,d){const g=hu(c),I=hu(d);return g.compareTo(I)}(n.bytesValue,e.bytesValue);case 7:return function(c,d){const g=c.split("/"),I=d.split("/");for(let T=0;T<g.length&&T<I.length;T++){const k=Hn(g[T],I[T]);if(0!==k)return k}return Hn(g.length,I.length)}(n.referenceValue,e.referenceValue);case 8:return function(c,d){const g=Hn(zi(c.latitude),zi(d.latitude));return 0!==g?g:Hn(zi(c.longitude),zi(d.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(c,d){const g=c.values||[],I=d.values||[];for(let T=0;T<g.length&&T<I.length;++T){const k=$a(g[T],I[T]);if(k)return k}return Hn(g.length,I.length)}(n.arrayValue,e.arrayValue);case 10:return function(c,d){if(c===yc.mapValue&&d===yc.mapValue)return 0;if(c===yc.mapValue)return 1;if(d===yc.mapValue)return-1;const g=c.fields||{},I=Object.keys(g),T=d.fields||{},k=Object.keys(T);I.sort(),k.sort();for(let B=0;B<I.length&&B<k.length;++B){const K=Hn(I[B],k[B]);if(0!==K)return K;const ue=$a(g[I[B]],T[k[B]]);if(0!==ue)return ue}return Hn(I.length,k.length)}(n.mapValue,e.mapValue);default:throw un()}}function ST(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Hn(n,e);const t=Ba(n),r=Ba(e),s=Hn(t.seconds,r.seconds);return 0!==s?s:Hn(t.nanos,r.nanos)}function Gh(n){return fI(n)}function fI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Ba(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?hu(n.bytesValue).toBase64():"referenceValue"in n?tn.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const c of t.values||[])s?s=!1:r+=",",r+=fI(c);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",c=!0;for(const d of r)c?c=!1:s+=",",s+=`${d}:${fI(t.fields[d])}`;return s+"}"}(n.mapValue):un()}function Cc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function pI(n){return!!n&&"integerValue"in n}function N_(n){return!!n&&"arrayValue"in n}function hM(n){return!!n&&"nullValue"in n}function RT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function k_(n){return!!n&&"mapValue"in n}function O_(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return uu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=O_(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=O_(n.arrayValue.values[t]);return e}return Object.assign({},n)}function PT(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function vF(n){return"nullValue"in n?Hh:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Cc(fu.empty(),tn.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:un()}function fM(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Cc(fu.empty(),tn.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?yc:un()}function MT(n,e){const t=$a(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function xT(n,e){const t=$a(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class yo{constructor(e){this.value=e}static empty(){return new yo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!k_(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=O_(t)}setAll(e){let t=fn.emptyPath(),r={},s=[];e.forEach((d,g)=>{if(!t.isImmediateParentOf(g)){const I=this.getFieldsMap(t);this.applyChanges(I,r,s),r={},s=[],t=g.popLast()}d?r[g.lastSegment()]=O_(d):s.push(g.lastSegment())});const c=this.getFieldsMap(t);this.applyChanges(c,r,s)}delete(e){const t=this.field(e.popLast());k_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Gs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];k_(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){uu(t,(s,c)=>e[s]=c);for(const s of r)delete e[s]}clone(){return new yo(O_(this.value))}}function Wh(n){const e=[];return uu(n.fields,(t,r)=>{const s=new fn([t]);if(k_(r)){const c=Wh(r.mapValue).fields;if(0===c.length)e.push(s);else for(const d of c)e.push(s.child(d))}else e.push(s)}),new Hs(e)}class hi{constructor(e,t,r,s,c,d,g){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=c,this.data=d,this.documentState=g}static newInvalidDocument(e){return new hi(e,0,Sn.min(),Sn.min(),Sn.min(),yo.empty(),0)}static newFoundDocument(e,t,r,s){return new hi(e,1,t,Sn.min(),r,s,0)}static newNoDocument(e,t){return new hi(e,2,t,Sn.min(),Sn.min(),yo.empty(),0)}static newUnknownDocument(e,t){return new hi(e,3,t,Sn.min(),Sn.min(),yo.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Sn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Sn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof hi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new hi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ll{constructor(e,t){this.position=e,this.inclusive=t}}function gI(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const c=e[s],d=n.position[s];if(r=c.field.isKeyField()?tn.comparator(tn.fromName(d.referenceValue),t.key):$a(d,t.data.field(c.field)),"desc"===c.dir&&(r*=-1),0!==r)break}return r}function qh(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Gs(n.position[t],e.position[t]))return!1;return!0}class Kh{constructor(e,t="asc"){this.field=e,this.dir=t}}function pM(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Xh{}class Tr extends Xh{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new vI(e,t,r):"array-contains"===t?new F_(e,r):"in"===t?new mM(e,r):"not-in"===t?new _M(e,r):"array-contains-any"===t?new vM(e,r):new Tr(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new ng(e,r):new gM(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison($a(t,this.value)):null!==t&&Ic(this.value)===Ic(t)&&this.matchesComparison($a(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return un()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zr extends Xh{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Zr(e,t)}matches(e){return Cd(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Cd(n){return"and"===n.op}function mI(n){return"or"===n.op}function Qh(n){return NT(n)&&Cd(n)}function NT(n){for(const e of n.filters)if(e instanceof Zr)return!1;return!0}function _I(n){if(n instanceof Tr)return n.field.canonicalString()+n.op.toString()+Gh(n.value);if(Qh(n))return n.filters.map(e=>_I(e)).join(",");{const e=n.filters.map(t=>_I(t)).join(",");return`${n.op}(${e})`}}function kT(n,e){return n instanceof Tr?(r=n,(s=e)instanceof Tr&&r.op===s.op&&r.field.isEqual(s.field)&&Gs(r.value,s.value)):n instanceof Zr?function(r,s){return s instanceof Zr&&r.op===s.op&&r.filters.length===s.filters.length&&r.filters.reduce((c,d,g)=>c&&kT(d,s.filters[g]),!0)}(n,e):void un();var r,s}function OT(n,e){const t=n.filters.concat(e);return Zr.create(t,n.op)}function FT(n){return n instanceof Tr?`${(t=n).field.canonicalString()} ${t.op} ${Gh(t.value)}`:n instanceof Zr?function(t){return t.op.toString()+" {"+t.getFilters().map(FT).join(" ,")+"}"}(n):"Filter";var t}class vI extends Tr{constructor(e,t,r){super(e,t,r),this.key=tn.fromName(r.referenceValue)}matches(e){const t=tn.comparator(e.key,this.key);return this.matchesComparison(t)}}class ng extends Tr{constructor(e,t){super(e,"in",t),this.keys=rg(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class gM extends Tr{constructor(e,t){super(e,"not-in",t),this.keys=rg(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function rg(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>tn.fromName(r.referenceValue))}class F_ extends Tr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return N_(t)&&Ec(t.arrayValue,this.value)}}class mM extends Tr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ec(this.value.arrayValue,t)}}class _M extends Tr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ec(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Ec(this.value.arrayValue,t)}}class vM extends Tr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!N_(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Ec(this.value.arrayValue,r))}}class yI{constructor(e,t=null,r=[],s=[],c=null,d=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=c,this.startAt=d,this.endAt=g,this.ue=null}}function II(n,e=null,t=[],r=[],s=null,c=null,d=null){return new yI(n,e,t,r,s,c,d)}function pu(n){const e=en(n);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>_I(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(c=r).field.canonicalString()+c.dir;var c}).join(","),eg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Gh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Gh(r)).join(",")),e.ue=t}return e.ue}function ig(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!pM(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!kT(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!qh(n.startAt,e.startAt)&&qh(n.endAt,e.endAt)}function L_(n){return tn.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function og(n,e){return n.filters.filter(t=>t instanceof Tr&&t.field.isEqual(e))}function LT(n,e,t){let r=Hh,s=!0;for(const c of og(n,e)){let d=Hh,g=!0;switch(c.op){case"<":case"<=":d=vF(c.value);break;case"==":case"in":case">=":d=c.value;break;case">":d=c.value,g=!1;break;case"!=":case"not-in":d=Hh}MT({value:r,inclusive:s},{value:d,inclusive:g})<0&&(r=d,s=g)}if(null!==t)for(let c=0;c<n.orderBy.length;++c)if(n.orderBy[c].field.isEqual(e)){const d=t.position[c];MT({value:r,inclusive:s},{value:d,inclusive:t.inclusive})<0&&(r=d,s=t.inclusive);break}return{value:r,inclusive:s}}function VT(n,e,t){let r=yc,s=!0;for(const c of og(n,e)){let d=yc,g=!0;switch(c.op){case">=":case">":d=fM(c.value),g=!1;break;case"==":case"in":case"<=":d=c.value;break;case"<":d=c.value,g=!1;break;case"!=":case"not-in":d=yc}xT({value:r,inclusive:s},{value:d,inclusive:g})>0&&(r=d,s=g)}if(null!==t)for(let c=0;c<n.orderBy.length;++c)if(n.orderBy[c].field.isEqual(e)){const d=t.position[c];xT({value:r,inclusive:s},{value:d,inclusive:t.inclusive})>0&&(r=d,s=t.inclusive);break}return{value:r,inclusive:s}}class Ws{constructor(e,t=null,r=[],s=[],c=null,d="F",g=null,I=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=c,this.limitType=d,this.startAt=g,this.endAt=I,this.ce=null,this.le=null,this.he=null}}function V_(n,e,t,r,s,c,d,g){return new Ws(n,e,t,r,s,c,d,g)}function Yh(n){return new Ws(n)}function EI(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function CI(n){return null!==n.collectionGroup}function wd(n){const e=en(n);if(null===e.ce){e.ce=[];const t=new Set;for(const c of e.explicitOrderBy)e.ce.push(c),t.add(c.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let g=new Vr(fn.comparator);return d.filters.forEach(I=>{I.getFlattenedFilters().forEach(T=>{T.isInequality()&&(g=g.add(T.field))})}),g})(e).forEach(c=>{t.has(c.canonicalString())||c.isKeyField()||e.ce.push(new Kh(c,r))}),t.has(fn.keyField().canonicalString())||e.ce.push(new Kh(fn.keyField(),r))}return e.ce}function Es(n){const e=en(n);return e.le||(e.le=function sg(n,e){if("F"===n.limitType)return II(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>new Kh(s.field,"desc"===s.dir?"asc":"desc"));const t=n.endAt?new ll(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ll(n.startAt.position,n.startAt.inclusive):null;return II(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,wd(n))),e.le}function U_(n,e){const t=n.filters.concat([e]);return new Ws(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function B_(n,e,t){return new Ws(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ag(n,e){return ig(Es(n),Es(e))&&n.limitType===e.limitType}function BT(n){return`${pu(Es(n))}|lt:${n.limitType}`}function gu(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>FT(s)).join(", ")}]`),eg(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>{return`${(d=s).field.canonicalString()} (${d.dir})`;var d}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>Gh(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>Gh(s)).join(",")),`Target(${r})`}(Es(n))}; limitType=${n.limitType})`}function $_(n,e){return e.isFoundDocument()&&function(r,s){const c=s.key.path;return null!==r.collectionGroup?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):tn.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)}(n,e)&&function(r,s){for(const c of wd(r))if(!c.field.isKeyField()&&null===s.data.field(c.field))return!1;return!0}(n,e)&&function(r,s){for(const c of r.filters)if(!c.matches(s))return!1;return!0}(n,e)&&(s=e,!((r=n).startAt&&!function(d,g,I){const T=gI(d,g,I);return d.inclusive?T<=0:T<0}(r.startAt,wd(r),s)||r.endAt&&!function(d,g,I){const T=gI(d,g,I);return d.inclusive?T>=0:T>0}(r.endAt,wd(r),s)));var r,s}function wI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function cl(n){return(e,t)=>{let r=!1;for(const s of wd(n)){const c=$T(s,e,t);if(0!==c)return c;r=r||s.field.isKeyField()}return 0}}function $T(n,e,t){const r=n.field.isKeyField()?tn.comparator(e.key,t.key):function(c,d,g){const I=d.data.field(c),T=g.data.field(c);return null!==I&&null!==T?$a(I,T):un()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return un()}}class wc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,c]of r)if(this.equalsFn(s,e))return c}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let c=0;c<s.length;c++)if(this.equalsFn(s[c][0],e))return void(s[c]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){uu(this.inner,(t,r)=>{for(const[s,c]of r)e(s,c)})}isEmpty(){return dI(this.inner)}size(){return this.innerSize}}const yF=new Gr(tn.comparator);function Fr(){return yF}const jT=new Gr(tn.comparator);function bd(...n){let e=jT;for(const t of n)e=e.insert(t.key,t);return e}function zT(n){let e=jT;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ql(){return Jh()}function j_(){return Jh()}function Jh(){return new wc(n=>n.toString(),(n,e)=>n.isEqual(e))}const HT=new Gr(tn.comparator),GT=new Vr(tn.comparator);function hr(...n){let e=GT;for(const t of n)e=e.add(t);return e}const yM=new Vr(Hn);function bc(){return yM}function bI(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:T_(e)?"-0":e}}function z_(n){return{integerValue:""+n}}function WT(n,e){return A_(e)?z_(e):bI(n,e)}class lg{constructor(){this._=void 0}}function qT(n,e,t){return n instanceof mu?function(s,c){const d={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return c&&M_(c)&&(c=x_(c)),c&&(d.fields.__previous_value__=c),{mapValue:d}}(t,e):n instanceof qs?cg(n,e):n instanceof _u?ef(n,e):function(s,c){const d=Zh(s,c),g=XT(d)+XT(s.Pe);return pI(d)&&pI(s.Pe)?z_(g):bI(s.serializer,g)}(n,e)}function KT(n,e,t){return n instanceof qs?cg(n,e):n instanceof _u?ef(n,e):t}function Zh(n,e){return n instanceof tf?pI(r=e)||(c=r)&&"doubleValue"in c?e:{integerValue:0}:null;var r,c}class mu extends lg{}class qs extends lg{constructor(e){super(),this.elements=e}}function cg(n,e){const t=H_(e);for(const r of n.elements)t.some(s=>Gs(s,r))||t.push(r);return{arrayValue:{values:t}}}class _u extends lg{constructor(e){super(),this.elements=e}}function ef(n,e){let t=H_(e);for(const r of n.elements)t=t.filter(s=>!Gs(s,r));return{arrayValue:{values:t}}}class tf extends lg{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function XT(n){return zi(n.integerValue||n.doubleValue)}function H_(n){return N_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class nf{constructor(e,t){this.field=e,this.transform=t}}class ug{constructor(e,t){this.version=e,this.transformResults=t}}class xi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new xi}static exists(e){return new xi(void 0,e)}static updateTime(e){return new xi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Td(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class dg{}function TI(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new sf(n.key,xi.none()):new rf(n.key,n.data,xi.none());{const t=n.data,r=yo.empty();let s=new Vr(fn.comparator);for(let c of e.fields)if(!s.has(c)){let d=t.field(c);null===d&&c.length>1&&(c=c.popLast(),d=t.field(c)),null===d?r.delete(c):r.set(c,d),s=s.add(c)}return new Tc(n.key,r,new Hs(s.toArray()),xi.none())}}function IM(n,e,t){n instanceof rf?function(s,c,d){const g=s.value.clone(),I=JT(s.fieldTransforms,c,d.transformResults);g.setAll(I),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()}(n,e,t):n instanceof Tc?function(s,c,d){if(!Td(s.precondition,c))return void c.convertToUnknownDocument(d.version);const g=JT(s.fieldTransforms,c,d.transformResults),I=c.data;I.setAll(YT(s)),I.setAll(g),c.convertToFoundDocument(d.version,I).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function yu(n,e,t,r){return n instanceof rf?function(c,d,g,I){if(!Td(c.precondition,d))return g;const T=c.value.clone(),k=ZT(c.fieldTransforms,I,d);return T.setAll(k),d.convertToFoundDocument(d.version,T).setHasLocalMutations(),null}(n,e,t,r):n instanceof Tc?function(c,d,g,I){if(!Td(c.precondition,d))return g;const T=ZT(c.fieldTransforms,I,d),k=d.data;return k.setAll(YT(c)),k.setAll(T),d.convertToFoundDocument(d.version,k).setHasLocalMutations(),null===g?null:g.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(B=>B.field))}(n,e,t,r):(g=t,Td(n.precondition,d=e)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g);var d,g}function hg(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),c=Zh(r.transform,s||null);null!=c&&(null===t&&(t=yo.empty()),t.set(r.field,c))}return t||null}function QT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===s||r&&s&&Bh(r,s,(c,d)=>function vu(n,e){return n.field.isEqual(e.field)&&(s=e.transform,(r=n.transform)instanceof qs&&s instanceof qs||r instanceof _u&&s instanceof _u?Bh(r.elements,s.elements,Gs):r instanceof tf&&s instanceof tf?Gs(r.Pe,s.Pe):r instanceof mu&&s instanceof mu);var r,s}(c,d))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,s}class rf extends dg{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Tc extends dg{constructor(e,t,r,s,c=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function YT(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function JT(n,e,t){const r=new Map;Cn(n.length===t.length);for(let s=0;s<t.length;s++){const c=n[s],d=c.transform,g=e.data.field(c.field);r.set(c.field,KT(d,g,t[s]))}return r}function ZT(n,e,t){const r=new Map;for(const s of n){const c=s.transform,d=t.data.field(s.field);r.set(s.field,qT(c,d,e))}return r}class sf extends dg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class AI extends dg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class af{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const c=this.mutations[s];c.key.isEqual(e.key)&&IM(c,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=yu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=yu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=j_();return this.mutations.forEach(s=>{const c=e.get(s.key),d=c.overlayedDocument;let g=this.applyToLocalView(d,c.mutatedFields);g=t.has(s.key)?null:g;const I=TI(d,g);null!==I&&r.set(s.key,I),d.isValidDocument()||d.convertToNoDocument(Sn.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),hr())}isEqual(e){return this.batchId===e.batchId&&Bh(this.mutations,e.mutations,(t,r)=>QT(t,r))&&Bh(this.baseMutations,e.baseMutations,(t,r)=>QT(t,r))}}class DI{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Cn(e.mutations.length===r.length);let s=function(){return HT}();const c=e.mutations;for(let d=0;d<c.length;d++)s=s.insert(c[d].key,r[d].version);return new DI(e,t,r,s)}}class SI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class eA{constructor(e,t){this.count=e,this.unchangedNames=t}}var Hi,Mr;function tA(n){switch(n){default:return un();case dt.CANCELLED:case dt.UNKNOWN:case dt.DEADLINE_EXCEEDED:case dt.RESOURCE_EXHAUSTED:case dt.INTERNAL:case dt.UNAVAILABLE:case dt.UNAUTHENTICATED:return!1;case dt.INVALID_ARGUMENT:case dt.NOT_FOUND:case dt.ALREADY_EXISTS:case dt.PERMISSION_DENIED:case dt.FAILED_PRECONDITION:case dt.ABORTED:case dt.OUT_OF_RANGE:case dt.UNIMPLEMENTED:case dt.DATA_LOSS:return!0}}function PI(n){if(void 0===n)return Mi("GRPC error has no .code"),dt.UNKNOWN;switch(n){case Hi.OK:return dt.OK;case Hi.CANCELLED:return dt.CANCELLED;case Hi.UNKNOWN:return dt.UNKNOWN;case Hi.DEADLINE_EXCEEDED:return dt.DEADLINE_EXCEEDED;case Hi.RESOURCE_EXHAUSTED:return dt.RESOURCE_EXHAUSTED;case Hi.INTERNAL:return dt.INTERNAL;case Hi.UNAVAILABLE:return dt.UNAVAILABLE;case Hi.UNAUTHENTICATED:return dt.UNAUTHENTICATED;case Hi.INVALID_ARGUMENT:return dt.INVALID_ARGUMENT;case Hi.NOT_FOUND:return dt.NOT_FOUND;case Hi.ALREADY_EXISTS:return dt.ALREADY_EXISTS;case Hi.PERMISSION_DENIED:return dt.PERMISSION_DENIED;case Hi.FAILED_PRECONDITION:return dt.FAILED_PRECONDITION;case Hi.ABORTED:return dt.ABORTED;case Hi.OUT_OF_RANGE:return dt.OUT_OF_RANGE;case Hi.UNIMPLEMENTED:return dt.UNIMPLEMENTED;case Hi.DATA_LOSS:return dt.DATA_LOSS;default:return un()}}(Mr=Hi||(Hi={}))[Mr.OK=0]="OK",Mr[Mr.CANCELLED=1]="CANCELLED",Mr[Mr.UNKNOWN=2]="UNKNOWN",Mr[Mr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Mr[Mr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Mr[Mr.NOT_FOUND=5]="NOT_FOUND",Mr[Mr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Mr[Mr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Mr[Mr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Mr[Mr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Mr[Mr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Mr[Mr.ABORTED=10]="ABORTED",Mr[Mr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Mr[Mr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Mr[Mr.INTERNAL=13]="INTERNAL",Mr[Mr.UNAVAILABLE=14]="UNAVAILABLE",Mr[Mr.DATA_LOSS=15]="DATA_LOSS";function MI(){return new TextEncoder}const nA=new gc([4294967295,4294967295],0);function rA(n){const e=MI().encode(n),t=new f_;return t.update(e),new Uint8Array(t.digest())}function iA(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new gc([t,r],0),new gc([s,c],0)]}class xI{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ad(`Invalid padding: ${t}`);if(r<0)throw new Ad(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Ad(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Ad(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=gc.fromNumber(this.Ie)}Ee(e,t,r){let s=e.add(t.multiply(gc.fromNumber(r)));return 1===s.compare(nA)&&(s=new gc([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=rA(e),[r,s]=iA(t);for(let c=0;c<this.hashCount;c++){const d=this.Ee(r,s,c);if(!this.de(d))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new xI(c,s,t);return r.forEach(g=>d.insert(g)),d}insert(e){if(0===this.Ie)return;const t=rA(e),[r,s]=iA(t);for(let c=0;c<this.hashCount;c++){const d=this.Ee(r,s,c);this.Ae(d)}}Ae(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Ad extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Dd{constructor(e,t,r,s,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,cf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Dd(Sn.min(),s,new Gr(Hn),Fr(),hr())}}class cf{constructor(e,t,r,s,c){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new cf(r,t,hr(),hr(),hr())}}class uf{constructor(e,t,r,s){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=s}}class G_{constructor(e,t){this.targetId=e,this.me=t}}class oA{constructor(e,t,r=vo.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class sA{constructor(){this.fe=0,this.ge=NI(),this.pe=vo.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=hr(),t=hr(),r=hr();return this.ge.forEach((s,c)=>{switch(c){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:un()}}),new cf(this.pe,this.ye,e,t,r)}ve(){this.we=!1,this.ge=NI()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Cn(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class EM{constructor(e){this.Le=e,this.Be=new Map,this.ke=Fr(),this.qe=aA(),this.Qe=new Gr(Hn)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:un()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,s)=>{this.ze(s)&&t(s)})}He(e){const t=e.targetId,r=e.me.count,s=this.Je(t);if(s){const c=s.target;if(L_(c))if(0===r){const d=new tn(c.path);this.Ue(t,d,hi.newNoDocument(d,Sn.min()))}else Cn(1===r);else{const d=this.Ye(t);if(d!==r){const g=this.Ze(e),I=g?this.Xe(g,e,d):1;0!==I&&(this.je(t),this.Qe=this.Qe.insert(t,2===I?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:c=0}=t;let d,g;try{d=hu(r).toUint8Array()}catch(I){if(I instanceof AT)return Is("Decoding the base64 bloom filter in existence filter failed ("+I.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw I}try{g=new xI(d,s,c)}catch(I){return Is(I instanceof Ad?"BloomFilter error: ":"Applying bloom filter failed: ",I),null}return 0===g.Ie?null:g}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let s=0;return r.forEach(c=>{const d=this.Le.tt(),g=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(g)||(this.Ue(t,c,null),s++)}),s}rt(e){const t=new Map;this.Be.forEach((c,d)=>{const g=this.Je(d);if(g){if(c.current&&L_(g.target)){const I=new tn(g.target.path);null!==this.ke.get(I)||this.it(d,I)||this.Ue(d,I,hi.newNoDocument(I,e))}c.be&&(t.set(d,c.Ce()),c.ve())}});let r=hr();this.qe.forEach((c,d)=>{let g=!0;d.forEachWhile(I=>{const T=this.Je(I);return!T||"TargetPurposeLimboResolution"===T.purpose||(g=!1,!1)}),g&&(r=r.add(c))}),this.ke.forEach((c,d)=>d.setReadTime(e));const s=new Dd(e,t,this.Qe,this.ke,r);return this.ke=Fr(),this.qe=aA(),this.Qe=new Gr(Hn),s}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,t)?s.Fe(t,1):s.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new sA,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Vr(Hn),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||Vt("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new sA),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function aA(){return new Gr(tn.comparator)}function NI(){return new Gr(tn.comparator)}const kI={asc:"ASCENDING",desc:"DESCENDING"},OI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lA={and:"AND",or:"OR"};class cA{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function W_(n,e){return n.useProto3Json||eg(e)?e:{value:e}}function df(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function FI(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function CM(n,e){return df(n,e.toTimestamp())}function Ni(n){return Cn(!!n),Sn.fromTimestamp(function(t){const r=Ba(t);return new wi(r.seconds,r.nanos)}(n))}function q_(n,e){return K_(n,e).canonicalString()}function K_(n,e){const t=(s=n,new br(["projects",s.projectId,"databases",s.database])).child("documents");var s;return void 0===e?t:t.child(e)}function wM(n){const e=br.fromString(n);return Cn(RM(e)),e}function X_(n,e){return q_(n.databaseId,e.path)}function Kl(n,e){const t=wM(e);if(t.get(1)!==n.databaseId.projectId)throw new kt(dt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new kt(dt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new tn(UI(t))}function LI(n,e){return q_(n.databaseId,e)}function VI(n){const e=wM(n);return 4===e.length?br.emptyPath():UI(e)}function fg(n){return new br(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function UI(n){return Cn(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function BI(n,e,t){return{name:X_(n,e),fields:t.value.mapValue.fields}}function $I(n,e,t){const r=Kl(n,e.name),s=Ni(e.updateTime),c=e.createTime?Ni(e.createTime):Sn.min(),d=new yo({mapValue:{fields:e.fields}}),g=hi.newFoundDocument(r,s,c,d);return t&&g.setHasCommittedMutations(),t?g.setHasCommittedMutations():g}function Q_(n,e){let t;if(e instanceof rf)t={update:BI(n,e.key,e.value)};else if(e instanceof sf)t={delete:X_(n,e.key)};else if(e instanceof Tc)t={update:BI(n,e.key,e.data),updateMask:bF(e.fieldMask)};else{if(!(e instanceof AI))return un();t={verify:X_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(c,d){const g=d.transform;if(g instanceof mu)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof qs)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof _u)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof tf)return{fieldPath:d.field.canonicalString(),increment:g.Pe};throw un()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(c=e.precondition).updateTime?{updateTime:CM(n,c.updateTime)}:void 0!==c.exists?{exists:c.exists}:un()),t;var c}function dA(n,e){const t=e.currentDocument?void 0!==(c=e.currentDocument).updateTime?xi.updateTime(Ni(c.updateTime)):void 0!==c.exists?xi.exists(c.exists):xi.none():xi.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(d,g){let I=null;"setToServerValue"in g?(Cn("REQUEST_TIME"===g.setToServerValue),I=new mu):"appendMissingElements"in g?I=new qs(g.appendMissingElements.values||[]):"removeAllFromArray"in g?I=new _u(g.removeAllFromArray.values||[]):"increment"in g?I=new tf(d,g.increment):un();const T=fn.fromServerFormat(g.fieldPath);return new nf(T,I)}(n,s)):[];var c;if(e.update){const s=Kl(n,e.update.name),c=new yo({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new Hs((e.updateMask.fieldPaths||[]).map(k=>fn.fromServerFormat(k)));return new Tc(s,c,d,t,r)}return new rf(s,c,t,r)}if(e.delete){const s=Kl(n,e.delete);return new sf(s,t)}if(e.verify){const s=Kl(n,e.verify);return new AI(s,t)}return un()}function TM(n,e){return{documents:[LI(n,e.path)]}}function jI(n,e){const t={structuredQuery:{}},r=e.path;let s;null!==e.collectionGroup?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=LI(n,s);const c=function(T){if(0!==T.length)return SM(Zr.create(T,"and"))}(e.filters);c&&(t.structuredQuery.where=c);const d=function(T){if(0!==T.length)return T.map(k=>{return{field:Sd((K=k).field),direction:hA(K.dir)};var K})}(e.orderBy);d&&(t.structuredQuery.orderBy=d);const g=W_(n,e.limit);return null!==g&&(t.structuredQuery.limit=g),e.startAt&&(t.structuredQuery.startAt={before:(T=e.startAt).inclusive,values:T.position}),e.endAt&&(t.structuredQuery.endAt=function(T){return{before:!T.inclusive,values:T.position}}(e.endAt)),{_t:t,parent:s};var T}function DM(n){let e=VI(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Cn(1===r);const k=t.from[0];k.allDescendants?s=k.collectionId:e=e.child(k.collectionId)}let c=[];t.where&&(c=function(B){const K=zI(B);return K instanceof Zr&&Qh(K)?K.getFilters():[K]}(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(K=>{return new Kh(pg((De=K).field),function(ht){switch(ht){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(De.direction));var De}));let g=null;t.limit&&(g=function(B){let K;return K="object"==typeof B?B.value:B,eg(K)?null:K}(t.limit));let I=null;var B;t.startAt&&(I=new ll((B=t.startAt).values||[],!!B.before));let T=null;return t.endAt&&(T=function(B){return new ll(B.values||[],!B.before)}(t.endAt)),V_(e,s,d,c,g,"F",I,T)}function zI(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=pg(t.unaryFilter.field);return Tr.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=pg(t.unaryFilter.field);return Tr.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=pg(t.unaryFilter.field);return Tr.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=pg(t.unaryFilter.field);return Tr.create(d,"!=",{nullValue:"NULL_VALUE"});default:return un()}}(n):void 0!==n.fieldFilter?Tr.create(pg((t=n).fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return un()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return Zr.create(t.compositeFilter.filters.map(r=>zI(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return un()}}(t.compositeFilter.op))}(n):un();var t}function hA(n){return kI[n]}function CF(n){return OI[n]}function wF(n){return lA[n]}function Sd(n){return{fieldPath:n.canonicalString()}}function pg(n){return fn.fromServerFormat(n.fieldPath)}function SM(n){return n instanceof Tr?function(t){if("=="===t.op){if(RT(t.value))return{unaryFilter:{field:Sd(t.field),op:"IS_NAN"}};if(hM(t.value))return{unaryFilter:{field:Sd(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(RT(t.value))return{unaryFilter:{field:Sd(t.field),op:"IS_NOT_NAN"}};if(hM(t.value))return{unaryFilter:{field:Sd(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Sd(t.field),op:CF(t.op),value:t.value}}}(n):n instanceof Zr?function(t){const r=t.getFilters().map(s=>SM(s));return 1===r.length?r[0]:{compositeFilter:{op:wF(t.op),filters:r}}}(n):un()}function bF(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function RM(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Iu{constructor(e,t,r,s,c=Sn.min(),d=Sn.min(),g=vo.EMPTY_BYTE_STRING,I=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g,this.expectedCount=I}withSequenceNumber(e){return new Iu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Iu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Iu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Iu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class PM{constructor(e){this.ct=e}}function Rd(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Eu(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:X_(c=n.ct,(d=e).key),fields:d.data.value.mapValue.fields,updateTime:df(c,d.version.toTimestamp()),createTime:df(c,d.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Pd(e.version)};else{if(!e.isUnknownDocument())return un();r.unknownDocument={path:t.path.toArray(),version:Pd(e.version)}}var c,d;return r}function Eu(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Pd(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function hf(n){const e=new wi(n.seconds,n.nanoseconds);return Sn.fromTimestamp(e)}function Cu(n,e){const t=(e.baseMutations||[]).map(c=>dA(n.ct,c));for(let c=0;c<e.mutations.length-1;++c)c+1<e.mutations.length&&void 0!==e.mutations[c+1].transform&&(e.mutations[c].updateTransforms=e.mutations[c+1].transform.fieldTransforms,e.mutations.splice(c+1,1),++c);const r=e.mutations.map(c=>dA(n.ct,c)),s=wi.fromMillis(e.localWriteTimeMs);return new af(e.batchId,s,t,r)}function gg(n){const e=hf(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?hf(n.lastLimboFreeSnapshotVersion):Sn.min();let r;return r=void 0!==n.query.documents?(Cn(1===(c=n.query).documents.length),Es(Yh(VI(c.documents[0])))):function(c){return Es(DM(c))}(n.query),new Iu(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,vo.fromBase64String(n.resumeToken));var c}function xM(n,e){const t=Pd(e.snapshotVersion),r=Pd(e.lastLimboFreeSnapshotVersion);let s;s=L_(e.target)?TM(n.ct,e.target):jI(n.ct,e.target)._t;const c=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:pu(e.target),readTime:t,resumeToken:c,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function HI(n){const e=DM({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?B_(e,e.limit,"L"):e}function GI(n,e){return new SI(e.largestBatchId,dA(n.ct,e.overlayMutation))}function fA(n,e){const t=e.path.lastSegment();return[n,Jo(e.path.popLast()),t]}function mg(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Pd(r.readTime),documentKey:Jo(r.documentKey.path),largestBatchId:r.largestBatchId}}class pA{getBundleMetadata(e,t){return gA(e).get(t).next(r=>{if(r)return{id:(c=r).bundleId,createTime:hf(c.createTime),version:c.version};var c})}saveBundleMetadata(e,t){return gA(e).put({bundleId:(s=t).id,createTime:Pd(Ni(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return WI(e).get(t).next(r=>{if(r)return{name:(c=r).name,query:HI(c.bundledQuery),readTime:hf(c.readTime)};var c})}saveNamedQuery(e,t){return WI(e).put({name:(s=t).name,readTime:Pd(Ni(s.readTime)),bundledQuery:s.bundledQuery});var s}}function gA(n){return ko(n,"bundles")}function WI(n){return ko(n,"namedQueries")}class qI{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new qI(e,t.uid||"")}getOverlay(e,t){return ff(e).get(fA(this.userId,t)).next(r=>r?GI(this.serializer,r):null)}getOverlays(e,t){const r=ql();return ze.forEach(t,s=>this.getOverlay(e,s).next(c=>{null!==c&&r.set(s,c)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((c,d)=>{const g=new SI(t,d);s.push(this.ht(e,g))}),ze.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(d=>s.add(Jo(d.getCollectionPath())));const c=[];return s.forEach(d=>{const g=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);c.push(ff(e).j("collectionPathOverlayIndex",g))}),ze.waitFor(c)}getOverlaysForCollection(e,t,r){const s=ql(),c=Jo(t),d=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,Number.POSITIVE_INFINITY],!0);return ff(e).U("collectionPathOverlayIndex",d).next(g=>{for(const I of g){const T=GI(this.serializer,I);s.set(T.getKey(),T)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const c=ql();let d;const g=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ff(e).J({index:"collectionGroupOverlayIndex",range:g},(I,T,k)=>{const B=GI(this.serializer,T);c.size()<s||B.largestBatchId===d?(c.set(B.getKey(),B),d=B.largestBatchId):k.done()}).next(()=>c)}ht(e,t){return ff(e).put(function(s,c,d){const[g,I,T]=fA(c,d.mutation.key);return{userId:c,collectionPath:I,documentId:T,collectionGroup:d.mutation.key.getCollectionGroup(),largestBatchId:d.largestBatchId,overlayMutation:Q_(s.ct,d.mutation)}}(this.serializer,this.userId,t))}}function ff(n){return ko(n,"documentOverlays")}class pf{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(zi(e.integerValue));else if("doubleValue"in e){const r=zi(e.doubleValue);isNaN(r)?this.Et(t,13):(this.Et(t,15),T_(r)?t.dt(0):t.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(t,20),"string"==typeof r&&(r=Ba(r)),t.At(`${r.seconds||""}`),t.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(hu(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(t,45),t.dt(r.latitude||0),t.dt(r.longitude||0)}else"mapValue"in e?PT(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):un()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const r=e.fields||{};this.Et(t,55);for(const s of Object.keys(r))this.Rt(s,t),this.It(r[s],t)}wt(e,t){const r=e.values||[];this.Et(t,50);for(const s of r)this.It(s,t)}gt(e,t){this.Et(t,37),tn.fromName(e).path.forEach(r=>{this.Et(t,60),this.St(r,t)})}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function NM(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function KI(n){const e=64-function(r){let s=0;for(let c=0;c<8;++c){const d=NM(255&r[c]);if(s+=d,8!==d)break}return s}(n);return Math.ceil(e/8)}pf.bt=new pf;class XI{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ct(r.value),r=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Mt(r.value),r=t.next();this.xt()}Ot(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{const s=t.codePointAt(0);this.Ct(240|s>>>18),this.Ct(128|63&s>>>12),this.Ct(128|63&s>>>6),this.Ct(128|63&s)}}this.vt()}Nt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{const s=t.codePointAt(0);this.Mt(240|s>>>18),this.Mt(128|63&s>>>12),this.Mt(128|63&s>>>6),this.Mt(128|63&s)}}this.xt()}Lt(e){const t=this.Bt(e),r=KI(t);this.kt(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}qt(e){const t=this.Bt(e),r=KI(t);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(c){const d=new DataView(new ArrayBuffer(8));return d.setFloat64(0,c,!1),new Uint8Array(d.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class kM{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class OM{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class wu{constructor(){this.Gt=new XI,this.zt=new kM(this.Gt),this.jt=new OM(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class Md{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Md(this.indexId,this.documentKey,this.arrayValue,r)}}function bu(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=mA(n.arrayValue,e.arrayValue),0!==t?t:(t=mA(n.directionalValue,e.directionalValue),0!==t?t:tn.comparator(n.documentKey,e.documentKey)))}function mA(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class _A{constructor(e){this.Yt=new Vr((t,r)=>fn.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const r=t;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(Cn(e.collectionGroup===this.collectionId),this.en)return!1;const t=su(e);if(void 0!==t&&!this.nn(t))return!1;const r=au(e);let s=new Set,c=0,d=0;for(;c<r.length&&this.nn(r[c]);++c)s=s.add(r[c].fieldPath.canonicalString());if(c===r.length)return!0;if(this.Yt.size>0){const g=this.Yt.getIterator().getNext();if(!s.has(g.field.canonicalString())){const I=r[c];if(!this.rn(g,I)||!this.sn(this.Zt[d++],I))return!1}++c}for(;c<r.length;++c)if(d>=this.Zt.length||!this.sn(this.Zt[d++],r[c]))return!1;return!0}on(){if(this.en)return null;let e=new Vr(fn.comparator);const t=[];for(const r of this.Xt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new yd(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new yd(r.field,0))}for(const r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new yd(r.field,"asc"===r.dir?0:1)));return new vd(vd.UNKNOWN_ID,this.collectionId,t,al.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function vA(n){var e,t;if(Cn(n instanceof Tr||n instanceof Zr),n instanceof Tr){if(n instanceof mM){const s=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(c=>Tr.create(n.field,"==",c)))||[];return Zr.create(s,"or")}return n}const r=n.filters.map(s=>vA(s));return Zr.create(r,n.op)}function FM(n){if(0===n.getFilters().length)return[];const e=JI(vA(n));return Cn(YI(e)),QI(e)||Y_(e)?[e]:e.getFilters()}function QI(n){return n instanceof Tr}function Y_(n){return n instanceof Zr&&Qh(n)}function YI(n){return QI(n)||Y_(n)||function(t){if(t instanceof Zr&&mI(t)){for(const r of t.getFilters())if(!QI(r)&&!Y_(r))return!1;return!0}return!1}(n)}function JI(n){if(Cn(n instanceof Tr||n instanceof Zr),n instanceof Tr)return n;if(1===n.filters.length)return JI(n.filters[0]);const e=n.filters.map(r=>JI(r));let t=Zr.create(e,n.op);return t=_g(t),YI(t)?t:(Cn(t instanceof Zr),Cn(Cd(t)),Cn(t.filters.length>1),t.filters.reduce((r,s)=>yA(r,s)))}function yA(n,e){let t;return Cn(n instanceof Tr||n instanceof Zr),Cn(e instanceof Tr||e instanceof Zr),t=n instanceof Tr?e instanceof Tr?Zr.create([n,e],"and"):ZI(n,e):e instanceof Tr?ZI(e,n):function(s,c){if(Cn(s.filters.length>0&&c.filters.length>0),Cd(s)&&Cd(c))return OT(s,c.getFilters());const d=mI(s)?s:c,g=mI(s)?c:s,I=d.filters.map(T=>yA(T,g));return Zr.create(I,"or")}(n,e),_g(t)}function ZI(n,e){if(Cd(e))return OT(e,n.getFilters());{const t=e.filters.map(r=>yA(n,r));return Zr.create(t,"or")}}function _g(n){if(Cn(n instanceof Tr||n instanceof Zr),n instanceof Tr)return n;const e=n.getFilters();if(1===e.length)return _g(e[0]);if(NT(n))return n;const t=e.map(s=>_g(s)),r=[];return t.forEach(s=>{s instanceof Tr?r.push(s):s instanceof Zr&&(s.op===n.op?r.push(...s.filters):r.push(s))}),1===r.length?r[0]:Zr.create(r,n.op)}class xd{constructor(){this._n=new J_}addToCollectionParentIndex(e,t){return this._n.add(t),ze.resolve()}getCollectionParents(e,t){return ze.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return ze.resolve()}deleteFieldIndex(e,t){return ze.resolve()}deleteAllFieldIndexes(e){return ze.resolve()}createTargetIndexes(e,t){return ze.resolve()}getDocumentsMatchingTarget(e,t){return ze.resolve(null)}getIndexType(e,t){return ze.resolve(0)}getFieldIndexes(e,t){return ze.resolve([])}getNextCollectionGroupToUpdate(e){return ze.resolve(null)}getMinOffset(e,t){return ze.resolve(js.min())}getMinOffsetFromCollectionGroup(e,t){return ze.resolve(js.min())}updateCollectionGroup(e,t,r){return ze.resolve()}updateIndexEntries(e,t){return ze.resolve()}}class J_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Vr(br.comparator),c=!s.has(r);return this.index[t]=s.add(r),c}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Vr(br.comparator)).toArray()}}const Z_=new Uint8Array(0);class TF{constructor(e,t){this.databaseId=t,this.an=new J_,this.un=new wc(r=>pu(r),(r,s)=>ig(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.an.add(t)});const c={collectionId:r,parent:Jo(s)};return ev(e).put(c)}return ze.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[eI(t),""],!1,!0);return ev(e).U(s).next(c=>{for(const d of c){if(d.collectionId!==t)break;r.push(Gl(d.parent))}return r})}addFieldIndex(e,t){const r=vg(e),s={indexId:(g=t).indexId,collectionGroup:g.collectionGroup,fields:g.fields.map(I=>[I.fieldPath.canonicalString(),I.kind])};var g;delete s.indexId;const c=r.add(s);if(t.indexState){const d=Nd(e);return c.next(g=>{d.put(mg(g,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return c.next()}deleteFieldIndex(e,t){const r=vg(e),s=Nd(e),c=Tu(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=vg(e),r=Tu(e),s=Nd(e);return t.j().next(()=>r.j()).next(()=>s.j())}createTargetIndexes(e,t){return ze.forEach(this.cn(t),r=>this.getIndexType(e,r).next(s=>{if(0===s||1===s){const c=new _A(r).on();if(null!=c)return this.addFieldIndex(e,c)}}))}getDocumentsMatchingTarget(e,t){const r=Tu(e);let s=!0;const c=new Map;return ze.forEach(this.cn(t),d=>this.ln(e,d).next(g=>{s&&(s=!!g),c.set(d,g)})).next(()=>{if(s){let d=hr();const g=[];return ze.forEach(c,(I,T)=>{var Xt;Vt("IndexedDbIndexManager",`Using index ${Xt=I,`id=${Xt.indexId}|cg=${Xt.collectionGroup}|f=${Xt.fields.map(vn=>`${vn.fieldPath}:${vn.kind}`).join(",")}`} to execute ${pu(t)}`);const k=function(Xt,vn){const gr=su(vn);if(void 0===gr)return null;for(const Wn of og(Xt,gr.fieldPath))switch(Wn.op){case"array-contains-any":return Wn.value.arrayValue.values||[];case"array-contains":return[Wn.value]}return null}(T,I),B=function(Xt,vn){const gr=new Map;for(const Wn of au(vn))for(const xe of og(Xt,Wn.fieldPath))switch(xe.op){case"==":case"in":gr.set(Wn.fieldPath.canonicalString(),xe.value);break;case"not-in":case"!=":return gr.set(Wn.fieldPath.canonicalString(),xe.value),Array.from(gr.values())}return null}(T,I),K=function(Xt,vn){const gr=[];let Wn=!0;for(const xe of au(vn)){const ge=0===xe.kind?LT(Xt,xe.fieldPath,Xt.startAt):VT(Xt,xe.fieldPath,Xt.startAt);gr.push(ge.value),Wn&&(Wn=ge.inclusive)}return new ll(gr,Wn)}(T,I),ue=function(Xt,vn){const gr=[];let Wn=!0;for(const xe of au(vn)){const ge=0===xe.kind?VT(Xt,xe.fieldPath,Xt.endAt):LT(Xt,xe.fieldPath,Xt.endAt);gr.push(ge.value),Wn&&(Wn=ge.inclusive)}return new ll(gr,Wn)}(T,I),De=this.hn(I,T,K),mt=this.hn(I,T,ue),ht=this.Pn(I,T,B),Zt=this.In(I.indexId,k,De,K.inclusive,mt,ue.inclusive,ht);return ze.forEach(Zt,ln=>r.G(ln,t.limit).next(Xt=>{Xt.forEach(vn=>{const gr=tn.fromSegments(vn.documentKey);d.has(gr)||(d=d.add(gr),g.push(gr))})}))}).next(()=>g)}return ze.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:FM(Zr.create(e.filters,"and")).map(r=>II(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}In(e,t,r,s,c,d,g){const I=(null!=t?t.length:1)*Math.max(r.length,c.length),T=I/(null!=t?t.length:1),k=[];for(let B=0;B<I;++B){const K=t?this.Tn(t[B/T]):Z_,ue=this.En(e,K,r[B%T],s),De=this.dn(e,K,c[B%T],d),mt=g.map(ht=>this.En(e,K,ht,!0));k.push(...this.createRange(ue,De,mt))}return k}En(e,t,r,s){const c=new Md(e,tn.empty(),t,r);return s?c:c.Jt()}dn(e,t,r,s){const c=new Md(e,tn.empty(),t,r);return s?c.Jt():c}ln(e,t){const r=new _A(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(c=>{let d=null;for(const g of c)r.tn(g)&&(!d||g.fields.length>d.fields.length)&&(d=g);return d})}getIndexType(e,t){let r=2;const s=this.cn(t);return ze.forEach(s,c=>this.ln(e,c).next(d=>{d?0!==r&&d.fields.length<function(I){let T=new Vr(fn.comparator),k=!1;for(const B of I.filters)for(const K of B.getFlattenedFilters())K.field.isKeyField()||("array-contains"===K.op||"array-contains-any"===K.op?k=!0:T=T.add(K.field));for(const B of I.orderBy)B.field.isKeyField()||(T=T.add(B.field));return T.size+(k?1:0)}(c)&&(r=1):r=0})).next(()=>null!==t.limit&&s.length>1&&2===r?1:r)}An(e,t){const r=new wu;for(const s of au(e)){const c=t.data.field(s.fieldPath);if(null==c)return null;const d=r.Ht(s.kind);pf.bt.Pt(c,d)}return r.Wt()}Tn(e){const t=new wu;return pf.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const r=new wu;return pf.bt.Pt(Cc(this.databaseId,t),r.Ht(function(c){const d=au(c);return 0===d.length?0:d[d.length-1].kind}(e))),r.Wt()}Pn(e,t,r){if(null===r)return[];let s=[];s.push(new wu);let c=0;for(const d of au(e)){const g=r[c++];for(const I of s)if(this.Vn(t,d.fieldPath)&&N_(g))s=this.mn(s,d,g);else{const T=I.Ht(d.kind);pf.bt.Pt(g,T)}}return this.fn(s)}hn(e,t,r){return this.Pn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Wt();return t}mn(e,t,r){const s=[...e],c=[];for(const d of r.arrayValue.values||[])for(const g of s){const I=new wu;I.seed(g.Wt()),pf.bt.Pt(d,I.Ht(t.kind)),c.push(I)}return c}Vn(e,t){return!!e.filters.find(r=>r instanceof Tr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=vg(e),s=Nd(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(c=>{const d=[];return ze.forEach(c,g=>s.get([g.indexId,this.uid]).next(I=>{d.push(function(k,B){const K=B?new al(B.sequenceNumber,new js(hf(B.readTime),new tn(Gl(B.documentKey)),B.largestBatchId)):al.empty(),ue=k.fields.map(([De,mt])=>new yd(fn.fromServerFormat(De),mt));return new vd(k.indexId,k.collectionGroup,ue,K)}(g,I))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,s)=>{const c=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==c?c:Hn(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=vg(e),c=Nd(e);return this.gn(e).next(d=>s.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(g=>ze.forEach(g,I=>c.put(mg(I.indexId,this.uid,d,r)))))}updateIndexEntries(e,t){const r=new Map;return ze.forEach(t,(s,c)=>{const d=r.get(s.collectionGroup);return(d?ze.resolve(d):this.getFieldIndexes(e,s.collectionGroup)).next(g=>(r.set(s.collectionGroup,g),ze.forEach(g,I=>this.pn(e,s,I).next(T=>{const k=this.yn(c,I);return T.isEqual(k)?ze.resolve():this.wn(e,c,I,T,k)}))))})}Sn(e,t,r,s){return Tu(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.Rn(r,t.key),documentKey:t.key.path.toArray()})}bn(e,t,r,s){return Tu(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.Rn(r,t.key),t.key.path.toArray()])}pn(e,t,r){const s=Tu(e);let c=new Vr(bu);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,t)])},(d,g)=>{c=c.add(new Md(r.indexId,t,g.arrayValue,g.directionalValue))}).next(()=>c)}yn(e,t){let r=new Vr(bu);const s=this.An(t,e);if(null==s)return r;const c=su(t);if(null!=c){const d=e.data.field(c.fieldPath);if(N_(d))for(const g of d.arrayValue.values||[])r=r.add(new Md(t.indexId,e.key,this.Tn(g),s))}else r=r.add(new Md(t.indexId,e.key,Z_,s));return r}wn(e,t,r,s,c){Vt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(I,T,k,B,K){const ue=I.getIterator(),De=T.getIterator();let mt=Id(ue),ht=Id(De);for(;mt||ht;){let Zt=!1,ln=!1;if(mt&&ht){const Xt=k(mt,ht);Xt<0?ln=!0:Xt>0&&(Zt=!0)}else null!=mt?ln=!0:Zt=!0;Zt?(B(ht),ht=Id(De)):ln?(K(mt),mt=Id(ue)):(mt=Id(ue),ht=Id(De))}}(s,c,bu,g=>{d.push(this.Sn(e,t,r,g))},g=>{d.push(this.bn(e,t,r,g))}),ze.waitFor(d)}gn(e){let t=1;return Nd(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,c)=>{c.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,g)=>bu(d,g)).filter((d,g,I)=>!g||0!==bu(d,I[g-1]));const s=[];s.push(e);for(const d of r){const g=bu(d,e),I=bu(d,t);if(0===g)s[0]=e.Jt();else if(g>0&&I<0)s.push(d),s.push(d.Jt());else if(I>0)break}s.push(t);const c=[];for(let d=0;d<s.length;d+=2){if(this.Dn(s[d],s[d+1]))return[];c.push(IDBKeyRange.bound([s[d].indexId,this.uid,s[d].arrayValue,s[d].directionalValue,Z_,[]],[s[d+1].indexId,this.uid,s[d+1].arrayValue,s[d+1].directionalValue,Z_,[]]))}return c}Dn(e,t){return bu(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(tv)}getMinOffset(e,t){return ze.mapArray(this.cn(t),r=>this.ln(e,r).next(s=>s||un())).next(tv)}}function ev(n){return ko(n,"collectionParents")}function Tu(n){return ko(n,"indexEntries")}function vg(n){return ko(n,"indexConfiguration")}function Nd(n){return ko(n,"indexState")}function tv(n){Cn(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;Yp(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new js(e.readTime,e.documentKey,t)}const IA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Io{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Io(e,Io.DEFAULT_COLLECTION_PERCENTILE,Io.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function LM(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),c=[],d=IDBKeyRange.only(t.batchId);let g=0;const I=r.J({range:d},(k,B,K)=>(g++,K.delete()));c.push(I.next(()=>{Cn(1===g)}));const T=[];for(const k of t.mutations){const B=CT(e,k.key.path,t.batchId);c.push(s.delete(B)),T.push(k.key)}return ze.waitFor(c).next(()=>T)}function eE(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw un();e=n.noDocument}return JSON.stringify(e).length}Io.DEFAULT_COLLECTION_PERCENTILE=10,Io.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Io.DEFAULT=new Io(41943040,Io.DEFAULT_COLLECTION_PERCENTILE,Io.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Io.DISABLED=new Io(-1,0,0);class nv{constructor(e,t,r,s){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=s,this.Cn={}}static lt(e,t,r,s){Cn(""!==e.uid);const c=e.isAuthenticated()?e.uid:"";return new nv(c,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ma(e).J({index:"userMutationsIndex",range:r},(s,c,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const c=yg(e),d=ma(e);return d.add({}).next(g=>{Cn("number"==typeof g);const I=new af(g,t,r,s),T=function(ue,De,mt){const ht=mt.baseMutations.map(ln=>Q_(ue.ct,ln)),Zt=mt.mutations.map(ln=>Q_(ue.ct,ln));return{userId:De,batchId:mt.batchId,localWriteTimeMs:mt.localWriteTime.toMillis(),baseMutations:ht,mutations:Zt}}(this.serializer,this.userId,I),k=[];let B=new Vr((K,ue)=>Hn(K.canonicalString(),ue.canonicalString()));for(const K of s){const ue=CT(this.userId,K.key.path,g);B=B.add(K.key.path.popLast()),k.push(d.put(T)),k.push(c.put(ue,oI))}return B.forEach(K=>{k.push(this.indexManager.addToCollectionParentIndex(e,K))}),e.addOnCommittedListener(()=>{this.Cn[g]=I.keys()}),ze.waitFor(k).next(()=>I)})}lookupMutationBatch(e,t){return ma(e).get(t).next(r=>r?(Cn(r.userId===this.userId),Cu(this.serializer,r)):null)}vn(e,t){return this.Cn[t]?ze.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.Cn[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let c=null;return ma(e).J({index:"userMutationsIndex",range:s},(d,g,I)=>{g.userId===this.userId&&(Cn(g.batchId>=r),c=Cu(this.serializer,g)),I.done()}).next(()=>c)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ma(e).J({index:"userMutationsIndex",range:t,reverse:!0},(s,c,d)=>{r=c.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ma(e).U("userMutationsIndex",t).next(r=>r.map(s=>Cu(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=D_(this.userId,t.path),s=IDBKeyRange.lowerBound(r),c=[];return yg(e).J({range:s},(d,g,I)=>{const[T,k,B]=d,K=Gl(k);if(T===this.userId&&t.path.isEqual(K))return ma(e).get(B).next(ue=>{if(!ue)throw un();Cn(ue.userId===this.userId),c.push(Cu(this.serializer,ue))});I.done()}).next(()=>c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Vr(Hn);const s=[];return t.forEach(c=>{const d=D_(this.userId,c.path),g=IDBKeyRange.lowerBound(d),I=yg(e).J({range:g},(T,k,B)=>{const[K,ue,De]=T,mt=Gl(ue);K===this.userId&&c.path.isEqual(mt)?r=r.add(De):B.done()});s.push(I)}),ze.waitFor(s).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,c=D_(this.userId,r),d=IDBKeyRange.lowerBound(c);let g=new Vr(Hn);return yg(e).J({range:d},(I,T,k)=>{const[B,K,ue]=I,De=Gl(K);B===this.userId&&r.isPrefixOf(De)?De.length===s&&(g=g.add(ue)):k.done()}).next(()=>this.Fn(e,g))}Fn(e,t){const r=[],s=[];return t.forEach(c=>{s.push(ma(e).get(c).next(d=>{if(null===d)throw un();Cn(d.userId===this.userId),r.push(Cu(this.serializer,d))}))}),ze.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return LM(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Mn(t.batchId)}),ze.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ze.resolve();const r=IDBKeyRange.lowerBound(function(d){return[d]}(this.userId)),s=[];return yg(e).J({range:r},(c,d,g)=>{if(c[0]===this.userId){const I=Gl(c[1]);s.push(I)}else g.done()}).next(()=>{Cn(0===s.length)})})}containsKey(e,t){return VM(e,this.userId,t)}xn(e){return Ig(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function VM(n,e,t){const r=D_(e,t.path),s=r[1],c=IDBKeyRange.lowerBound(r);let d=!1;return yg(n).J({range:c,H:!0},(g,I,T)=>{const[k,B,K]=g;k===e&&B===s&&(d=!0),T.done()}).next(()=>d)}function ma(n){return ko(n,"mutations")}function yg(n){return ko(n,"documentMutations")}function Ig(n){return ko(n,"mutationQueues")}class kd{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new kd(0)}static Ln(){return new kd(-1)}}class UM{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next(t=>{const r=new kd(t.highestTargetId);return t.highestTargetId=r.next(),this.kn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(t=>Sn.fromTimestamp(new wi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Bn(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.kn(e,s)))}addTargetData(e,t){return this.qn(e,t).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.Qn(t,r),this.kn(e,r))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Au(e).delete(t.targetId)).next(()=>this.Bn(e)).next(r=>(Cn(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,t,r){let s=0;const c=[];return Au(e).J((d,g)=>{const I=gg(g);I.sequenceNumber<=t&&null===r.get(I.targetId)&&(s++,c.push(this.removeTargetData(e,I)))}).next(()=>ze.waitFor(c)).next(()=>s)}forEachTarget(e,t){return Au(e).J((r,s)=>{const c=gg(s);t(c)})}Bn(e){return EA(e).get("targetGlobalKey").next(t=>(Cn(null!==t),t))}kn(e,t){return EA(e).put("targetGlobalKey",t)}qn(e,t){return Au(e).put(xM(this.serializer,t))}Qn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=pu(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let c=null;return Au(e).J({range:s,index:"queryTargetsIndex"},(d,g,I)=>{const T=gg(g);ig(t,T.target)&&(c=T,I.done())}).next(()=>c)}addMatchingKeys(e,t,r){const s=[],c=Zo(e);return t.forEach(d=>{const g=Jo(d.path);s.push(c.put({targetId:r,path:g})),s.push(this.referenceDelegate.addReference(e,r,d))}),ze.waitFor(s)}removeMatchingKeys(e,t,r){const s=Zo(e);return ze.forEach(t,c=>{const d=Jo(c.path);return ze.waitFor([s.delete([r,d]),this.referenceDelegate.removeReference(e,r,c)])})}removeMatchingKeysForTargetId(e,t){const r=Zo(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=Zo(e);let c=hr();return s.J({range:r,H:!0},(d,g,I)=>{const T=Gl(d[1]),k=new tn(T);c=c.add(k)}).next(()=>c)}containsKey(e,t){const r=Jo(t.path),s=IDBKeyRange.bound([r],[eI(r)],!1,!0);let c=0;return Zo(e).J({index:"documentTargetsIndex",H:!0,range:s},([d,g],I,T)=>{0!==d&&(c++,T.done())}).next(()=>c>0)}ot(e,t){return Au(e).get(t).next(r=>r?gg(r):null)}}function Au(n){return ko(n,"targets")}function EA(n){return ko(n,"targetGlobal")}function Zo(n){return ko(n,"targetDocuments")}function gf([n,e],[t,r]){const s=Hn(n,t);return 0===s?Hn(e,r):s}class Ji{constructor(e){this.Kn=e,this.buffer=new Vr(gf),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();gf(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Du{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){var t=this;Vt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,X.A)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){lu(r)?Vt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield _c(r)}yield t.zn(3e5)}))}}class rv{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ze.resolve(ga.oe);const r=new Ji(t);return this.jn.forEachTarget(e,s=>r.Wn(s.sequenceNumber)).next(()=>this.jn.Jn(e,s=>r.Wn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Vt("LruGarbageCollector","Garbage collection skipped; disabled"),ze.resolve(IA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Vt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),IA):this.Yn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let r,s,c,d,g,I,T;const k=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(B=>(B>this.params.maximumSequenceNumbersToCollect?(Vt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${B}`),s=this.params.maximumSequenceNumbersToCollect):s=B,d=Date.now(),this.nthSequenceNumber(e,s))).next(B=>(r=B,g=Date.now(),this.removeTargets(e,r,t))).next(B=>(c=B,I=Date.now(),this.removeOrphanedDocuments(e,r))).next(B=>(T=Date.now(),ou()<=Tn.DEBUG&&Vt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-k}ms\n\tDetermined least recently used ${s} in `+(g-d)+`ms\n\tRemoved ${c} targets in `+(I-g)+`ms\n\tRemoved ${B} documents in `+(T-I)+`ms\nTotal Duration: ${T-k}ms`),ze.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:c,documentsRemoved:B})))}}class Eg{constructor(e,t){this.db=e,this.garbageCollector=function _a(n,e){return new rv(n,e)}(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}Zn(e){let t=0;return this.Jn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,(r,s)=>t(s))}addReference(e,t,r){return iv(e,r)}removeReference(e,t,r){return iv(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return iv(e,t)}er(e,t){return function(s,c){let d=!1;return Ig(s).Y(g=>VM(s,g,c).next(I=>(I&&(d=!0),ze.resolve(!I)))).next(()=>d)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let c=0;return this.Xn(e,(d,g)=>{if(g<=t){const I=this.er(e,d).next(T=>{if(!T)return c++,r.getEntry(e,d).next(()=>(r.removeEntry(d,Sn.min()),Zo(e).delete([0,Jo(d.path)])))});s.push(I)}}).next(()=>ze.waitFor(s)).next(()=>r.apply(e)).next(()=>c)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return iv(e,t)}Xn(e,t){const r=Zo(e);let s,c=ga.oe;return r.J({index:"documentTargetsIndex"},([d,g],{path:I,sequenceNumber:T})=>{0===d?(c!==ga.oe&&t(new tn(Gl(s)),c),c=T,s=I):c=ga.oe}).next(()=>{c!==ga.oe&&t(new tn(Gl(s)),c)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function iv(n,e){return Zo(n).put((s=n.currentSequenceNumber,{targetId:0,path:Jo(e.path),sequenceNumber:s}));var s}class Od{constructor(){this.changes=new wc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,hi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ze.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class CA{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return fi(e).put(r)}removeEntry(e,t,r){return fi(e).delete(function(c,d){const g=c.path.toArray();return[g.slice(0,g.length-2),g[g.length-2],Eu(d),g[g.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.tr(e,r)))}getEntry(e,t){let r=hi.newInvalidDocument(t);return fi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(mf(t))},(s,c)=>{r=this.nr(t,c)}).next(()=>r)}rr(e,t){let r={size:0,document:hi.newInvalidDocument(t)};return fi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(mf(t))},(s,c)=>{r={document:this.nr(t,c),size:eE(c)}}).next(()=>r)}getEntries(e,t){let r=Fr();return this.ir(e,t,(s,c)=>{const d=this.nr(s,c);r=r.insert(s,d)}).next(()=>r)}sr(e,t){let r=Fr(),s=new Gr(tn.comparator);return this.ir(e,t,(c,d)=>{const g=this.nr(c,d);r=r.insert(c,g),s=s.insert(c,eE(d))}).next(()=>({documents:r,_r:s}))}ir(e,t,r){if(t.isEmpty())return ze.resolve();let s=new Vr(Gi);t.forEach(I=>s=s.add(I));const c=IDBKeyRange.bound(mf(s.first()),mf(s.last())),d=s.getIterator();let g=d.getNext();return fi(e).J({index:"documentKeyIndex",range:c},(I,T,k)=>{const B=tn.fromSegments([...T.prefixPath,T.collectionGroup,T.documentId]);for(;g&&Gi(g,B)<0;)r(g,null),g=d.getNext();g&&g.isEqual(B)&&(r(g,T),g=d.hasNext()?d.getNext():null),g?k.$(mf(g)):k.done()}).next(()=>{for(;g;)r(g,null),g=d.hasNext()?d.getNext():null})}getDocumentsMatchingQuery(e,t,r,s,c){const d=t.path,g=[d.popLast().toArray(),d.lastSegment(),Eu(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],I=[d.popLast().toArray(),d.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return fi(e).U(IDBKeyRange.bound(g,I,!0)).next(T=>{null==c||c.incrementDocumentReadCount(T.length);let k=Fr();for(const B of T){const K=this.nr(tn.fromSegments(B.prefixPath.concat(B.collectionGroup,B.documentId)),B);K.isFoundDocument()&&($_(t,K)||s.has(K.key))&&(k=k.insert(K.key,K))}return k})}getAllFromCollectionGroup(e,t,r,s){let c=Fr();const d=bA(t,r),g=bA(t,js.max());return fi(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,g,!0)},(I,T,k)=>{const B=this.nr(tn.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);c=c.insert(B.key,B),c.size===s&&k.done()}).next(()=>c)}newChangeBuffer(e){return new BM(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return wA(e).get("remoteDocumentGlobalKey").next(t=>(Cn(!!t),t))}tr(e,t){return wA(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const r=function MM(n,e){let t;if(e.document)t=$I(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=tn.fromSegments(e.noDocument.path),s=hf(e.noDocument.readTime);t=hi.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return un();{const r=tn.fromSegments(e.unknownDocument.path),s=hf(e.unknownDocument.version);t=hi.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(s){const c=new wi(s[0],s[1]);return Sn.fromTimestamp(c)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Sn.min()))return r}return hi.newInvalidDocument(e)}}function tE(n){return new CA(n)}class BM extends Od{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new wc(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new Vr((c,d)=>Hn(c.canonicalString(),d.canonicalString()));return this.changes.forEach((c,d)=>{const g=this.ur.get(c);if(t.push(this.ar.removeEntry(e,c,g.readTime)),d.isValidDocument()){const I=Rd(this.ar.serializer,d);s=s.add(c.path.popLast());const T=eE(I);r+=T-g.size,t.push(this.ar.addEntry(e,c,I))}else if(r-=g.size,this.trackRemovals){const I=Rd(this.ar.serializer,d.convertToNoDocument(Sn.min()));t.push(this.ar.addEntry(e,c,I))}}),s.forEach(c=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,c))}),t.push(this.ar.updateMetadata(e,r)),ze.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next(r=>(this.ur.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.ar.sr(e,t).next(({documents:r,_r:s})=>(s.forEach((c,d)=>{this.ur.set(c,{size:d,readTime:r.get(c).readTime})}),r))}}function wA(n){return ko(n,"remoteDocumentGlobal")}function fi(n){return ko(n,"remoteDocumentsV14")}function mf(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function bA(n,e){const t=e.documentKey.path.toArray();return[n,Eu(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Gi(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let c=0;c<t.length-2&&c<r.length-2;++c)if(s=Hn(t[c],r[c]),s)return s;return s=Hn(t.length,r.length),s||(s=Hn(t[t.length-2],r[r.length-2]),s||Hn(t[t.length-1],r[r.length-1]))}class Cg{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Fd{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(null!==r&&yu(r.mutation,s,Hs.empty(),wi.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,hr()).next(()=>r))}getLocalViewOfDocuments(e,t,r=hr()){const s=ql();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(c=>{let d=bd();return c.forEach((g,I)=>{d=d.insert(g,I.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const r=ql();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,hr()))}populateOverlays(e,t,r){const s=[];return r.forEach(c=>{t.has(c)||s.push(c)}),this.documentOverlayCache.getOverlays(e,s).next(c=>{c.forEach((d,g)=>{t.set(d,g)})})}computeViews(e,t,r,s){let c=Fr();const d=Jh(),g=Jh();return t.forEach((I,T)=>{const k=r.get(T.key);s.has(T.key)&&(void 0===k||k.mutation instanceof Tc)?c=c.insert(T.key,T):void 0!==k?(d.set(T.key,k.mutation.getFieldMask()),yu(k.mutation,T,k.mutation.getFieldMask(),wi.now())):d.set(T.key,Hs.empty())}),this.recalculateAndSaveOverlays(e,c).next(I=>(I.forEach((T,k)=>d.set(T,k)),t.forEach((T,k)=>{var B;return g.set(T,new Cg(k,null!==(B=d.get(T))&&void 0!==B?B:null))}),g))}recalculateAndSaveOverlays(e,t){const r=Jh();let s=new Gr((d,g)=>d-g),c=hr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const g of d)g.keys().forEach(I=>{const T=t.get(I);if(null===T)return;let k=r.get(I)||Hs.empty();k=g.applyToLocalView(T,k),r.set(I,k);const B=(s.get(g.batchId)||hr()).add(I);s=s.insert(g.batchId,B)})}).next(()=>{const d=[],g=s.getReverseIterator();for(;g.hasNext();){const I=g.getNext(),T=I.key,k=I.value,B=j_();k.forEach(K=>{if(!c.has(K)){const ue=TI(t.get(K),r.get(K));null!==ue&&B.set(K,ue),c=c.add(K)}}),d.push(this.documentOverlayCache.saveOverlays(e,T,B))}return ze.waitFor(d)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return tn.isDocumentKey((d=t).path)&&null===d.collectionGroup&&0===d.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):CI(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s);var d}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(c=>{const d=s-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-c.size):ze.resolve(ql());let g=-1,I=c;return d.next(T=>ze.forEach(T,(k,B)=>(g<B.largestBatchId&&(g=B.largestBatchId),c.get(k)?ze.resolve():this.remoteDocumentCache.getEntry(e,k).next(K=>{I=I.insert(k,K)}))).next(()=>this.populateOverlays(e,T,c)).next(()=>this.computeViews(e,I,T,hr())).next(k=>({batchId:g,changes:zT(k)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new tn(t)).next(r=>{let s=bd();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const c=t.collectionGroup;let d=bd();return this.indexManager.getCollectionParents(e,c).next(g=>ze.forEach(g,I=>{const T=(B=t,K=I.child(c),new Ws(K,null,B.explicitOrderBy.slice(),B.filters.slice(),B.limit,B.limitType,B.startAt,B.endAt));var B,K;return this.getDocumentsMatchingCollectionQuery(e,T,r,s).next(k=>{k.forEach((B,K)=>{d=d.insert(B,K)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,t,r,s){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,c,s))).next(d=>{c.forEach((I,T)=>{const k=T.getKey();null===d.get(k)&&(d=d.insert(k,hi.newInvalidDocument(k)))});let g=bd();return d.forEach((I,T)=>{const k=c.get(I);void 0!==k&&yu(k.mutation,T,Hs.empty(),wi.now()),$_(t,T)&&(g=g.insert(I,T))}),g})}}class ov{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return ze.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,{id:(s=t).id,version:s.version,createTime:Ni(s.createTime)}),ze.resolve();var s}getNamedQuery(e,t){return ze.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,{name:(s=t).name,query:HI(s.bundledQuery),readTime:Ni(s.readTime)}),ze.resolve();var s}}class wg{constructor(){this.overlays=new Gr(tn.comparator),this.hr=new Map}getOverlay(e,t){return ze.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ql();return ze.forEach(t,s=>this.getOverlay(e,s).next(c=>{null!==c&&r.set(s,c)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,c)=>{this.ht(e,t,c)}),ze.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.hr.get(r);return void 0!==s&&(s.forEach(c=>this.overlays=this.overlays.remove(c)),this.hr.delete(r)),ze.resolve()}getOverlaysForCollection(e,t,r){const s=ql(),c=t.length+1,d=new tn(t.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const I=g.getNext().value,T=I.getKey();if(!t.isPrefixOf(T.path))break;T.path.length===c&&I.largestBatchId>r&&s.set(I.getKey(),I)}return ze.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let c=new Gr((T,k)=>T-k);const d=this.overlays.getIterator();for(;d.hasNext();){const T=d.getNext().value;if(T.getKey().getCollectionGroup()===t&&T.largestBatchId>r){let k=c.get(T.largestBatchId);null===k&&(k=ql(),c=c.insert(T.largestBatchId,k)),k.set(T.getKey(),T)}}const g=ql(),I=c.getIterator();for(;I.hasNext()&&(I.getNext().value.forEach((T,k)=>g.set(T,k)),!(g.size()>=s)););return ze.resolve(g)}ht(e,t,r){const s=this.overlays.get(r.key);if(null!==s){const d=this.hr.get(s.largestBatchId).delete(r.key);this.hr.set(s.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new SI(t,r));let c=this.hr.get(t);void 0===c&&(c=hr(),this.hr.set(t,c)),this.hr.set(t,c.add(r.key))}}class _f{constructor(){this.Pr=new Vr(Eo.Ir),this.Tr=new Vr(Eo.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const r=new Eo(e,t);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ar(new Eo(e,t))}Rr(e,t){e.forEach(r=>this.removeReference(r,t))}Vr(e){const t=new tn(new br([])),r=new Eo(t,e),s=new Eo(t,e+1),c=[];return this.Tr.forEachInRange([r,s],d=>{this.Ar(d),c.push(d.key)}),c}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new tn(new br([])),r=new Eo(t,e),s=new Eo(t,e+1);let c=hr();return this.Tr.forEachInRange([r,s],d=>{c=c.add(d.key)}),c}containsKey(e){const t=new Eo(e,0),r=this.Pr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Eo{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return tn.comparator(e.key,t.key)||Hn(e.pr,t.pr)}static Er(e,t){return Hn(e.pr,t.pr)||tn.comparator(e.key,t.key)}}class TA{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new Vr(Eo.Ir)}checkEmpty(e){return ze.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,s){const c=this.yr;this.yr++;const d=new af(c,t,r,s);this.mutationQueue.push(d);for(const g of s)this.wr=this.wr.add(new Eo(g.key,c)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return ze.resolve(d)}lookupMutationBatch(e,t){return ze.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.br(t+1),c=s<0?0:s;return ze.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return ze.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return ze.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Eo(t,0),s=new Eo(t,Number.POSITIVE_INFINITY),c=[];return this.wr.forEachInRange([r,s],d=>{const g=this.Sr(d.pr);c.push(g)}),ze.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Vr(Hn);return t.forEach(s=>{const c=new Eo(s,0),d=new Eo(s,Number.POSITIVE_INFINITY);this.wr.forEachInRange([c,d],g=>{r=r.add(g.pr)})}),ze.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let c=r;tn.isDocumentKey(c)||(c=c.child(""));const d=new Eo(new tn(c),0);let g=new Vr(Hn);return this.wr.forEachWhile(I=>{const T=I.key.path;return!!r.isPrefixOf(T)&&(T.length===s&&(g=g.add(I.pr)),!0)},d),ze.resolve(this.Dr(g))}Dr(e){const t=[];return e.forEach(r=>{const s=this.Sr(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){Cn(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.wr;return ze.forEach(t.mutations,s=>{const c=new Eo(s.key,t.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,t){const r=new Eo(t,0),s=this.wr.firstAfterOrEqual(r);return ze.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return ze.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class AA{constructor(e){this.vr=e,this.docs=new Gr(tn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),c=s?s.size:0,d=this.vr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ze.resolve(r?r.document.mutableCopy():hi.newInvalidDocument(t))}getEntries(e,t){let r=Fr();return t.forEach(s=>{const c=this.docs.get(s);r=r.insert(s,c?c.document.mutableCopy():hi.newInvalidDocument(s))}),ze.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let c=Fr();const d=t.path,g=new tn(d.child("")),I=this.docs.getIteratorFrom(g);for(;I.hasNext();){const{key:T,value:{document:k}}=I.getNext();if(!d.isPrefixOf(T.path))break;T.path.length>d.length+1||Yp($h(k),r)<=0||(s.has(k.key)||$_(t,k))&&(c=c.insert(k.key,k.mutableCopy()))}return ze.resolve(c)}getAllFromCollectionGroup(e,t,r,s){un()}Fr(e,t){return ze.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new sv(this)}getSize(e){return ze.resolve(this.size)}}class sv extends Od{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.ar.addEntry(e,s)):this.ar.removeEntry(r)}),ze.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class nE{constructor(e){this.persistence=e,this.Mr=new wc(t=>pu(t),ig),this.lastRemoteSnapshotVersion=Sn.min(),this.highestTargetId=0,this.Or=0,this.Nr=new _f,this.targetCount=0,this.Lr=kd.Nn()}forEachTarget(e,t){return this.Mr.forEach((r,s)=>t(s)),ze.resolve()}getLastRemoteSnapshotVersion(e){return ze.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ze.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),ze.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Or&&(this.Or=t),ze.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new kd(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,ze.resolve()}updateTargetData(e,t){return this.qn(t),ze.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,ze.resolve()}removeTargets(e,t,r){let s=0;const c=[];return this.Mr.forEach((d,g)=>{g.sequenceNumber<=t&&null===r.get(g.targetId)&&(this.Mr.delete(d),c.push(this.removeMatchingKeysForTargetId(e,g.targetId)),s++)}),ze.waitFor(c).next(()=>s)}getTargetCount(e){return ze.resolve(this.targetCount)}getTargetData(e,t){const r=this.Mr.get(t)||null;return ze.resolve(r)}addMatchingKeys(e,t,r){return this.Nr.dr(t,r),ze.resolve()}removeMatchingKeys(e,t,r){this.Nr.Rr(t,r);const s=this.persistence.referenceDelegate,c=[];return s&&t.forEach(d=>{c.push(s.markPotentiallyOrphaned(e,d))}),ze.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),ze.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Nr.gr(t);return ze.resolve(r)}containsKey(e,t){return ze.resolve(this.Nr.containsKey(t))}}class av{constructor(e,t){this.Br={},this.overlays={},this.kr=new ga(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new nE(this),this.indexManager=new xd,this.remoteDocumentCache=new AA(r=>this.referenceDelegate.Kr(r)),this.serializer=new PM(t),this.$r=new ov(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new wg,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Br[e.toKey()];return r||(r=new TA(t,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,r){Vt("MemoryPersistence","Starting transaction:",e);const s=new lv(this.kr.next());return this.referenceDelegate.Ur(),r(s).next(c=>this.referenceDelegate.Wr(s).next(()=>c)).toPromise().then(c=>(s.raiseOnCommittedEvent(),c))}Gr(e,t){return ze.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,t)))}}class lv extends w_{constructor(e){super(),this.currentSequenceNumber=e}}class Xl{constructor(e){this.persistence=e,this.zr=new _f,this.jr=null}static Hr(e){return new Xl(e)}get Jr(){if(this.jr)return this.jr;throw un()}addReference(e,t,r){return this.zr.addReference(r,t),this.Jr.delete(r.toString()),ze.resolve()}removeReference(e,t,r){return this.zr.removeReference(r,t),this.Jr.add(r.toString()),ze.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),ze.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(s=>this.Jr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(c=>this.Jr.add(c.toString()))}).next(()=>r.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ze.forEach(this.Jr,r=>{const s=tn.fromPath(r);return this.Yr(e,s).next(c=>{c||t.removeEntry(s,Sn.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(r=>{r?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return ze.or([()=>ze.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class va{constructor(e){this.serializer=e}O(e,t,r,s){const c=new b_("createOrUpgrade",t);var I;r<1&&s>=1&&(e.createObjectStore("owner"),(I=e).createObjectStore("mutationQueues",{keyPath:"userId"}),I.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",iI,{unique:!0}),I.createObjectStore("documentMutations"),DA(e),function(I){I.createObjectStore("remoteDocuments")}(e));let d=ze.resolve();return r<3&&s>=3&&(0!==r&&(function(I){I.deleteObjectStore("targetDocuments"),I.deleteObjectStore("targets"),I.deleteObjectStore("targetGlobal")}(e),DA(e)),d=d.next(()=>function(I){const T=I.store("targetGlobal"),k={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Sn.min().toTimestamp(),targetCount:0};return T.put("targetGlobalKey",k)}(c))),r<4&&s>=4&&(0!==r&&(d=d.next(()=>function(I,T){return T.store("mutations").U().next(k=>{I.deleteObjectStore("mutations"),I.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",iI,{unique:!0});const B=T.store("mutations"),K=k.map(ue=>B.put(ue));return ze.waitFor(K)})}(e,c))),d=d.next(()=>{!function(I){I.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&s>=5&&(d=d.next(()=>this.Xr(c))),r<6&&s>=6&&(d=d.next(()=>(function(I){I.createObjectStore("remoteDocumentGlobal")}(e),this.ei(c)))),r<7&&s>=7&&(d=d.next(()=>this.ti(c))),r<8&&s>=8&&(d=d.next(()=>this.ni(e,c))),r<9&&s>=9&&(d=d.next(()=>{!function(I){I.objectStoreNames.contains("remoteDocumentChanges")&&I.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&s>=10&&(d=d.next(()=>this.ri(c))),r<11&&s>=11&&(d=d.next(()=>{(function(I){I.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(I){I.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(d=d.next(()=>{!function(I){const T=I.createObjectStore("documentOverlays",{keyPath:S_});T.createIndex("collectionPathOverlayIndex",aI,{unique:!1}),T.createIndex("collectionGroupOverlayIndex",_F,{unique:!1})}(e)})),r<13&&s>=13&&(d=d.next(()=>function(I){const T=I.createObjectStore("remoteDocumentsV14",{keyPath:rM});T.createIndex("documentKeyIndex",iM),T.createIndex("collectionGroupIndex",oM)}(e)).next(()=>this.ii(e,c)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(d=d.next(()=>this.si(e,c))),r<15&&s>=15&&(d=d.next(()=>function(I){I.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),I.createObjectStore("indexState",{keyPath:lM}).createIndex("sequenceNumberIndex",cM,{unique:!1}),I.createObjectStore("indexEntries",{keyPath:wT}).createIndex("documentKeyIndex",bT,{unique:!1})}(e))),r<16&&s>=16&&(d=d.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),d}ei(e){let t=0;return e.store("remoteDocuments").J((r,s)=>{t+=eE(s)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(s=>ze.forEach(s,c=>{const d=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",d).next(g=>ze.forEach(g,I=>{Cn(I.userId===c.userId);const T=Cu(this.serializer,I);return LM(e,c.userId,T).next(()=>{})}))}))}ti(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const c=[];return r.J((d,g)=>{const I=new br(d),T=[0,Jo(I)];c.push(t.get(T).next(k=>k?ze.resolve():t.put({targetId:0,path:Jo(I),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>ze.waitFor(c))})}ni(e,t){e.createObjectStore("collectionParents",{keyPath:sI});const r=t.store("collectionParents"),s=new J_,c=d=>{if(s.add(d)){const g=d.lastSegment(),I=d.popLast();return r.put({collectionId:g,parent:Jo(I)})}};return t.store("remoteDocuments").J({H:!0},(d,g)=>{const I=new br(d);return c(I.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([d,g,I],T)=>{const k=Gl(g);return c(k.popLast())}))}ri(e){const t=e.store("targets");return t.J((r,s)=>{const c=gg(s),d=xM(this.serializer,c);return t.put(d)})}ii(e,t){const r=t.store("remoteDocuments"),s=[];return r.J((c,d)=>{const g=t.store("remoteDocumentsV14"),I=(B=d,B.document?new tn(br.fromString(B.document.name).popFirst(5)):B.noDocument?tn.fromSegments(B.noDocument.path):B.unknownDocument?tn.fromSegments(B.unknownDocument.path):un()).path.toArray(),T={prefixPath:I.slice(0,I.length-2),collectionGroup:I[I.length-2],documentId:I[I.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};var B;s.push(g.put(T))}).next(()=>ze.waitFor(s))}si(e,t){const r=t.store("mutations"),s=tE(this.serializer),c=new av(Xl.Hr,this.serializer.ct);return r.U().next(d=>{const g=new Map;return d.forEach(I=>{var T;let k=null!==(T=g.get(I.userId))&&void 0!==T?T:hr();Cu(this.serializer,I).keys().forEach(B=>k=k.add(B)),g.set(I.userId,k)}),ze.forEach(g,(I,T)=>{const k=new mo(T),B=qI.lt(this.serializer,k),K=c.getIndexManager(k),ue=nv.lt(k,this.serializer,K,c.referenceDelegate);return new Fd(s,ue,B,K).recalculateAndSaveOverlaysForDocumentKeys(new uI(t,ga.oe),I).next()})})}}function DA(n){n.createObjectStore("targetDocuments",{keyPath:aM}).createIndex("documentTargetsIndex",Wl,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",sM,{unique:!0}),n.createObjectStore("targetGlobal")}const rE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class bg{constructor(e,t,r,s,c,d,g,I,T,k,B=16){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.oi=c,this.window=d,this.document=g,this._i=T,this.ai=k,this.ui=B,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=K=>Promise.resolve(),!bg.D())throw new kt(dt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Eg(this,s),this.Ti=t+"main",this.serializer=new PM(I),this.Ei=new Hl(this.Ti,this.ui,new va(this.serializer)),this.Qr=new UM(this.referenceDelegate,this.serializer),this.remoteDocumentCache=tE(this.serializer),this.$r=new pA,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===k&&Mi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new kt(dt.FAILED_PRECONDITION,rE);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new ga(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){var t=this;return this.Ii=function(){var r=(0,X.A)(function*(s){if(t.started)return e(s)});return function(s){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(function(){var t=(0,X.A)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((0,X.A)(function*(){t.started&&(yield t.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Tg(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(t=>{t||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(t=>this.isPrimary&&!t?this.yi(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(lu(e))return Vt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Vt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return vf(e).get("owner").next(t=>ze.resolve(this.Si(t)))}bi(e){return Tg(e).delete(this.clientId)}Di(){var e=this;return(0,X.A)(function*(){if(e.isPrimary&&!e.Ci(e.Pi,18e5)){e.Pi=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const s=ko(r,"clientMetadata");return s.U().next(c=>{const d=e.vi(c,18e5),g=c.filter(I=>-1===d.indexOf(I));return ze.forEach(g,I=>s.delete(I.clientId)).next(()=>g)})}).catch(()=>[]);if(e.di)for(const r of t)e.di.removeItem(e.Fi(r.clientId))}})()}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?ze.resolve(!0):vf(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new kt(dt.FAILED_PRECONDITION,rE);return!1}}return!(!this.networkEnabled||!this.inForeground)||Tg(e).U().next(r=>void 0===this.vi(r,5e3).find(s=>!(this.clientId===s.clientId||!(!this.networkEnabled&&s.networkEnabled||!this.inForeground&&s.inForeground&&this.networkEnabled===s.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Vt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,X.A)(function*(){e.qr=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Oi(),e.Ni(),yield e.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new uI(t,ga.oe);return e.yi(r).next(()=>e.bi(r))}),e.Ei.close(),e.Li()})()}vi(e,t){return e.filter(r=>this.Ci(r.updateTimeMs,t)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>Tg(e).U().next(t=>this.vi(t,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,t){return nv.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new TF(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return qI.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,r){Vt("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",c=16===(I=this.ui)?vc:15===I?R_:14===I?tg:13===I?cI:12===I?TT:11===I?lI:void un();var I;let d;return this.Ei.runTransaction(e,s,c,g=>(d=new uI(g,this.kr?this.kr.next():ga.oe),"readwrite-primary"===t?this.gi(d).next(I=>!!I||this.pi(d)).next(I=>{if(!I)throw Mi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new kt(dt.FAILED_PRECONDITION,C_);return r(d)}).next(I=>this.wi(d).next(()=>I)):this.ki(d).next(()=>r(d)))).then(g=>(d.raiseOnCommittedEvent(),g))}ki(e){return vf(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)&&!this.Si(t)&&!(this.ai||this.allowTabSynchronization&&t.allowTabSynchronization))throw new kt(dt.FAILED_PRECONDITION,rE)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return vf(e).put("owner",t)}static D(){return Hl.D()}yi(e){const t=vf(e);return t.get("owner").next(r=>this.Si(r)?(Vt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ze.resolve())}Ci(e,t){const r=Date.now();return!(e<r-t||e>r&&(Mi(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;Ue()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const r=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return Vt("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Mi("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Mi("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function vf(n){return ko(n,"owner")}function Tg(n){return ko(n,"clientMetadata")}function iE(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class SA{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.qi=r,this.Qi=s}static Ki(e,t){let r=hr(),s=hr();for(const c of t.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:s=s.add(c.doc.key)}return new SA(e,t.fromCache,r,s)}}class $M{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Ag{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=Ue()?8:tI(Ft())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,r,s){const c={result:null};return this.ji(e,t).next(d=>{c.result=d}).next(()=>{if(!c.result)return this.Hi(e,t,s,r).next(d=>{c.result=d})}).next(()=>{if(c.result)return;const d=new $M;return this.Ji(e,t,d).next(g=>{if(c.result=g,this.Ui)return this.Yi(e,t,d,g.size)})}).next(()=>c.result)}Yi(e,t,r,s){return r.documentReadCount<this.Wi?(ou()<=Tn.DEBUG&&Vt("QueryEngine","SDK will not create cache indexes for query:",gu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),ze.resolve()):(ou()<=Tn.DEBUG&&Vt("QueryEngine","Query:",gu(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Gi*s?(ou()<=Tn.DEBUG&&Vt("QueryEngine","The SDK decides to create cache indexes for query:",gu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Es(t))):ze.resolve())}ji(e,t){if(EI(t))return ze.resolve(null);let r=Es(t);return this.indexManager.getIndexType(e,r).next(s=>0===s?null:(null!==t.limit&&1===s&&(t=B_(t,null,"F"),r=Es(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(c=>{const d=hr(...c);return this.zi.getDocuments(e,d).next(g=>this.indexManager.getMinOffset(e,r).next(I=>{const T=this.Zi(t,g);return this.Xi(t,T,d,I.readTime)?this.ji(e,B_(t,null,"F")):this.es(e,T,t,I)}))})))}Hi(e,t,r,s){return EI(t)||s.isEqual(Sn.min())?ze.resolve(null):this.zi.getDocuments(e,r).next(c=>{const d=this.Zi(t,c);return this.Xi(t,d,r,s)?ze.resolve(null):(ou()<=Tn.DEBUG&&Vt("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),gu(t)),this.es(e,d,t,E_(s,-1)).next(g=>g))})}Zi(e,t){let r=new Vr(cl(e));return t.forEach((s,c)=>{$_(e,c)&&(r=r.add(c))}),r}Xi(e,t,r,s){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const c="F"===e.limitType?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(s)>0)}Ji(e,t,r){return ou()<=Tn.DEBUG&&Vt("QueryEngine","Using full collection scan to execute query:",gu(t)),this.zi.getDocumentsMatchingQuery(e,t,js.min(),r)}es(e,t,r,s){return this.zi.getDocumentsMatchingQuery(e,r,s).next(c=>(t.forEach(d=>{c=c.insert(d.key,d)}),c))}}class oE{constructor(e,t,r,s){this.persistence=e,this.ts=t,this.serializer=s,this.ns=new Gr(Hn),this.rs=new wc(c=>pu(c),ig),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Fd(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}}function uv(n,e,t,r){return new oE(n,e,t,r)}function Ld(n,e){return dv.apply(this,arguments)}function dv(){return dv=(0,X.A)(function*(n,e){const t=en(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(c=>(s=c,t._s(e),t.mutationQueue.getAllMutationBatches(r))).next(c=>{const d=[],g=[];let I=hr();for(const T of s){d.push(T.batchId);for(const k of T.mutations)I=I.add(k.key)}for(const T of c){g.push(T.batchId);for(const k of T.mutations)I=I.add(k.key)}return t.localDocuments.getDocuments(r,I).next(T=>({us:T,removedBatchIds:d,addedBatchIds:g}))})})}),dv.apply(this,arguments)}function Vd(n){const e=en(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function hv(n,e,t){let r=hr(),s=hr();return t.forEach(c=>r=r.add(c)),e.getEntries(n,r).next(c=>{let d=Fr();return t.forEach((g,I)=>{const T=c.get(g);I.isFoundDocument()!==T.isFoundDocument()&&(s=s.add(g)),I.isNoDocument()&&I.version.isEqual(Sn.min())?(e.removeEntry(g,I.readTime),d=d.insert(g,I)):!T.isValidDocument()||I.version.compareTo(T.version)>0||0===I.version.compareTo(T.version)&&T.hasPendingWrites?(e.addEntry(I),d=d.insert(g,I)):Vt("LocalStore","Ignoring outdated watch update for ",g,". Current version:",T.version," Watch version:",I.version)}),{cs:d,ls:s}})}function PA(n,e){const t=en(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ud(n,e){const t=en(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Qr.getTargetData(r,e).next(c=>c?(s=c,ze.resolve(s)):t.Qr.allocateTargetId(r).next(d=>(s=new Iu(e,d,"TargetPurposeListen",r.currentSequenceNumber),t.Qr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.ns.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.ns=t.ns.insert(r.targetId,r),t.rs.set(e,r.targetId)),r})}function Bd(n,e,t){return aE.apply(this,arguments)}function aE(){return aE=(0,X.A)(function*(n,e,t){const r=en(n),s=r.ns.get(e),c=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",c,d=>r.persistence.referenceDelegate.removeTarget(d,s)))}catch(d){if(!lu(d))throw d;Vt("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.ns=r.ns.remove(e),r.rs.delete(s.target)}),aE.apply(this,arguments)}function fv(n,e,t){const r=en(n);let s=Sn.min(),c=hr();return r.persistence.runTransaction("Execute query","readwrite",d=>function(I,T,k){const B=en(I),K=B.rs.get(k);return void 0!==K?ze.resolve(B.ns.get(K)):B.Qr.getTargetData(T,k)}(r,d,Es(e)).next(g=>{if(g)return s=g.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(d,g.targetId).next(I=>{c=I})}).next(()=>r.ts.getDocumentsMatchingQuery(d,e,t?s:Sn.min(),t?c:hr())).next(g=>(MA(r,wI(e),g),{documents:g,hs:c})))}function $d(n,e){const t=en(n),r=en(t.Qr),s=t.ns.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",c=>r.ot(c,e).next(d=>d?d.target:null))}function lE(n,e){const t=en(n),r=t.ss.get(e)||Sn.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.os.getAllFromCollectionGroup(s,e,E_(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(MA(t,e,s),s))}function MA(n,e,t){let r=n.ss.get(e)||Sn.min();t.forEach((s,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)}),n.ss.set(e,r)}function cE(){return cE=(0,X.A)(function*(n,e,t,r){const s=en(n);let c=hr(),d=Fr();for(const T of t){const k=e.Ps(T.metadata.name);T.document&&(c=c.add(k));const B=e.Is(T);B.setReadTime(e.Ts(T.metadata.readTime)),d=d.insert(k,B)}const g=s.os.newChangeBuffer({trackRemovals:!0}),I=yield Ud(s,(k=r,Es(Yh(br.fromString(`__bundle__/docs/${k}`)))));var k;return s.persistence.runTransaction("Apply bundle documents","readwrite",T=>hv(T,g,d).next(k=>(g.apply(T),k)).next(k=>s.Qr.removeMatchingKeysForTargetId(T,I.targetId).next(()=>s.Qr.addMatchingKeys(T,c,I.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(T,k.cs,k.ls)).next(()=>k.cs)))}),cE.apply(this,arguments)}function xA(n,e){return pv.apply(this,arguments)}function pv(){return pv=(0,X.A)(function*(n,e,t=hr()){const r=yield Ud(n,Es(HI(e.bundledQuery))),s=en(n);return s.persistence.runTransaction("Save named query","readwrite",c=>{const d=Ni(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return s.$r.saveNamedQuery(c,e);const g=r.withResumeToken(vo.EMPTY_BYTE_STRING,d);return s.ns=s.ns.insert(g.targetId,g),s.Qr.updateTargetData(c,g).next(()=>s.Qr.removeMatchingKeysForTargetId(c,r.targetId)).next(()=>s.Qr.addMatchingKeys(c,t,r.targetId)).next(()=>s.$r.saveNamedQuery(c,e))})}),pv.apply(this,arguments)}function NA(n,e){return`firestore_clients_${n}_${e}`}function zM(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function uE(n,e){return`firestore_targets_${n}_${e}`}class yf{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static Es(e,t,r){const s=JSON.parse(r);let c,d="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return d&&s.error&&(d="string"==typeof s.error.message&&"string"==typeof s.error.code,d&&(c=new kt(s.error.code,s.error.message))),d?new yf(e,t,s.state,c):(Mi("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class jd{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Es(e,t){const r=JSON.parse(t);let s,c="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return c&&r.error&&(c="string"==typeof r.error.message&&"string"==typeof r.error.code,c&&(s=new kt(r.error.code,r.error.message))),c?new jd(e,r.state,s):(Mi("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class gv{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const r=JSON.parse(t);let s="object"==typeof r&&r.activeTargetIds instanceof Array,c=bc();for(let d=0;s&&d<r.activeTargetIds.length;++d)s=A_(r.activeTargetIds[d]),c=c.add(r.activeTargetIds[d]);return s?new gv(e,c):(Mi("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class dE{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new dE(t.clientId,t.onlineState):(Mi("SharedClientState",`Failed to parse online state: ${e}`),null)}}class hE{constructor(){this.activeTargetIds=bc()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fE{constructor(e,t,r,s,c){this.window=e,this.oi=t,this.persistenceKey=r,this.Vs=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Gr(Hn),this.started=!1,this.ys=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.ws=NA(this.persistenceKey,this.Vs),this.Ss=`firestore_sequence_number_${this.persistenceKey}`,this.ps=this.ps.insert(this.Vs,new hE),this.bs=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.vs=`firestore_online_state_${this.persistenceKey}`,this.Fs=function(I){return`firestore_bundle_loaded_v2_${I}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,X.A)(function*(){const t=yield e.syncEngine.Bi();for(const s of t){if(s===e.Vs)continue;const c=e.getItem(NA(e.persistenceKey,s));if(c){const d=gv.Es(s,c);d&&(e.ps=e.ps.insert(d.clientId,d))}}e.Ms();const r=e.storage.getItem(e.vs);if(r){const s=e.xs(r);s&&e.Os(s)}for(const s of e.ys)e.gs(s);e.ys=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,t,r){this.Ls(e,t,r),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(uE(this.persistenceKey,e));if(r){const s=jd.Es(e,r);s&&(t=s.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(uE(this.persistenceKey,e))}updateQueryState(e,t,r){this.qs(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.Bs(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Vt("SharedClientState","READ",e,t),t}setItem(e,t){Vt("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Vt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Vt("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ws)return void Mi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((0,X.A)(function*(){if(t.started){if(null!==r.key)if(t.bs.test(r.key)){if(null==r.newValue){const s=t.$s(r.key);return t.Us(s,null)}{const s=t.Ws(r.key,r.newValue);if(s)return t.Us(s.clientId,s)}}else if(t.Ds.test(r.key)){if(null!==r.newValue){const s=t.Gs(r.key,r.newValue);if(s)return t.zs(s)}}else if(t.Cs.test(r.key)){if(null!==r.newValue){const s=t.js(r.key,r.newValue);if(s)return t.Hs(s)}}else if(r.key===t.vs){if(null!==r.newValue){const s=t.xs(r.newValue);if(s)return t.Os(s)}}else if(r.key===t.Ss){const s=function(d){let g=ga.oe;if(null!=d)try{const I=JSON.parse(d);Cn("number"==typeof I),g=I}catch(I){Mi("SharedClientState","Failed to read sequence number from WebStorage",I)}return g}(r.newValue);s!==ga.oe&&t.sequenceNumberHandler(s)}else if(r.key===t.Fs){const s=t.Js(r.newValue);yield Promise.all(s.map(c=>t.syncEngine.Ys(c)))}}else t.ys.push(r)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,t,r){const s=new yf(this.currentUser,e,t,r),c=zM(this.persistenceKey,this.currentUser,e);this.setItem(c,s.ds())}Bs(e){const t=zM(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){this.storage.setItem(this.vs,JSON.stringify({clientId:this.Vs,onlineState:e}))}qs(e,t,r){const s=uE(this.persistenceKey,e),c=new jd(e,t,r);this.setItem(s,c.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const r=this.$s(e);return gv.Es(r,t)}Gs(e,t){const r=this.Ds.exec(e),s=Number(r[1]);return yf.Es(new mo(void 0!==r[2]?r[2]:null),s,t)}js(e,t){const r=this.Cs.exec(e),s=Number(r[1]);return jd.Es(s,t)}xs(e){return dE.Es(e)}Js(e){return JSON.parse(e)}zs(e){var t=this;return(0,X.A)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Zs(e.batchId,e.state,e.error);Vt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const r=t?this.ps.insert(e,t):this.ps.remove(e),s=this.Ns(this.ps),c=this.Ns(r),d=[],g=[];return c.forEach(I=>{s.has(I)||d.push(I)}),s.forEach(I=>{c.has(I)||g.push(I)}),this.syncEngine.eo(d,g).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=bc();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class kA{constructor(){this.no=new hE,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,r){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new hE,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class HM{io(e){}shutdown(){}}class OA{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Vt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Vt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let mv=null;function pE(){return null===mv?mv=268435456+Math.round(2147483648*Math.random()):mv++,"0x"+mv.toString(16)}const GM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class WM{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}const as="WebChannelConnection";class qM extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+t.host,this.So=`projects/${s}/databases/${c}`,this.bo="(default)"===this.databaseId.database?`project_id=${s}`:`project_id=${s}&database_id=${c}`}get Do(){return!1}Co(t,r,s,c,d){const g=pE(),I=this.vo(t,r.toUriEncodedString());Vt("RestConnection",`Sending RPC '${t}' ${g}:`,I,s);const T={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(T,c,d),this.Mo(t,I,T,s).then(k=>(Vt("RestConnection",`Received RPC '${t}' ${g}: `,k),k),k=>{throw Is("RestConnection",`RPC '${t}' ${g} failed with error: `,k,"url: ",I,"request:",s),k})}xo(t,r,s,c,d,g){return this.Co(t,r,s,c,d)}Fo(t,r,s){t["X-Goog-Api-Client"]="gl-js/ fire/"+zl,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((c,d)=>t[d]=c),s&&s.headers.forEach((c,d)=>t[d]=c)}vo(t,r){return`${this.wo}/v1/${r}:${GM[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,t,r,s){const c=pE();return new Promise((d,g)=>{const I=new g_;I.setWithCredentials(!0),I.listenOnce(Kp.COMPLETE,()=>{try{switch(I.getLastErrorCode()){case m_.NO_ERROR:const k=I.getResponseJson();Vt(as,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(k)),d(k);break;case m_.TIMEOUT:Vt(as,`RPC '${e}' ${c} timed out`),g(new kt(dt.DEADLINE_EXCEEDED,"Request time out"));break;case m_.HTTP_ERROR:const B=I.getStatus();if(Vt(as,`RPC '${e}' ${c} failed with status:`,B,"response text:",I.getResponseText()),B>0){let K=I.getResponseJson();Array.isArray(K)&&(K=K[0]);const ue=null==K?void 0:K.error;if(ue&&ue.status&&ue.message){const De=function(ht){const Zt=ht.toLowerCase().replace(/_/g,"-");return Object.values(dt).indexOf(Zt)>=0?Zt:dt.UNKNOWN}(ue.status);g(new kt(De,ue.message))}else g(new kt(dt.UNKNOWN,"Server responded with status "+I.getStatus()))}else g(new kt(dt.UNAVAILABLE,"Connection failed."));break;default:un()}}finally{Vt(as,`RPC '${e}' ${c} completed.`)}});const T=JSON.stringify(s);Vt(as,`RPC '${e}' ${c} sending request:`,s),I.send(t,"POST",T,r,15)})}Oo(e,t,r){const s=pE(),c=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=pT(),g=fT(),I={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},T=this.longPollingOptions.timeoutSeconds;void 0!==T&&(I.longPollingTimeout=Math.round(1e3*T)),this.useFetchStreams&&(I.xmlHttpFactory=new q0({})),this.Fo(I.initMessageHeaders,t,r),I.encodeInitMessageHeaders=!0;const k=c.join("");Vt(as,`Creating RPC '${e}' stream ${s}: ${k}`,I);const B=d.createWebChannel(k,I);let K=!1,ue=!1;const De=new WM({lo:ht=>{ue?Vt(as,`Not sending because RPC '${e}' stream ${s} is closed:`,ht):(K||(Vt(as,`Opening RPC '${e}' stream ${s} transport.`),B.open(),K=!0),Vt(as,`RPC '${e}' stream ${s} sending:`,ht),B.send(ht))},ho:()=>B.close()}),mt=(ht,Zt,ln)=>{ht.listen(Zt,Xt=>{try{ln(Xt)}catch(vn){setTimeout(()=>{throw vn},0)}})};return mt(B,_d.EventType.OPEN,()=>{ue||(Vt(as,`RPC '${e}' stream ${s} transport opened.`),De.mo())}),mt(B,_d.EventType.CLOSE,()=>{ue||(ue=!0,Vt(as,`RPC '${e}' stream ${s} transport closed`),De.po())}),mt(B,_d.EventType.ERROR,ht=>{ue||(ue=!0,Is(as,`RPC '${e}' stream ${s} transport errored:`,ht),De.po(new kt(dt.UNAVAILABLE,"The operation could not be completed")))}),mt(B,_d.EventType.MESSAGE,ht=>{var Zt;if(!ue){const ln=ht.data[0];Cn(!!ln);const vn=ln.error||(null===(Zt=ln[0])||void 0===Zt?void 0:Zt.error);if(vn){Vt(as,`RPC '${e}' stream ${s} received error:`,vn);const gr=vn.status;let Wn=function(Ie){const Fe=Hi[Ie];if(void 0!==Fe)return PI(Fe)}(gr),xe=vn.message;void 0===Wn&&(Wn=dt.INTERNAL,xe="Unknown error status: "+gr+" with message "+vn.message),ue=!0,De.po(new kt(Wn,xe)),B.close()}else Vt(as,`RPC '${e}' stream ${s} received:`,ln),De.yo(ln)}}),mt(g,X0.STAT_EVENT,ht=>{ht.stat===K0.PROXY?Vt(as,`RPC '${e}' stream ${s} detected buffering proxy`):ht.stat===K0.NOPROXY&&Vt(as,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{De.fo()},0),De}}function FA(){return typeof window<"u"?window:null}function _v(){return typeof document<"u"?document:null}function Dg(n){return new cA(n,!0)}class vv{constructor(e,t,r=1e3,s=1.5,c=6e4){this.oi=e,this.timerId=t,this.No=r,this.Lo=s,this.Bo=c,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const t=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),s=Math.max(0,t-r);s>0&&Vt("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,s,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){null!==this.qo&&(this.qo.skipDelay(),this.qo=null)}cancel(){null!==this.qo&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}class gE{constructor(e,t,r,s,c,d,g,I){this.oi=e,this.Go=r,this.zo=s,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=I,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new vv(e,t)}Zo(){return 1===this.state||5===this.state||this.Xo()}Xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.e_()}stop(){var e=this;return(0,X.A)(function*(){e.Zo()&&(yield e.close(0))})()}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&null===this.Ho&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){var e=this;return(0,X.A)(function*(){if(e.Xo())return e.close(0)})()}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,t){var r=this;return(0,X.A)(function*(){r.s_(),r.o_(),r.Yo.cancel(),r.jo++,4!==e?r.Yo.reset():t&&t.code===dt.RESOURCE_EXHAUSTED?(Mi(t.toString()),Mi("Using maximum backoff delay to prevent overloading the backend."),r.Yo.Ko()):t&&t.code===dt.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.__(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Ao(t)})()}__(){}auth(){this.state=1;const e=this.a_(this.jo),t=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.jo===t&&this.u_(r,s)},r=>{e(()=>{const s=new kt(dt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(s)})})}u_(e,t){const r=this.a_(this.jo);this.stream=this.l_(e,t),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(s=>{r(()=>this.c_(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}e_(){var e=this;this.state=5,this.Yo.$o((0,X.A)(function*(){e.state=0,e.start()}))}c_(e){return Vt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return t=>{this.oi.enqueueAndForget(()=>this.jo===e?t():(Vt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Su extends gE{constructor(e,t,r,s,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,d),this.serializer=c}l_(e,t){return this.connection.Oo("Listen",e,t)}onMessage(e){this.Yo.reset();const t=function bM(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(T=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===T?1:"REMOVE"===T?2:"CURRENT"===T?3:"RESET"===T?4:un(),s=e.targetChange.targetIds||[],c=function(T,k){return T.useProto3Json?(Cn(void 0===k||"string"==typeof k),vo.fromBase64String(k||"")):(Cn(void 0===k||k instanceof Buffer||k instanceof Uint8Array),vo.fromUint8Array(k||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,g=d&&function(T){const k=void 0===T.code?dt.UNKNOWN:PI(T.code);return new kt(k,T.message||"")}(d);t=new oA(r,s,c,g||null)}else if("documentChange"in e){const r=e.documentChange,s=Kl(n,r.document.name),c=Ni(r.document.updateTime),d=r.document.createTime?Ni(r.document.createTime):Sn.min(),g=new yo({mapValue:{fields:r.document.fields}}),I=hi.newFoundDocument(s,c,d,g);t=new uf(r.targetIds||[],r.removedTargetIds||[],I.key,I)}else if("documentDelete"in e){const r=e.documentDelete,s=Kl(n,r.document),c=r.readTime?Ni(r.readTime):Sn.min(),d=hi.newNoDocument(s,c);t=new uf([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,s=Kl(n,r.document);t=new uf([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return un();{const r=e.filter,{count:s=0,unchangedNames:c}=r,d=new eA(s,c);t=new G_(r.targetId,d)}}var T;return t}(this.serializer,e),r=function(c){if(!("targetChange"in c))return Sn.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?Sn.min():d.readTime?Ni(d.readTime):Sn.min()}(e);return this.listener.h_(t,r)}P_(e){const t={};t.database=fg(this.serializer),t.addTarget=function(c,d){let g;const I=d.target;if(g=L_(I)?{documents:TM(c,I)}:{query:jI(c,I)._t},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){g.resumeToken=FI(c,d.resumeToken);const T=W_(c,d.expectedCount);null!==T&&(g.expectedCount=T)}else if(d.snapshotVersion.compareTo(Sn.min())>0){g.readTime=df(c,d.snapshotVersion.toTimestamp());const T=W_(c,d.expectedCount);null!==T&&(g.expectedCount=T)}return g}(this.serializer,e);const r=function EF(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return un()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.i_(t)}I_(e){const t={};t.database=fg(this.serializer),t.removeTarget=e,this.i_(t)}}class KM extends gE{constructor(e,t,r,s,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,d),this.serializer=c,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,t){return this.connection.Oo("Write",e,t)}onMessage(e){if(Cn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const t=function IF(n,e){return n&&n.length>0?(Cn(void 0!==e),n.map(t=>function(s,c){let d=Ni(s.updateTime?s.updateTime:c);return d.isEqual(Sn.min())&&(d=Ni(c)),new ug(d,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Ni(e.commitTime);return this.listener.A_(r,t)}return Cn(!e.writeResults||0===e.writeResults.length),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=fg(this.serializer),this.i_(e)}d_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Q_(this.serializer,r))};this.i_(t)}}class XM extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.m_=!1}f_(){if(this.m_)throw new kt(dt.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,t,r,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Co(e,K_(t,r),s,c,d)).catch(c=>{throw"FirebaseError"===c.name?(c.code===dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new kt(dt.UNKNOWN,c.toString())})}xo(e,t,r,s,c){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,g])=>this.connection.xo(e,K_(t,r),s,d,g,c)).catch(d=>{throw"FirebaseError"===d.name?(d.code===dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new kt(dt.UNKNOWN,d.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class LA{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,"Online"===e&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Mi(t),this.y_=!1):Vt("OnlineStateTracker",t)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class QM{constructor(e,t,r,s,c){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=c,this.O_.io(g=>{r.enqueueAndForget((0,X.A)(function*(){var I;ya(d)&&(Vt("RemoteStore","Restarting streams for network reachability change."),yield(I=(0,X.A)(function*(k){const B=en(k);B.M_.add(4),yield Ql(B),B.N_.set("Unknown"),B.M_.delete(4),yield If(B)}),function T(k){return I.apply(this,arguments)})(d))}))}),this.N_=new LA(r,s)}}function If(n){return yv.apply(this,arguments)}function yv(){return yv=(0,X.A)(function*(n){if(ya(n))for(const e of n.x_)yield e(!0)}),yv.apply(this,arguments)}function Ql(n){return Sg.apply(this,arguments)}function Sg(){return Sg=(0,X.A)(function*(n){for(const e of n.x_)yield e(!1)}),Sg.apply(this,arguments)}function Ac(n,e){const t=en(n);t.F_.has(e.targetId)||(t.F_.set(e.targetId,e),Mu(t)?Pu(t):bi(t).Xo()&&Ru(t,e))}function zd(n,e){const t=en(n),r=bi(t);t.F_.delete(e),r.Xo()&&Iv(t,e),0===t.F_.size&&(r.Xo()?r.n_():ya(t)&&t.N_.set("Unknown"))}function Ru(n,e){if(n.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Sn.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}bi(n).P_(e)}function Iv(n,e){n.L_.xe(e),bi(n).I_(e)}function Pu(n){n.L_=new EM({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.F_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),bi(n).start(),n.N_.w_()}function Mu(n){return ya(n)&&!bi(n).Zo()&&n.F_.size>0}function ya(n){return 0===en(n).M_.size}function Hd(n){n.L_=void 0}function Ef(n){return xu.apply(this,arguments)}function xu(){return xu=(0,X.A)(function*(n){n.N_.set("Online")}),xu.apply(this,arguments)}function Cf(n){return Nu.apply(this,arguments)}function Nu(){return Nu=(0,X.A)(function*(n){n.F_.forEach((e,t)=>{Ru(n,e)})}),Nu.apply(this,arguments)}function wf(n,e){return Ev.apply(this,arguments)}function Ev(){return Ev=(0,X.A)(function*(n,e){Hd(n),Mu(n)?(n.N_.D_(e),Pu(n)):n.N_.set("Unknown")}),Ev.apply(this,arguments)}function VA(n,e,t){return Cv.apply(this,arguments)}function Cv(){return Cv=(0,X.A)(function*(n,e,t){if(n.N_.set("Online"),e instanceof oA&&2===e.state&&e.cause)try{yield(r=(0,X.A)(function*(c,d){const g=d.cause;for(const I of d.targetIds)c.F_.has(I)&&(yield c.remoteSyncer.rejectListen(I,g),c.F_.delete(I),c.L_.removeTarget(I))}),function s(c,d){return r.apply(this,arguments)})(n,e)}catch(r){Vt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Rg(n,r)}else if(e instanceof uf?n.L_.Ke(e):e instanceof G_?n.L_.He(e):n.L_.We(e),!t.isEqual(Sn.min()))try{const r=yield Vd(n.localStore);t.compareTo(r)>=0&&(yield function(c,d){const g=c.L_.rt(d);return g.targetChanges.forEach((I,T)=>{if(I.resumeToken.approximateByteSize()>0){const k=c.F_.get(T);k&&c.F_.set(T,k.withResumeToken(I.resumeToken,d))}}),g.targetMismatches.forEach((I,T)=>{const k=c.F_.get(I);if(!k)return;c.F_.set(I,k.withResumeToken(vo.EMPTY_BYTE_STRING,k.snapshotVersion)),Iv(c,I);const B=new Iu(k.target,I,T,k.sequenceNumber);Ru(c,B)}),c.remoteSyncer.applyRemoteEvent(g)}(n,t))}catch(r){Vt("RemoteStore","Failed to raise snapshot:",r),yield Rg(n,r)}var r}),Cv.apply(this,arguments)}function Rg(n,e,t){return wv.apply(this,arguments)}function wv(){return wv=(0,X.A)(function*(n,e,t){if(!lu(e))throw e;n.M_.add(1),yield Ql(n),n.N_.set("Offline"),t||(t=()=>Vd(n.localStore)),n.asyncQueue.enqueueRetryable((0,X.A)(function*(){Vt("RemoteStore","Retrying IndexedDB access"),yield t(),n.M_.delete(1),yield If(n)}))}),wv.apply(this,arguments)}function mE(n,e){return e().catch(t=>Rg(n,t,e))}function Gd(n){return bv.apply(this,arguments)}function bv(){return bv=(0,X.A)(function*(n){const e=en(n),t=Sc(e);let r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;UA(e);)try{const s=yield PA(e.localStore,r);if(null===s){0===e.v_.length&&t.n_();break}r=s.batchId,Tv(e,s)}catch(s){yield Rg(e,s)}Dc(e)&&BA(e)}),bv.apply(this,arguments)}function UA(n){return ya(n)&&n.v_.length<10}function Tv(n,e){n.v_.push(e);const t=Sc(n);t.Xo()&&t.E_&&t.d_(e.mutations)}function Dc(n){return ya(n)&&!Sc(n).Zo()&&n.v_.length>0}function BA(n){Sc(n).start()}function YM(n){return Pg.apply(this,arguments)}function Pg(){return Pg=(0,X.A)(function*(n){Sc(n).V_()}),Pg.apply(this,arguments)}function Wd(n){return Mg.apply(this,arguments)}function Mg(){return Mg=(0,X.A)(function*(n){const e=Sc(n);for(const t of n.v_)e.d_(t.mutations)}),Mg.apply(this,arguments)}function JM(n,e,t){return xg.apply(this,arguments)}function xg(){return xg=(0,X.A)(function*(n,e,t){const r=n.v_.shift(),s=DI.from(r,e,t);yield mE(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield Gd(n)}),xg.apply(this,arguments)}function AF(n,e){return $A.apply(this,arguments)}function $A(){return $A=(0,X.A)(function*(n,e){var t;e&&Sc(n).E_&&(yield(t=(0,X.A)(function*(s,c){if(tA(g=c.code)&&g!==dt.ABORTED){const d=s.v_.shift();Sc(s).t_(),yield mE(s,()=>s.remoteSyncer.rejectFailedWrite(d.batchId,c)),yield Gd(s)}var g}),function r(s,c){return t.apply(this,arguments)})(n,e)),Dc(n)&&BA(n)}),$A.apply(this,arguments)}function jA(n,e){return _E.apply(this,arguments)}function _E(){return _E=(0,X.A)(function*(n,e){const t=en(n);t.asyncQueue.verifyOperationInProgress(),Vt("RemoteStore","RemoteStore received new credentials");const r=ya(t);t.M_.add(3),yield Ql(t),r&&t.N_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.M_.delete(3),yield If(t)}),_E.apply(this,arguments)}function Av(n,e){return vE.apply(this,arguments)}function vE(){return vE=(0,X.A)(function*(n,e){const t=en(n);e?(t.M_.delete(2),yield If(t)):e||(t.M_.add(2),yield Ql(t),t.N_.set("Unknown"))}),vE.apply(this,arguments)}function bi(n){return n.B_||(n.B_=function(t,r,s){const c=en(t);return c.f_(),new Su(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,s)}(n.datastore,n.asyncQueue,{Po:Ef.bind(null,n),To:Cf.bind(null,n),Ao:wf.bind(null,n),h_:VA.bind(null,n)}),n.x_.push(function(){var e=(0,X.A)(function*(t){t?(n.B_.t_(),Mu(n)?Pu(n):n.N_.set("Unknown")):(yield n.B_.stop(),Hd(n))});return function(t){return e.apply(this,arguments)}}())),n.B_}function Sc(n){return n.k_||(n.k_=function(t,r,s){const c=en(t);return c.f_(),new KM(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,s)}(n.datastore,n.asyncQueue,{Po:()=>Promise.resolve(),To:YM.bind(null,n),Ao:AF.bind(null,n),R_:Wd.bind(null,n),A_:JM.bind(null,n)}),n.x_.push(function(){var e=(0,X.A)(function*(t){t?(n.k_.t_(),yield Gd(n)):(yield n.k_.stop(),n.v_.length>0&&(Vt("RemoteStore",`Stopping write stream with ${n.v_.length} pending writes`),n.v_=[]))});return function(t){return e.apply(this,arguments)}}())),n.k_}class yE{constructor(e,t,r,s,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=c,this.deferred=new io,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,c){const d=Date.now()+r,g=new yE(e,t,d,s,c);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new kt(dt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function bf(n,e){if(Mi("AsyncQueue",`${e}: ${n}`),lu(n))return new kt(dt.UNAVAILABLE,`${e}: ${n}`);throw n}class qd{constructor(e){this.comparator=e?(t,r)=>e(t,r)||tn.comparator(t.key,r.key):(t,r)=>tn.comparator(t.key,r.key),this.keyedMap=bd(),this.sortedSet=new Gr(this.comparator)}static emptySet(e){return new qd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof qd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,c=r.getNext().key;if(!s.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new qd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class zA{constructor(){this.q_=new Gr(tn.comparator)}track(e){const t=e.doc.key,r=this.q_.get(t);r?0!==e.type&&3===r.type?this.q_=this.q_.insert(t,e):3===e.type&&1!==r.type?this.q_=this.q_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.q_=this.q_.remove(t):1===e.type&&2===r.type?this.q_=this.q_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):un():this.q_=this.q_.insert(t,e)}Q_(){const e=[];return this.q_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Kd{constructor(e,t,r,s,c,d,g,I,T){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=I,this.hasCachedResults=T}static fromInitialDocuments(e,t,r,s,c){const d=[];return t.forEach(g=>{d.push({type:0,doc:g})}),new Kd(e,t,qd.emptySet(t),d,r,s,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ag(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class HA{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class Tf{constructor(){this.queries=new wc(e=>BT(e),ag),this.onlineState="Unknown",this.z_=new Set}}function IE(n,e){return EE.apply(this,arguments)}function EE(){return EE=(0,X.A)(function*(n,e){const t=en(n);let r=3;const s=e.query;let c=t.queries.get(s);c?!c.W_()&&e.G_()&&(r=2):(c=new HA,r=e.G_()?0:1);try{switch(r){case 0:c.K_=yield t.onListen(s,!0);break;case 1:c.K_=yield t.onListen(s,!1);break;case 2:yield t.onFirstRemoteStoreListen(s)}}catch(d){const g=bf(d,`Initialization of query '${gu(e.query)}' failed`);return void e.onError(g)}t.queries.set(s,c),c.U_.push(e),e.j_(t.onlineState),c.K_&&e.H_(c.K_)&&Ng(t)}),EE.apply(this,arguments)}function Dv(n,e){return CE.apply(this,arguments)}function CE(){return CE=(0,X.A)(function*(n,e){const t=en(n),r=e.query;let s=3;const c=t.queries.get(r);if(c){const d=c.U_.indexOf(e);d>=0&&(c.U_.splice(d,1),0===c.U_.length?s=e.G_()?0:1:!c.W_()&&e.G_()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}),CE.apply(this,arguments)}function GA(n,e){const t=en(n);let r=!1;for(const s of e){const d=t.queries.get(s.query);if(d){for(const g of d.U_)g.H_(s)&&(r=!0);d.K_=s}}r&&Ng(t)}function DF(n,e,t){const r=en(n),s=r.queries.get(e);if(s)for(const c of s.U_)c.onError(t);r.queries.delete(e)}function Ng(n){n.z_.forEach(e=>{e.next()})}var kg,wE;(wE=kg||(kg={})).J_="default",wE.Cache="cache";class Og{constructor(e,t,r){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new Kd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){return!e.fromCache||!this.G_()||(!this.options.ra||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ea(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}na(e){e=Kd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==kg.Cache}}class Yl{constructor(e,t){this.ia=e,this.byteLength=t}sa(){return"metadata"in this.ia}}class WA{constructor(e){this.serializer=e}Ps(e){return Kl(this.serializer,e)}Is(e){return e.metadata.exists?$I(this.serializer,e.document,!1):hi.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Ni(e)}}class ZM{constructor(e,t,r){this.oa=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=ul(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++t;const r=br.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}aa(e){const t=new Map,r=new WA(this.serializer);for(const s of e)if(s.metadata.queries){const c=r.Ps(s.metadata.name);for(const d of s.metadata.queries){const g=(t.get(d)||hr()).add(c);t.set(d,g)}}return t}complete(){var e=this;return(0,X.A)(function*(){const t=yield function jM(n,e,t,r){return cE.apply(this,arguments)}(e.localStore,new WA(e.serializer),e.documents,e.oa.id),r=e.aa(e.documents);for(const s of e.queries)yield xA(e.localStore,s,r.get(s.name));return e.progress.taskState="Success",{progress:e.progress,ua:e.collectionGroups,ca:t}})()}}function ul(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class ja{constructor(e){this.key=e}}class za{constructor(e){this.key=e}}class bE{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=hr(),this.mutatedKeys=hr(),this.Ia=cl(e),this.Ta=new qd(this.Ia)}get Ea(){return this.la}da(e,t){const r=t?t.Aa:new zA,s=t?t.Ta:this.Ta;let c=t?t.mutatedKeys:this.mutatedKeys,d=s,g=!1;const I="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,T="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((k,B)=>{const K=s.get(k),ue=$_(this.query,B)?B:null,De=!!K&&this.mutatedKeys.has(K.key),mt=!!ue&&(ue.hasLocalMutations||this.mutatedKeys.has(ue.key)&&ue.hasCommittedMutations);let ht=!1;K&&ue?K.data.isEqual(ue.data)?De!==mt&&(r.track({type:3,doc:ue}),ht=!0):this.Ra(K,ue)||(r.track({type:2,doc:ue}),ht=!0,(I&&this.Ia(ue,I)>0||T&&this.Ia(ue,T)<0)&&(g=!0)):!K&&ue?(r.track({type:0,doc:ue}),ht=!0):K&&!ue&&(r.track({type:1,doc:K}),ht=!0,(I||T)&&(g=!0)),ht&&(ue?(d=d.add(ue),c=mt?c.add(k):c.delete(k)):(d=d.delete(k),c=c.delete(k)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const k="F"===this.query.limitType?d.last():d.first();d=d.delete(k.key),c=c.delete(k.key),r.track({type:1,doc:k})}return{Ta:d,Aa:r,Xi:g,mutatedKeys:c}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const c=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const d=e.Aa.Q_();d.sort((k,B)=>function(ue,De){const mt=ht=>{switch(ht){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return un()}};return mt(ue)-mt(De)}(k.type,B.type)||this.Ia(k.doc,B.doc)),this.Va(r),s=null!=s&&s;const g=t&&!s?this.ma():[],I=0===this.Pa.size&&this.current&&!s?1:0,T=I!==this.ha;return this.ha=I,0!==d.length||T?{snapshot:new Kd(this.query,e.Ta,c,d,e.mutatedKeys,0===I,T,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:g}:{fa:g}}j_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new zA,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(t=>this.la=this.la.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.la=this.la.delete(t)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=hr(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const t=[];return e.forEach(r=>{this.Pa.has(r)||t.push(new za(r))}),this.Pa.forEach(r=>{e.has(r)||t.push(new ja(r))}),t}pa(e){this.la=e.hs,this.Pa=hr();const t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return Kd.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class qA{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class ex{constructor(e){this.key=e,this.wa=!1}}class tx{constructor(e,t,r,s,c,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Sa={},this.ba=new wc(g=>BT(g),ag),this.Da=new Map,this.Ca=new Set,this.va=new Gr(tn.comparator),this.Fa=new Map,this.Ma=new _f,this.xa={},this.Oa=new Map,this.Na=kd.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}function nx(n,e){return TE.apply(this,arguments)}function TE(){return TE=(0,X.A)(function*(n,e,t=!0){const r=Bg(n);let s;const c=r.ba.get(e);return c?(r.sharedClientState.addLocalQueryTarget(c.targetId),s=c.view.ya()):s=yield KA(r,e,t,!0),s}),TE.apply(this,arguments)}function AE(n,e){return Xd.apply(this,arguments)}function Xd(){return Xd=(0,X.A)(function*(n,e){const t=Bg(n);yield KA(t,e,!0,!1)}),Xd.apply(this,arguments)}function KA(n,e,t,r){return Sv.apply(this,arguments)}function Sv(){return Sv=(0,X.A)(function*(n,e,t,r){const s=yield Ud(n.localStore,Es(e)),c=s.targetId,d=t?n.sharedClientState.addLocalQueryTarget(c):"not-current";let g;return r&&(g=yield DE(n,e,c,"current"===d,s.resumeToken)),n.isPrimaryClient&&t&&Ac(n.remoteStore,s),g}),Sv.apply(this,arguments)}function DE(n,e,t,r,s){return SE.apply(this,arguments)}function SE(){return SE=(0,X.A)(function*(n,e,t,r,s){n.Ba=(B,K,ue)=>{return(De=(0,X.A)(function*(ht,Zt,ln,Xt){let vn=Zt.view.da(ln);vn.Xi&&(vn=yield fv(ht.localStore,Zt.query,!1).then(({documents:ge})=>Zt.view.da(ge,vn)));const gr=Xt&&Xt.targetChanges.get(Zt.targetId),Wn=Xt&&null!=Xt.targetMismatches.get(Zt.targetId),xe=Zt.view.applyChanges(vn,ht.isPrimaryClient,gr,Wn);return Mv(ht,Zt.targetId,xe.fa),xe.snapshot}),function mt(ht,Zt,ln,Xt){return De.apply(this,arguments)})(n,B,K,ue);var De};const c=yield fv(n.localStore,e,!0),d=new bE(e,c.hs),g=d.da(c.documents),I=cf.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,s),T=d.applyChanges(g,n.isPrimaryClient,I);Mv(n,t,T.fa);const k=new qA(e,t,d);return n.ba.set(e,k),n.Da.has(t)?n.Da.get(t).push(e):n.Da.set(t,[e]),T.snapshot}),SE.apply(this,arguments)}function XA(n,e,t){return Rv.apply(this,arguments)}function Rv(){return Rv=(0,X.A)(function*(n,e,t){const r=en(n),s=r.ba.get(e),c=r.Da.get(s.targetId);if(c.length>1)return r.Da.set(s.targetId,c.filter(d=>!ag(d,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||(yield Bd(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),t&&zd(r.remoteStore,s.targetId),Qd(r,s.targetId)}).catch(_c))):(Qd(r,s.targetId),yield Bd(r.localStore,s.targetId,!0))}),Rv.apply(this,arguments)}function Pv(n,e){return RE.apply(this,arguments)}function RE(){return RE=(0,X.A)(function*(n,e){const t=en(n),r=t.ba.get(e),s=t.Da.get(r.targetId);t.isPrimaryClient&&1===s.length&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),zd(t.remoteStore,r.targetId))}),RE.apply(this,arguments)}function PE(){return PE=(0,X.A)(function*(n,e,t){const r=zE(n);try{const s=yield function(d,g){const I=en(d),T=wi.now(),k=g.reduce((ue,De)=>ue.add(De.key),hr());let B,K;return I.persistence.runTransaction("Locally write mutations","readwrite",ue=>{let De=Fr(),mt=hr();return I.os.getEntries(ue,k).next(ht=>{De=ht,De.forEach((Zt,ln)=>{ln.isValidDocument()||(mt=mt.add(Zt))})}).next(()=>I.localDocuments.getOverlayedDocuments(ue,De)).next(ht=>{B=ht;const Zt=[];for(const ln of g){const Xt=hg(ln,B.get(ln.key).overlayedDocument);null!=Xt&&Zt.push(new Tc(ln.key,Xt,Wh(Xt.value.mapValue),xi.exists(!0)))}return I.mutationQueue.addMutationBatch(ue,T,Zt,g)}).next(ht=>{K=ht;const Zt=ht.applyToLocalDocumentSet(B,mt);return I.documentOverlayCache.saveOverlays(ue,ht.batchId,Zt)})}).then(()=>({batchId:K.batchId,changes:zT(B)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(d,g,I){let T=d.xa[d.currentUser.toKey()];T||(T=new Gr(Hn)),T=T.insert(g,I),d.xa[d.currentUser.toKey()]=T}(r,s.batchId,t),yield Rc(r,s.changes),yield Gd(r.remoteStore)}catch(s){const c=bf(s,"Failed to persist write");t.reject(c)}}),PE.apply(this,arguments)}function YA(n,e){return ME.apply(this,arguments)}function ME(){return ME=(0,X.A)(function*(n,e){const t=en(n);try{const r=yield function sE(n,e){const t=en(n),r=e.snapshotVersion;let s=t.ns;return t.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const d=t.os.newChangeBuffer({trackRemovals:!0});s=t.ns;const g=[];e.targetChanges.forEach((k,B)=>{const K=s.get(B);if(!K)return;g.push(t.Qr.removeMatchingKeys(c,k.removedDocuments,B).next(()=>t.Qr.addMatchingKeys(c,k.addedDocuments,B)));let ue=K.withSequenceNumber(c.currentSequenceNumber);var mt,ht,Zt;null!==e.targetMismatches.get(B)?ue=ue.withResumeToken(vo.EMPTY_BYTE_STRING,Sn.min()).withLastLimboFreeSnapshotVersion(Sn.min()):k.resumeToken.approximateByteSize()>0&&(ue=ue.withResumeToken(k.resumeToken,r)),s=s.insert(B,ue),ht=ue,Zt=k,(0===(mt=K).resumeToken.approximateByteSize()||ht.snapshotVersion.toMicroseconds()-mt.snapshotVersion.toMicroseconds()>=3e8||Zt.addedDocuments.size+Zt.modifiedDocuments.size+Zt.removedDocuments.size>0)&&g.push(t.Qr.updateTargetData(c,ue))});let I=Fr(),T=hr();if(e.documentUpdates.forEach(k=>{e.resolvedLimboDocuments.has(k)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(c,k))}),g.push(hv(c,d,e.documentUpdates).next(k=>{I=k.cs,T=k.ls})),!r.isEqual(Sn.min())){const k=t.Qr.getLastRemoteSnapshotVersion(c).next(B=>t.Qr.setTargetsMetadata(c,c.currentSequenceNumber,r));g.push(k)}return ze.waitFor(g).next(()=>d.apply(c)).next(()=>t.localDocuments.getLocalViewOfDocuments(c,I,T)).next(()=>I)}).then(c=>(t.ns=s,c))}(t.localStore,e);e.targetChanges.forEach((s,c)=>{const d=t.Fa.get(c);d&&(Cn(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?d.wa=!0:s.modifiedDocuments.size>0?Cn(d.wa):s.removedDocuments.size>0&&(Cn(d.wa),d.wa=!1))}),yield Rc(t,r,e)}catch(r){yield _c(r)}}),ME.apply(this,arguments)}function JA(n,e,t){const r=en(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.ba.forEach((c,d)=>{const g=d.view.j_(e);g.snapshot&&s.push(g.snapshot)}),function(d,g){const I=en(d);I.onlineState=g;let T=!1;I.queries.forEach((k,B)=>{for(const K of B.U_)K.j_(g)&&(T=!0)}),T&&Ng(I)}(r.eventManager,e),s.length&&r.Sa.h_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function rx(n,e,t){return xE.apply(this,arguments)}function xE(){return xE=(0,X.A)(function*(n,e,t){const r=en(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Fa.get(e),c=s&&s.key;if(c){let d=new Gr(tn.comparator);d=d.insert(c,hi.newNoDocument(c,Sn.min()));const g=hr().add(c),I=new Dd(Sn.min(),new Map,new Gr(Hn),d,g);yield YA(r,I),r.va=r.va.remove(c),r.Fa.delete(e),LE(r)}else yield Bd(r.localStore,e,!1).then(()=>Qd(r,e,t)).catch(_c)}),xE.apply(this,arguments)}function ix(n,e){return NE.apply(this,arguments)}function NE(){return NE=(0,X.A)(function*(n,e){const t=en(n),r=e.batch.batchId;try{const s=yield function RA(n,e){const t=en(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),c=t.os.newChangeBuffer({trackRemovals:!0});return function(g,I,T,k){const B=T.batch,K=B.keys();let ue=ze.resolve();return K.forEach(De=>{ue=ue.next(()=>k.getEntry(I,De)).next(mt=>{const ht=T.docVersions.get(De);Cn(null!==ht),mt.version.compareTo(ht)<0&&(B.applyToRemoteDocument(mt,T),mt.isValidDocument()&&(mt.setReadTime(T.commitVersion),k.addEntry(mt)))})}),ue.next(()=>g.mutationQueue.removeMutationBatch(I,B))}(t,r,e,c).next(()=>c.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(g){let I=hr();for(let T=0;T<g.mutationResults.length;++T)g.mutationResults[T].transformResults.length>0&&(I=I.add(g.batch.mutations[T].key));return I}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}(t.localStore,e);Lg(t,r,null),OE(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Rc(t,s)}catch(s){yield _c(s)}}),NE.apply(this,arguments)}function ox(n,e,t){return kE.apply(this,arguments)}function kE(){return kE=(0,X.A)(function*(n,e,t){const r=en(n);try{const s=yield function(d,g){const I=en(d);return I.persistence.runTransaction("Reject batch","readwrite-primary",T=>{let k;return I.mutationQueue.lookupMutationBatch(T,g).next(B=>(Cn(null!==B),k=B.keys(),I.mutationQueue.removeMutationBatch(T,B))).next(()=>I.mutationQueue.performConsistencyCheck(T)).next(()=>I.documentOverlayCache.removeOverlaysForBatchId(T,k,g)).next(()=>I.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(T,k)).next(()=>I.localDocuments.getDocuments(T,k))})}(r.localStore,e);Lg(r,e,t),OE(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Rc(r,s)}catch(s){yield _c(s)}}),kE.apply(this,arguments)}function Fg(){return Fg=(0,X.A)(function*(n,e){const t=en(n);ya(t.remoteStore)||Vt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(d){const g=en(d);return g.persistence.runTransaction("Get highest unacknowledged batch id","readonly",I=>g.mutationQueue.getHighestUnacknowledgedBatchId(I))}(t.localStore);if(-1===r)return void e.resolve();const s=t.Oa.get(r)||[];s.push(e),t.Oa.set(r,s)}catch(r){const s=bf(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),Fg.apply(this,arguments)}function OE(n,e){(n.Oa.get(e)||[]).forEach(t=>{t.resolve()}),n.Oa.delete(e)}function Lg(n,e,t){const r=en(n);let s=r.xa[r.currentUser.toKey()];if(s){const c=s.get(e);c&&(t?c.reject(t):c.resolve(),s=s.remove(e)),r.xa[r.currentUser.toKey()]=s}}function Qd(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Da.get(e))n.ba.delete(r),t&&n.Sa.ka(r,t);n.Da.delete(e),n.isPrimaryClient&&n.Ma.Vr(e).forEach(r=>{n.Ma.containsKey(r)||FE(n,r)})}function FE(n,e){n.Ca.delete(e.path.canonicalString());const t=n.va.get(e);null!==t&&(zd(n.remoteStore,t),n.va=n.va.remove(e),n.Fa.delete(t),LE(n))}function Mv(n,e,t){for(const r of t)r instanceof ja?(n.Ma.addReference(r.key,e),ax(n,r)):r instanceof za?(Vt("SyncEngine","Document no longer in limbo: "+r.key),n.Ma.removeReference(r.key,e),n.Ma.containsKey(r.key)||FE(n,r.key)):un()}function ax(n,e){const t=e.key,r=t.path.canonicalString();n.va.get(t)||n.Ca.has(r)||(Vt("SyncEngine","New document in limbo: "+t),n.Ca.add(r),LE(n))}function LE(n){for(;n.Ca.size>0&&n.va.size<n.maxConcurrentLimboResolutions;){const e=n.Ca.values().next().value;n.Ca.delete(e);const t=new tn(br.fromString(e)),r=n.Na.next();n.Fa.set(r,new ex(t)),n.va=n.va.insert(t,r),Ac(n.remoteStore,new Iu(Es(Yh(t.path)),r,"TargetPurposeLimboResolution",ga.oe))}}function Rc(n,e,t){return VE.apply(this,arguments)}function VE(){return VE=(0,X.A)(function*(n,e,t){const r=en(n),s=[],c=[],d=[];var g;r.ba.isEmpty()||(r.ba.forEach((g,I)=>{d.push(r.Ba(I,e,t).then(T=>{if((T||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(I.targetId,T&&!T.fromCache?"current":"not-current"),T){s.push(T);const k=SA.Ki(I.targetId,T);c.push(k)}}))}),yield Promise.all(d),r.Sa.h_(s),yield(g=(0,X.A)(function*(T,k){const B=en(T);try{yield B.persistence.runTransaction("notifyLocalViewChanges","readwrite",K=>ze.forEach(k,ue=>ze.forEach(ue.qi,De=>B.persistence.referenceDelegate.addReference(K,ue.targetId,De)).next(()=>ze.forEach(ue.Qi,De=>B.persistence.referenceDelegate.removeReference(K,ue.targetId,De)))))}catch(K){if(!lu(K))throw K;Vt("LocalStore","Failed to update sequence numbers: "+K)}for(const K of k){const ue=K.targetId;if(!K.fromCache){const De=B.ns.get(ue),ht=De.withLastLimboFreeSnapshotVersion(De.snapshotVersion);B.ns=B.ns.insert(ue,ht)}}}),function I(T,k){return g.apply(this,arguments)})(r.localStore,c))}),VE.apply(this,arguments)}function lx(n,e){return UE.apply(this,arguments)}function UE(){return UE=(0,X.A)(function*(n,e){const t=en(n);if(!t.currentUser.isEqual(e)){Vt("SyncEngine","User change. New user:",e.toKey());const r=yield Ld(t.localStore,e);t.currentUser=e,(c=t).Oa.forEach(g=>{g.forEach(I=>{I.reject(new kt(dt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),c.Oa.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Rc(t,r.us)}var c}),UE.apply(this,arguments)}function cx(n,e){const t=en(n),r=t.Fa.get(e);if(r&&r.wa)return hr().add(r.key);{let s=hr();const c=t.Da.get(e);if(!c)return s;for(const d of c){const g=t.ba.get(d);s=s.unionWith(g.view.Ea)}return s}}function ux(n,e){return Vg.apply(this,arguments)}function Vg(){return Vg=(0,X.A)(function*(n,e){const t=en(n),r=yield fv(t.localStore,e.query,!0),s=e.view.pa(r);return t.isPrimaryClient&&Mv(t,e.targetId,s.fa),s}),Vg.apply(this,arguments)}function dx(n,e){return BE.apply(this,arguments)}function BE(){return BE=(0,X.A)(function*(n,e){const t=en(n);return lE(t.localStore,e).then(r=>Rc(t,r))}),BE.apply(this,arguments)}function $E(n,e,t,r){return jE.apply(this,arguments)}function jE(){return jE=(0,X.A)(function*(n,e,t,r){const s=en(n),c=yield function(g,I){const T=en(g),k=en(T.mutationQueue);return T.persistence.runTransaction("Lookup mutation documents","readonly",B=>k.vn(B,I).next(K=>K?T.localDocuments.getDocuments(B,K):ze.resolve(null)))}(s.localStore,e);var I;null!==c?("pending"===t?yield Gd(s.remoteStore):"acknowledged"===t||"rejected"===t?(Lg(s,e,r||null),OE(s,e),I=e,en(en(s.localStore).mutationQueue).Mn(I)):un(),yield Rc(s,c)):Vt("SyncEngine","Cannot apply mutation batch with id: "+e)}),jE.apply(this,arguments)}function Af(){return Af=(0,X.A)(function*(n,e){const t=en(n);if(Bg(t),zE(t),!0===e&&!0!==t.La){const r=t.sharedClientState.getAllActiveQueryTargets(),s=yield Nv(t,r.toArray());t.La=!0,yield Av(t.remoteStore,!0);for(const c of s)Ac(t.remoteStore,c)}else if(!1===e&&!1!==t.La){const r=[];let s=Promise.resolve();t.Da.forEach((c,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):s=s.then(()=>(Qd(t,d),Bd(t.localStore,d,!0))),zd(t.remoteStore,d)}),yield s,yield Nv(t,r),function(d){const g=en(d);g.Fa.forEach((I,T)=>{zd(g.remoteStore,T)}),g.Ma.mr(),g.Fa=new Map,g.va=new Gr(tn.comparator)}(t),t.La=!1,yield Av(t.remoteStore,!1)}}),Af.apply(this,arguments)}function Nv(n,e,t){return kv.apply(this,arguments)}function kv(){return kv=(0,X.A)(function*(n,e,t){const r=en(n),s=[],c=[];for(const d of e){let g;const I=r.Da.get(d);if(I&&0!==I.length){g=yield Ud(r.localStore,Es(I[0]));for(const T of I){const k=r.ba.get(T),B=yield ux(r,k);B.snapshot&&c.push(B.snapshot)}}else{const T=yield $d(r.localStore,d);g=yield Ud(r.localStore,T),yield DE(r,ZA(T),d,!1,g.resumeToken)}s.push(g)}return r.Sa.h_(c),s}),kv.apply(this,arguments)}function ZA(n){return V_(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function hx(n){return t=en(n).localStore,en(en(t).persistence).Bi();var t}function fx(n,e,t,r){return Df.apply(this,arguments)}function Df(){return Df=(0,X.A)(function*(n,e,t,r){const s=en(n);if(s.La)return void Vt("SyncEngine","Ignoring unexpected query state notification.");const c=s.Da.get(e);if(c&&c.length>0)switch(t){case"current":case"not-current":{const d=yield lE(s.localStore,wI(c[0])),g=Dd.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,vo.EMPTY_BYTE_STRING);yield Rc(s,d,g);break}case"rejected":yield Bd(s.localStore,e,!0),Qd(s,e,r);break;default:un()}}),Df.apply(this,arguments)}function Ov(n,e,t){return Ug.apply(this,arguments)}function Ug(){return Ug=(0,X.A)(function*(n,e,t){const r=Bg(n);if(r.La){for(const s of e){if(r.Da.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){Vt("SyncEngine","Adding an already active target "+s);continue}const c=yield $d(r.localStore,s),d=yield Ud(r.localStore,c);yield DE(r,ZA(c),d.targetId,!1,d.resumeToken),Ac(r.remoteStore,d)}for(const s of t)r.Da.has(s)&&(yield Bd(r.localStore,s,!1).then(()=>{zd(r.remoteStore,s),Qd(r,s)}).catch(_c))}}),Ug.apply(this,arguments)}function Bg(n){const e=en(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=YA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cx.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rx.bind(null,e),e.Sa.h_=GA.bind(null,e.eventManager),e.Sa.ka=DF.bind(null,e.eventManager),e}function zE(n){const e=en(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ix.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ox.bind(null,e),e}class Yd{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,X.A)(function*(){t.serializer=Dg(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return uv(this.persistence,new Ag,e.initialUser,this.serializer)}createPersistence(e){return new av(Xl.Hr,this.serializer)}createSharedClientState(e){return new kA}terminate(){var e=this;return(0,X.A)(function*(){var t,r;null===(t=e.gcScheduler)||void 0===t||t.stop(),null===(r=e.indexBackfillerScheduler)||void 0===r||r.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Fv extends Yd{constructor(e,t,r){super(),this.Qa=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,X.A)(function*(){yield t().call(r,e),yield r.Qa.initialize(r,e),yield zE(r.Qa.syncEngine),yield Gd(r.Qa.remoteStore),yield r.persistence.fi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return uv(this.persistence,new Ag,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new Du(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new zs(t,this.persistence);return new tM(e.asyncQueue,r)}createPersistence(e){const t=iE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Io.withCacheSize(this.cacheSizeBytes):Io.DEFAULT;return new bg(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,FA(),_v(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new kA}}class ku extends Fv{constructor(e,t){super(e,t,!1),this.Qa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,X.A)(function*(){yield t().call(r,e);const s=r.Qa.syncEngine;r.sharedClientState instanceof fE&&(r.sharedClientState.syncEngine={Zs:$E.bind(null,s),Xs:fx.bind(null,s),eo:Ov.bind(null,s),Bi:hx.bind(null,s),Ys:dx.bind(null,s)},yield r.sharedClientState.start()),yield r.persistence.fi(function(){var c=(0,X.A)(function*(d){yield function xv(n,e){return Af.apply(this,arguments)}(r.Qa.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start():d||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(d&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():d||r.indexBackfillerScheduler.stop())});return function(d){return c.apply(this,arguments)}}())})()}createSharedClientState(e){const t=FA();if(!fE.D(t))throw new kt(dt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=iE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new fE(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Sf{initialize(e,t){var r=this;return(0,X.A)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>JA(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=lx.bind(null,r.syncEngine),yield Av(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Tf}createDatastore(e){const t=Dg(e.databaseInfo.databaseId),r=new qM(e.databaseInfo);return new XM(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return r=this.localStore,s=this.datastore,c=e.asyncQueue,d=t=>JA(this.syncEngine,t,0),g=OA.D()?new OA:new HM,new QM(r,s,c,d,g);var r,s,c,d,g}createSyncEngine(e,t){return function(s,c,d,g,I,T,k){const B=new tx(s,c,d,g,I,T);return k&&(B.La=!0),B}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){var e=this;return(0,X.A)(function*(){var t,r;yield(r=(0,X.A)(function*(c){const d=en(c);Vt("RemoteStore","RemoteStore shutting down."),d.M_.add(5),yield Ql(d),d.O_.shutdown(),d.N_.set("Unknown")}),function s(c){return r.apply(this,arguments)})(e.remoteStore),null===(t=e.datastore)||void 0===t||t.terminate()})()}}function tD(n,e=10240){let t=0;return{read:()=>(0,X.A)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,X.A)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Pc{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Mi("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class SF{constructor(e,t){this.Ua=e,this.serializer=t,this.metadata=new io,this.buffer=new Uint8Array,this.Wa=new TextDecoder("utf-8"),this.Ga().then(r=>{r&&r.sa()?this.metadata.resolve(r.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.ia)}`))},r=>this.metadata.reject(r))}close(){return this.Ua.cancel()}getMetadata(){var e=this;return(0,X.A)(function*(){return e.metadata.promise})()}qa(){var e=this;return(0,X.A)(function*(){return yield e.getMetadata(),e.Ga()})()}Ga(){var e=this;return(0,X.A)(function*(){const t=yield e.za();if(null===t)return null;const r=e.Wa.decode(t),s=Number(r);isNaN(s)&&e.ja(`length string (${r}) is not valid number`);const c=yield e.Ha(s);return new Yl(JSON.parse(c),t.length+s)})()}Ja(){return this.buffer.findIndex(e=>123===e)}za(){var e=this;return(0,X.A)(function*(){for(;e.Ja()<0&&!(yield e.Ya()););if(0===e.buffer.length)return null;const t=e.Ja();t<0&&e.ja("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Ha(e){var t=this;return(0,X.A)(function*(){for(;t.buffer.length<e;)(yield t.Ya())&&t.ja("Reached the end of bundle when more is expected.");const r=t.Wa.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}Ya(){var e=this;return(0,X.A)(function*(){const t=yield e.Ua.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class HE{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,X.A)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new kt(dt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const r=yield(s=(0,X.A)(function*(d,g){const I=en(d),T={documents:g.map(ue=>X_(I.serializer,ue))},k=yield I.xo("BatchGetDocuments",I.serializer.databaseId,br.emptyPath(),T,g.length),B=new Map;k.forEach(ue=>{const De=function uA(n,e){return"found"in e?function(r,s){Cn(!!s.found);const c=Kl(r,s.found.name),d=Ni(s.found.updateTime),g=s.found.createTime?Ni(s.found.createTime):Sn.min(),I=new yo({mapValue:{fields:s.found.fields}});return hi.newFoundDocument(c,d,g,I)}(n,e):"missing"in e?function(r,s){Cn(!!s.missing),Cn(!!s.readTime);const c=Kl(r,s.missing),d=Ni(s.readTime);return hi.newNoDocument(c,d)}(n,e):un()}(I.serializer,ue);B.set(De.key.toString(),De)});const K=[];return g.forEach(ue=>{const De=B.get(ue.toString());Cn(!!De),K.push(De)}),K}),function c(d,g){return s.apply(this,arguments)})(t.datastore,e);var s;return r.forEach(s=>t.recordVersion(s)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new sf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,X.A)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,s)=>{const c=tn.fromPath(s);e.mutations.push(new AI(c,e.precondition(c)))}),yield(r=(0,X.A)(function*(c,d){const g=en(c),I={writes:d.map(T=>Q_(g.serializer,T))};yield g.Co("Commit",g.serializer.databaseId,br.emptyPath(),I)}),function s(c,d){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw un();t=Sn.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new kt(dt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Sn.min())?xi.exists(!1):xi.updateTime(t):xi.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Sn.min()))throw new kt(dt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return xi.updateTime(t)}return xi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class RF{constructor(e,t,r,s,c){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=c,this.Za=r.maxAttempts,this.Yo=new vv(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){var e=this;this.Yo.$o((0,X.A)(function*(){const t=new HE(e.datastore),r=e.tu(t);r&&r.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(c=>{e.nu(c)}))}).catch(s=>{e.nu(s)})}))}tu(e){try{const t=this.updateFunction(e);return!eg(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!tA(t)}return!1}}class nD{constructor(e,t,r,s){var c=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=mo.UNAUTHENTICATED,this.clientId=y_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,X.A)(function*(g){Vt("FirestoreClient","Received user=",g.uid),yield c.authCredentialListener(g),c.user=g});return function(g){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Vt("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new kt(dt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new io;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,X.A)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=bf(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function $g(n,e){return rD.apply(this,arguments)}function rD(){return rD=(0,X.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Vt("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,X.A)(function*(c){r.isEqual(c)||(yield Ld(e.localStore,c),r=c)});return function(c){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),rD.apply(this,arguments)}function Ou(n,e){return GE.apply(this,arguments)}function GE(){return GE=(0,X.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield WE(n);Vt("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>jA(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>jA(e.remoteStore,s)),n._onlineComponents=e}),GE.apply(this,arguments)}function iD(n){return"FirebaseError"===n.name?n.code===dt.FAILED_PRECONDITION||n.code===dt.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function WE(n){return Fu.apply(this,arguments)}function Fu(){return Fu=(0,X.A)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Vt("FirestoreClient","Using user provided OfflineComponentProvider");try{yield $g(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!iD(t))throw t;Is("Error using user provided cache. Falling back to memory cache: "+t),yield $g(n,new Yd)}}else Vt("FirestoreClient","Using default OfflineComponentProvider"),yield $g(n,new Yd);return n._offlineComponents}),Fu.apply(this,arguments)}function Lv(n){return Rf.apply(this,arguments)}function Rf(){return Rf=(0,X.A)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Vt("FirestoreClient","Using user provided OnlineComponentProvider"),yield Ou(n,n._uninitializedComponentsProvider._online)):(Vt("FirestoreClient","Using default OnlineComponentProvider"),yield Ou(n,new Sf))),n._onlineComponents}),Rf.apply(this,arguments)}function jg(n){return WE(n).then(e=>e.persistence)}function Co(n){return WE(n).then(e=>e.localStore)}function qE(n){return Lv(n).then(e=>e.remoteStore)}function Vv(n){return Lv(n).then(e=>e.syncEngine)}function Jd(n){return Uv.apply(this,arguments)}function Uv(){return Uv=(0,X.A)(function*(n){const e=yield Lv(n),t=e.eventManager;return t.onListen=nx.bind(null,e.syncEngine),t.onUnlisten=XA.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=AE.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Pv.bind(null,e.syncEngine),t}),Uv.apply(this,arguments)}function lD(n,e,t={}){const r=new io;return n.asyncQueue.enqueueAndForget((0,X.A)(function*(){return function(c,d,g,I,T){const k=new Pc({next:K=>{d.enqueueAndForget(()=>Dv(c,B));const ue=K.docs.has(g);!ue&&K.fromCache?T.reject(new kt(dt.UNAVAILABLE,"Failed to get document because the client is offline.")):ue&&K.fromCache&&I&&"server"===I.source?T.reject(new kt(dt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):T.resolve(K)},error:K=>T.reject(K)}),B=new Og(Yh(g.path),k,{includeMetadataChanges:!0,ra:!0});return IE(c,B)}(yield Jd(n),n.asyncQueue,e,t,r)})),r.promise}function Pf(n,e,t={}){const r=new io;return n.asyncQueue.enqueueAndForget((0,X.A)(function*(){return function(c,d,g,I,T){const k=new Pc({next:K=>{d.enqueueAndForget(()=>Dv(c,B)),K.fromCache&&"server"===I.source?T.reject(new kt(dt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):T.resolve(K)},error:K=>T.reject(K)}),B=new Og(g,k,{includeMetadataChanges:!0,ra:!0});return IE(c,B)}(yield Jd(n),n.asyncQueue,e,t,r)})),r.promise}function hD(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const Mf=new Map;function Zd(n,e,t){if(!t)throw new kt(dt.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function fD(n,e,t,r){if(!0===e&&!0===r)throw new kt(dt.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function pD(n){if(!tn.isDocumentKey(n))throw new kt(dt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function KE(n){if(tn.isDocumentKey(n))throw new kt(dt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Lu(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":un()}function _r(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new kt(dt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Lu(n);throw new kt(dt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function gD(n,e){if(e<=0)throw new kt(dt.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class mD{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new kt(dt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new kt(dt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=hD(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(c){if(void 0!==c.timeoutSeconds){if(isNaN(c.timeoutSeconds))throw new kt(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new kt(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new kt(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xf{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mD({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new kt(dt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new kt(dt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mD(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new mT;switch(r.type){case"firstParty":return new Xp(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new kt(dt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=Mf.get(t);r&&(Vt("ComponentProvider","Removing Datastore"),Mf.delete(t),r.terminate())}(this),Promise.resolve()}}class Oo{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Oo(this.firestore,e,this._query)}}class yi{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new dl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new yi(this.firestore,e,this._key)}}class dl extends Oo{constructor(e,t,r){super(e,t,Yh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new yi(this.firestore,null,new tn(e))}withConverter(e){return new dl(this.firestore,e,this._path)}}function _D(n,e,...t){if(n=xt(n),Zd("collection","path",e),n instanceof xf){const r=br.fromString(e,...t);return KE(r),new dl(n,null,r)}{if(!(n instanceof yi||n instanceof dl))throw new kt(dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(br.fromString(e,...t));return KE(r),new dl(n.firestore,null,r)}}function QE(n,e,...t){if(n=xt(n),1===arguments.length&&(e=y_.newId()),Zd("doc","path",e),n instanceof xf){const r=br.fromString(e,...t);return pD(r),new yi(n,null,new tn(r))}{if(!(n instanceof yi||n instanceof dl))throw new kt(dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(br.fromString(e,...t));return pD(r),new yi(n.firestore,n instanceof dl?n.converter:null,new tn(r))}}function Ex(n,e){return n=xt(n),e=xt(e),(n instanceof yi||n instanceof dl)&&(e instanceof yi||e instanceof dl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function vD(n,e){return n=xt(n),e=xt(e),n instanceof Oo&&e instanceof Oo&&n.firestore===e.firestore&&ag(n._query,e._query)&&n.converter===e.converter}class PF{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new vv(this,"async_queue_retry"),this.hu=()=>{const t=_v();t&&Vt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Yo.Wo()};const e=_v();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const t=_v();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const t=new io;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){var e=this;return(0,X.A)(function*(){if(0!==e.su.length){try{yield e.su[0](),e.su.shift(),e.Yo.reset()}catch(t){if(!lu(t))throw t;Vt("AsyncQueue","Operation failed with retryable error: "+t)}e.su.length>0&&e.Yo.$o(()=>e.Tu())}})()}Iu(e){const t=this.iu.then(()=>(this.uu=!0,e().catch(r=>{throw this.au=r,this.uu=!1,Mi("INTERNAL UNHANDLED ERROR: ",function(d){let g=d.message||"";return d.stack&&(g=d.stack.includes(d.message)?d.stack:d.message+"\n"+d.stack),g}(r)),r}).then(r=>(this.uu=!1,r))));return this.iu=t,t}enqueueAfterDelay(e,t,r){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);const s=yE.createAndSchedule(this,e,t,r,c=>this.Eu(c));return this._u.push(s),s}Pu(){this.au&&un()}verifyOperationInProgress(){}du(){var e=this;return(0,X.A)(function*(){let t;do{t=e.iu,yield t}while(t!==e.iu)})()}Au(e){for(const t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this._u)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const t=this._u.indexOf(e);this._u.splice(t,1)}}function $v(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const s=t;for(const c of["next","error","complete"])if(c in s&&"function"==typeof s[c])return!0;return!1}(n)}class jv{constructor(){this._progressObserver={},this._taskCompletionResolver=new io,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class li extends xf{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new PF,this._persistenceKey=(null==s?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||yD(this),this._firestoreClient.terminate()}}function Ti(n){return n._firestoreClient||yD(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function yD(n){var e,t,r;const s=n._freezeSettings(),c=(I=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new dM(n._databaseId,I,n._persistenceKey,(k=s).host,k.ssl,k.experimentalForceLongPolling,k.experimentalAutoDetectLongPolling,hD(k.experimentalLongPollingOptions),k.useFetchStreams));var I,k;n._firestoreClient=new nD(n._authCredentials,n._appCheckCredentials,n._queue,c),null!==(t=s.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=s.localCache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}function Ax(n,e,t){const r=new io;return n.asyncQueue.enqueue((0,X.A)(function*(){try{yield $g(n,t),yield Ou(n,e),r.resolve()}catch(s){const c=s;if(!iD(c))throw c;Is("Error enabling indexeddb cache. Falling back to memory cache: "+c),r.reject(c)}})).then(()=>r.promise)}function CD(n){if(n._initialized||n._terminated)throw new kt(dt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class hl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new hl(vo.fromBase64String(e))}catch(t){throw new kt(dt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new hl(vo.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Mc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new kt(dt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class eh{constructor(e){this._methodName=e}}class zg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new kt(dt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new kt(dt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Hn(this._lat,e._lat)||Hn(this._long,e._long)}}const bD=/^__.*__$/;class xx{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Tc(e,this.data,this.fieldMask,t,this.fieldTransforms):new rf(e,this.data,t,this.fieldTransforms)}}class TD{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Tc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function AD(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw un()}}class kf{constructor(e,t,r,s,c,d){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,void 0===c&&this.mu(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new kf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.gu({path:r,yu:!1});return s.wu(e),s}Su(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.gu({path:r,yu:!1});return s.mu(),s}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return qv(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(0===e.length)throw this.Du("Document fields must not be empty");if(AD(this.fu)&&bD.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class Nx{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Dg(e)}Fu(e,t,r,s=!1){return new kf({fu:e,methodName:t,vu:r,path:fn.emptyPath(),yu:!1,Cu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Vu(n){const e=n._freezeSettings(),t=Dg(n._databaseId);return new Nx(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Gv(n,e,t,r,s,c={}){const d=n.Fu(c.merge||c.mergeFields?2:0,e,t,s);iC("Data must be an object, but it was:",d,r);const g=SD(r,d);let I,T;if(c.merge)I=new Hs(d.fieldMask),T=d.fieldTransforms;else if(c.mergeFields){const k=[];for(const B of c.mergeFields){const K=Gg(e,B,t);if(!d.contains(K))throw new kt(dt.INVALID_ARGUMENT,`Field '${K}' is specified in your field mask but missing from your input data.`);Kv(k,K)||k.push(K)}I=new Hs(k),T=d.fieldTransforms.filter(B=>I.covers(B.field))}else I=null,T=d.fieldTransforms;return new xx(new yo(g),I,T)}class Hg extends eh{_toFieldTransform(e){if(2!==e.fu)throw e.Du(1===e.fu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Hg}}function DD(n,e,t){return new kf({fu:3,vu:e.settings.vu,methodName:n._methodName,yu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class YE extends eh{_toFieldTransform(e){return new nf(e.path,new mu)}isEqual(e){return e instanceof YE}}class JE extends eh{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=DD(this,e,!0),r=this.Mu.map(c=>th(c,t)),s=new qs(r);return new nf(e.path,s)}isEqual(e){return e instanceof JE&&$n(this.Mu,e.Mu)}}class ZE extends eh{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=DD(this,e,!0),r=this.Mu.map(c=>th(c,t)),s=new _u(r);return new nf(e.path,s)}isEqual(e){return e instanceof ZE&&$n(this.Mu,e.Mu)}}class eC extends eh{constructor(e,t){super(e),this.xu=t}_toFieldTransform(e){const t=new tf(e.serializer,WT(e.serializer,this.xu));return new nf(e.path,t)}isEqual(e){return e instanceof eC&&this.xu===e.xu}}function tC(n,e,t,r){const s=n.Fu(1,e,t);iC("Data must be an object, but it was:",s,r);const c=[],d=yo.empty();uu(r,(I,T)=>{const k=Wg(e,I,t);T=xt(T);const B=s.Su(k);if(T instanceof Hg)c.push(k);else{const K=th(T,B);null!=K&&(c.push(k),d.set(k,K))}});const g=new Hs(c);return new TD(d,g,s.fieldTransforms)}function Wv(n,e,t,r,s,c){const d=n.Fu(1,e,t),g=[Gg(e,r,t)],I=[s];if(c.length%2!=0)throw new kt(dt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let K=0;K<c.length;K+=2)g.push(Gg(e,c[K])),I.push(c[K+1]);const T=[],k=yo.empty();for(let K=g.length-1;K>=0;--K)if(!Kv(T,g[K])){const ue=g[K];let De=I[K];De=xt(De);const mt=d.Su(ue);if(De instanceof Hg)T.push(ue);else{const ht=th(De,mt);null!=ht&&(T.push(ue),k.set(ue,ht))}}const B=new Hs(T);return new TD(k,B,d.fieldTransforms)}function nC(n,e,t,r=!1){return th(t,n.Fu(r?4:3,e))}function th(n,e){if(rC(n=xt(n)))return iC("Unsupported field value:",e,n),SD(n,e);if(n instanceof eh)return function(r,s){if(!AD(s.fu))throw s.Du(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Du(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(s);c&&s.fieldTransforms.push(c)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.yu&&4!==e.fu)throw e.Du("Nested arrays are not supported");return function(r,s){const c=[];let d=0;for(const g of r){let I=th(g,s.bu(d));null==I&&(I={nullValue:"NULL_VALUE"}),c.push(I),d++}return{arrayValue:{values:c}}}(n,e)}return function(r,s){if(null===(r=xt(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return WT(s.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const c=wi.fromDate(r);return{timestampValue:df(s.serializer,c)}}if(r instanceof wi){const c=new wi(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:df(s.serializer,c)}}if(r instanceof zg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof hl)return{bytesValue:FI(s.serializer,r._byteString)};if(r instanceof yi){const c=s.databaseId,d=r.firestore._databaseId;if(!d.isEqual(c))throw s.Du(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:q_(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.Du(`Unsupported field value: ${Lu(r)}`)}(n,e)}function SD(n,e){const t={};return dI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):uu(n,(r,s)=>{const c=th(s,e.pu(r));null!=c&&(t[r]=c)}),{mapValue:{fields:t}}}function rC(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof wi||n instanceof zg||n instanceof hl||n instanceof yi||n instanceof eh)}function iC(n,e,t){if(!rC(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const r=Lu(t);throw e.Du("an object"===r?n+" a custom object":n+" "+r)}var s}function Gg(n,e,t){if((e=xt(e))instanceof Mc)return e._internalPath;if("string"==typeof e)return Wg(n,e);throw qv("Field path arguments must be of type string or ",n,!1,void 0,t)}const oC=new RegExp("[~\\*/\\[\\]]");function Wg(n,e,t){if(e.search(oC)>=0)throw qv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Mc(...e.split("."))._internalPath}catch{throw qv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function qv(n,e,t,r,s){const c=r&&!r.isEmpty(),d=void 0!==s;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let I="";return(c||d)&&(I+=" (found",c&&(I+=` in field ${r}`),d&&(I+=` in document ${s}`),I+=")"),new kt(dt.INVALID_ARGUMENT,g+n+I)}function Kv(n,e){return n.some(t=>t.isEqual(e))}class Of{constructor(e,t,r,s,c){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new yi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new RD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(sC("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class RD extends Of{data(){return super.data()}}function sC(n,e){return"string"==typeof e?Wg(n,e):e instanceof Mc?e._internalPath:e._delegate._internalPath}function aC(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new kt(dt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lC{}class Ff extends lC{}function xc(n,e,...t){let r=[];e instanceof lC&&r.push(e),r=r.concat(t),function(c){const d=c.filter(I=>I instanceof nh).length,g=c.filter(I=>I instanceof Lf).length;if(d>1||d>0&&g>0)throw new kt(dt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class Lf extends Ff{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Lf(e,t,r)}_apply(e){const t=this._parse(e);return VD(e._query,t),new Oo(e.firestore,e.converter,U_(e._query,t))}_parse(e){const t=Vu(e.firestore);return function(c,d,g,I,T,k,B){let K;if(T.isKeyField()){if("array-contains"===k||"array-contains-any"===k)throw new kt(dt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${k}' queries on documentId().`);if("in"===k||"not-in"===k){LD(B,k);const ue=[];for(const De of B)ue.push(FD(I,c,De));K={arrayValue:{values:ue}}}else K=FD(I,c,B)}else"in"!==k&&"not-in"!==k&&"array-contains-any"!==k||LD(B,k),K=nC(g,"where",B,"in"===k||"not-in"===k);return Tr.create(T,k,K)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class nh extends lC{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new nh(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Zr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(s,c){let d=s;const g=c.getFlattenedFilters();for(const I of g)VD(d,I),d=U_(d,I)}(e._query,t),new Oo(e.firestore,e.converter,U_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Xv extends Ff{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Xv(e,t)}_apply(e){const t=function(s,c,d){if(null!==s.startAt)throw new kt(dt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new kt(dt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Kh(c,d)}(e._query,this._field,this._direction);return new Oo(e.firestore,e.converter,function(s,c){const d=s.explicitOrderBy.concat([c]);return new Ws(s.path,s.collectionGroup,d,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}class qg extends Ff{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new qg(e,t,r)}_apply(e){return new Oo(e.firestore,e.converter,B_(e._query,this._limit,this._limitType))}}class Kg extends Ff{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Kg(e,t,r)}_apply(e){const t=OD(e,this.type,this._docOrFields,this._inclusive);return new Oo(e.firestore,e.converter,(c=t,new Ws((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,c,s.endAt)));var s,c}}class Xg extends Ff{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Xg(e,t,r)}_apply(e){const t=OD(e,this.type,this._docOrFields,this._inclusive);return new Oo(e.firestore,e.converter,(c=t,new Ws((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,c)));var s,c}}function OD(n,e,t,r){if(t[0]=xt(t[0]),t[0]instanceof Of)return function(c,d,g,I,T){if(!I)throw new kt(dt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${g}().`);const k=[];for(const B of wd(c))if(B.field.isKeyField())k.push(Cc(d,I.key));else{const K=I.data.field(B.field);if(M_(K))throw new kt(dt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+B.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===K){const ue=B.field.canonicalString();throw new kt(dt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${ue}' (used as the orderBy) does not exist.`)}k.push(K)}return new ll(k,T)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=Vu(n.firestore);return function(d,g,I,T,k,B){const K=d.explicitOrderBy;if(k.length>K.length)throw new kt(dt.INVALID_ARGUMENT,`Too many arguments provided to ${T}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const ue=[];for(let De=0;De<k.length;De++){const mt=k[De];if(K[De].field.isKeyField()){if("string"!=typeof mt)throw new kt(dt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${T}(), but got a ${typeof mt}`);if(!CI(d)&&-1!==mt.indexOf("/"))throw new kt(dt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${T}() must be a plain document ID, but '${mt}' contains a slash.`);const ht=d.path.child(br.fromString(mt));if(!tn.isDocumentKey(ht))throw new kt(dt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${T}() must result in a valid document path, but '${ht}' is not because it contains an odd number of segments.`);const Zt=new tn(ht);ue.push(Cc(g,Zt))}else{const ht=nC(I,T,mt);ue.push(ht)}}return new ll(ue,B)}(n._query,n.firestore._databaseId,s,e,t,r)}}function FD(n,e,t){if("string"==typeof(t=xt(t))){if(""===t)throw new kt(dt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!CI(e)&&-1!==t.indexOf("/"))throw new kt(dt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(br.fromString(t));if(!tn.isDocumentKey(r))throw new kt(dt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Cc(n,new tn(r))}if(t instanceof yi)return Cc(n,t._key);throw new kt(dt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Lu(t)}.`)}function LD(n,e){if(!Array.isArray(n)||0===n.length)throw new kt(dt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function VD(n,e){const t=function(s,c){for(const d of s)for(const g of d.getFlattenedFilters())if(c.indexOf(g.op)>=0)return g.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new kt(dt.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class uC{convertValue(e,t="none"){switch(Ic(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(hu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw un()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return uu(e,(s,c)=>{r[s]=this.convertValue(c,t)}),r}convertGeoPoint(e){return new zg(zi(e.latitude),zi(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=x_(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(zh(e));default:return null}}convertTimestamp(e){const t=Ba(e);return new wi(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=br.fromString(e);Cn(RM(r));const s=new fu(r.get(1),r.get(3)),c=new tn(r.popFirst(5));return s.isEqual(t)||Mi(`Document ${c} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}function Qv(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Vx extends uC{constructor(e){super(),this.firestore=e}convertBytes(e){return new hl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new yi(this.firestore,null,t)}}class Uu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Jl extends Of{constructor(e,t,r,s,c,d){super(e,t,r,s,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Vf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(sC("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Vf extends Jl{data(e={}){return super.data(e)}}class Nc{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Uu(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Vf(this._firestore,this._userDataWriter,r.key,r,new Uu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new kt(dt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,c){if(s._snapshot.oldDocs.isEmpty()){let d=0;return s._snapshot.docChanges.map(g=>({type:"added",doc:new Vf(s._firestore,s._userDataWriter,g.doc.key,g.doc,new Uu(s._snapshot.mutatedKeys.has(g.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:d++}))}{let d=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(g=>c||3!==g.type).map(g=>{const I=new Vf(s._firestore,s._userDataWriter,g.doc.key,g.doc,new Uu(s._snapshot.mutatedKeys.has(g.doc.key),s._snapshot.fromCache),s.query.converter);let T=-1,k=-1;return 0!==g.type&&(T=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),1!==g.type&&(d=d.add(g.doc),k=d.indexOf(g.doc.key)),{type:BD(g.type),doc:I,oldIndex:T,newIndex:k}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function BD(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return un()}}function dC(n,e){return n instanceof Jl&&e instanceof Jl?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Nc&&e instanceof Nc&&n._firestore===e._firestore&&vD(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class kc extends uC{constructor(e){super(),this.firestore=e}convertBytes(e){return new hl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new yi(this.firestore,null,t)}}function Yv(n,e,t){n=_r(n,yi);const r=_r(n.firestore,li),s=Qv(n.converter,e,t);return rh(r,[Gv(Vu(r),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,xi.none())])}function hC(n,e,t,...r){n=_r(n,yi);const s=_r(n.firestore,li),c=Vu(s);let d;return d="string"==typeof(e=xt(e))||e instanceof Mc?Wv(c,"updateDoc",n._key,e,t,r):tC(c,"updateDoc",n._key,e),rh(s,[d.toMutation(n._key,xi.exists(!0))])}function fC(n,...e){var t,r,s;n=xt(n);let c={includeMetadataChanges:!1,source:"default"},d=0;"object"!=typeof e[d]||$v(e[d])||(c=e[d],d++);const g={includeMetadataChanges:c.includeMetadataChanges,source:c.source};if($v(e[d])){const B=e[d];e[d]=null===(t=B.next)||void 0===t?void 0:t.bind(B),e[d+1]=null===(r=B.error)||void 0===r?void 0:r.bind(B),e[d+2]=null===(s=B.complete)||void 0===s?void 0:s.bind(B)}let I,T,k;if(n instanceof yi)T=_r(n.firestore,li),k=Yh(n._key.path),I={next:B=>{e[d]&&e[d](Jv(T,n,B))},error:e[d+1],complete:e[d+2]};else{const B=_r(n,Oo);T=_r(B.firestore,li),k=B._query;const K=new kc(T);I={next:ue=>{e[d]&&e[d](new Nc(T,K,B,ue))},error:e[d+1],complete:e[d+2]},aC(n._query)}return function(K,ue,De,mt){const ht=new Pc(mt),Zt=new Og(ue,ht,De);return K.asyncQueue.enqueueAndForget((0,X.A)(function*(){return IE(yield Jd(K),Zt)})),()=>{ht.$a(),K.asyncQueue.enqueueAndForget((0,X.A)(function*(){return Dv(yield Jd(K),Zt)}))}}(Ti(T),k,g,I)}function rh(n,e){return function(r,s){const c=new io;return r.asyncQueue.enqueueAndForget((0,X.A)(function*(){return function QA(n,e,t){return PE.apply(this,arguments)}(yield Vv(r),s,c)})),c.promise}(Ti(n),e)}function Jv(n,e,t){const r=t.docs.get(e._key),s=new kc(n);return new Jl(n,s,e._key,r,new Uu(t.hasPendingWrites,t.fromCache),e.converter)}const Qx={maxAttempts:5};class mC{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Vu(e)}set(e,t,r){this._verifyNotCommitted();const s=Bu(e,this._firestore),c=Qv(s.converter,t,r),d=Gv(this._dataReader,"WriteBatch.set",s._key,c,null!==s.converter,r);return this._mutations.push(d.toMutation(s._key,xi.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const c=Bu(e,this._firestore);let d;return d="string"==typeof(t=xt(t))||t instanceof Mc?Wv(this._dataReader,"WriteBatch.update",c._key,t,r,s):tC(this._dataReader,"WriteBatch.update",c._key,t),this._mutations.push(d.toMutation(c._key,xi.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Bu(e,this._firestore);return this._mutations=this._mutations.concat(new sf(t._key,xi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new kt(dt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Bu(n,e){if((n=xt(n)).firestore!==e)throw new kt(dt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Yx extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Vu(t)}get(t){const r=Bu(t,this._firestore),s=new Vx(this._firestore);return this._transaction.lookup([r._key]).then(c=>{if(!c||1!==c.length)return un();const d=c[0];if(d.isFoundDocument())return new Of(this._firestore,s,d.key,d,r.converter);if(d.isNoDocument())return new Of(this._firestore,s,r._key,null,r.converter);throw un()})}set(t,r,s){const c=Bu(t,this._firestore),d=Qv(c.converter,r,s),g=Gv(this._dataReader,"Transaction.set",c._key,d,null!==c.converter,s);return this._transaction.set(c._key,g),this}update(t,r,s,...c){const d=Bu(t,this._firestore);let g;return g="string"==typeof(r=xt(r))||r instanceof Mc?Wv(this._dataReader,"Transaction.update",d._key,r,s,c):tC(this._dataReader,"Transaction.update",d._key,r),this._transaction.update(d._key,g),this}delete(t){const r=Bu(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Bu(e,this._firestore),r=new kc(this._firestore);return super.get(e).then(s=>new Jl(this._firestore,r,t._key,s._document,new Uu(!1,!1),t.converter))}}function EC(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new kt("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function eS(){if(typeof Uint8Array>"u")throw new kt("unimplemented","Uint8Arrays are not available in this environment.")}function tS(){if(!function uM(){return typeof atob<"u"}())throw new kt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){zl=Er,Et(new ar("firestore",(r,{instanceIdentifier:s,options:c})=>{const d=r.getProvider("app").getImmediate(),g=new li(new _T(r.getProvider("auth-internal")),new Z0(r.getProvider("app-check-internal")),function(T,k){if(!Object.prototype.hasOwnProperty.apply(T.options,["projectId"]))throw new kt(dt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fu(T.options.projectId,k)}(d,s),d);return c=Object.assign({useFetchStreams:t},c),g._setSettings(c),g},"PUBLIC").setMultipleInstances(!0)),Cr(gT,"4.6.3",e),Cr(gT,"4.6.3","esm2017")}();class Qg{constructor(e){this._delegate=e}static fromBase64String(e){return tS(),new Qg(hl.fromBase64String(e))}static fromUint8Array(e){return eS(),new Qg(hl.fromUint8Array(e))}toBase64(){return tS(),this._delegate.toBase64()}toUint8Array(){return eS(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function ih(n){return function aN(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class lN{enableIndexedDbPersistence(e,t){return function bx(n,e){CD(n=_r(n,li));const t=Ti(n);if(t._uninitializedComponentsProvider)throw new kt(dt.FAILED_PRECONDITION,"SDK cache is already specified.");Is("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),s=new Sf;return Ax(t,s,new Fv(s,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Tx(n){CD(n=_r(n,li));const e=Ti(n);if(e._uninitializedComponentsProvider)throw new kt(dt.FAILED_PRECONDITION,"SDK cache is already specified.");Is("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new Sf;return Ax(e,r,new ku(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Dx(n){if(n._initialized&&!n._terminated)throw new kt(dt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new io;return n._queue.enqueueAndForgetEvenWhileRestricted((0,X.A)(function*(){try{yield(t=(0,X.A)(function*(s){if(!Hl.D())return Promise.resolve();const c=s+"main";yield Hl.delete(c)}),function r(s){return t.apply(this,arguments)})(iE(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class nS{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof fu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Is("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function XE(n,e,t,r={}){var s;const c=(n=_r(n,xf))._getSettings(),d=`${e}:${t}`;if("firestore.googleapis.com"!==c.host&&c.host!==d&&Is("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},c),{host:d,ssl:!1})),r.mockUserToken){let g,I;if("string"==typeof r.mockUserToken)g=r.mockUserToken,I=mo.MOCK_USER;else{g=Pt(r.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new kt(dt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");I=new mo(T)}n._authCredentials=new Y0(new Q0(g,I))}}(this._delegate,e,t,r)}enableNetwork(){return function Sx(n){return function sD(n){return n.asyncQueue.enqueue((0,X.A)(function*(){const e=yield jg(n),t=yield qE(n);return e.setNetworkEnabled(!0),function(s){const c=en(s);return c.M_.delete(0),If(c)}(t)}))}(Ti(n=_r(n,li)))}(this._delegate)}disableNetwork(){return function Rx(n){return function aD(n){return n.asyncQueue.enqueue((0,X.A)(function*(){const e=yield jg(n),t=yield qE(n);return e.setNetworkEnabled(!1),(r=(0,X.A)(function*(c){const d=en(c);d.M_.add(0),yield Ql(d),d.N_.set("Offline")}),function s(c){return r.apply(this,arguments)})(t);var r}))}(Ti(n=_r(n,li)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,fD("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function ID(n){return function(t){const r=new io;return t.asyncQueue.enqueueAndForget((0,X.A)(function*(){return function sx(n,e){return Fg.apply(this,arguments)}(yield Vv(t),r)})),r.promise}(Ti(n=_r(n,li)))}(this._delegate)}onSnapshotsInSync(e){return function qD(n,e){return function vx(n,e){const t=new Pc(e);return n.asyncQueue.enqueueAndForget((0,X.A)(function*(){return s=yield Jd(n),c=t,en(s).z_.add(c),void c.next();var s,c})),()=>{t.$a(),n.asyncQueue.enqueueAndForget((0,X.A)(function*(){return s=yield Jd(n),c=t,void en(s).z_.delete(c);var s,c}))}}(Ti(n=_r(n,li)),$v(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new kt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new $u(this,_D(this._delegate,e))}catch(t){throw wo(t,"collection()","Firestore.collection()")}}doc(e){try{return new fl(this,QE(this._delegate,e))}catch(t){throw wo(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Cs(this,function Ix(n,e){if(n=_r(n,xf),Zd("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new kt(dt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Oo(n,null,(r=e,new Ws(br.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw wo(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Zv(n,e,t){n=_r(n,li);const r=Object.assign(Object.assign({},Qx),t);return function(c){if(c.maxAttempts<1)throw new kt(dt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(c,d,g){const I=new io;return c.asyncQueue.enqueueAndForget((0,X.A)(function*(){const T=yield function oD(n){return Lv(n).then(e=>e.datastore)}(c);new RF(c.asyncQueue,T,g,d,I).Xa()})),I.promise}(Ti(n),s=>e(new Yx(n,s)),r)}(this._delegate,t=>e(new rS(this,t)))}batch(){return Ti(this._delegate),new iS(new mC(this._delegate,e=>rh(this._delegate,e)))}loadBundle(e){return function Px(n,e){const t=Ti(n=_r(n,li)),r=new jv;return function yx(n,e,t,r){const s=function(d,g){let I;return I="string"==typeof d?MI().encode(d):d,k=function(k,B){if(k instanceof Uint8Array)return tD(k,B);if(k instanceof ArrayBuffer)return tD(new Uint8Array(k),B);if(k instanceof ReadableStream)return k.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(I),new SF(k,g);var k}(t,Dg(e));n.asyncQueue.enqueueAndForget((0,X.A)(function*(){!function px(n,e,t){const r=en(n);var s;(s=(0,X.A)(function*(d,g,I){try{const T=yield g.getMetadata();if(yield function(De,mt){const ht=en(De),Zt=Ni(mt.createTime);return ht.persistence.runTransaction("hasNewerBundle","readonly",ln=>ht.$r.getBundleMetadata(ln,mt.id)).then(ln=>!!ln&&ln.createTime.compareTo(Zt)>=0)}(d.localStore,T))return yield g.close(),I._completeWith({taskState:"Success",documentsLoaded:(De=T).totalDocuments,bytesLoaded:De.totalBytes,totalDocuments:De.totalDocuments,totalBytes:De.totalBytes}),Promise.resolve(new Set);I._updateProgress(ul(T));const k=new ZM(T,d.localStore,g.serializer);let B=yield g.qa();for(;B;){const ue=yield k._a(B);ue&&I._updateProgress(ue),B=yield g.qa()}const K=yield k.complete();return yield Rc(d,K.ca,void 0),yield function(De,mt){const ht=en(De);return ht.persistence.runTransaction("Save bundle","readwrite",Zt=>ht.$r.saveBundleMetadata(Zt,mt))}(d.localStore,T),I._completeWith(K.progress),Promise.resolve(K.ua)}catch(T){return Is("SyncEngine",`Loading bundle failed with ${T}`),I._failWith(T),Promise.resolve(new Set)}var De}),function c(d,g,I){return s.apply(this,arguments)})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}(yield Vv(n),s,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function ED(n,e){return function Bv(n,e){return n.asyncQueue.enqueue((0,X.A)(function*(){return function(r,s){const c=en(r);return c.persistence.runTransaction("Get named query","readonly",d=>c.$r.getNamedQuery(d,s))}(yield Co(n),e)}))}(Ti(n=_r(n,li)),e).then(t=>t?new Oo(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Cs(this,t):null)}}class Fo extends uC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qg(new hl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return fl.forKey(t,this.firestore,null)}}class rS{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Fo(e)}get(e){const t=ju(e);return this._delegate.get(t).then(r=>new Yg(this._firestore,new Jl(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=ju(e);return r?(EC("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const c=ju(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,r,...s),this}delete(e){const t=ju(e);return this._delegate.delete(t),this}}class iS{constructor(e){this._delegate=e}set(e,t,r){const s=ju(e);return r?(EC("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const c=ju(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,r,...s),this}delete(e){const t=ju(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Bf{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Vf(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new $f(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Bf.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let c=s.get(t);return c||(c=new Bf(e,new Fo(e),t),s.set(t,c)),c}}Bf.INSTANCES=new WeakMap;class fl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Fo(e)}static forPath(e,t,r){if(e.length%2!=0)throw new kt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new fl(t,new yi(t._delegate,r,new tn(e)))}static forKey(e,t,r){return new fl(t,new yi(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new $u(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new $u(this.firestore,_D(this._delegate,e))}catch(t){throw wo(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=xt(e))instanceof yi&&Ex(this._delegate,e)}set(e,t){t=EC("DocumentReference.set",t);try{return t?Yv(this._delegate,e,t):Yv(this._delegate,e)}catch(r){throw wo(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?hC(this._delegate,e):hC(this._delegate,e,t,...r)}catch(s){throw wo(s,"updateDoc()","DocumentReference.update()")}}delete(){return function GD(n){return rh(_r(n.firestore,li),[new sf(n._key,xi.none())])}(this._delegate)}onSnapshot(...e){const t=oS(e),r=ty(e,s=>new Yg(this.firestore,new Jl(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return fC(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function jD(n){n=_r(n,yi);const e=_r(n.firestore,li),t=Ti(e),r=new kc(e);return function gx(n,e){const t=new io;return n.asyncQueue.enqueueAndForget((0,X.A)(function*(){return(r=(0,X.A)(function*(c,d,g){try{const I=yield function(k,B){const K=en(k);return K.persistence.runTransaction("read document","readonly",ue=>K.localDocuments.getDocument(ue,B))}(c,d);I.isFoundDocument()?g.resolve(I):I.isNoDocument()?g.resolve(null):g.reject(new kt(dt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(I){const T=bf(I,`Failed to get document '${d} from cache`);g.reject(T)}}),function s(c,d,g){return r.apply(this,arguments)})(yield Co(n),e,t);var r})),t.promise}(t,n._key).then(s=>new Jl(e,r,n._key,s,new Uu(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function zD(n){n=_r(n,yi);const e=_r(n.firestore,li);return lD(Ti(e),n._key,{source:"server"}).then(t=>Jv(e,n,t))}(this._delegate):function $D(n){n=_r(n,yi);const e=_r(n.firestore,li);return lD(Ti(e),n._key).then(t=>Jv(e,n,t))}(this._delegate),t.then(r=>new Yg(this.firestore,new Jl(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new fl(this.firestore,this._delegate.withConverter(e?Bf.getInstance(this.firestore,e):null))}}function wo(n,e,t){return n.message=n.message.replace(e,t),n}function oS(n){for(const e of n)if("object"==typeof e&&!ih(e))return e;return{}}function ty(n,e){var t,r;let s;return s=ih(n[0])?n[0]:ih(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:c=>{s.next&&s.next(e(c))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class Yg{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new fl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return dC(this._delegate,e._delegate)}}class $f extends Yg{data(e){const t=this._delegate.data(e);return this._delegate._converter||function JP(n,e){n||un()}(void 0!==t),t}}class Cs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Fo(e)}where(e,t,r){try{return new Cs(this.firestore,xc(this._delegate,function cC(n,e,t){const r=e,s=sC("where",n);return Lf._create(s,r,t)}(e,t,r)))}catch(s){throw wo(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Cs(this.firestore,xc(this._delegate,function PD(n,e="asc"){const t=e,r=sC("orderBy",n);return Xv._create(r,t)}(e,t)))}catch(r){throw wo(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Cs(this.firestore,xc(this._delegate,function MD(n){return gD("limit",n),qg._create("limit",n,"F")}(e)))}catch(t){throw wo(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Cs(this.firestore,xc(this._delegate,function xD(n){return gD("limitToLast",n),qg._create("limitToLast",n,"L")}(e)))}catch(t){throw wo(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Cs(this.firestore,xc(this._delegate,function ND(...n){return Kg._create("startAt",n,!0)}(...e)))}catch(t){throw wo(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Cs(this.firestore,xc(this._delegate,function kD(...n){return Kg._create("startAfter",n,!1)}(...e)))}catch(t){throw wo(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Cs(this.firestore,xc(this._delegate,function Fx(...n){return Xg._create("endBefore",n,!1)}(...e)))}catch(t){throw wo(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Cs(this.firestore,xc(this._delegate,function Lx(...n){return Xg._create("endAt",n,!0)}(...e)))}catch(t){throw wo(t,"endAt()","Query.endAt()")}}isEqual(e){return vD(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function jx(n){n=_r(n,Oo);const e=_r(n.firestore,li),t=Ti(e),r=new kc(e);return function mx(n,e){const t=new io;return n.asyncQueue.enqueueAndForget((0,X.A)(function*(){return(r=(0,X.A)(function*(c,d,g){try{const I=yield fv(c,d,!0),T=new bE(d,I.hs),k=T.da(I.documents),B=T.applyChanges(k,!1);g.resolve(B.snapshot)}catch(I){const T=bf(I,`Failed to execute query '${d} against cache`);g.reject(T)}}),function s(c,d,g){return r.apply(this,arguments)})(yield Co(n),e,t);var r})),t.promise}(t,n._query).then(s=>new Nc(e,r,n,s))}(this._delegate):"server"===(null==e?void 0:e.source)?function HD(n){n=_r(n,Oo);const e=_r(n.firestore,li),t=Ti(e),r=new kc(e);return Pf(t,n._query,{source:"server"}).then(s=>new Nc(e,r,n,s))}(this._delegate):function $x(n){n=_r(n,Oo);const e=_r(n.firestore,li),t=Ti(e),r=new kc(e);return aC(n._query),Pf(t,n._query).then(s=>new Nc(e,r,n,s))}(this._delegate),t.then(r=>new CC(this.firestore,new Nc(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=oS(e),r=ty(e,s=>new CC(this.firestore,new Nc(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return fC(this._delegate,t,r)}withConverter(e){return new Cs(this.firestore,this._delegate.withConverter(e?Bf.getInstance(this.firestore,e):null))}}class cN{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new $f(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class CC{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Cs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new $f(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new cN(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new $f(this._firestore,r))})}isEqual(e){return dC(this._delegate,e._delegate)}}class $u extends Cs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new fl(this.firestore,e):null}doc(e){try{return new fl(this.firestore,void 0===e?QE(this._delegate):QE(this._delegate,e))}catch(t){throw wo(t,"doc()","CollectionReference.doc()")}}add(e){return function WD(n,e){const t=_r(n.firestore,li),r=QE(n),s=Qv(n.converter,e);return rh(t,[Gv(Vu(n.firestore),"addDoc",r._key,s,null!==n.converter,{}).toMutation(r._key,xi.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new fl(this.firestore,t))}isEqual(e){return Ex(this._delegate,e._delegate)}withConverter(e){return new $u(this.firestore,this._delegate.withConverter(e?Bf.getInstance(this.firestore,e):null))}}function ju(n){return _r(n,yi)}class wC{constructor(...e){this._delegate=new Mc(...e)}static documentId(){return new wC(fn.keyField().canonicalString())}isEqual(e){return(e=xt(e))instanceof Mc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Zl{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Jx(){return new YE("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Zl(e)}static delete(){const e=function JD(){return new Hg("deleteField")}();return e._methodName="FieldValue.delete",new Zl(e)}static arrayUnion(...e){const t=function Zx(...n){return new JE("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Zl(t)}static arrayRemove(...e){const t=function eN(...n){return new ZE("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Zl(t)}static increment(e){const t=function tN(n){return new eC("increment",n)}(e);return t._methodName="FieldValue.increment",new Zl(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const bC={Firestore:nS,GeoPoint:zg,Timestamp:wi,Blob:Qg,Transaction:rS,WriteBatch:iS,DocumentReference:fl,DocumentSnapshot:Yg,Query:Cs,QueryDocumentSnapshot:$f,QuerySnapshot:CC,CollectionReference:$u,FieldPath:wC,FieldValue:Zl,setLogLevel:function Uf(n){!function YP(n){sl.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function sS(n){(function $F(n,e){n.INTERNAL.registerComponent(new ar("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},bC)))})(n,(e,t)=>new nS(e,t,new lN)),n.registerVersion("@firebase/firestore-compat","0.3.32")}(di);const aS="firebasestorage.googleapis.com",TC="storageBucket";class Ii extends $t{constructor(e,t,r=0){super(AC(e),`Firebase Storage: ${t} (${AC(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ii.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return AC(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var ki=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(ki||{});function AC(n){return"storage/"+n}function DC(){return new Ii(ki.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function SC(){return new Ii(ki.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function hS(){return new Ii(ki.CANCELED,"User canceled the upload/download.")}function RC(){return new Ii(ki.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function zf(n){return new Ii(ki.INVALID_ARGUMENT,n)}function _S(){return new Ii(ki.APP_DELETED,"The Firebase app was deleted.")}function gN(n){return new Ii(ki.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Hf(n,e){return new Ii(ki.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function ny(n){throw new Ii(ki.INTERNAL_ERROR,"Internal error: "+n)}class ws{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ws.makeFromUrl(e,t)}catch{return new ws(e,"")}if(""===r.path)return r;throw function fS(n){return new Ii(ki.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)",g=new RegExp("^gs://"+s+"(/(.*))?$","i");function T(vn){vn.path_=decodeURIComponent(vn.path)}const B=t.replace(/[.]/g,"\\."),Xt=[{regex:g,indices:{bucket:1,path:3},postModify:function c(vn){"/"===vn.path.charAt(vn.path.length-1)&&(vn.path_=vn.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${B}/v[A-Za-z0-9_]+/b/${s}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:T},{regex:new RegExp(`^https?://${t===aS?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${s}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:T}];for(let vn=0;vn<Xt.length;vn++){const gr=Xt[vn],Wn=gr.regex.exec(e);if(Wn){let ge=Wn[gr.indices.path];ge||(ge=""),r=new ws(Wn[gr.indices.bucket],ge),gr.postModify(r);break}}if(null==r)throw function fN(n){return new Ii(ki.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class jF{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Jg(n){return"string"==typeof n||n instanceof String}function mN(n){return ry()&&n instanceof Blob}function ry(){return typeof Blob<"u"}function PC(n,e,t,r){if(r<e)throw zf(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw zf(`Invalid value for '${n}'. Expected ${t} or less.`)}function Ia(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function Zg(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Gf=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(Gf||{});function vS(n,e){const t=n>=500&&n<600,s=-1!==[408,429].indexOf(n),c=-1!==e.indexOf(n);return t||s||c}class _N{constructor(e,t,r,s,c,d,g,I,T,k,B,K=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=c,this.additionalRetryCodes_=d,this.callback_=g,this.errorCallback_=I,this.timeout_=T,this.progressCallback_=k,this.connectionFactory_=B,this.retry=K,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((ue,De)=>{this.resolve_=ue,this.reject_=De,this.start_()})}start_(){const t=(r,s)=>{const c=this.resolve_,d=this.reject_,g=s.connection;if(s.wasSuccessCode)try{const I=this.callback_(g,g.getResponse());!function GF(n){return void 0!==n}(I)?c():c(I)}catch(I){d(I)}else if(null!==g){const I=DC();I.serverResponse=g.getErrorText(),d(this.errorCallback_?this.errorCallback_(g,I):I)}else d(s.canceled?this.appDelete_?_S():hS():SC())};this.canceled_?t(0,new iy(!1,null,!0)):this.backoffId_=function zF(n,e,t){let r=1,s=null,c=null,d=!1,g=0;function I(){return 2===g}let T=!1;function k(...ht){T||(T=!0,e.apply(null,ht))}function B(ht){s=setTimeout(()=>{s=null,n(ue,I())},ht)}function K(){c&&clearTimeout(c)}function ue(ht,...Zt){if(T)return void K();if(ht)return K(),void k.call(null,ht,...Zt);if(I()||d)return K(),void k.call(null,ht,...Zt);let Xt;r<64&&(r*=2),1===g?(g=2,Xt=0):Xt=1e3*(r+Math.random()),B(Xt)}let De=!1;function mt(ht){De||(De=!0,K(),!T&&(null!==s?(ht||(g=2),clearTimeout(s),B(0)):ht||(g=1)))}return B(0),c=setTimeout(()=>{d=!0,mt(!0)},t),mt}((r,s)=>{if(s)return void r(!1,new iy(!1,null,!0));const c=this.connectionFactory_();this.pendingConnection_=c;const d=g=>{null!==this.progressCallback_&&this.progressCallback_(g.loaded,g.lengthComputable?g.total:-1)};null!==this.progressCallback_&&c.addUploadProgressListener(d),c.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&c.removeUploadProgressListener(d),this.pendingConnection_=null;const g=c.getErrorCode()===Gf.NO_ERROR,I=c.getStatus();if(!g||vS(I,this.additionalRetryCodes_)&&this.retry){const k=c.getErrorCode()===Gf.ABORT;return void r(!1,new iy(!1,null,k))}const T=-1!==this.successCodes_.indexOf(I);r(!0,new iy(T,c))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function HF(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class iy{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function wN(...n){const e=function CN(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(ry())return new Blob(n);throw new Ii(ki.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Ea={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class MC{constructor(e,t){this.data=e,this.contentType=t||null}}function xC(n,e){switch(n){case Ea.RAW:return new MC(IS(e));case Ea.BASE64:case Ea.BASE64URL:return new MC(ES(n,e));case Ea.DATA_URL:return new MC(function DN(n){const e=new CS(n);return e.base64?ES(Ea.BASE64,e.rest):function AN(n){let e;try{e=decodeURIComponent(n)}catch{throw Hf(Ea.DATA_URL,"Malformed data URL.")}return IS(e)}(e.rest)}(e),function wS(n){return new CS(n).contentType}(e))}throw DC()}function IS(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function ES(n,e){switch(n){case Ea.BASE64:{const s=-1!==e.indexOf("-"),c=-1!==e.indexOf("_");if(s||c)throw Hf(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Ea.BASE64URL:{const s=-1!==e.indexOf("+"),c=-1!==e.indexOf("/");if(s||c)throw Hf(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function TN(n){if(typeof atob>"u")throw function mS(n){return new Ii(ki.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(s){throw s.message.includes("polyfill")?s:Hf(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}class CS{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Hf(Ea.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function NC(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class ec{constructor(e,t){let r=0,s="";mN(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(mN(this.data_)){const s=function bN(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===s?null:new ec(s)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new ec(r,!0)}}static getBlob(...e){if(ry()){const t=e.map(r=>r instanceof ec?r.data_:r);return new ec(wN.apply(null,t))}{const t=e.map(d=>Jg(d)?xC(Ea.RAW,d).data:d.data_);let r=0;t.forEach(d=>{r+=d.byteLength});const s=new Uint8Array(r);let c=0;return t.forEach(d=>{for(let g=0;g<d.length;g++)s[c++]=d[g]}),new ec(s,!0)}}uploadData(){return this.data_}}function kC(n){let e;try{e=JSON.parse(n)}catch{return null}return function qF(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function FC(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function KF(n,e){return e}class bs{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||KF}}let em=null;function tm(){if(em)return em;const n=[];n.push(new bs("bucket")),n.push(new bs("generation")),n.push(new bs("metageneration")),n.push(new bs("name","fullPath",!0));const t=new bs("name");t.xform=function e(c,d){return function bS(n){return!Jg(n)||n.length<2?n:FC(n)}(d)},n.push(t);const s=new bs("size");return s.xform=function r(c,d){return void 0!==d?Number(d):d},n.push(s),n.push(new bs("timeCreated")),n.push(new bs("updated")),n.push(new bs("md5Hash",null,!0)),n.push(new bs("cacheControl",null,!0)),n.push(new bs("contentDisposition",null,!0)),n.push(new bs("contentEncoding",null,!0)),n.push(new bs("contentLanguage",null,!0)),n.push(new bs("contentType",null,!0)),n.push(new bs("metadata","customMetadata",!0)),em=n,em}function oy(n,e,t){const r=kC(e);return null===r?null:function RN(n,e,t){const r={type:"file"},s=t.length;for(let c=0;c<s;c++){const d=t[c];r[d.local]=d.xform(r,e[d.server])}return function TS(n,e){Object.defineProperty(n,"ref",{get:function t(){const c=new ws(n.bucket,n.fullPath);return e._makeStorageReference(c)}})}(r,n),r}(n,r,t)}function sy(n,e){const t={},r=e.length;for(let s=0;s<r;s++){const c=e[s];c.writable&&(t[c.server]=n[c.local])}return JSON.stringify(t)}const VC="prefixes",ay="items";class pl{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function tc(n){if(!n)throw DC()}function BC(n,e){return function t(r,s){const c=oy(n,s,e);return tc(null!==c),c}}function Ca(n){return function e(t,r){let s;return s=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function hN(){return new Ii(ki.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function uS(){return new Ii(ki.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function cS(n){return new Ii(ki.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function dS(n){return new Ii(ki.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,s.status=t.getStatus(),s.serverResponse=r.serverResponse,s}}function zu(n){const e=Ca(n);return function t(r,s){let c=e(r,s);return 404===r.getStatus()&&(c=function dN(n){return new Ii(ki.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),c.serverResponse=s.serverResponse,c}}function Wf(n,e,t){const s=Ia(e.fullServerUrl(),n.host,n._protocol),d=n.maxOperationRetryTime,g=new pl(s,"GET",BC(n,t),d);return g.errorHandler=zu(e),g}function PN(n,e,t,r,s){const c={};c.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(c.delimiter=t),r&&(c.pageToken=r),s&&(c.maxResults=s);const g=Ia(e.bucketOnlyServerUrl(),n.host,n._protocol),T=n.maxOperationRetryTime,k=new pl(g,"GET",function AS(n,e){return function t(r,s){const c=function XF(n,e,t){const r=kC(t);return null===r?null:function UC(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[VC])for(const s of t[VC]){const c=s.replace(/\/$/,""),d=n._makeStorageReference(new ws(e,c));r.prefixes.push(d)}if(t[ay])for(const s of t[ay]){const c=n._makeStorageReference(new ws(e,s.name));r.items.push(c)}return r}(n,e,r)}(n,e,s);return tc(null!==c),c}}(n,e.bucket),T);return k.urlParams=c,k.errorHandler=Ca(e),k}function RS(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function NN(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class ly{constructor(e,t,r,s){this.current=e,this.total=t,this.finalized=!!r,this.metadata=s||null}}function cy(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{tc(!1)}return tc(!!t&&-1!==(e||["active"]).indexOf(t)),t}const LN={STATE_CHANGED:"state_changed"},ls={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function zC(n){switch(n){case"running":case"pausing":case"canceling":return ls.RUNNING;case"paused":return ls.PAUSED;case"success":return ls.SUCCESS;case"canceled":return ls.CANCELED;default:return ls.ERROR}}class VN{constructor(e,t,r){if(function WF(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const c=e;this.next=c.next,this.error=c.error,this.complete=c.complete}}}function Oc(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let PS=null;class YF{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Gf.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Gf.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Gf.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s){if(this.sent_)throw ny("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==s)for(const c in s)s.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,s[c].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ny("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ny("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ny("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ny("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class JF extends YF{initXhr(){this.xhr_.responseType="text"}}function gl(){return PS?PS():new JF}class NS{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=tm(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(ki.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const c=this.isExponentialBackoffExpired();if(vS(s.status,[])){if(!c)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();s=SC()}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(ki.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,c)=>{this._resolve=s,this._reject=c,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function ON(n,e,t,r,s){const c=e.bucketOnlyServerUrl(),d=RS(e,r,s),g={name:d.fullPath},I=Ia(c,n.host,n._protocol),k={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":d.contentType,"Content-Type":"application/json; charset=utf-8"},B=sy(d,t),De=new pl(I,"POST",function ue(mt){let ht;cy(mt);try{ht=mt.getResponseHeader("X-Goog-Upload-URL")}catch{tc(!1)}return tc(Jg(ht)),ht},n.maxUploadRetryTime);return De.urlParams=g,De.headers=k,De.body=B,De.errorHandler=Ca(e),De}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,gl,e,t);this._request=s,s.getPromise().then(c=>{this._request=void 0,this._uploadUrl=c,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const s=function QF(n,e,t,r){const I=new pl(t,"POST",function c(T){const k=cy(T,["active","final"]);let B=null;try{B=T.getResponseHeader("X-Goog-Upload-Size-Received")}catch{tc(!1)}B||tc(!1);const K=Number(B);return tc(!isNaN(K)),new ly(K,r.size(),"final"===k)},n.maxUploadRetryTime);return I.headers={"X-Goog-Upload-Command":"query"},I.errorHandler=Ca(e),I}(this._ref.storage,this._ref._location,e,this._blob),c=this._ref.storage._makeRequest(s,gl,t,r);this._request=c,c.getPromise().then(d=>{this._request=void 0,this._updateProgress(d.current),this._needToFetchStatus=!1,d.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new ly(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,c)=>{let d;try{d=function FN(n,e,t,r,s,c,d,g){const I=new ly(0,0);if(d?(I.current=d.current,I.total=d.total):(I.current=0,I.total=r.size()),r.size()!==I.total)throw function pS(){return new Ii(ki.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const T=I.total-I.current;let k=T;s>0&&(k=Math.min(k,s));const B=I.current;let ue="";ue=0===k?"finalize":T===k?"upload, finalize":"upload";const De={"X-Goog-Upload-Command":ue,"X-Goog-Upload-Offset":`${I.current}`},mt=r.slice(B,B+k);if(null===mt)throw RC();const Xt=new pl(t,"POST",function ht(vn,gr){const Wn=cy(vn,["active","final"]),xe=I.current+k,ge=r.size();let Ie;return Ie="final"===Wn?BC(e,c)(vn,gr):null,new ly(xe,ge,"final"===Wn,Ie)},e.maxUploadRetryTime);return Xt.headers=De,Xt.body=mt.uploadData(),Xt.progressCallback=g||null,Xt.errorHandler=Ca(n),Xt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(I){return this._error=I,void this._transition("error")}const g=this._ref.storage._makeRequest(d,gl,s,c,!1);this._request=g,g.getPromise().then(I=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(I.current),I.finalized?(this._metadata=I.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=Wf(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,gl,e,t);this._request=s,s.getPromise().then(c=>{this._request=void 0,this._metadata=c,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function kN(n,e,t,r,s){const c=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"},I=function g(){let Xt="";for(let vn=0;vn<2;vn++)Xt+=Math.random().toString().slice(2);return Xt}();d["Content-Type"]="multipart/related; boundary="+I;const T=RS(e,r,s),k=sy(T,t),ue=ec.getBlob("--"+I+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+k+"\r\n--"+I+"\r\nContent-Type: "+T.contentType+"\r\n\r\n",r,"\r\n--"+I+"--");if(null===ue)throw RC();const De={name:T.fullPath},mt=Ia(c,n.host,n._protocol),Zt=n.maxUploadRetryTime,ln=new pl(mt,"POST",BC(n,t),Zt);return ln.urlParams=De,ln.headers=d,ln.body=ue.uploadData(),ln.errorHandler=Ca(e),ln}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,gl,e,t);this._request=s,s.getPromise().then(c=>{this._request=void 0,this._metadata=c,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=hS(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=zC(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,s){const c=new VN(t||void 0,r||void 0,s||void 0);return this._addObserver(c),()=>{this._removeObserver(c)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(zC(this._state)){case ls.SUCCESS:Oc(this._resolve.bind(null,this.snapshot))();break;case ls.CANCELED:case ls.ERROR:Oc(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(zC(this._state)){case ls.RUNNING:case ls.PAUSED:e.next&&Oc(e.next.bind(e,this.snapshot))();break;case ls.SUCCESS:e.complete&&Oc(e.complete.bind(e))();break;default:e.error&&Oc(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Gu{constructor(e,t){this._service=e,this._location=t instanceof ws?t:ws.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Gu(e,t)}get root(){const e=new ws(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return FC(this._location.path)}get storage(){return this._service}get parent(){const e=function OC(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new ws(this._location.bucket,e);return new Gu(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw gN(e)}}function $N(n,e,t){return GC.apply(this,arguments)}function GC(){return GC=(0,X.A)(function*(n,e,t){const s=yield jN(n,{pageToken:t});e.prefixes.push(...s.prefixes),e.items.push(...s.items),null!=s.nextPageToken&&(yield $N(n,e,s.nextPageToken))}),GC.apply(this,arguments)}function jN(n,e){null!=e&&"number"==typeof e.maxResults&&PC("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=PN(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,gl)}function LS(n){n._throwIfRoot("getDownloadURL");const e=function $C(n,e,t){const s=Ia(e.fullServerUrl(),n.host,n._protocol),d=n.maxOperationRetryTime,g=new pl(s,"GET",function DS(n,e){return function t(r,s){const c=oy(n,s,e);return tc(null!==c),function LC(n,e,t,r){const s=kC(e);if(null===s||!Jg(s.downloadTokens))return null;const c=s.downloadTokens;if(0===c.length)return null;const d=encodeURIComponent;return c.split(",").map(T=>{const B=n.fullPath;return Ia("/b/"+d(n.bucket)+"/o/"+d(B),t,r)+Zg({alt:"media",token:T})})[0]}(c,s,n.host,n._protocol)}}(n,t),d);return g.errorHandler=zu(e),g}(n.storage,n._location,tm());return n.storage.makeRequestWithTokens(e,gl).then(t=>{if(null===t)throw function gS(){return new Ii(ki.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function VS(n,e){const t=function SN(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new ws(n._location.bucket,t);return new Gu(n.storage,r)}function HN(n,e){if(n instanceof qf){const t=n;if(null==t._bucket)throw function pN(){return new Ii(ki.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+TC+"' property when initializing the app?")}();const r=new Gu(t,t._bucket);return null!=e?HN(r,e):r}return void 0!==e?VS(n,e):n}function rL(n,e){if(e&&function tL(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof qf)return function nL(n,e){return new Gu(n,e)}(n,e);throw zf("To use ref(service, url), the first argument must be a Storage instance.")}return HN(n,e)}function GN(n,e){const t=null==e?void 0:e[TC];return null==t?null:ws.makeFromBucketSpec(t,n)}class qf{constructor(e,t,r,s,c){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=c,this._bucket=null,this._host=aS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=s?ws.makeFromBucketSpec(s,this._host):GN(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ws.makeFromBucketSpec(this._url,e):GN(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){PC("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){PC("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,X.A)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,X.A)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Gu(this,e)}_makeRequest(e,t,r,s,c=!0){if(this._deleted)return new jF(_S());{const d=function EN(n,e,t,r,s,c,d=!0){const g=Zg(n.urlParams),I=n.url+g,T=Object.assign({},n.headers);return function IN(n,e){e&&(n["X-Firebase-GMPID"]=e)}(T,e),function vN(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(T,t),function yN(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(T,c),function yS(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(T,r),new _N(I,n.method,T,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,d)}(e,this._appId,r,s,t,this._firebaseVersion,c);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}makeRequestWithTokens(e,t){var r=this;return(0,X.A)(function*(){const[s,c]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,s,c).getPromise()})()}}const BS="@firebase/storage";function KN(n,e){return rL(n=xt(n),e)}function GS(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new qf(t,r,s,e,Er)}!function WS(){Et(new ar("storage",GS,"PUBLIC").setMultipleInstances(!0)),Cr(BS,"0.12.5",""),Cr(BS,"0.12.5","esm2017")}();class nm{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class qS{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new nm(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new nm(r,this,this._ref))},t)}on(e,t,r,s){let c;return t&&(c="function"==typeof t?d=>t(new nm(d,this,this._ref)):{next:t.next?d=>t.next(new nm(d,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,c,r||void 0,s||void 0)}}class KS{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new nc(e,this._service))}get items(){return this._delegate.items.map(e=>new nc(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class nc{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function zS(n,e){return VS(n,e)}(this._delegate,e);return new nc(t,this.storage)}get root(){return new nc(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new nc(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new qS(function qC(n,e,t){return function ZF(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new NS(n,new ec(e),t)}(n=xt(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Ea.RAW,r){this._throwIfRoot("putString");const s=xC(t,e),c=Object.assign({},r);return null==c.contentType&&null!=s.contentType&&(c.contentType=s.contentType),new qS(new NS(this._delegate,new ec(s.data,!0),c),this)}listAll(){return function dy(n){return function OS(n){const e={prefixes:[],items:[]};return $N(n,e).then(()=>e)}(n=xt(n))}(this._delegate).then(e=>new KS(e,this.storage))}list(e){return function XC(n,e){return jN(n=xt(n),e)}(this._delegate,e||void 0).then(t=>new KS(t,this.storage))}getMetadata(){return function qN(n){return function eL(n){n._throwIfRoot("getMetadata");const e=Wf(n.storage,n._location,tm());return n.storage.makeRequestWithTokens(e,gl)}(n=xt(n))}(this._delegate)}updateMetadata(e){return function KC(n,e){return function FS(n,e){n._throwIfRoot("updateMetadata");const t=function MN(n,e,t,r){const c=Ia(e.fullServerUrl(),n.host,n._protocol),g=sy(t,r),T=n.maxOperationRetryTime,k=new pl(c,"PATCH",BC(n,r),T);return k.headers={"Content-Type":"application/json; charset=utf-8"},k.body=g,k.errorHandler=zu(e),k}(n.storage,n._location,e,tm());return n.storage.makeRequestWithTokens(t,gl)}(n=xt(n),e)}(this._delegate,e)}getDownloadURL(){return function iL(n){return LS(n=xt(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function oL(n){return function zN(n){n._throwIfRoot("deleteObject");const e=function xN(n,e){const r=Ia(e.fullServerUrl(),n.host,n._protocol),g=new pl(r,"DELETE",function d(I,T){},n.maxOperationRetryTime);return g.successCodes=[200,204],g.errorHandler=zu(e),g}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,gl)}(n=xt(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw gN(e)}}class hy{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(XN(e))throw zf("ref() expected a child path but got a URL, use refFromURL instead.");return new nc(KN(this._delegate,e),this)}refFromURL(e){if(!XN(e))throw zf("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ws.makeFromUrl(e,this._delegate.host)}catch{throw zf("refFromUrl() expected a valid full URL but got an invalid one.")}return new nc(KN(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function HS(n,e,t,r={}){!function US(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:s}=r;s&&(n._overrideAuthToken="string"==typeof s?s:Pt(s,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function XN(n){return/^[A-Za-z]+:\/\//.test(n)}function YN(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new hy(t,r)}!function cL(n){const e={TaskState:ls,TaskEvent:LN,StringFormat:Ea,Storage:hy,Reference:nc};n.INTERNAL.registerComponent(new ar("storage-compat",YN,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.8")}(di);const JN="@firebase/database";let YC="";function YS(n){YC=n}class bo{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),En(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:er(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class rm{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return et(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const im=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new bo(e)}}catch{}return new rm},rc=im("localStorage"),fy=im("sessionStorage"),om=new qn("@firebase/database"),JS=function(){let n=1;return function(){return n++}}(),ZN=function(n){const e=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);if(s>=55296&&s<=56319){const c=s-55296;r++,re(r<n.length,"Surrogate pair missing trail surrogate."),s=65536+(c<<10)+(n.charCodeAt(r)-56320)}s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=63&s|128):s<65536?(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=63&s|128):(e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=63&s|128)}return e}(n),t=new Wr;t.update(e);const r=t.digest();return me.encodeByteArray(r)},py=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=py.apply(null,r):e+="object"==typeof r?En(r):r,e+=" "}return e};let Fc=null,ZS=!0;const JC=function(n,e){re(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(om.logLevel=Tn.VERBOSE,Fc=om.log.bind(om),e&&fy.set("logging_enabled",!0)):"function"==typeof n?Fc=n:(Fc=null,fy.remove("logging_enabled"))},To=function(...n){if(!0===ZS&&(ZS=!1,null===Fc&&!0===fy.get("logging_enabled")&&JC(!0)),Fc){const e=py.apply(null,n);Fc(e)}},Xf=function(n){return function(...e){To(n,...e)}},gy=function(...n){const e="FIREBASE INTERNAL ERROR: "+py(...n);om.error(e)},ic=function(...n){const e=`FIREBASE FATAL ERROR: ${py(...n)}`;throw om.error(e),new Error(e)},cs=function(...n){const e="FIREBASE WARNING: "+py(...n);om.warn(e)},my=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},ml="[MIN_NAME]",wa="[MAX_NAME]",Ha=function(n,e){if(n===e)return 0;if(n===ml||e===wa)return-1;if(e===ml||n===wa)return 1;{const t=tk(n),r=tk(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},n1=function(n,e){return n===e?0:n<e?-1:1},_y=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+En(e))},r1=function(n){if("object"!=typeof n||null===n)return En(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=En(e[r]),t+=":",t+=r1(n[e[r]]);return t+="}",t},ek=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let s=0;s<t;s+=e)r.push(n.substring(s,s+e>t?t:s+e));return r};function Lo(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const i1=function(n){re(!my(n),"Invalid JSON number");const r=1023;let s,c,d,g,I;0===n?(c=0,d=0,s=1/n==-1/0?1:0):(s=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(g=Math.min(Math.floor(Math.log(n)/Math.LN2),r),c=g+r,d=Math.round(n*Math.pow(2,52-g)-Math.pow(2,52))):(c=0,d=Math.round(n/Math.pow(2,-1074))));const T=[];for(I=52;I;I-=1)T.push(d%2?1:0),d=Math.floor(d/2);for(I=11;I;I-=1)T.push(c%2?1:0),c=Math.floor(c/2);T.push(s?1:0),T.reverse();const k=T.join("");let B="";for(I=0;I<64;I+=8){let K=parseInt(k.substr(I,8),2).toString(16);1===K.length&&(K="0"+K),B+=K}return B.toLowerCase()},dL=new RegExp("^-?(0*)\\d{1,10}$"),tk=function(n){if(dL.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},sm=function(n){try{n()}catch(e){setTimeout(()=>{throw cs("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},vy=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class rk{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){cs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class ik{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(To("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',cs(e)}}let yy=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const sk=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,h1="websocket",ak="long_polling";class Iy{constructor(e,t,r,s,c=!1,d="",g=!1,I=!1){this.secure=t,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=c,this.persistenceKey=d,this.includeNamespaceInQueryParams=g,this.isUsingEmulator=I,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=rc.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&rc.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function tw(n,e,t){let r;if(re("string"==typeof e,"typeof type must == string"),re("object"==typeof t,"typeof params must == object"),e===h1)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==ak)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function f1(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const s=[];return Lo(t,(c,d)=>{s.push(c+"="+d)}),r+s.join("&")}class fL{constructor(){this.counters_={}}incrementCounter(e,t=1){et(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return function it(n){return Xe(void 0,n)}(this.counters_)}}const nw={},p1={};function rw(n){const e=n.toString();return nw[e]||(nw[e]=new fL),nw[e]}class gL{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&sm(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class _l{constructor(e,t,r,s,c,d,g){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=s,this.authToken=c,this.transportSessionId=d,this.lastSessionId=g,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Xf(e),this.stats_=rw(t),this.urlFn=I=>(this.appCheckToken&&(I.ac=this.appCheckToken),tw(t,ak,I))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new gL(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if("complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new aw((...c)=>{const[d,g,I,T,k]=c;if(this.incrementIncomingBytes_(c),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===d)this.id=g,this.password=I;else{if("close"!==d)throw new Error("Unrecognized command received: "+d);g?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(g,()=>{this.onClosed_()})):this.onClosed_()}},(...c)=>{const[d,g]=c;this.incrementIncomingBytes_(c),this.myPacketOrderer.handleResponse(d,g)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&sk.test(location.hostname)&&(r.r="f");const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){_l.forceAllow_=!0}static forceDisallow(){_l.forceDisallow_=!0}static isAvailable(){return!(!_l.forceAllow_&&(_l.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=En(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=Re(t),s=ek(r,1840);for(let c=0;c<s.length;c++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[c]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=En(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class aw{constructor(e,t,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=JS(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=aw.createIFrame_();let c="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(c='<script>document.domain="'+document.domain+'";<\/script>');const d="<html><body>"+c+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(d),this.myIFrame.doc.close()}catch(g){To("frame writing exception"),g.stack&&To(g.stack),To(g)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||To("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const d=this.pendingSegs.shift();r=r+"&seg"+s+"="+d.seg+"&ts"+s+"="+d.ts+"&d"+s+"="+d.d,s++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},s=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(s),r()})}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||"loaded"===s||"complete"===s)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{To("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let Ey=null;typeof MozWebSocket<"u"?Ey=MozWebSocket:typeof WebSocket<"u"&&(Ey=WebSocket);let cm=(()=>{class n{constructor(t,r,s,c,d,g,I){this.connId=t,this.applicationId=s,this.appCheckToken=c,this.authToken=d,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Xf(this.connId),this.stats_=rw(r),this.connURL=n.connectionURL_(r,g,I,c,s),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,s,c,d){const g={v:"5"};return typeof location<"u"&&location.hostname&&sk.test(location.hostname)&&(g.r="f"),r&&(g.s=r),s&&(g.ls=s),c&&(g.ac=c),d&&(g.p=d),tw(t,h1,g)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,rc.set("previous_websocket_failure",!0);try{let s;0,this.mySock=new Ey(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const c=s.message||s.data;return c&&this.log_(c),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const c=s.message||s.data;c&&this.log_(c),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const s=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);s&&s.length>1&&parseFloat(s[1])<4.4&&(t=!0)}return!t&&null!==Ey&&!n.forceDisallow_}static previouslyFailed(){return rc.isInMemoryStorage||!0===rc.get("previous_websocket_failure")}markConnectionHealthy(){rc.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const s=er(r);this.onMessage(s)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(re(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const s=this.extractFrameCount_(r);null!==s&&this.appendFrame_(s)}}send(t){this.resetKeepAlive();const r=En(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const s=ek(r,16384);s.length>1&&this.sendString_(String(s.length));for(let c=0;c<s.length;c++)this.sendString_(s[c])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),mk=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[_l,cm]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=cm&&cm.isAvailable();let s=r&&!cm.previouslyFailed();if(t.webSocketOnly&&(r||cs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[cm];else{const c=this.transports_=[];for(const d of n.ALL_TRANSPORTS)d&&d.isAvailable()&&c.push(d);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class T1{constructor(e,t,r,s,c,d,g,I,T,k){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=c,this.onMessage_=d,this.onReady_=g,this.onDisconnect_=I,this.onKill_=T,this.lastSessionId=k,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Xf("c:"+this.id+":"),this.transportManager_=new mk(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=vy(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=_y("t",e),r=_y("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=_y("t",e),r=_y("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=_y("t",e);if("d"in e){const r=e.d;if("h"===t){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?gy("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):gy("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&cs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),vy(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):vy(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(rc.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class A1{put(e,t,r,s){}merge(e,t,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class D1{constructor(e){this.allowedEvents_=e,this.listeners_={},re(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const s=this.getInitialEvent(e);s&&t.apply(r,s)}off(e,t,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let c=0;c<s.length;c++)if(s[c].callback===t&&(!r||r===s[c].context))return void s.splice(c,1)}validateEventType_(e){re(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class lw extends D1{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!nn()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new lw}getInitialEvent(e){return re("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class o{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function a(){return new o("")}function l(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function u(n){return n.pieces_.length-n.pieceNum_}function f(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new o(n.pieces_,e)}function _(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function D(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function V(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new o(e,0)}function H(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof o)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&t.push(r[s])}return new o(t,0)}function W(n){return n.pieceNum_>=n.pieces_.length}function ce(n,e){const t=l(n),r=l(e);if(null===t)return e;if(t===r)return ce(f(n),f(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function _e(n,e){const t=D(n,0),r=D(e,0);for(let s=0;s<t.length&&s<r.length;s++){const c=Ha(t[s],r[s]);if(0!==c)return c}return t.length===r.length?0:t.length<r.length?-1:1}function Oe(n,e){if(u(n)!==u(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function ot(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(u(n)>u(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class Nt{constructor(e,t){this.errorPrefix_=t,this.parts_=D(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=ci(this.parts_[r]);Un(this)}}function Un(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Gn(n))}function Gn(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class Ar extends D1{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Ar}getInitialEvent(e){return re("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Zi=1e3;let P1,um=(()=>{class n extends A1{constructor(t,r,s,c,d,g,I,T){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=s,this.onConnectStatus_=c,this.onServerInfoUpdate_=d,this.authTokenProvider_=g,this.appCheckTokenProvider_=I,this.authOverride_=T,this.id=n.nextPersistentConnectionId_++,this.log_=Xf("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Zi,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,T)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ar.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&lw.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,s){const c=++this.requestNumber_,d={r:c,a:t,b:r};this.log_(En(d)),re(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(d),s&&(this.requestCBHash_[c]=s)}get(t){this.initConnection_();const r=new Ye,c={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:g=>{const I=g.d;"ok"===g.s?r.resolve(I):r.reject(I)}};return this.outstandingGets_.push(c),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,s,c){this.initConnection_();const d=t._queryIdentifier,g=t._path.toString();this.log_("Listen called for "+g+" "+d),this.listens.has(g)||this.listens.set(g,new Map),re(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),re(!this.listens.get(g).has(d),"listen() called twice for same path/queryId.");const I={onComplete:c,hashFn:r,query:t,tag:s};this.listens.get(g).set(d,I),this.connected_&&this.sendListen_(I)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,s=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(s)})}sendListen_(t){const r=t.query,s=r._path.toString(),c=r._queryIdentifier;this.log_("Listen on "+s+" for "+c);const d={p:s};t.tag&&(d.q=r._queryObject,d.t=t.tag),d.h=t.hashFn(),this.sendRequest("q",d,I=>{const T=I.d,k=I.s;n.warnOnListenWarnings_(T,r),(this.listens.get(s)&&this.listens.get(s).get(c))===t&&(this.log_("listen response",I),"ok"!==k&&this.removeListen_(s,c),t.onComplete&&t.onComplete(k,T))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&et(t,"w")){const s=Gt(t,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const c='".indexOn": "'+r._queryParams.getIndex().toString()+'"',d=r._path.toString();cs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${c} at ${d} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||function(n){const e=Dt(n).claims;return"object"==typeof e&&!0===e.admin}(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=function(n){const t=Dt(n).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",s={cred:t};null===this.authOverride_?s.noauth=!0:"object"==typeof this.authOverride_&&(s.authvar=this.authOverride_),this.sendRequest(r,s,c=>{const d=c.s,g=c.d||"error";this.authToken_===t&&("ok"===d?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(d,g))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,s=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,s)})}unlisten(t,r){const s=t._path.toString(),c=t._queryIdentifier;this.log_("Unlisten called for "+s+" "+c),re(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,c)&&this.connected_&&this.sendUnlisten_(s,c,t._queryObject,r)}sendUnlisten_(t,r,s,c){this.log_("Unlisten on "+t+" for "+r);const d={p:t};c&&(d.q=s,d.t=c),this.sendRequest("n",d)}onDisconnectPut(t,r,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,s):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:s})}onDisconnectMerge(t,r,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,s):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:s})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,s,c){const d={p:r,d:s};this.log_("onDisconnect "+t,d),this.sendRequest(t,d,g=>{c&&setTimeout(()=>{c(g.s,g.d)},Math.floor(0))})}put(t,r,s,c){this.putInternal("p",t,r,s,c)}merge(t,r,s,c){this.putInternal("m",t,r,s,c)}putInternal(t,r,s,c,d){this.initConnection_();const g={p:r,d:s};void 0!==d&&(g.h=d),this.outstandingPuts_.push({action:t,request:g,onComplete:c}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,s=this.outstandingPuts_[t].request,c=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,s,d=>{this.log_(r+" response",d),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),c&&c(d.s,d.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,s=>{"ok"!==s.s&&this.log_("reportStats","Error sending stats: "+s.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+En(t));const r=t.r,s=this.requestCBHash_[r];s&&(delete this.requestCBHash_[r],s(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):gy("Unrecognized action received from server: "+En(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){re(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Zi,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Zi,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Zi),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,X.A)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),s=t.onReady_.bind(t),c=t.onRealtimeDisconnect_.bind(t),d=t.id+":"+n.nextConnectionId_++,g=t.lastSessionId;let I=!1,T=null;const k=function(){T?T.close():(I=!0,c())};t.realtime_={close:k,sendRequest:function(ue){re(T,"sendRequest call when we're not connected not allowed."),T.sendRequest(ue)}};const K=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[ue,De]=yield Promise.all([t.authTokenProvider_.getToken(K),t.appCheckTokenProvider_.getToken(K)]);I?To("getToken() completed but was canceled"):(To("getToken() completed. Creating connection."),t.authToken_=ue&&ue.accessToken,t.appCheckToken_=De&&De.token,T=new T1(d,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,s,c,mt=>{cs(mt+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},g))}catch(ue){t.log_("Failed to get token: "+ue),I||(t.repoInfo_.nodeAdmin&&cs(ue),k())}}})()}interrupt(t){To("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){To("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Bn(this.interruptReasons_)&&(this.reconnectDelay_=Zi,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let s;s=r?r.map(d=>r1(d)).join("$"):"default";const c=this.removeListen_(t,s);c&&c.onComplete&&c.onComplete("permission_denied")}removeListen_(t,r){const s=new o(t).toString();let c;if(this.listens.has(s)){const d=this.listens.get(s);c=d.get(r),d.delete(r),0===d.size&&this.listens.delete(s)}else c=void 0;return c}onAuthRevoked_(t,r){To("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){To("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";t["sdk."+r+"."+YC.replace(/\./g,"-")]=1,nn()?t["framework.cordova"]=1:fe()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=lw.getInstance().currentlyOnline();return Bn(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Sr{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Sr(e,t)}}class R1{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Sr(ml,e),s=new Sr(ml,t);return 0!==this.compare(r,s)}minPost(){return Sr.MIN}}class wL extends R1{static get __EMPTY_NODE(){return P1}static set __EMPTY_NODE(e){P1=e}compare(e,t){return Ha(e.name,t.name)}isDefinedOn(e){throw Se("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Sr.MIN}maxPost(){return new Sr(wa,P1)}makePost(e,t){return re("string"==typeof e,"KeyIndex indexValue must always be a string."),new Sr(e,P1)}toString(){return".key"}}const Wu=new wL;class M1{constructor(e,t,r,s,c=null){this.isReverse_=s,this.resultGenerator_=c,this.nodeStack_=[];let d=1;for(;!e.isEmpty();)if(d=t?r(e.key,t):1,s&&(d*=-1),d<0)e=this.isReverse_?e.left:e.right;else{if(0===d){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let bk,Lc=(()=>{class n{constructor(t,r,s,c,d){this.key=t,this.value=r,this.color=null!=s?s:n.RED,this.left=null!=c?c:qa.EMPTY_NODE,this.right=null!=d?d:qa.EMPTY_NODE}copy(t,r,s,c,d){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=s?s:this.color,null!=c?c:this.left,null!=d?d:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,s){let c=this;const d=s(t,c.key);return c=d<0?c.copy(null,null,null,c.left.insert(t,r,s),null):0===d?c.copy(null,r,null,null,null):c.copy(null,null,null,null,c.right.insert(t,r,s)),c.fixUp_()}removeMin_(){if(this.left.isEmpty())return qa.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let s,c;if(s=this,r(t,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(t,r),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),0===r(t,s.key)){if(s.right.isEmpty())return qa.EMPTY_NODE;c=s.right.min_(),s=s.copy(c.key,c.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(t,r))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class qa{constructor(e,t=qa.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new qa(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Lc.BLACK,null,null))}remove(e){return new qa(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Lc.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,s=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(s=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new M1(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new M1(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new M1(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new M1(this.root_,null,this.comparator_,!0,e)}}function G2(n,e){return Ha(n.name,e.name)}function wk(n,e){return Ha(n,e)}qa.EMPTY_NODE=new class H2{copy(e,t,r,s,c){return this}insert(e,t,r){return new Lc(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const bL=function(n){return"number"==typeof n?"number:"+i1(n):"string:"+n},TL=function(n){if(n.isLeafNode()){const e=n.val();re("string"==typeof e||"number"==typeof e||"object"==typeof e&&et(e,".sv"),"Priority must be a string or number.")}else re(n===bk||n.isEmpty(),"priority of unexpected type.");re(n===bk||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let AL,DL,SL,Cy=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,re(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),TL(this.priorityNode_)}static set __childrenNodeConstructor(t){AL=t}static get __childrenNodeConstructor(){return AL}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return W(t)?this:".priority"===l(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const s=l(t);return null===s?r:r.isEmpty()&&".priority"!==s?this:(re(".priority"!==s||1===u(t),".priority must be the last token in a path"),this.updateImmediateChild(s,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(f(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+bL(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?i1(this.value_):this.value_,this.lazyHash_=ZN(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(re(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,s=typeof this.value_,c=n.VALUE_TYPE_ORDER.indexOf(r),d=n.VALUE_TYPE_ORDER.indexOf(s);return re(c>=0,"Unknown leaf type: "+r),re(d>=0,"Unknown leaf type: "+s),c===d?"object"===s?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:d-c}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Ai=new class X2 extends R1{compare(e,t){const r=e.node.getPriority(),s=t.node.getPriority(),c=r.compareTo(s);return 0===c?Ha(e.name,t.name):c}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Sr.MIN}maxPost(){return new Sr(wa,new Cy("[PRIORITY-POST]",SL))}makePost(e,t){const r=DL(e);return new Sr(t,new Cy("[PRIORITY-POST]",r))}toString(){return".priority"}},Q2=Math.log(2);class Y2{constructor(e){this.count=parseInt(Math.log(e+1)/Q2,10),this.current_=this.count-1;const s=(c=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const x1=function(n,e,t,r){n.sort(e);const s=function(I,T){const k=T-I;let B,K;if(0===k)return null;if(1===k)return B=n[I],K=t?t(B):B,new Lc(K,B.node,Lc.BLACK,null,null);{const ue=parseInt(k/2,10)+I,De=s(I,ue),mt=s(ue+1,T);return B=n[ue],K=t?t(B):B,new Lc(K,B.node,Lc.BLACK,De,mt)}},g=function(I){let T=null,k=null,B=n.length;const K=function(De,mt){const ht=B-De,Zt=B;B-=De;const ln=s(ht+1,Zt),Xt=n[ht],vn=t?t(Xt):Xt;ue(new Lc(vn,Xt.node,mt,null,ln))},ue=function(De){T?(T.left=De,T=De):(k=De,T=De)};for(let De=0;De<I.count;++De){const mt=I.nextBitIsOne(),ht=Math.pow(2,I.count-(De+1));mt?K(ht,Lc.BLACK):(K(ht,Lc.BLACK),K(ht,Lc.RED))}return k}(new Y2(n.length));return new qa(r||e,g)};let Tk;const wy={};class sh{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return re(wy&&Ai,"ChildrenNode.ts has not been loaded"),Tk=Tk||new sh({".priority":wy},{".priority":Ai}),Tk}get(e){const t=Gt(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof qa?t:null}hasIndex(e){return et(this.indexSet_,e.toString())}addIndex(e,t){re(e!==Wu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const c=t.getIterator(Sr.Wrap);let g,d=c.getNext();for(;d;)s=s||e.isDefinedOn(d.node),r.push(d),d=c.getNext();g=s?x1(r,e.getCompare()):wy;const I=e.toString(),T=Object.assign({},this.indexSet_);T[I]=e;const k=Object.assign({},this.indexes_);return k[I]=g,new sh(k,T)}addToIndexes(e,t){const r=ir(this.indexes_,(s,c)=>{const d=Gt(this.indexSet_,c);if(re(d,"Missing index implementation for "+c),s===wy){if(d.isDefinedOn(e.node)){const g=[],I=t.getIterator(Sr.Wrap);let T=I.getNext();for(;T;)T.name!==e.name&&g.push(T),T=I.getNext();return g.push(e),x1(g,d.getCompare())}return wy}{const g=t.get(e.name);let I=s;return g&&(I=I.remove(new Sr(e.name,g))),I.insert(e,e.node)}});return new sh(r,this.indexSet_)}removeFromIndexes(e,t){const r=ir(this.indexes_,s=>{if(s===wy)return s;{const c=t.get(e.name);return c?s.remove(new Sr(e.name,c)):s}});return new sh(r,this.indexSet_)}}let uw,fr=(()=>{class n{constructor(t,r,s){this.children_=t,this.priorityNode_=r,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&TL(this.priorityNode_),this.children_.isEmpty()&&re(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return uw||(uw=new n(new qa(wk),null,sh.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||uw}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?uw:r}}getChild(t){const r=l(t);return null===r?this:this.getImmediateChild(r).getChild(f(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if(re(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const s=new Sr(t,r);let c,d;r.isEmpty()?(c=this.children_.remove(t),d=this.indexMap_.removeFromIndexes(s,this.children_)):(c=this.children_.insert(t,r),d=this.indexMap_.addToIndexes(s,this.children_));const g=c.isEmpty()?uw:this.priorityNode_;return new n(c,g,d)}}updateChild(t,r){const s=l(t);if(null===s)return r;{re(".priority"!==l(t)||1===u(t),".priority must be the last token in a path");const c=this.getImmediateChild(s).updateChild(f(t),r);return this.updateImmediateChild(s,c)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let s=0,c=0,d=!0;if(this.forEachChild(Ai,(g,I)=>{r[g]=I.val(t),s++,d&&n.INTEGER_REGEXP_.test(g)?c=Math.max(c,Number(g)):d=!1}),!t&&d&&c<2*s){const g=[];for(const I in r)g[I]=r[I];return g}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+bL(this.getPriority().val())+":"),this.forEachChild(Ai,(r,s)=>{const c=s.hash();""!==c&&(t+=":"+r+":"+c)}),this.lazyHash_=""===t?"":ZN(t)}return this.lazyHash_}getPredecessorChildName(t,r,s){const c=this.resolveIndex_(s);if(c){const d=c.getPredecessorKey(new Sr(t,r));return d?d.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const s=r.minKey();return s&&s.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Sr(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const s=r.maxKey();return s&&s.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Sr(r,this.children_.get(r)):null}forEachChild(t,r){const s=this.resolveIndex_(t);return s?s.inorderTraversal(c=>r(c.name,c.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const s=this.resolveIndex_(r);if(s)return s.getIteratorFrom(t,c=>c);{const c=this.children_.getIteratorFrom(t.name,Sr.Wrap);let d=c.peek();for(;null!=d&&r.compare(d,t)<0;)c.getNext(),d=c.peek();return c}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const s=this.resolveIndex_(r);if(s)return s.getReverseIteratorFrom(t,c=>c);{const c=this.children_.getReverseIteratorFrom(t.name,Sr.Wrap);let d=c.peek();for(;null!=d&&r.compare(d,t)>0;)c.getNext(),d=c.peek();return c}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===dw?-1:0}withIndex(t){if(t===Wu||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Wu||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const s=this.getIterator(Ai),c=r.getIterator(Ai);let d=s.getNext(),g=c.getNext();for(;d&&g;){if(d.name!==g.name||!d.node.equals(g.node))return!1;d=s.getNext(),g=c.getNext()}return null===d&&null===g}return!1}return!1}}resolveIndex_(t){return t===Wu?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const dw=new class J2 extends fr{constructor(){super(new qa(wk),fr.EMPTY_NODE,sh.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return fr.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Sr,{MIN:{value:new Sr(ml,fr.EMPTY_NODE)},MAX:{value:new Sr(wa,dw)}}),wL.__EMPTY_NODE=fr.EMPTY_NODE,Cy.__childrenNodeConstructor=fr,function W2(n){bk=n}(dw),function K2(n){SL=n}(dw);const Z2=!0;function eo(n,e=null){if(null===n)return fr.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),re(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Cy(n,eo(e));if(n instanceof Array||!Z2){let t=fr.EMPTY_NODE;return Lo(n,(r,s)=>{if(et(n,r)&&"."!==r.substring(0,1)){const c=eo(s);(c.isLeafNode()||!c.isEmpty())&&(t=t.updateImmediateChild(r,c))}}),t.updatePriority(eo(e))}{const t=[];let r=!1;if(Lo(n,(d,g)=>{if("."!==d.substring(0,1)){const I=eo(g);I.isEmpty()||(r=r||!I.getPriority().isEmpty(),t.push(new Sr(d,I)))}}),0===t.length)return fr.EMPTY_NODE;const c=x1(t,G2,d=>d.name,wk);if(r){const d=x1(t,Ai.getCompare());return new fr(c,eo(e),new sh({".priority":d},{".priority":Ai}))}return new fr(c,eo(e),sh.Default)}}!function q2(n){DL=n}(eo);class Ak extends R1{constructor(e){super(),this.indexPath_=e,re(!W(e)&&".priority"!==l(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),s=this.extractChild(t.node),c=r.compareTo(s);return 0===c?Ha(e.name,t.name):c}makePost(e,t){const r=eo(e),s=fr.EMPTY_NODE.updateChild(this.indexPath_,r);return new Sr(t,s)}maxPost(){const e=fr.EMPTY_NODE.updateChild(this.indexPath_,dw);return new Sr(wa,e)}toString(){return D(this.indexPath_,0).join("/")}}const Dk=new class eU extends R1{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Ha(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Sr.MIN}maxPost(){return Sr.MAX}makePost(e,t){const r=eo(e);return new Sr(t,r)}toString(){return".value"}};function RL(n){return{type:"value",snapshotNode:n}}function by(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function hw(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function fw(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Sk{constructor(e){this.index_=e}updateChild(e,t,r,s,c,d){re(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const g=e.getImmediateChild(t);return g.getChild(s).equals(r.getChild(s))&&g.isEmpty()===r.isEmpty()||(null!=d&&(r.isEmpty()?e.hasChild(t)?d.trackChildChange(hw(t,g)):re(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):g.isEmpty()?d.trackChildChange(by(t,r)):d.trackChildChange(fw(t,r,g))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Ai,(s,c)=>{t.hasChild(s)||r.trackChildChange(hw(s,c))}),t.isLeafNode()||t.forEachChild(Ai,(s,c)=>{if(e.hasChild(s)){const d=e.getImmediateChild(s);d.equals(c)||r.trackChildChange(fw(s,c,d))}else r.trackChildChange(by(s,c))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?fr.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class pw{constructor(e){this.indexedFilter_=new Sk(e.getIndex()),this.index_=e.getIndex(),this.startPost_=pw.getStartPost_(e),this.endPost_=pw.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,s,c,d){return this.matches(new Sr(t,r))||(r=fr.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,s,c,d)}updateFullNode(e,t,r){t.isLeafNode()&&(t=fr.EMPTY_NODE);let s=t.withIndex(this.index_);s=s.updatePriority(fr.EMPTY_NODE);const c=this;return t.forEachChild(Ai,(d,g)=>{c.matches(new Sr(d,g))||(s=s.updateImmediateChild(d,fr.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class nU{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new pw(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,s,c,d){return this.rangedFilter_.matches(new Sr(t,r))||(r=fr.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,s,c,d):this.fullLimitUpdateChild_(e,t,r,c,d)}updateFullNode(e,t,r){let s;if(t.isLeafNode()||t.isEmpty())s=fr.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let c;s=fr.EMPTY_NODE.withIndex(this.index_),c=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let d=0;for(;c.hasNext()&&d<this.limit_;){const g=c.getNext();if(this.withinDirectionalStart(g)){if(!this.withinDirectionalEnd(g))break;s=s.updateImmediateChild(g.name,g.node),d++}}}else{let c;s=t.withIndex(this.index_),s=s.updatePriority(fr.EMPTY_NODE),c=this.reverse_?s.getReverseIterator(this.index_):s.getIterator(this.index_);let d=0;for(;c.hasNext();){const g=c.getNext();d<this.limit_&&this.withinDirectionalStart(g)&&this.withinDirectionalEnd(g)?d++:s=s.updateImmediateChild(g.name,fr.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,s,c){let d;if(this.reverse_){const B=this.index_.getCompare();d=(K,ue)=>B(ue,K)}else d=this.index_.getCompare();const g=e;re(g.numChildren()===this.limit_,"");const I=new Sr(t,r),T=this.reverse_?g.getFirstChild(this.index_):g.getLastChild(this.index_),k=this.rangedFilter_.matches(I);if(g.hasChild(t)){const B=g.getImmediateChild(t);let K=s.getChildAfterChild(this.index_,T,this.reverse_);for(;null!=K&&(K.name===t||g.hasChild(K.name));)K=s.getChildAfterChild(this.index_,K,this.reverse_);const ue=null==K?1:d(K,I);if(k&&!r.isEmpty()&&ue>=0)return null!=c&&c.trackChildChange(fw(t,r,B)),g.updateImmediateChild(t,r);{null!=c&&c.trackChildChange(hw(t,B));const mt=g.updateImmediateChild(t,fr.EMPTY_NODE);return null!=K&&this.rangedFilter_.matches(K)?(null!=c&&c.trackChildChange(by(K.name,K.node)),mt.updateImmediateChild(K.name,K.node)):mt}}return r.isEmpty()?e:k&&d(T,I)>=0?(null!=c&&(c.trackChildChange(hw(T.name,T.node)),c.trackChildChange(by(t,r))),g.updateImmediateChild(t,r).updateImmediateChild(T.name,fr.EMPTY_NODE)):e}}class N1{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ai}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return re(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return re(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ml}hasEnd(){return this.endSet_}getIndexEndValue(){return re(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return re(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:wa}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return re(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ai}copy(){const e=new N1;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Rk(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function Pk(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function k1(n,e){const t=n.copy();return t.index_=e,t}function PL(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Ai?t="$priority":n.index_===Dk?t="$value":n.index_===Wu?t="$key":(re(n.index_ instanceof Ak,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=En(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=En(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+En(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=En(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+En(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function ML(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Ai&&(e.i=n.index_.toString()),e}class O1 extends A1{constructor(e,t,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=Xf("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(re(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,s){const c=e._path.toString();this.log_("Listen called for "+c+" "+e._queryIdentifier);const d=O1.getListenId_(e,r),g={};this.listens_[d]=g;const I=PL(e._queryParams);this.restRequest_(c+".json",I,(T,k)=>{let B=k;if(404===T&&(B=null,T=null),null===T&&this.onDataUpdate_(c,B,!1,r),Gt(this.listens_,d)===g){let K;K=T?401===T?"permission_denied":"rest_error:"+T:"ok",s(K,null)}})}unlisten(e,t){const r=O1.getListenId_(e,t);delete this.listens_[r]}get(e){const t=PL(e._queryParams),r=e._path.toString(),s=new Ye;return this.restRequest_(r+".json",t,(c,d)=>{let g=d;404===c&&(g=null,c=null),null===c?(this.onDataUpdate_(r,g,!1,null),s.resolve(g)):s.reject(new Error(g))}),s.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,c])=>{s&&s.accessToken&&(t.auth=s.accessToken),c&&c.token&&(t.ac=c.token);const d=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Ln(t);this.log_("Sending REST request for "+d);const g=new XMLHttpRequest;g.onreadystatechange=()=>{if(r&&4===g.readyState){this.log_("REST Response for "+d+" received. status:",g.status,"response:",g.responseText);let I=null;if(g.status>=200&&g.status<300){try{I=er(g.responseText)}catch{cs("Failed to parse JSON response for "+d+": "+g.responseText)}r(null,I)}else 401!==g.status&&404!==g.status&&cs("Got unsuccessful REST response for "+d+" Status: "+g.status),r(g.status);r=null}},g.open("GET",d,!0),g.send()})}}class lU{constructor(){this.rootNode_=fr.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function F1(){return{value:null,children:new Map}}function Ty(n,e,t){if(W(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=l(e);n.children.has(r)||n.children.set(r,F1()),Ty(n.children.get(r),e=f(e),t)}}function Mk(n,e){if(W(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Ai,(r,s)=>{Ty(n,new o(r),s)}),Mk(n,e)}}if(n.children.size>0){const t=l(e);return e=f(e),n.children.has(t)&&Mk(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function xk(n,e,t){null!==n.value?t(e,n.value):function cU(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,s)=>{xk(s,new o(e.toString()+"/"+r),t)})}class uU{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Lo(this.last_,(r,s)=>{t[r]=t[r]-s}),this.last_=e,t}}class fU{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new uU(e);const r=1e4+2e4*Math.random();vy(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Lo(e,(s,c)=>{c>0&&et(this.statsToReport_,s)&&(t[s]=c,r=!0)}),r&&this.server_.reportStats(t),vy(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var qu=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(qu||{});function Ok(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class L1{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=qu.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(W(this.path)){if(null!=this.affectedTree.value)return re(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new o(e));return new L1(a(),t,this.revert)}}return re(l(this.path)===e,"operationForChild called for unrelated child."),new L1(f(this.path),this.affectedTree,this.revert)}}class gw{constructor(e,t){this.source=e,this.path=t,this.type=qu.LISTEN_COMPLETE}operationForChild(e){return W(this.path)?new gw(this.source,a()):new gw(this.source,f(this.path))}}class dm{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=qu.OVERWRITE}operationForChild(e){return W(this.path)?new dm(this.source,a(),this.snap.getImmediateChild(e)):new dm(this.source,f(this.path),this.snap)}}class Ay{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=qu.MERGE}operationForChild(e){if(W(this.path)){const t=this.children.subtree(new o(e));return t.isEmpty()?null:t.value?new dm(this.source,a(),t.value):new Ay(this.source,a(),t)}return re(l(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ay(this.source,f(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Qf{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(W(e))return this.isFullyInitialized()&&!this.filtered_;const t=l(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class pU{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function mw(n,e,t,r,s,c){const d=r.filter(g=>g.type===t);d.sort((g,I)=>function _U(n,e,t){if(null==e.childName||null==t.childName)throw Se("Should only compare child_ events.");const r=new Sr(e.childName,e.snapshotNode),s=new Sr(t.childName,t.snapshotNode);return n.index_.compare(r,s)}(n,g,I)),d.forEach(g=>{const I=function mU(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,g,c);s.forEach(T=>{T.respondsTo(g.type)&&e.push(T.createEvent(I,n.query_))})})}function V1(n,e){return{eventCache:n,serverCache:e}}function _w(n,e,t,r){return V1(new Qf(e,t,r),n.serverCache)}function NL(n,e,t,r){return V1(n.eventCache,new Qf(e,t,r))}function U1(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function hm(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Fk;class Di{constructor(e,t=(()=>(Fk||(Fk=new qa(n1)),Fk))()){this.value=e,this.children=t}static fromObject(e){let t=new Di(null);return Lo(e,(r,s)=>{t=t.set(new o(r),s)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:a(),value:this.value};if(W(e))return null;{const r=l(e),s=this.children.get(r);if(null!==s){const c=s.findRootMostMatchingPathAndValue(f(e),t);return null!=c?{path:H(new o(r),c.path),value:c.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(W(e))return this;{const t=l(e),r=this.children.get(t);return null!==r?r.subtree(f(e)):new Di(null)}}set(e,t){if(W(e))return new Di(t,this.children);{const r=l(e),c=(this.children.get(r)||new Di(null)).set(f(e),t),d=this.children.insert(r,c);return new Di(this.value,d)}}remove(e){if(W(e))return this.children.isEmpty()?new Di(null):new Di(null,this.children);{const t=l(e),r=this.children.get(t);if(r){const s=r.remove(f(e));let c;return c=s.isEmpty()?this.children.remove(t):this.children.insert(t,s),null===this.value&&c.isEmpty()?new Di(null):new Di(this.value,c)}return this}}get(e){if(W(e))return this.value;{const t=l(e),r=this.children.get(t);return r?r.get(f(e)):null}}setTree(e,t){if(W(e))return t;{const r=l(e),c=(this.children.get(r)||new Di(null)).setTree(f(e),t);let d;return d=c.isEmpty()?this.children.remove(r):this.children.insert(r,c),new Di(this.value,d)}}fold(e){return this.fold_(a(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((s,c)=>{r[s]=c.fold_(H(e,s),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,a(),t)}findOnPath_(e,t,r){const s=!!this.value&&r(t,this.value);if(s)return s;if(W(e))return null;{const c=l(e),d=this.children.get(c);return d?d.findOnPath_(f(e),H(t,c),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,a(),t)}foreachOnPath_(e,t,r){if(W(e))return this;{this.value&&r(t,this.value);const s=l(e),c=this.children.get(s);return c?c.foreachOnPath_(f(e),H(t,s),r):new Di(null)}}foreach(e){this.foreach_(a(),e)}foreach_(e,t){this.children.inorderTraversal((r,s)=>{s.foreach_(H(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Vc{constructor(e){this.writeTree_=e}static empty(){return new Vc(new Di(null))}}function vw(n,e,t){if(W(e))return new Vc(new Di(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const s=r.path;let c=r.value;const d=ce(s,e);return c=c.updateChild(d,t),new Vc(n.writeTree_.set(s,c))}{const s=new Di(t),c=n.writeTree_.setTree(e,s);return new Vc(c)}}}function Lk(n,e,t){let r=n;return Lo(t,(s,c)=>{r=vw(r,H(e,s),c)}),r}function kL(n,e){if(W(e))return Vc.empty();{const t=n.writeTree_.setTree(e,new Di(null));return new Vc(t)}}function Vk(n,e){return null!=fm(n,e)}function fm(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(ce(t.path,e)):null}function OL(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Ai,(r,s)=>{e.push(new Sr(r,s))}):n.writeTree_.children.inorderTraversal((r,s)=>{null!=s.value&&e.push(new Sr(r,s.value))}),e}function Yf(n,e){if(W(e))return n;{const t=fm(n,e);return new Vc(null!=t?new Di(t):n.writeTree_.subtree(e))}}function Uk(n){return n.writeTree_.isEmpty()}function Dy(n,e){return FL(a(),n.writeTree_,e)}function FL(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((s,c)=>{".priority"===s?(re(null!==c.value,"Priority writes must always be leaf nodes"),r=c.value):t=FL(H(n,s),c,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(H(n,".priority"),r)),t}}function B1(n,e){return $L(e,n)}function wU(n,e){if(n.snap)return ot(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&ot(H(n.path,t),e))return!0;return!1}function TU(n){return n.visible}function LL(n,e,t){let r=Vc.empty();for(let s=0;s<n.length;++s){const c=n[s];if(e(c)){const d=c.path;let g;if(c.snap)ot(t,d)?(g=ce(t,d),r=vw(r,g,c.snap)):ot(d,t)&&(g=ce(d,t),r=vw(r,a(),c.snap.getChild(g)));else{if(!c.children)throw Se("WriteRecord should have .snap or .children");if(ot(t,d))g=ce(t,d),r=Lk(r,g,c.children);else if(ot(d,t))if(g=ce(d,t),W(g))r=Lk(r,a(),c.children);else{const I=Gt(c.children,l(g));if(I){const T=I.getChild(f(g));r=vw(r,a(),T)}}}}}return r}function VL(n,e,t,r,s){if(r||s){const c=Yf(n.visibleWrites,e);return!s&&Uk(c)?t:s||null!=t||Vk(c,a())?Dy(LL(n.allWrites,function(T){return(T.visible||s)&&(!r||!~r.indexOf(T.writeId))&&(ot(T.path,e)||ot(e,T.path))},e),t||fr.EMPTY_NODE):null}{const c=fm(n.visibleWrites,e);if(null!=c)return c;{const d=Yf(n.visibleWrites,e);return Uk(d)?t:null!=t||Vk(d,a())?Dy(d,t||fr.EMPTY_NODE):null}}}function $1(n,e,t,r){return VL(n.writeTree,n.treePath,e,t,r)}function Bk(n,e){return function AU(n,e,t){let r=fr.EMPTY_NODE;const s=fm(n.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(Ai,(c,d)=>{r=r.updateImmediateChild(c,d)}),r;if(t){const c=Yf(n.visibleWrites,e);return t.forEachChild(Ai,(d,g)=>{const I=Dy(Yf(c,new o(d)),g);r=r.updateImmediateChild(d,I)}),OL(c).forEach(d=>{r=r.updateImmediateChild(d.name,d.node)}),r}return OL(Yf(n.visibleWrites,e)).forEach(d=>{r=r.updateImmediateChild(d.name,d.node)}),r}(n.writeTree,n.treePath,e)}function UL(n,e,t,r){return function DU(n,e,t,r,s){re(r||s,"Either existingEventSnap or existingServerSnap must exist");const c=H(e,t);if(Vk(n.visibleWrites,c))return null;{const d=Yf(n.visibleWrites,c);return Uk(d)?s.getChild(t):Dy(d,s.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function j1(n,e){return function RU(n,e){return fm(n.visibleWrites,e)}(n.writeTree,H(n.treePath,e))}function $k(n,e,t){return function SU(n,e,t,r){const s=H(e,t),c=fm(n.visibleWrites,s);return null!=c?c:r.isCompleteForChild(t)?Dy(Yf(n.visibleWrites,s),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function BL(n,e){return $L(H(n.treePath,e),n.writeTree)}function $L(n,e){return{treePath:n,writeTree:e}}class NU{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;re("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),re(".priority"!==r,"Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const c=s.type;if("child_added"===t&&"child_removed"===c)this.changeMap.set(r,fw(r,e.snapshotNode,s.snapshotNode));else if("child_removed"===t&&"child_added"===c)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===c)this.changeMap.set(r,hw(r,s.oldSnap));else if("child_changed"===t&&"child_added"===c)this.changeMap.set(r,by(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==c)throw Se("Illegal combination of changes: "+e+" occurred after "+s);this.changeMap.set(r,fw(r,e.snapshotNode,s.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const jL=new class kU{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class jk{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Qf(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return $k(this.writes_,e,r)}}getChildAfterChild(e,t,r){const s=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:hm(this.viewCache_),c=function xU(n,e,t,r,s,c){return function PU(n,e,t,r,s,c,d){let g;const I=Yf(n.visibleWrites,e),T=fm(I,a());if(null!=T)g=T;else{if(null==t)return[];g=Dy(I,t)}if(g=g.withIndex(d),g.isEmpty()||g.isLeafNode())return[];{const k=[],B=d.getCompare(),K=c?g.getReverseIteratorFrom(r,d):g.getIteratorFrom(r,d);let ue=K.getNext();for(;ue&&k.length<s;)0!==B(ue,r)&&k.push(ue),ue=K.getNext();return k}}(n.writeTree,n.treePath,e,t,r,s,c)}(this.writes_,s,t,1,r,e);return 0===c.length?null:c[0]}}function zL(n,e,t,r,s,c){const d=e.eventCache;if(null!=j1(r,t))return e;{let g,I;if(W(t))if(re(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const T=hm(e),B=Bk(r,T instanceof fr?T:fr.EMPTY_NODE);g=n.filter.updateFullNode(e.eventCache.getNode(),B,c)}else{const T=$1(r,hm(e));g=n.filter.updateFullNode(e.eventCache.getNode(),T,c)}else{const T=l(t);if(".priority"===T){re(1===u(t),"Can't have a priority with additional path components");const k=d.getNode();I=e.serverCache.getNode();const B=UL(r,t,k,I);g=null!=B?n.filter.updatePriority(k,B):d.getNode()}else{const k=f(t);let B;if(d.isCompleteForChild(T)){I=e.serverCache.getNode();const K=UL(r,t,d.getNode(),I);B=null!=K?d.getNode().getImmediateChild(T).updateChild(k,K):d.getNode().getImmediateChild(T)}else B=$k(r,T,e.serverCache);g=null!=B?n.filter.updateChild(d.getNode(),T,B,k,s,c):d.getNode()}}return _w(e,g,d.isFullyInitialized()||W(t),n.filter.filtersNodes())}}function z1(n,e,t,r,s,c,d,g){const I=e.serverCache;let T;const k=d?n.filter:n.filter.getIndexedFilter();if(W(t))T=k.updateFullNode(I.getNode(),r,null);else if(k.filtersNodes()&&!I.isFiltered()){const ue=I.getNode().updateChild(t,r);T=k.updateFullNode(I.getNode(),ue,null)}else{const ue=l(t);if(!I.isCompleteForPath(t)&&u(t)>1)return e;const De=f(t),ht=I.getNode().getImmediateChild(ue).updateChild(De,r);T=".priority"===ue?k.updatePriority(I.getNode(),ht):k.updateChild(I.getNode(),ue,ht,De,jL,null)}const B=NL(e,T,I.isFullyInitialized()||W(t),k.filtersNodes());return zL(n,B,t,s,new jk(s,B,c),g)}function zk(n,e,t,r,s,c,d){const g=e.eventCache;let I,T;const k=new jk(s,e,c);if(W(t))T=n.filter.updateFullNode(e.eventCache.getNode(),r,d),I=_w(e,T,!0,n.filter.filtersNodes());else{const B=l(t);if(".priority"===B)T=n.filter.updatePriority(e.eventCache.getNode(),r),I=_w(e,T,g.isFullyInitialized(),g.isFiltered());else{const K=f(t),ue=g.getNode().getImmediateChild(B);let De;if(W(K))De=r;else{const mt=k.getCompleteChild(B);De=null!=mt?".priority"===_(K)&&mt.getChild(V(K)).isEmpty()?mt:mt.updateChild(K,r):fr.EMPTY_NODE}I=ue.equals(De)?e:_w(e,n.filter.updateChild(g.getNode(),B,De,K,k,d),g.isFullyInitialized(),n.filter.filtersNodes())}}return I}function HL(n,e){return n.eventCache.isCompleteForChild(e)}function GL(n,e,t){return t.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function Hk(n,e,t,r,s,c,d,g){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let T,I=e;T=W(t)?r:new Di(null).setTree(t,r);const k=e.serverCache.getNode();return T.children.inorderTraversal((B,K)=>{if(k.hasChild(B)){const De=GL(0,e.serverCache.getNode().getImmediateChild(B),K);I=z1(n,I,new o(B),De,s,c,d,g)}}),T.children.inorderTraversal((B,K)=>{const ue=!e.serverCache.isCompleteForChild(B)&&null===K.value;if(!k.hasChild(B)&&!ue){const mt=GL(0,e.serverCache.getNode().getImmediateChild(B),K);I=z1(n,I,new o(B),mt,s,c,d,g)}}),I}class zU{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new Sk(r.getIndex()),c=function rU(n){return n.loadsAllData()?new Sk(n.getIndex()):n.hasLimit()?new nU(n):new pw(n)}(r);this.processor_=function OU(n){return{filter:n}}(c);const d=t.serverCache,g=t.eventCache,I=s.updateFullNode(fr.EMPTY_NODE,d.getNode(),null),T=c.updateFullNode(fr.EMPTY_NODE,g.getNode(),null),k=new Qf(I,d.isFullyInitialized(),s.filtersNodes()),B=new Qf(T,g.isFullyInitialized(),c.filtersNodes());this.viewCache_=V1(B,k),this.eventGenerator_=new pU(this.query_)}get query(){return this.query_}}function WU(n,e){const t=hm(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!W(e)&&!t.getImmediateChild(l(e)).isEmpty())?t.getChild(e):null}function WL(n){return 0===n.eventRegistrations_.length}function qL(n,e,t){const r=[];if(t){re(null==e,"A cancel should cancel all event registrations.");const s=n.query._path;n.eventRegistrations_.forEach(c=>{const d=c.createCancelEvent(t,s);d&&r.push(d)})}if(e){let s=[];for(let c=0;c<n.eventRegistrations_.length;++c){const d=n.eventRegistrations_[c];if(d.matches(e)){if(e.hasAnyCallback()){s=s.concat(n.eventRegistrations_.slice(c+1));break}}else s.push(d)}n.eventRegistrations_=s}else n.eventRegistrations_=[];return r}function KL(n,e,t,r){e.type===qu.MERGE&&null!==e.source.queryId&&(re(hm(n.viewCache_),"We should always have a full cache before handling merges"),re(U1(n.viewCache_),"Missing event cache, even though we have a server cache"));const s=n.viewCache_,c=function LU(n,e,t,r,s){const c=new NU;let d,g;if(t.type===qu.OVERWRITE){const T=t;T.source.fromUser?d=zk(n,e,T.path,T.snap,r,s,c):(re(T.source.fromServer,"Unknown source."),g=T.source.tagged||e.serverCache.isFiltered()&&!W(T.path),d=z1(n,e,T.path,T.snap,r,s,g,c))}else if(t.type===qu.MERGE){const T=t;T.source.fromUser?d=function UU(n,e,t,r,s,c,d){let g=e;return r.foreach((I,T)=>{const k=H(t,I);HL(e,l(k))&&(g=zk(n,g,k,T,s,c,d))}),r.foreach((I,T)=>{const k=H(t,I);HL(e,l(k))||(g=zk(n,g,k,T,s,c,d))}),g}(n,e,T.path,T.children,r,s,c):(re(T.source.fromServer,"Unknown source."),g=T.source.tagged||e.serverCache.isFiltered(),d=Hk(n,e,T.path,T.children,r,s,g,c))}else if(t.type===qu.ACK_USER_WRITE){const T=t;d=T.revert?function jU(n,e,t,r,s,c){let d;if(null!=j1(r,t))return e;{const g=new jk(r,e,s),I=e.eventCache.getNode();let T;if(W(t)||".priority"===l(t)){let k;if(e.serverCache.isFullyInitialized())k=$1(r,hm(e));else{const B=e.serverCache.getNode();re(B instanceof fr,"serverChildren would be complete if leaf node"),k=Bk(r,B)}T=n.filter.updateFullNode(I,k,c)}else{const k=l(t);let B=$k(r,k,e.serverCache);null==B&&e.serverCache.isCompleteForChild(k)&&(B=I.getImmediateChild(k)),T=null!=B?n.filter.updateChild(I,k,B,f(t),g,c):e.eventCache.getNode().hasChild(k)?n.filter.updateChild(I,k,fr.EMPTY_NODE,f(t),g,c):I,T.isEmpty()&&e.serverCache.isFullyInitialized()&&(d=$1(r,hm(e)),d.isLeafNode()&&(T=n.filter.updateFullNode(T,d,c)))}return d=e.serverCache.isFullyInitialized()||null!=j1(r,a()),_w(e,T,d,n.filter.filtersNodes())}}(n,e,T.path,r,s,c):function BU(n,e,t,r,s,c,d){if(null!=j1(s,t))return e;const g=e.serverCache.isFiltered(),I=e.serverCache;if(null!=r.value){if(W(t)&&I.isFullyInitialized()||I.isCompleteForPath(t))return z1(n,e,t,I.getNode().getChild(t),s,c,g,d);if(W(t)){let T=new Di(null);return I.getNode().forEachChild(Wu,(k,B)=>{T=T.set(new o(k),B)}),Hk(n,e,t,T,s,c,g,d)}return e}{let T=new Di(null);return r.foreach((k,B)=>{const K=H(t,k);I.isCompleteForPath(K)&&(T=T.set(k,I.getNode().getChild(K)))}),Hk(n,e,t,T,s,c,g,d)}}(n,e,T.path,T.affectedTree,r,s,c)}else{if(t.type!==qu.LISTEN_COMPLETE)throw Se("Unknown operation type: "+t.type);d=function $U(n,e,t,r,s){const c=e.serverCache;return zL(n,NL(e,c.getNode(),c.isFullyInitialized()||W(t),c.isFiltered()),t,r,jL,s)}(n,e,t.path,r,c)}const I=c.getChanges();return function VU(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),c=U1(n);(t.length>0||!n.eventCache.isFullyInitialized()||s&&!r.getNode().equals(c)||!r.getNode().getPriority().equals(c.getPriority()))&&t.push(RL(U1(e)))}}(e,d,I),{viewCache:d,changes:I}}(n.processor_,s,e,t,r);return function FU(n,e){re(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),re(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,c.viewCache),re(c.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=c.viewCache,XL(n,c.changes,c.viewCache.eventCache.getNode(),null)}function XL(n,e,t,r){return function gU(n,e,t,r){const s=[],c=[];return e.forEach(d=>{"child_changed"===d.type&&n.index_.indexedValueChanged(d.oldSnap,d.snapshotNode)&&c.push(function tU(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(d.childName,d.snapshotNode))}),mw(n,s,"child_removed",e,r,t),mw(n,s,"child_added",e,r,t),mw(n,s,"child_moved",c,r,t),mw(n,s,"child_changed",e,r,t),mw(n,s,"value",e,r,t),s}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let H1,W1;class QL{constructor(){this.views=new Map}}function Gk(n,e,t,r){const s=e.source.queryId;if(null!==s){const c=n.views.get(s);return re(null!=c,"SyncTree gave us an op for an invalid query."),KL(c,e,t,r)}{let c=[];for(const d of n.views.values())c=c.concat(KL(d,e,t,r));return c}}function YL(n,e,t,r,s){const d=n.views.get(e._queryIdentifier);if(!d){let g=$1(t,s?r:null),I=!1;g?I=!0:r instanceof fr?(g=Bk(t,r),I=!1):(g=fr.EMPTY_NODE,I=!1);const T=V1(new Qf(g,I,!1),new Qf(r,s,!1));return new zU(e,T)}return d}function JL(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Jf(n,e){let t=null;for(const r of n.views.values())t=t||WU(r,e);return t}function ZL(n,e){return e._queryParams.loadsAllData()?G1(n):n.views.get(e._queryIdentifier)}function eV(n,e){return null!=ZL(n,e)}function Zf(n){return null!=G1(n)}function G1(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let nB=1;class tV{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Di(null),this.pendingWriteTree_=function MU(){return{visibleWrites:Vc.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Wk(n,e,t,r,s){return function yU(n,e,t,r,s){re(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===s&&(s=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:s}),s&&(n.visibleWrites=vw(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,s),s?Sy(n,new dm({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function ep(n,e,t=!1){const r=function EU(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function CU(n,e){const t=n.allWrites.findIndex(g=>g.writeId===e);re(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let s=r.visible,c=!1,d=n.allWrites.length-1;for(;s&&d>=0;){const g=n.allWrites[d];g.visible&&(d>=t&&wU(g,r.path)?s=!1:ot(r.path,g.path)&&(c=!0)),d--}return!!s&&(c?(function bU(n){n.visibleWrites=LL(n.allWrites,TU,a()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=kL(n.visibleWrites,r.path):Lo(r.children,I=>{n.visibleWrites=kL(n.visibleWrites,H(r.path,I))}),!0))}(n.pendingWriteTree_,e)){let c=new Di(null);return null!=r.snap?c=c.set(a(),!0):Lo(r.children,d=>{c=c.set(new o(d),!0)}),Sy(n,new L1(r.path,c,t))}return[]}function yw(n,e,t){return Sy(n,new dm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function q1(n,e,t,r,s=!1){const c=e._path,d=n.syncPointTree_.get(c);let g=[];if(d&&("default"===e._queryIdentifier||eV(d,e))){const I=function ZU(n,e,t,r){const s=e._queryIdentifier,c=[];let d=[];const g=Zf(n);if("default"===s)for(const[I,T]of n.views.entries())d=d.concat(qL(T,t,r)),WL(T)&&(n.views.delete(I),T.query._queryParams.loadsAllData()||c.push(T.query));else{const I=n.views.get(s);I&&(d=d.concat(qL(I,t,r)),WL(I)&&(n.views.delete(s),I.query._queryParams.loadsAllData()||c.push(I.query)))}return g&&!Zf(n)&&c.push(new(function QU(){return re(H1,"Reference.ts has not been loaded"),H1}())(e._repo,e._path)),{removed:c,events:d}}(d,e,t,r);(function YU(n){return 0===n.views.size})(d)&&(n.syncPointTree_=n.syncPointTree_.remove(c));const T=I.removed;if(g=I.events,!s){const k=-1!==T.findIndex(K=>K._queryParams.loadsAllData()),B=n.syncPointTree_.findOnPath(c,(K,ue)=>Zf(ue));if(k&&!B){const K=n.syncPointTree_.subtree(c);if(!K.isEmpty()){const ue=function cB(n){return n.fold((e,t,r)=>{if(t&&Zf(t))return[G1(t)];{let s=[];return t&&(s=JL(t)),Lo(r,(c,d)=>{s=s.concat(d)}),s}})}(K);for(let De=0;De<ue.length;++De){const mt=ue[De],ht=mt.query,Zt=oV(n,mt);n.listenProvider_.startListening(Ew(ht),Iw(n,ht),Zt.hashFn,Zt.onComplete)}}}!B&&T.length>0&&!r&&(k?n.listenProvider_.stopListening(Ew(e),null):T.forEach(K=>{const ue=n.queryToTagMap.get(X1(K));n.listenProvider_.stopListening(Ew(K),ue)}))}!function uB(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const s=X1(r),c=n.queryToTagMap.get(s);n.queryToTagMap.delete(s),n.tagToQueryMap.delete(c)}}}(n,T)}return g}function nV(n,e,t,r){const s=Kk(n,r);if(null!=s){const c=Xk(s),d=c.path,g=c.queryId,I=ce(d,e);return Qk(n,d,new dm(Ok(g),I,t))}return[]}function qk(n,e,t,r=!1){const s=e._path;let c=null,d=!1;n.syncPointTree_.foreachOnPath(s,(K,ue)=>{const De=ce(K,s);c=c||Jf(ue,De),d=d||Zf(ue)});let I,g=n.syncPointTree_.get(s);g?(d=d||Zf(g),c=c||Jf(g,a())):(g=new QL,n.syncPointTree_=n.syncPointTree_.set(s,g)),null!=c?I=!0:(I=!1,c=fr.EMPTY_NODE,n.syncPointTree_.subtree(s).foreachChild((ue,De)=>{const mt=Jf(De,a());mt&&(c=c.updateImmediateChild(ue,mt))}));const T=eV(g,e);if(!T&&!e._queryParams.loadsAllData()){const K=X1(e);re(!n.queryToTagMap.has(K),"View does not exist, but we have a tag");const ue=function dB(){return nB++}();n.queryToTagMap.set(K,ue),n.tagToQueryMap.set(ue,K)}let B=function JU(n,e,t,r,s,c){const d=YL(n,e,r,s,c);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,d),function qU(n,e){n.eventRegistrations_.push(e)}(d,t),function KU(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Ai,(c,d)=>{r.push(by(c,d))}),t.isFullyInitialized()&&r.push(RL(t.getNode())),XL(n,r,t.getNode(),e)}(d,t)}(g,e,t,B1(n.pendingWriteTree_,s),c,I);if(!T&&!d&&!r){const K=ZL(g,e);B=B.concat(function hB(n,e,t){const r=e._path,s=Iw(n,e),c=oV(n,t),d=n.listenProvider_.startListening(Ew(e),s,c.hashFn,c.onComplete),g=n.syncPointTree_.subtree(r);if(s)re(!Zf(g.value),"If we're adding a query, it shouldn't be shadowed");else{const I=g.fold((T,k,B)=>{if(!W(T)&&k&&Zf(k))return[G1(k).query];{let K=[];return k&&(K=K.concat(JL(k).map(ue=>ue.query))),Lo(B,(ue,De)=>{K=K.concat(De)}),K}});for(let T=0;T<I.length;++T){const k=I[T];n.listenProvider_.stopListening(Ew(k),Iw(n,k))}}return d}(n,e,K))}return B}function K1(n,e,t){const s=n.pendingWriteTree_,c=n.syncPointTree_.findOnPath(e,(d,g)=>{const T=Jf(g,ce(d,e));if(T)return T});return VL(s,e,c,t,!0)}function Sy(n,e){return rV(e,n.syncPointTree_,null,B1(n.pendingWriteTree_,a()))}function rV(n,e,t,r){if(W(n.path))return iV(n,e,t,r);{const s=e.get(a());null==t&&null!=s&&(t=Jf(s,a()));let c=[];const d=l(n.path),g=n.operationForChild(d),I=e.children.get(d);if(I&&g){const T=t?t.getImmediateChild(d):null,k=BL(r,d);c=c.concat(rV(g,I,T,k))}return s&&(c=c.concat(Gk(s,n,r,t))),c}}function iV(n,e,t,r){const s=e.get(a());null==t&&null!=s&&(t=Jf(s,a()));let c=[];return e.children.inorderTraversal((d,g)=>{const I=t?t.getImmediateChild(d):null,T=BL(r,d),k=n.operationForChild(d);k&&(c=c.concat(iV(k,g,I,T)))}),s&&(c=c.concat(Gk(s,n,r,t))),c}function oV(n,e){const t=e.query,r=Iw(n,t);return{hashFn:()=>(function HU(n){return n.viewCache_.serverCache.getNode()}(e)||fr.EMPTY_NODE).hash(),onComplete:s=>{if("ok"===s)return r?function sB(n,e,t){const r=Kk(n,t);if(r){const s=Xk(r),c=s.path,d=s.queryId,g=ce(c,e);return Qk(n,c,new gw(Ok(d),g))}return[]}(n,t._path,r):function oB(n,e){return Sy(n,new gw({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const c=function s1(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(s,t);return q1(n,t,null,c)}}}}function Iw(n,e){const t=X1(e);return n.queryToTagMap.get(t)}function X1(n){return n._path.toString()+"$"+n._queryIdentifier}function Kk(n,e){return n.tagToQueryMap.get(e)}function Xk(n){const e=n.indexOf("$");return re(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new o(n.substr(0,e))}}function Qk(n,e,t){const r=n.syncPointTree_.get(e);return re(r,"Missing sync point for query tag that we're tracking"),Gk(r,t,B1(n.pendingWriteTree_,e),null)}function Ew(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function tB(){return re(W1,"Reference.ts has not been loaded"),W1}())(n._repo,n._path):n}class Yk{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Yk(t)}node(){return this.node_}}class Jk{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=H(this.path_,e);return new Jk(this.syncTree_,t)}node(){return K1(this.syncTree_,this.path_)}}const fB=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},sV=function(n,e,t){return n&&"object"==typeof n?(re(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?pB(n[".sv"],e,t):"object"==typeof n[".sv"]?gB(n[".sv"],e):void re(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},pB=function(n,e,t){if("timestamp"===n)return t.timestamp;re(!1,"Unexpected server value: "+n)},gB=function(n,e,t){n.hasOwnProperty("increment")||re(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&re(!1,"Unexpected increment value: "+r);const s=e.node();if(re(null!==s&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const d=s.getValue();return"number"!=typeof d?r:d+r},aV=function(n,e,t,r){return eO(e,new Jk(t,n),r)},Zk=function(n,e,t){return eO(n,new Yk(e),t)};function eO(n,e,t){const r=n.getPriority().val(),s=sV(r,e.getImmediateChild(".priority"),t);let c;if(n.isLeafNode()){const d=n,g=sV(d.getValue(),e,t);return g!==d.getValue()||s!==d.getPriority().val()?new Cy(g,eo(s)):n}{const d=n;return c=d,s!==d.getPriority().val()&&(c=c.updatePriority(new Cy(s))),d.forEachChild(Ai,(g,I)=>{const T=eO(I,e.getImmediateChild(g),t);T!==I&&(c=c.updateImmediateChild(g,T))}),c}}class tO{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function Q1(n,e){let t=e instanceof o?e:new o(e),r=n,s=l(t);for(;null!==s;){const c=Gt(r.node.children,s)||{children:{},childCount:0};r=new tO(s,r,c),t=f(t),s=l(t)}return r}function pm(n){return n.node.value}function nO(n,e){n.node.value=e,rO(n)}function lV(n){return n.node.childCount>0}function Y1(n,e){Lo(n.node.children,(t,r)=>{e(new tO(t,n,r))})}function cV(n,e,t,r){t&&!r&&e(n),Y1(n,s=>{cV(s,e,!0,r)}),t&&r&&e(n)}function Cw(n){return new o(null===n.parent?n.name:Cw(n.parent)+"/"+n.name)}function rO(n){null!==n.parent&&function vB(n,e,t){const r=function mB(n){return void 0===pm(n)&&!lV(n)}(t),s=et(n.node.children,e);r&&s?(delete n.node.children[e],n.node.childCount--,rO(n)):!r&&!s&&(n.node.children[e]=t.node,n.node.childCount++,rO(n))}(n.parent,n.name,n)}const yB=/[\[\].#$\/\u0000-\u001F\u007F]/,IB=/[\[\].#$\u0000-\u001F\u007F]/,iO=10485760,J1=function(n){return"string"==typeof n&&0!==n.length&&!yB.test(n)},uV=function(n){return"string"==typeof n&&0!==n.length&&!IB.test(n)},ww=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!my(n)||n&&"object"==typeof n&&et(n,".sv")},Ku=function(n,e,t,r){r&&void 0===e||bw(mr(n,"value"),e,t)},bw=function(n,e,t){const r=t instanceof o?new Nt(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Gn(r));if("function"==typeof e)throw new Error(n+"contains a function "+Gn(r)+" with contents = "+e.toString());if(my(e))throw new Error(n+"contains "+e.toString()+" "+Gn(r));if("string"==typeof e&&e.length>iO/3&&ci(e)>iO)throw new Error(n+"contains a string greater than "+iO+" utf8 bytes "+Gn(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let s=!1,c=!1;if(Lo(e,(d,g)=>{if(".value"===d)s=!0;else if(".priority"!==d&&".sv"!==d&&(c=!0,!J1(d)))throw new Error(n+" contains an invalid key ("+d+") "+Gn(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Ut(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=ci(e),Un(n)})(r,d),bw(n,g,r),function bt(n){const e=n.parts_.pop();n.byteLength_-=ci(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),s&&c)throw new Error(n+' contains ".value" child '+Gn(r)+" in addition to actual children.")}},dV=function(n,e,t,r){if(r&&void 0===e)return;const s=mr(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(s+" must be an object containing the children to replace.");const c=[];Lo(e,(d,g)=>{const I=new o(d);if(bw(s,g,H(t,I)),".priority"===_(I)&&!ww(g))throw new Error(s+"contains an invalid value for '"+I.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");c.push(I)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const c=D(r);for(let d=0;d<c.length;d++)if((".priority"!==c[d]||d!==c.length-1)&&!J1(c[d]))throw new Error(n+"contains an invalid key ("+c[d]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(_e);let s=null;for(t=0;t<e.length;t++){if(r=e[t],null!==s&&ot(s,r))throw new Error(n+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(s,c)},oO=function(n,e,t){if(!t||void 0!==e){if(my(e))throw new Error(mr(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ww(e))throw new Error(mr(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Tw=function(n,e,t,r){if(!(r&&void 0===t||J1(t)))throw new Error(mr(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Aw=function(n,e,t,r){if(!(r&&void 0===t||uV(t)))throw new Error(mr(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},wB=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Aw(n,e,t,r)},oc=function(n,e){if(".info"===l(e))throw new Error(n+" failed = Can't modify data under /.info/")},hV=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!J1(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),uV(n)}(t))throw new Error(mr(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class bB{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Z1(n,e){let t=null;for(let r=0;r<e.length;r++){const s=e[r],c=s.getPath();null!==t&&!Oe(c,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:c}),t.events.push(s)}t&&n.eventLists_.push(t)}function fV(n,e,t){Z1(n,t),pV(n,r=>Oe(r,e))}function vl(n,e,t){Z1(n,t),pV(n,r=>ot(r,e)||ot(e,r))}function pV(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const s=n.eventLists_[r];s&&(e(s.path)?(TB(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function TB(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Fc&&To("event: "+t.toString()),sm(r)}}}const gV="repo_interrupt",AB=25;class DB{constructor(e,t,r,s){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new bB,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=F1(),this.transactionQueueTree_=new tO,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function mV(n){const t=n.infoData_.getNode(new o(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Dw(n){return fB({timestamp:mV(n)})}function _V(n,e,t,r,s){n.dataUpdateCount++;const c=new o(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let d=[];if(s)if(r){const I=ir(t,T=>eo(T));d=function aB(n,e,t,r){const s=Kk(n,r);if(s){const c=Xk(s),d=c.path,g=c.queryId,I=ce(d,e),T=Di.fromObject(t);return Qk(n,d,new Ay(Ok(g),I,T))}return[]}(n.serverSyncTree_,c,I,s)}else{const I=eo(t);d=nV(n.serverSyncTree_,c,I,s)}else if(r){const I=ir(t,T=>eo(T));d=function iB(n,e,t){const r=Di.fromObject(t);return Sy(n,new Ay({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,c,I)}else{const I=eo(t);d=yw(n.serverSyncTree_,c,I)}let g=c;d.length>0&&(g=Py(n,c)),vl(n.eventQueue_,g,d)}function vV(n,e){sO(n,"connected",e),!1===e&&function xB(n){Ry(n,"onDisconnectEvents");const e=Dw(n),t=F1();xk(n.onDisconnect_,a(),(s,c)=>{const d=aV(s,c,n.serverSyncTree_,e);Ty(t,s,d)});let r=[];xk(t,a(),(s,c)=>{r=r.concat(yw(n.serverSyncTree_,s,c));const d=uO(n,s);Py(n,d)}),n.onDisconnect_=F1(),vl(n.eventQueue_,a(),r)}(n)}function sO(n,e,t){const r=new o("/.info/"+e),s=eo(t);n.infoData_.updateSnapshot(r,s);const c=yw(n.infoSyncTree_,r,s);vl(n.eventQueue_,r,c)}function eR(n){return n.nextWriteId_++}function aO(n,e,t,r,s){Ry(n,"set",{path:e.toString(),value:t,priority:r});const c=Dw(n),d=eo(t,r),g=K1(n.serverSyncTree_,e),I=Zk(d,g,c),T=eR(n),k=Wk(n.serverSyncTree_,e,I,T,!0);Z1(n.eventQueue_,k),n.server_.put(e.toString(),d.val(!0),(K,ue)=>{const De="ok"===K;De||cs("set at "+e+" failed: "+K);const mt=ep(n.serverSyncTree_,T,!De);vl(n.eventQueue_,e,mt),tp(0,s,K,ue)});const B=uO(n,e);Py(n,B),vl(n.eventQueue_,B,[])}function NB(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,s)=>{"ok"===r&&Mk(n.onDisconnect_,e),tp(0,t,r,s)})}function yV(n,e,t,r){const s=eo(t);n.server_.onDisconnectPut(e.toString(),s.val(!0),(c,d)=>{"ok"===c&&Ty(n.onDisconnect_,e,s),tp(0,r,c,d)})}function lO(n,e,t){let r;r=".info"===l(e._path)?q1(n.infoSyncTree_,e,t):q1(n.serverSyncTree_,e,t),fV(n.eventQueue_,e._path,r)}function IV(n){n.persistentConnection_&&n.persistentConnection_.interrupt(gV)}function Ry(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),To(t,...e)}function tp(n,e,t,r){e&&sm(()=>{if("ok"===t)e(null);else{const s=(t||"error").toUpperCase();let c=s;r&&(c+=": "+r);const d=new Error(c);d.code=s,e(d)}})}function cO(n,e,t){return K1(n.serverSyncTree_,e,t)||fr.EMPTY_NODE}function tR(n,e=n.transactionQueueTree_){if(e||nR(n,e),pm(e)){const t=CV(n,e);re(t.length>0,"Sending zero length transaction queue"),t.every(s=>0===s.status)&&function UB(n,e,t){const r=t.map(T=>T.currentWriteId),s=cO(n,e,r);let c=s;const d=s.hash();for(let T=0;T<t.length;T++){const k=t[T];re(0===k.status,"tryToSendTransactionQueue_: items in queue should all be run."),k.status=1,k.retryCount++;const B=ce(e,k.path);c=c.updateChild(B,k.currentOutputSnapshotRaw)}const g=c.val(!0),I=e;n.server_.put(I.toString(),g,T=>{Ry(n,"transaction put response",{path:I.toString(),status:T});let k=[];if("ok"===T){const B=[];for(let K=0;K<t.length;K++)t[K].status=2,k=k.concat(ep(n.serverSyncTree_,t[K].currentWriteId)),t[K].onComplete&&B.push(()=>t[K].onComplete(null,!0,t[K].currentOutputSnapshotResolved)),t[K].unwatcher();nR(n,Q1(n.transactionQueueTree_,e)),tR(n,n.transactionQueueTree_),vl(n.eventQueue_,e,k);for(let K=0;K<B.length;K++)sm(B[K])}else{if("datastale"===T)for(let B=0;B<t.length;B++)t[B].status=3===t[B].status?4:0;else{cs("transaction at "+I.toString()+" failed: "+T);for(let B=0;B<t.length;B++)t[B].status=4,t[B].abortReason=T}Py(n,e)}},d)}(n,Cw(e),t)}else lV(e)&&Y1(e,t=>{tR(n,t)})}function Py(n,e){const t=EV(n,e),r=Cw(t);return function BB(n,e,t){if(0===e.length)return;const r=[];let s=[];const d=e.filter(g=>0===g.status).map(g=>g.currentWriteId);for(let g=0;g<e.length;g++){const I=e[g],T=ce(t,I.path);let B,k=!1;if(re(null!==T,"rerunTransactionsUnderNode_: relativePath should not be null."),4===I.status)k=!0,B=I.abortReason,s=s.concat(ep(n.serverSyncTree_,I.currentWriteId,!0));else if(0===I.status)if(I.retryCount>=AB)k=!0,B="maxretry",s=s.concat(ep(n.serverSyncTree_,I.currentWriteId,!0));else{const K=cO(n,I.path,d);I.currentInputSnapshot=K;const ue=e[g].update(K.val());if(void 0!==ue){bw("transaction failed: Data returned ",ue,I.path);let De=eo(ue);"object"==typeof ue&&null!=ue&&et(ue,".priority")||(De=De.updatePriority(K.getPriority()));const ht=I.currentWriteId,Zt=Dw(n),ln=Zk(De,K,Zt);I.currentOutputSnapshotRaw=De,I.currentOutputSnapshotResolved=ln,I.currentWriteId=eR(n),d.splice(d.indexOf(ht),1),s=s.concat(Wk(n.serverSyncTree_,I.path,ln,I.currentWriteId,I.applyLocally)),s=s.concat(ep(n.serverSyncTree_,ht,!0))}else k=!0,B="nodata",s=s.concat(ep(n.serverSyncTree_,I.currentWriteId,!0))}vl(n.eventQueue_,t,s),s=[],k&&(e[g].status=2,setTimeout(e[g].unwatcher,Math.floor(0)),e[g].onComplete&&r.push("nodata"===B?()=>e[g].onComplete(null,!1,e[g].currentInputSnapshot):()=>e[g].onComplete(new Error(B),!1,null)))}nR(n,n.transactionQueueTree_);for(let g=0;g<r.length;g++)sm(r[g]);tR(n,n.transactionQueueTree_)}(n,CV(n,t),r),r}function EV(n,e){let t,r=n.transactionQueueTree_;for(t=l(e);null!==t&&void 0===pm(r);)r=Q1(r,t),t=l(e=f(e));return r}function CV(n,e){const t=[];return wV(n,e,t),t.sort((r,s)=>r.order-s.order),t}function wV(n,e,t){const r=pm(e);if(r)for(let s=0;s<r.length;s++)t.push(r[s]);Y1(e,s=>{wV(n,s,t)})}function nR(n,e){const t=pm(e);if(t){let r=0;for(let s=0;s<t.length;s++)2!==t[s].status&&(t[r]=t[s],r++);t.length=r,nO(e,t.length>0?t:void 0)}Y1(e,r=>{nR(n,r)})}function uO(n,e){const t=Cw(EV(n,e)),r=Q1(n.transactionQueueTree_,e);return function _B(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,s=>{dO(n,s)}),dO(n,r),cV(r,s=>{dO(n,s)}),t}function dO(n,e){const t=pm(e);if(t){const r=[];let s=[],c=-1;for(let d=0;d<t.length;d++)3===t[d].status||(1===t[d].status?(re(c===d-1,"All SENT items should be at beginning of queue."),c=d,t[d].status=3,t[d].abortReason="set"):(re(0===t[d].status,"Unexpected transaction status in abort"),t[d].unwatcher(),s=s.concat(ep(n.serverSyncTree_,t[d].currentWriteId,!0)),t[d].onComplete&&r.push(t[d].onComplete.bind(null,new Error("set"),!1,null))));-1===c?nO(e,void 0):t.length=c+1,vl(n.eventQueue_,Cw(e),s);for(let d=0;d<r.length;d++)sm(r[d])}}const hO=function(n,e){const t=zB(n),r=t.namespace;return"firebase.com"===t.domain&&ic(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&ic("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&cs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Iy(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new o(t.pathString)}},zB=function(n){let e="",t="",r="",s="",c="",d=!0,g="https",I=443;if("string"==typeof n){let T=n.indexOf("//");T>=0&&(g=n.substring(0,T-1),n=n.substring(T+2));let k=n.indexOf("/");-1===k&&(k=n.length);let B=n.indexOf("?");-1===B&&(B=n.length),e=n.substring(0,Math.min(k,B)),k<B&&(s=function $B(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let s=t[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}(n.substring(k,B)));const K=function jB(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):cs(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,B)));T=e.indexOf(":"),T>=0?(d="https"===g||"wss"===g,I=parseInt(e.substring(T+1),10)):T=e.length;const ue=e.slice(0,T);if("localhost"===ue.toLowerCase())t="localhost";else if(ue.split(".").length<=2)t=ue;else{const De=e.indexOf(".");r=e.substring(0,De).toLowerCase(),t=e.substring(De+1),c=r}"ns"in K&&(c=K.ns)}return{host:e,port:I,domain:t,subdomain:r,secure:d,scheme:g,pathString:s,namespace:c}},bV="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",HB=function(){let n=0;const e=[];return function(t){const r=t===n;let s;n=t;const c=new Array(8);for(s=7;s>=0;s--)c[s]=bV.charAt(t%64),t=Math.floor(t/64);re(0===t,"Cannot push at time == 0");let d=c.join("");if(r){for(s=11;s>=0&&63===e[s];s--)e[s]=0;e[s]++}else for(s=0;s<12;s++)e[s]=Math.floor(64*Math.random());for(s=0;s<12;s++)d+=bV.charAt(e[s]);return re(20===d.length,"nextPushId: Length should be 20."),d}}();class TV{constructor(e,t,r,s){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+En(this.snapshot.exportVal())}}class AV{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class fO{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return re(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class DV{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new Ye;return NB(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){oc("OnDisconnect.remove",this._path);const e=new Ye;return yV(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){oc("OnDisconnect.set",this._path),Ku("OnDisconnect.set",e,this._path,!1);const t=new Ye;return yV(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){oc("OnDisconnect.setWithPriority",this._path),Ku("OnDisconnect.setWithPriority",e,this._path,!1),oO("OnDisconnect.setWithPriority",t,!1);const r=new Ye;return function kB(n,e,t,r,s){const c=eo(t,r);n.server_.onDisconnectPut(e.toString(),c.val(!0),(d,g)=>{"ok"===d&&Ty(n.onDisconnect_,e,c),tp(0,s,d,g)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){oc("OnDisconnect.update",this._path),dV("OnDisconnect.update",e,this._path,!1);const t=new Ye;return function OB(n,e,t,r){if(Bn(t))return To("onDisconnect().update() called with empty data.  Don't do anything."),void tp(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(s,c)=>{"ok"===s&&Lo(t,(d,g)=>{const I=eo(g);Ty(n.onDisconnect_,H(e,d),I)}),tp(0,r,s,c)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Ka{constructor(e,t,r,s){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=s}get key(){return W(this._path)?null:_(this._path)}get ref(){return new sc(this._repo,this._path)}get _queryIdentifier(){const e=ML(this._queryParams),t=r1(e);return"{}"===t?"default":t}get _queryObject(){return ML(this._queryParams)}isEqual(e){if(!((e=xt(e))instanceof Ka))return!1;const t=this._repo===e._repo,r=Oe(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function b(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function rR(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function np(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Wu){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",s="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==ml)throw new Error(r);if("string"!=typeof e)throw new Error(s)}if(n.hasEnd()){if(n.getIndexEndName()!==wa)throw new Error(r);if("string"!=typeof t)throw new Error(s)}}else if(n.getIndex()===Ai){if(null!=e&&!ww(e)||null!=t&&!ww(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(re(n.getIndex()instanceof Ak||n.getIndex()===Dk,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function iR(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class sc extends Ka{constructor(e,t){super(e,t,new N1,!1)}get parent(){const e=V(this._path);return null===e?null:new sc(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class gm{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new o(e),r=mm(this.ref,e);return new gm(this._node.getChild(t),r,Ai)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,s)=>e(new gm(s,mm(this.ref,r),Ai)))}hasChild(e){const t=new o(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function SV(n,e){return(n=xt(n))._checkNotDeleted("ref"),void 0!==e?mm(n._root,e):n._root}function RV(n,e){(n=xt(n))._checkNotDeleted("refFromURL");const t=hO(e,n._repo.repoInfo_.nodeAdmin);hV("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&ic("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),SV(n,t.path.toString())}function mm(n,e){return null===l((n=xt(n))._path)?wB("child","path",e,!1):Aw("child","path",e,!1),new sc(n._repo,H(n._path,e))}function pO(n,e){n=xt(n),oc("set",n._path),Ku("set",e,n._path,!1);const t=new Ye;return aO(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function XB(n,e){dV("update",e,n._path,!1);const t=new Ye;return function MB(n,e,t,r){Ry(n,"update",{path:e.toString(),value:t});let s=!0;const c=Dw(n),d={};if(Lo(t,(g,I)=>{s=!1,d[g]=aV(H(e,g),eo(I),n.serverSyncTree_,c)}),s)To("update() called with empty data.  Don't do anything."),tp(0,r,"ok",void 0);else{const g=eR(n),I=function rB(n,e,t,r){!function IU(n,e,t,r){re(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=Lk(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const s=Di.fromObject(t);return Sy(n,new Ay({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,s))}(n.serverSyncTree_,e,d,g);Z1(n.eventQueue_,I),n.server_.merge(e.toString(),t,(T,k)=>{const B="ok"===T;B||cs("update at "+e+" failed: "+T);const K=ep(n.serverSyncTree_,g,!B),ue=K.length>0?Py(n,e):e;vl(n.eventQueue_,ue,K),tp(0,r,T,k)}),Lo(t,T=>{const k=uO(n,H(e,T));Py(n,k)}),vl(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function QB(n){n=xt(n);const e=new fO(()=>{}),t=new Sw(e);return function PB(n,e,t){const r=function lB(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(T,k)=>{const B=ce(T,t);r=r||Jf(k,B)});let s=n.syncPointTree_.get(t);s?r=r||Jf(s,a()):(s=new QL,n.syncPointTree_=n.syncPointTree_.set(t,s));const c=null!=r,d=c?new Qf(r,!0,!1):null;return function GU(n){return U1(n.viewCache_)}(YL(s,e,B1(n.pendingWriteTree_,e._path),c?d.getNode():fr.EMPTY_NODE,c))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(s=>{const c=eo(s).withIndex(e._queryParams.getIndex());let d;if(qk(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())d=yw(n.serverSyncTree_,e._path,c);else{const g=Iw(n.serverSyncTree_,e);d=nV(n.serverSyncTree_,e._path,c,g)}return vl(n.eventQueue_,e._path,d),q1(n.serverSyncTree_,e,t,null,!0),c},s=>(Ry(n,"get for query "+En(e)+" failed: "+s),Promise.reject(new Error(s))))}(n._repo,n,t).then(r=>new gm(r,new sc(n._repo,n._path),n._queryParams.getIndex()))}class Sw{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new TV("value",this,new gm(e.snapshotNode,new sc(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new AV(this,e,t):null}matches(e){return e instanceof Sw&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class oR{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new AV(this,e,t):null}createEvent(e,t){re(null!=e.childName,"Child events should have a childName.");const r=mm(new sc(t._repo,t._path),e.childName),s=t._queryParams.getIndex();return new TV(e.type,this,new gm(e.snapshotNode,r,s),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof oR&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Rw(n,e,t,r,s){let c;if("object"==typeof r&&(c=void 0,s=r),"function"==typeof r&&(c=r),s&&s.onlyOnce){const I=t,T=(k,B)=>{lO(n._repo,n,g),I(k,B)};T.userCallback=t.userCallback,T.context=t.context,t=T}const d=new fO(t,c||void 0),g="value"===e?new Sw(d):new oR(e,d);return function FB(n,e,t){let r;r=".info"===l(e._path)?qk(n.infoSyncTree_,e,t):qk(n.serverSyncTree_,e,t),fV(n.eventQueue_,e._path,r)}(n._repo,n,g),()=>lO(n._repo,n,g)}function gO(n,e,t,r){return Rw(n,"value",e,t,r)}function PV(n,e,t,r){return Rw(n,"child_added",e,t,r)}function MV(n,e,t,r){return Rw(n,"child_changed",e,t,r)}function xV(n,e,t,r){return Rw(n,"child_moved",e,t,r)}function NV(n,e,t,r){return Rw(n,"child_removed",e,t,r)}function kV(n,e,t){let r=null;const s=t?new fO(t):null;"value"===e?r=new Sw(s):e&&(r=new oR(e,s)),lO(n._repo,n,r)}class Uc{}class OV extends Uc{constructor(e,t){super(),this._value=e,this._key=t,this.type="endAt"}_apply(e){Ku("endAt",this._value,e._path,!0);const t=Pk(e._queryParams,this._value,this._key);if(iR(t),np(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ka(e._repo,e._path,t,e._orderByCalled)}}class JB extends Uc{constructor(e,t){super(),this._value=e,this._key=t,this.type="endBefore"}_apply(e){Ku("endBefore",this._value,e._path,!1);const t=function aU(n,e,t){let r;return r=Pk(n,e,n.index_===Wu||t?t:ml),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(iR(t),np(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ka(e._repo,e._path,t,e._orderByCalled)}}class FV extends Uc{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAt"}_apply(e){Ku("startAt",this._value,e._path,!0);const t=Rk(e._queryParams,this._value,this._key);if(iR(t),np(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ka(e._repo,e._path,t,e._orderByCalled)}}class t4 extends Uc{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAfter"}_apply(e){Ku("startAfter",this._value,e._path,!1);const t=function sU(n,e,t){let r;return r=Rk(n,e,n.index_===Wu||t?t:wa),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(iR(t),np(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ka(e._repo,e._path,t,e._orderByCalled)}}class r4 extends Uc{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ka(e._repo,e._path,function iU(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class o4 extends Uc{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ka(e._repo,e._path,function oU(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class a4 extends Uc{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){rR(e,"orderByChild");const t=new o(this._path);if(W(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new Ak(t),s=k1(e._queryParams,r);return np(s),new Ka(e._repo,e._path,s,!0)}}class c4 extends Uc{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){rR(e,"orderByKey");const t=k1(e._queryParams,Wu);return np(t),new Ka(e._repo,e._path,t,!0)}}class d4 extends Uc{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){rR(e,"orderByPriority");const t=k1(e._queryParams,Ai);return np(t),new Ka(e._repo,e._path,t,!0)}}class f4 extends Uc{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){rR(e,"orderByValue");const t=k1(e._queryParams,Dk);return np(t),new Ka(e._repo,e._path,t,!0)}}class g4 extends Uc{constructor(e,t){super(),this._value=e,this._key=t,this.type="equalTo"}_apply(e){if(Ku("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new OV(this._value,this._key)._apply(new FV(this._value,this._key)._apply(e))}}function Bc(n,...e){let t=xt(n);for(const r of e)t=r._apply(t);return t}(function XU(n){re(!H1,"__referenceConstructor has already been defined"),H1=n})(sc),function eB(n){re(!W1,"__referenceConstructor has already been defined"),W1=n}(sc);const mO={};function _O(n,e,t,r,s){let c=r||n.options.databaseURL;void 0===c&&(n.options.projectId||ic("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),To("Using default host for project ",n.options.projectId),c=`${n.options.projectId}-default-rtdb.firebaseio.com`);let I,T,d=hO(c,s),g=d.repoInfo;typeof process<"u"&&process.env&&(T=process.env.FIREBASE_DATABASE_EMULATOR_HOST),T?(I=!0,c=`http://${T}?ns=${g.namespace}`,d=hO(c,s),g=d.repoInfo):I=!d.repoInfo.secure;const k=s&&I?new yy(yy.OWNER):new ik(n.name,n.options,e);hV("Invalid Firebase Database URL",d),W(d.path)||ic("Database URL must point to the root of a Firebase Database (not including a child path).");const B=function I4(n,e,t,r){let s=mO[e.name];s||(s={},mO[e.name]=s);let c=s[n.toURLString()];return c&&ic("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),c=new DB(n,false,t,r),s[n.toURLString()]=c,c}(g,n,k,new rk(n.name,t));return new C4(B,n)}class C4{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function SB(n,e,t){if(n.stats_=rw(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new O1(n.repoInfo_,(r,s,c,d)=>{_V(n,r,s,c,d)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>vV(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{En(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new um(n.repoInfo_,e,(r,s,c,d)=>{_V(n,r,s,c,d)},r=>{vV(n,r)},r=>{!function RB(n,e){Lo(e,(t,r)=>{sO(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function pL(n,e){const t=n.toString();return p1[t]||(p1[t]=e()),p1[t]}(n.repoInfo_,()=>new fU(n.stats_,n.server_)),n.infoData_=new lU,n.infoSyncTree_=new tV({startListening:(r,s,c,d)=>{let g=[];const I=n.infoData_.getNode(r._path);return I.isEmpty()||(g=yw(n.infoSyncTree_,r._path,I),setTimeout(()=>{d("ok")},0)),g},stopListening:()=>{}}),sO(n,"connected",!1),n.serverSyncTree_=new tV({startListening:(r,s,c,d)=>(n.server_.listen(r,c,s,(g,I)=>{const T=d(g,I);vl(n.eventQueue_,r._path,T)}),[]),stopListening:(r,s)=>{n.server_.unlisten(r,s)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new sc(this._repo,a())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function y4(n,e){const t=mO[e];(!t||t[n.key]!==n)&&ic(`Database ${e}(${n.repoInfo_}) has already been deleted.`),IV(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&ic("Cannot call "+e+" on a deleted database.")}}function VV(){mk.IS_TRANSPORT_INITIALIZED&&cs("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function w4(){VV(),_l.forceDisallow()}function b4(){VV(),cm.forceDisallow(),_l.forceAllow()}function D4(n,e){JC(n,e)}const R4={".sv":"timestamp"};class x4{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}um.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},um.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function S4(n){YS(Er),Et(new ar("database",(e,{instanceIdentifier:t})=>_O(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),Cr(JN,"1.0.5",n),Cr(JN,"1.0.5","esm2017")}();const F4=new qn("@firebase/database-compat"),BV=function(n){F4.warn("FIREBASE WARNING: "+n)};class U4{constructor(e){this._delegate=e}cancel(e){jt("OnDisconnect.cancel",0,1,arguments.length),tr("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){jt("OnDisconnect.remove",0,1,arguments.length),tr("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){jt("OnDisconnect.set",1,2,arguments.length),tr("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),s=>t(s)),r}setWithPriority(e,t,r){jt("OnDisconnect.setWithPriority",2,3,arguments.length),tr("OnDisconnect.setWithPriority","onComplete",r,!0);const s=this._delegate.setWithPriority(e,t);return r&&s.then(()=>r(null),c=>r(c)),s}update(e,t){if(jt("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const s={};for(let c=0;c<e.length;++c)s[""+c]=e[c];e=s,BV("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}tr("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),s=>t(s)),r}}class B4{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return jt("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class rp{constructor(e,t){this._database=e,this._delegate=t}val(){return jt("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return jt("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return jt("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return jt("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return jt("DataSnapshot.child",0,1,arguments.length),e=String(e),Aw("DataSnapshot.child","path",e,!1),new rp(this._database,this._delegate.child(e))}hasChild(e){return jt("DataSnapshot.hasChild",1,1,arguments.length),Aw("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return jt("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return jt("DataSnapshot.forEach",1,1,arguments.length),tr("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new rp(this._database,t)))}hasChildren(){return jt("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return jt("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return jt("DataSnapshot.ref",0,0,arguments.length),new yl(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Ts{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,s){var c;jt("Query.on",2,4,arguments.length),tr("Query.on","callback",t,!1);const d=Ts.getCancelAndContextArgs_("Query.on",r,s),g=(T,k)=>{t.call(d.context,new rp(this.database,T),k)};g.userCallback=t,g.context=d.context;const I=null===(c=d.cancel)||void 0===c?void 0:c.bind(d.context);switch(e){case"value":return gO(this._delegate,g,I),t;case"child_added":return PV(this._delegate,g,I),t;case"child_removed":return NV(this._delegate,g,I),t;case"child_changed":return MV(this._delegate,g,I),t;case"child_moved":return xV(this._delegate,g,I),t;default:throw new Error(mr("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if(jt("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(mr("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),tr("Query.off","callback",t,!0),Vo("Query.off","context",r,!0),t){const s=()=>{};s.userCallback=t,s.context=r,kV(this._delegate,e,s)}else kV(this._delegate,e)}get(){return QB(this._delegate).then(e=>new rp(this.database,e))}once(e,t,r,s){jt("Query.once",1,4,arguments.length),tr("Query.once","callback",t,!0);const c=Ts.getCancelAndContextArgs_("Query.once",r,s),d=new Ye,g=(T,k)=>{const B=new rp(this.database,T);t&&t.call(c.context,B,k),d.resolve(B)};g.userCallback=t,g.context=c.context;const I=T=>{c.cancel&&c.cancel.call(c.context,T),d.reject(T)};switch(e){case"value":gO(this._delegate,g,I,{onlyOnce:!0});break;case"child_added":PV(this._delegate,g,I,{onlyOnce:!0});break;case"child_removed":NV(this._delegate,g,I,{onlyOnce:!0});break;case"child_changed":MV(this._delegate,g,I,{onlyOnce:!0});break;case"child_moved":xV(this._delegate,g,I,{onlyOnce:!0});break;default:throw new Error(mr("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return d.promise}limitToFirst(e){return jt("Query.limitToFirst",1,1,arguments.length),new Ts(this.database,Bc(this._delegate,function i4(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new r4(n)}(e)))}limitToLast(e){return jt("Query.limitToLast",1,1,arguments.length),new Ts(this.database,Bc(this._delegate,function s4(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new o4(n)}(e)))}orderByChild(e){return jt("Query.orderByChild",1,1,arguments.length),new Ts(this.database,Bc(this._delegate,function l4(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Aw("orderByChild","path",n,!1),new a4(n)}(e)))}orderByKey(){return jt("Query.orderByKey",0,0,arguments.length),new Ts(this.database,Bc(this._delegate,function u4(){return new c4}()))}orderByPriority(){return jt("Query.orderByPriority",0,0,arguments.length),new Ts(this.database,Bc(this._delegate,function h4(){return new d4}()))}orderByValue(){return jt("Query.orderByValue",0,0,arguments.length),new Ts(this.database,Bc(this._delegate,function p4(){return new f4}()))}startAt(e=null,t){return jt("Query.startAt",0,2,arguments.length),new Ts(this.database,Bc(this._delegate,function e4(n=null,e){return Tw("startAt","key",e,!0),new FV(n,e)}(e,t)))}startAfter(e=null,t){return jt("Query.startAfter",0,2,arguments.length),new Ts(this.database,Bc(this._delegate,function n4(n,e){return Tw("startAfter","key",e,!0),new t4(n,e)}(e,t)))}endAt(e=null,t){return jt("Query.endAt",0,2,arguments.length),new Ts(this.database,Bc(this._delegate,function YB(n,e){return Tw("endAt","key",e,!0),new OV(n,e)}(e,t)))}endBefore(e=null,t){return jt("Query.endBefore",0,2,arguments.length),new Ts(this.database,Bc(this._delegate,function ZB(n,e){return Tw("endBefore","key",e,!0),new JB(n,e)}(e,t)))}equalTo(e,t){return jt("Query.equalTo",1,2,arguments.length),new Ts(this.database,Bc(this._delegate,function m4(n,e){return Tw("equalTo","key",e,!0),new g4(n,e)}(e,t)))}toString(){return jt("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return jt("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if(jt("Query.isEqual",1,1,arguments.length),!(e instanceof Ts))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const s={cancel:void 0,context:void 0};if(t&&r)s.cancel=t,tr(e,"cancel",s.cancel,!0),s.context=r,Vo(e,"context",s.context,!0);else if(t)if("object"==typeof t&&null!==t)s.context=t;else{if("function"!=typeof t)throw new Error(mr(e,"cancelOrContext")+" must either be a cancel callback or a context object.");s.cancel=t}return s}get ref(){return new yl(this.database,new sc(this._delegate._repo,this._delegate._path))}}class yl extends Ts{constructor(e,t){super(e,new Ka(t._repo,t._path,new N1,!1)),this.database=e,this._delegate=t}getKey(){return jt("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return jt("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new yl(this.database,mm(this._delegate,e))}getParent(){jt("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new yl(this.database,e):null}getRoot(){return jt("Reference.root",0,0,arguments.length),new yl(this.database,this._delegate.root)}set(e,t){jt("Reference.set",1,2,arguments.length),tr("Reference.set","onComplete",t,!0);const r=pO(this._delegate,e);return t&&r.then(()=>t(null),s=>t(s)),r}update(e,t){if(jt("Reference.update",1,2,arguments.length),Array.isArray(e)){const s={};for(let c=0;c<e.length;++c)s[""+c]=e[c];e=s,BV("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}oc("Reference.update",this._delegate._path),tr("Reference.update","onComplete",t,!0);const r=XB(this._delegate,e);return t&&r.then(()=>t(null),s=>t(s)),r}setWithPriority(e,t,r){jt("Reference.setWithPriority",2,3,arguments.length),tr("Reference.setWithPriority","onComplete",r,!0);const s=function KB(n,e,t){if(oc("setWithPriority",n._path),Ku("setWithPriority",e,n._path,!1),oO("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new Ye;return aO(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&s.then(()=>r(null),c=>r(c)),s}remove(e){jt("Reference.remove",0,1,arguments.length),tr("Reference.remove","onComplete",e,!0);const t=function WB(n){return oc("remove",n._path),pO(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){jt("Reference.transaction",1,3,arguments.length),tr("Reference.transaction","transactionUpdate",e,!1),tr("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error(mr("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const s=function N4(n,e,t){var r;if(n=xt(n),oc("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const s=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,c=new Ye,g=gO(n,()=>{});return function VB(n,e,t,r,s,c){Ry(n,"transaction on "+e);const d={path:e,update:t,onComplete:r,status:null,order:JS(),applyLocally:c,retryCount:0,unwatcher:s,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},g=cO(n,e,void 0);d.currentInputSnapshot=g;const I=d.update(g.val());if(void 0===I)d.unwatcher(),d.currentOutputSnapshotRaw=null,d.currentOutputSnapshotResolved=null,d.onComplete&&d.onComplete(null,!1,d.currentInputSnapshot);else{bw("transaction failed: Data returned ",I,d.path),d.status=0;const T=Q1(n.transactionQueueTree_,e),k=pm(T)||[];let B;k.push(d),nO(T,k),"object"==typeof I&&null!==I&&et(I,".priority")?(B=Gt(I,".priority"),re(ww(B),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):B=(K1(n.serverSyncTree_,e)||fr.EMPTY_NODE).getPriority().val();const K=Dw(n),ue=eo(I,B),De=Zk(ue,g,K);d.currentOutputSnapshotRaw=ue,d.currentOutputSnapshotResolved=De,d.currentWriteId=eR(n);const mt=Wk(n.serverSyncTree_,e,De,d.currentWriteId,d.applyLocally);vl(n.eventQueue_,e,mt),tR(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(I,T,k)=>{let B=null;I?c.reject(I):(B=new gm(k,new sc(n._repo,n._path),Ai),c.resolve(new x4(T,B)))},g,s),c.promise}(this._delegate,e,{applyLocally:r}).then(c=>new B4(c.committed,new rp(this.database,c.snapshot)));return t&&s.then(c=>t(null,c.committed,c.snapshot),c=>t(c,!1,null)),s}setPriority(e,t){jt("Reference.setPriority",1,2,arguments.length),tr("Reference.setPriority","onComplete",t,!0);const r=function qB(n,e){n=xt(n),oc("setPriority",n._path),oO("setPriority",e,!1);const t=new Ye;return aO(n._repo,H(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),s=>t(s)),r}push(e,t){jt("Reference.push",0,2,arguments.length),tr("Reference.push","onComplete",t,!0);const r=function GB(n,e){n=xt(n),oc("push",n._path),Ku("push",e,n._path,!0);const t=mV(n._repo),r=HB(t),s=mm(n,r),c=mm(n,r);let d;return d=null!=e?pO(c,e).then(()=>c):Promise.resolve(c),s.then=d.then.bind(d),s.catch=d.then.bind(d,void 0),s}(this._delegate,e),s=r.then(d=>new yl(this.database,d));t&&s.then(()=>t(null),d=>t(d));const c=new yl(this.database,r);return c.then=s.then.bind(s),c.catch=s.catch.bind(s,void 0),c}onDisconnect(){return oc("Reference.onDisconnect",this._delegate._path),new U4(new DV(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Pw{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:w4,forceLongPolling:b4}}useEmulator(e,t,r={}){!function UV(n,e,t,r={}){(n=xt(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&ic("Cannot call useEmulator() after instance has already been initialized.");const s=n._repoInternal;let c;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&ic('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),c=new yy(yy.OWNER);else if(r.mockUserToken){const d="string"==typeof r.mockUserToken?r.mockUserToken:Pt(r.mockUserToken,n.app.options.projectId);c=new yy(d)}!function v4(n,e,t,r){n.repoInfo_=new Iy(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(s,e,t,c)}(this._delegate,e,t,r)}ref(e){if(jt("database.ref",0,1,arguments.length),e instanceof yl){const t=RV(this._delegate,e.toString());return new yl(this,t)}{const t=SV(this._delegate,e);return new yl(this,t)}}refFromURL(e){jt("database.refFromURL",1,1,arguments.length);const r=RV(this._delegate,e);return new yl(this,r)}goOffline(){return jt("database.goOffline",0,0,arguments.length),function T4(n){(n=xt(n))._checkNotDeleted("goOffline"),IV(n._repo)}(this._delegate)}goOnline(){return jt("database.goOnline",0,0,arguments.length),function A4(n){(n=xt(n))._checkNotDeleted("goOnline"),function LB(n){n.persistentConnection_&&n.persistentConnection_.resume(gV)}(n._repo)}(this._delegate)}}Pw.ServerValue={TIMESTAMP:function P4(){return R4}(),increment:n=>function M4(n){return{".sv":{increment:n}}}(n)};var j4=Object.freeze({__proto__:null,initStandalone:function $4({app:n,url:e,version:t,customAuthImpl:r,customAppCheckImpl:s,namespace:c,nodeAdmin:d=!1}){YS(t);const g=new xr("database-standalone"),I=new ti("auth-internal",g);let T;return I.setComponent(new ar("auth-internal",()=>r,"PRIVATE")),s&&(T=new ti("app-check-internal",g),T.setComponent(new ar("app-check-internal",()=>s,"PRIVATE"))),{instance:new Pw(_O(n,I,T,e,d),n),namespace:c}}});const z4=Pw.ServerValue;!function H4(n){n.INTERNAL.registerComponent(new ar("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),s=e.getProvider("database").getImmediate({identifier:t});return new Pw(s,r)},"PUBLIC").setServiceProps({Reference:yl,Query:Ts,Database:Pw,DataSnapshot:rp,enableLogging:D4,INTERNAL:j4,ServerValue:z4}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","1.0.5")}(di);let Mw=(()=>{var n;class e{constructor(r){this.toastController=r}presentToast(r){var s=this;return(0,X.A)(function*(){(yield s.toastController.create({message:r,duration:3e3})).present()})()}}return(n=e).\u0275fac=function(r){return new(r||n)(h.KVO(x.K_))},n.\u0275prov=h.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();var _m=ee(70);let G4=(()=>{var n;class e{constructor(){}ngOnInit(){}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275cmp=h.VBU({type:n,selectors:[["app-sidebar"]],decls:33,vars:0,consts:[[2,"width","18rem","height","100%","display","flex","padding-left","1rem","padding-top","1rem","padding-bottom","1rem","padding-right","1rem","pointer-events","all","z-index","999"],[2,"border-radius","1rem","border","1px solid rgba(0, 0, 0, 0.156)","width","100%","height","100%","display","flex","flex-direction","column","align-items","center"],[2,"width","100%","padding-left","1rem"],["routerLink","/home",1,"sidebar-button",2,"width","90%"],["name","home-outline",2,"font-size","1.7rem","color","#757575","padding-right","1.8rem","padding-left","0.2rem"],["routerLink","/customers",1,"sidebar-button",2,"width","90%"],["name","people-outline",2,"font-size","1.7rem","color","#757575","padding-right","1.8rem","padding-left","0.2rem"],[1,"material-symbols-outlined","notranslate",2,"font-size","1.7rem","color","#757575","padding-right","1.8rem","padding-left","0.2rem"],["routerLink","/alchemizzatore",1,"sidebar-button",2,"width","90%"],["name","add-outline",2,"font-size","1.7rem","color","#757575","padding-right","1.8rem","padding-left","0.2rem"]],template:function(r,s){1&r&&(h.j41(0,"div",0)(1,"div",1)(2,"p",2),h.EFF(3,"Benvenuto, "),h.j41(4,"strong"),h.EFF(5,"Nicholas"),h.k0s()(),h.j41(6,"button",3),h.nrm(7,"ion-icon",4),h.j41(8,"ion-label"),h.EFF(9,"Home"),h.k0s()(),h.j41(10,"button",5),h.nrm(11,"ion-icon",6),h.j41(12,"ion-label"),h.EFF(13,"Clienti"),h.k0s()(),h.j41(14,"button",5)(15,"span",7),h.EFF(16,"group_add"),h.k0s(),h.j41(17,"ion-label"),h.EFF(18,"Prospect"),h.k0s()(),h.j41(19,"button",3)(20,"span",7),h.EFF(21,"style"),h.k0s(),h.j41(22,"ion-label"),h.EFF(23,"Moduli"),h.k0s()(),h.j41(24,"button",8)(25,"span",7),h.EFF(26,"science"),h.k0s(),h.j41(27,"ion-label"),h.EFF(28,"Alchemizzatore"),h.k0s()(),h.j41(29,"button",3),h.nrm(30,"ion-icon",9),h.j41(31,"ion-label"),h.EFF(32,"Aggiungi"),h.k0s()()()())},dependencies:[x.iq,x.he,x.N7,_m.Wk]}),e})(),W4=(()=>{var n;class e{constructor(){}ngOnInit(){}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275cmp=h.VBU({type:n,selectors:[["app-footer"]],decls:8,vars:0,consts:[[2,"display","flex","flex-direction","row","align-items","center","justify-content","space-between","height","3.5rem","width","100%","border-top","1px solid rgba(0, 0, 0, 0.156)","flex-shrink","0","padding-left","1.8rem","padding-right","1.8rem"],["routerLink","/home","name","home-outline",2,"font-size","1.7rem","color","black"],["routerLink","/customers","name","people-outline",2,"font-size","1.7rem","color","black"],["routerLink","/add","name","add-outline",2,"font-size","1.7rem","color","black"],["routerLink","/alchemizzatore",1,"material-symbols-outlined","notranslate",2,"font-size","1.7rem","color","black"]],template:function(r,s){1&r&&(h.j41(0,"div",0),h.nrm(1,"ion-icon",1)(2,"ion-icon",2)(3,"ion-icon",3),h.j41(4,"span",4),h.EFF(5,"style"),h.k0s(),h.j41(6,"span",4),h.EFF(7,"science"),h.k0s()())},dependencies:[x.iq,x.N7,_m.Wk]}),e})(),q4=(()=>{var n;class e{constructor(r){this.generalService=r}ngOnInit(){this.initFirebase()}sendMessage(){document.getElementById("second-message-assistenza-commerciale-text").innerText=document.getElementById("assistenza-commerciale-message-input").value,document.getElementById("second-message-assistenza-commerciale").style.display="flex",document.getElementById("assistenza-commerciale-message-input").value="",setTimeout(()=>{document.getElementById("response-message-assistenza-commerciale").style.display="flex"},5e3),setTimeout(()=>{document.getElementById("response2-message-assistenza-commerciale").style.display="flex"},3e4)}initFirebase(){di.initializeApp({apiKey:"AIzaSyCsD3AG7Zq7Aw_VAhn6N9ZGqVdabUrcFZU",authDomain:"tenquestion-6e3dd.firebaseapp.com",databaseURL:"https://tenquestion-6e3dd-default-rtdb.europe-west1.firebasedatabase.app",projectId:"tenquestion-6e3dd",storageBucket:"tenquestion-6e3dd.appspot.com",messagingSenderId:"438469942447",appId:"1:438469942447:web:97b3e3a5bf4620aa4f485a",measurementId:"G-3XVQGB22FD"})}}return(n=e).\u0275fac=function(r){return new(r||n)(h.rXU(Mw))},n.\u0275cmp=h.VBU({type:n,selectors:[["app-root"]],decls:34,vars:0,consts:[["id","assistenza-commerciale",2,"width","100%","height","100%","background","rgba(0, 0, 0, 0.169)","position","absolute","z-index","9999","display","none","flex-direction","column","align-items","center","justify-content","center"],[1,"card1",2,"padding-left","1rem","padding-right","1rem"],[2,"width","100%","display","flex","flex-direction","row","align-items","center","justify-content","space-between"],["onclick","document.getElementById('assistenza-commerciale').style.display = 'none'; ",1,"material-symbols-outlined","notranslate",2,"color","black","font-size","1.8rem","cursor","pointer"],["id","ti-stiamo-collegando-message",2,"font-size","1.2rem"],["id","first-message-assistenza-commerciale",1,"card1",2,"width","15rem","display","none"],["id","first-message-assistenza-commerciale-text",2,"padding-left","1rem"],["id","second-message-assistenza-commerciale",2,"width","100%","display","none","justify-content","end","margin-top","1rem","margin-bottom","1rem"],[1,"card1",2,"width","15rem"],["id","second-message-assistenza-commerciale-text",2,"padding-left","1rem"],["id","response-message-assistenza-commerciale",1,"card1",2,"width","15rem","display","none"],[2,"padding-left","1rem","margin-right","1rem"],["id","response2-message-assistenza-commerciale",1,"card1",2,"width","15rem","display","none","margin-top","1rem"],["id","response3-message-assistenza-commerciale",2,"padding-left","1rem","margin-right","1rem","display","none","margin-top","1rem","margin-bottom","1rem"],[2,"width","100%","display","flex","flex-direction","row","align-items","center","gap","1rem"],[1,"inputGroup",2,"flex","1 1 0","min-width","200px"],["id","assistenza-commerciale-message-input","type","text",1,"input-field3"],["for","assistenza-commerciale-message-input"],[1,"card1",2,"height","3rem","width","3rem","border-radius","50%",3,"click"],[1,"material-symbols-outlined","notranslate",2,"font-size","1.8rem"],["id","app-container",2,"width","100%","height","100%","display","flex","overflow-y","auto"],["id","sidebar",2,"width","18rem","height","100%","z-index","2","pointer-events","all"],["id","mobile-footer",2,"display","none"]],template:function(r,s){1&r&&(h.j41(0,"ion-app")(1,"div",0)(2,"div",1)(3,"h1",2),h.EFF(4,"Assistenza commerciale"),h.j41(5,"span",3),h.EFF(6,"close"),h.k0s()(),h.j41(7,"p",4),h.EFF(8,"Ti stiamo collegando con l'ufficio..."),h.k0s(),h.j41(9,"div",5),h.nrm(10,"p",6),h.k0s(),h.j41(11,"div",7)(12,"div",8),h.nrm(13,"p",9),h.k0s()(),h.j41(14,"div",10)(15,"p",11),h.EFF(16,"Dammi giusto 1 minuto per chiedere la deroga dello sconto"),h.k0s()(),h.j41(17,"div",12)(18,"p",11),h.EFF(19,"Deroga concessa, te la applico direttamente"),h.k0s()(),h.j41(20,"strong",13),h.EFF(21,"Sessione terminata"),h.k0s(),h.j41(22,"div",14)(23,"div",15),h.nrm(24,"input",16),h.j41(25,"label",17),h.EFF(26,"Il tuo messaggio"),h.k0s()(),h.j41(27,"button",18),h.bIt("click",function(){return s.sendMessage()}),h.j41(28,"span",19),h.EFF(29,"send"),h.k0s()()()()(),h.j41(30,"div",20),h.nrm(31,"app-sidebar",21)(32,"router-outlet"),h.k0s(),h.nrm(33,"app-footer",22),h.k0s())},dependencies:[x.U1,_m.n3,G4,W4]}),e})(),K4=(()=>{var n;class e{constructor(){}ngOnInit(){}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275cmp=h.VBU({type:n,selectors:[["app-customers"]],decls:2,vars:0,template:function(r,s){1&r&&(h.j41(0,"p"),h.EFF(1," customers works!\n"),h.k0s())}}),e})(),X4=(()=>{var n;class e{constructor(r){this.generalService=r}ngOnInit(){}saveCustomerInfo(){}}return(n=e).\u0275fac=function(r){return new(r||n)(h.rXU(Mw))},n.\u0275cmp=h.VBU({type:n,selectors:[["app-customer-info-input"]],decls:127,vars:0,consts:[[2,"width","100%","height","100%","padding-left","1rem","padding-bottom","1rem","padding-right","1rem","display","flex","flex-direction","column"],[2,"margin-top","1rem","margin-bottom","1rem","font-size","1.8rem"],[2,"display","flex","flex-direction","row","flex-wrap","wrap","gap","1rem","width","100%"],["src","assets\\svg\\undraw_interview_re_e5jn (3).svg",2,"width","18rem"],[1,"resp-div1",2,"display","flex","flex-direction","column","flex-wrap","wrap","width","calc(100% - 20rem)"],[1,"inputGroup"],["id","ragione-sociale-input","type","text",1,"input-field3"],["for","ragione-sociale-input"],["id","cost-cost-input","type","text",1,"input-field3"],["for","cost-cost-input"],[1,"inputGroup",2,"flex","1 1 0","min-width","200px"],[2,"width","100%","display","flex","flex-direction","row","flex-wrap","wrap","gap","1rem"],["id","indirizzo-input","type","text",1,"input-field3"],["for","indirizzo-input"],["id","telefono-input","type","text",1,"input-field3"],["for","telefono-input"],["id","email-input","type","text",1,"input-field3"],["for","email-input"],["id","pec-input","type","text",1,"input-field3"],["for","pec-input"],[2,"display","flex","flex-direction","column","flex","1 1 0","min-width","200px"],[2,"margin-bottom","-1.5rem","z-index","2","background","white","margin-left","1.5rem","font-size","14px","color","rgb(100, 100, 100)","width","8rem","text-align","center"],["id","activity-priority-input",1,"selector1",2,"width","100%"],["value","AGRICOLTURA - CACCIA FORESTE - PESCA"],["value","ALBERGHI - PUBBLICI ESERCIZI"],["value","COMMERCIO"],["value","CONSULENZA D'IMPRESA"],["value","COSTRUZIONE - INSTALLAZIONE IMPIANTI - SERVIZI EDILIZIA"],["value","CREDITO - ASSICURAZIONI"],["value","ENERGIA - GAS - ACQUA"],["value","INDUSTRIE ESTRATTIVE TRASFORMAZIONI MINERALI"],["value","INDUSTRIE MANIFATTURIERE ALIMENTARI"],["value","INDUSTRIE MANIFATTURIERE LAVORAZIONE CARTA/CARTONE STAMPA - EDITORIA"],["value","INDUSTRIE CHIMICHE FARMACEUTICHE - COSMETICHE"],["value","INDUSTRIE MANIFATTURIERE LAVORAZIONE LEGNO"],["value","INDUSTRIE MANIFATTURIERE LAVORAZIONE METALLI MECCANICA DI PRECISIONE"],["value","INDUSTRIE MANIFATTURIERE TESSILE, ABBIGLIAMENTO, AFFINI"],["value","INDUSTRIE MANIFATTURIERE PRODUZIONE MATERIALI, APPARECCHIATURE/MACCHINE ELETTRICHE/ELETTRONICHE"],["value","NOLEGGIO/RIPARAZIONE BENI DI CONSUMO E BENI DUREVOLI"],["value","PUBBLICA AMMINISTRAZIONE"],["value","SERVIZI PRIVATI"],["value","TRASPORTI - COMUNICAZIONI"],["value","DOCENTI UNIVERSITARI"],["value","SOCI NON IN SERVIZIO ATTIVO"],["value","STUDENTI"],["value","Ditt\xe0 individuale forfettaria"],["value","Ditt\xe0 individuale"],["value","Impresa familiare"],["value","Societ\xe0 cooperativa"],["value","Impresa artigiana/agricola"],["value","Associazione"],["value","Societ\xe0 semplice"],["value","Societ\xe0 in nome collettivo"],["value","Societ\xe0 a comandita semplice"],["value","Societ\xe0 a responsabilit\xe0 limitata semplificata"],["value","Societ\xe0 a responsabilit\xe0 limitata"],["value","Societ\xe0 per azioni"],["value","Societ\xe0 in accomandita per azioni"],[1,"btn",2,"margin-right","0.5rem","width","90%","text-align","center","margin-top","1rem",3,"click"]],template:function(r,s){1&r&&(h.j41(0,"div",0)(1,"h1",1),h.EFF(2,"Parlaci di te"),h.k0s(),h.j41(3,"div",2),h.nrm(4,"img",3),h.j41(5,"div",4)(6,"div",5),h.nrm(7,"input",6),h.j41(8,"label",7),h.EFF(9,"Ragione sociale"),h.k0s()(),h.j41(10,"div",5),h.nrm(11,"input",8),h.j41(12,"label",9),h.EFF(13,"Partita iva"),h.k0s()(),h.j41(14,"div",5),h.nrm(15,"input",8),h.j41(16,"label",9),h.EFF(17,"Referente"),h.k0s()()()(),h.j41(18,"div",2)(19,"div",10),h.nrm(20,"input",8),h.j41(21,"label",9),h.EFF(22,"Sito Web"),h.k0s()(),h.j41(23,"div",10),h.nrm(24,"input",8),h.j41(25,"label",9),h.EFF(26,"Instagram"),h.k0s()()(),h.j41(27,"div",11)(28,"div",10),h.nrm(29,"input",12),h.j41(30,"label",13),h.EFF(31,"Indirizzo"),h.k0s()(),h.j41(32,"div",10),h.nrm(33,"input",14),h.j41(34,"label",15),h.EFF(35,"Recapito telefonico"),h.k0s()(),h.j41(36,"div",10),h.nrm(37,"input",16),h.j41(38,"label",17),h.EFF(39,"E-Mail"),h.k0s()(),h.j41(40,"div",10),h.nrm(41,"input",18),h.j41(42,"label",19),h.EFF(43,"Pec"),h.k0s()()(),h.j41(44,"div",11)(45,"div",20)(46,"label",21),h.EFF(47,"Settore merciologico"),h.k0s(),h.j41(48,"div",5)(49,"select",22)(50,"option",23),h.EFF(51,"AGRICOLTURA - CACCIA FORESTE - PESCA"),h.k0s(),h.j41(52,"option",24),h.EFF(53,"ALBERGHI - PUBBLICI ESERCIZI"),h.k0s(),h.j41(54,"option",25),h.EFF(55,"COMMERCIO"),h.k0s(),h.j41(56,"option",26),h.EFF(57,"CONSULENZA D'IMPRESA"),h.k0s(),h.j41(58,"option",27),h.EFF(59,"COSTRUZIONE - INSTALLAZIONE IMPIANTI - SERVIZI EDILIZIA"),h.k0s(),h.j41(60,"option",28),h.EFF(61,"CREDITO - ASSICURAZIONI"),h.k0s(),h.j41(62,"option",29),h.EFF(63,"ENERGIA - GAS - ACQUA"),h.k0s(),h.j41(64,"option",30),h.EFF(65,"INDUSTRIE ESTRATTIVE TRASFORMAZIONI MINERALI "),h.k0s(),h.j41(66,"option",31),h.EFF(67,"INDUSTRIE MANIFATTURIERE ALIMENTARI"),h.k0s(),h.j41(68,"option",32),h.EFF(69,"INDUSTRIE MANIFATTURIERE LAVORAZIONE CARTA/CARTONE STAMPA - EDITORIA"),h.k0s(),h.j41(70,"option",33),h.EFF(71,"INDUSTRIE CHIMICHE FARMACEUTICHE - COSMETICHE"),h.k0s(),h.j41(72,"option",34),h.EFF(73,"INDUSTRIE MANIFATTURIERE LAVORAZIONE LEGNO "),h.k0s(),h.j41(74,"option",35),h.EFF(75,"INDUSTRIE MANIFATTURIERE LAVORAZIONE METALLI MECCANICA DI PRECISIONE"),h.k0s(),h.j41(76,"option",36),h.EFF(77,"INDUSTRIE MANIFATTURIERE TESSILE, ABBIGLIAMENTO, AFFINI"),h.k0s(),h.j41(78,"option",37),h.EFF(79," INDUSTRIE MANIFATTURIERE PRODUZIONE MATERIALI, APPARECCHIATURE/MACCHINE ELETTRICHE/ELETTRONICHE"),h.k0s(),h.j41(80,"option",38),h.EFF(81,"NOLEGGIO/RIPARAZIONE BENI DI CONSUMO E BENI DUREVOLI"),h.k0s(),h.j41(82,"option",39),h.EFF(83,"PUBBLICA AMMINISTRAZIONE"),h.k0s(),h.j41(84,"option",40),h.EFF(85,"SERVIZI PRIVATI"),h.k0s(),h.j41(86,"option",41),h.EFF(87,"TRASPORTI - COMUNICAZIONI"),h.k0s(),h.j41(88,"option",42),h.EFF(89,"DOCENTI UNIVERSITARI"),h.k0s(),h.j41(90,"option",43),h.EFF(91,"SOCI NON IN SERVIZIO ATTIVO"),h.k0s(),h.j41(92,"option",44),h.EFF(93,"STUDENTI"),h.k0s()()()(),h.j41(94,"div",20)(95,"label",21),h.EFF(96,"Forma giuridica"),h.k0s(),h.j41(97,"div",5)(98,"select",22)(99,"option",45),h.EFF(100,"Ditt\xe0 individuale forfettaria"),h.k0s(),h.j41(101,"option",46),h.EFF(102,"Ditt\xe0 individuale"),h.k0s(),h.j41(103,"option",47),h.EFF(104,"Impresa familiare"),h.k0s(),h.j41(105,"option",48),h.EFF(106,"Societ\xe0 cooperativa"),h.k0s(),h.j41(107,"option",49),h.EFF(108,"Impresa artigiana/agricola"),h.k0s(),h.j41(109,"option",50),h.EFF(110,"Associazione"),h.k0s(),h.j41(111,"option",51),h.EFF(112,"Societ\xe0 semplice"),h.k0s(),h.j41(113,"option",52),h.EFF(114,"Societ\xe0 in nome collettivo"),h.k0s(),h.j41(115,"option",53),h.EFF(116,"Societ\xe0 a comandita semplice"),h.k0s(),h.j41(117,"option",54),h.EFF(118,"Societ\xe0 a responsabilit\xe0 limitata semplificata"),h.k0s(),h.j41(119,"option",55),h.EFF(120,"Societ\xe0 a responsabilit\xe0 limitata"),h.k0s(),h.j41(121,"option",56),h.EFF(122,"Societ\xe0 per azioni"),h.k0s(),h.j41(123,"option",57),h.EFF(124,"Societ\xe0 in accomandita per azioni"),h.k0s()()()()(),h.j41(125,"button",58),h.bIt("click",function(){return s.saveCustomerInfo()}),h.EFF(126,"Salva informazioni"),h.k0s()())}}),e})(),Q4=(()=>{var n;class e{constructor(){}ngOnInit(){}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275cmp=h.VBU({type:n,selectors:[["app-modules"]],decls:57,vars:0,consts:[[2,"width","100%","display","flex","flex-direction","column","gap","1rem","padding-bottom","6rem","padding-left","1rem","padding-right","1rem"],[2,"margin-top","1rem","margin-bottom","1rem","margin-right","1rem","font-size","1.8rem"],[2,"width","100%","display","flex","flex-wrap","wrap","gap","1rem"],["routerLink","/alchemizzatore/immagine","id","modules-input",1,"card",2,"flex","1 1 0","min-width","20rem","padding-left","1rem","cursor","pointer"],["src","assets\\svg\\undraw_social_ideas_re_j5v4 (1).svg",2,"width","15rem","margin-top","1rem"],["routerLink","/alchemizzatore/digitalizzazione","id","modules-input",1,"card",2,"flex","1 1 0","min-width","20rem","padding-left","1rem","cursor","pointer"],["src","assets\\svg\\undraw_success_factors_re_ce93 (1).svg",2,"width","15rem","margin-top","1rem"],["routerLink","/alchemizzatore/contabilit\xe0","id","modules-input",1,"card",2,"flex","1 1 0","min-width","20rem","padding-left","1rem","cursor","pointer"],["src","assets\\svg\\undraw_studying_re_deca.svg",2,"width","15rem","margin-top","1rem"],["routerLink","/alchemizzatore/management","id","modules-input",1,"card",2,"flex","1 1 0","min-width","20rem","padding-left","1rem","cursor","pointer"],["src","assets\\svg\\undraw_product_iteration_kjok (2).svg",2,"width","15rem","margin-top","1rem"]],template:function(r,s){1&r&&(h.j41(0,"div",0)(1,"h1",1),h.EFF(2,"Seleziona le soluzioni pi\xf9 adatte a te"),h.k0s(),h.j41(3,"div",2)(4,"div",3),h.nrm(5,"img",4),h.j41(6,"div")(7,"h1"),h.EFF(8,"Immagine e presenza social "),h.k0s(),h.j41(9,"p")(10,"strong"),h.EFF(11,"Raggiungi un pubblico mondiale"),h.k0s(),h.EFF(12," e "),h.j41(13,"strong"),h.EFF(14,"aumenta le vendite"),h.k0s()(),h.j41(15,"p"),h.EFF(16,"Permetti ai tuoi clienti di avere "),h.j41(17,"strong"),h.EFF(18,"informazioni sulla tua attivit\xe0 in qualsiasi momento"),h.k0s(),h.EFF(19," grazie ai potenti algoritmi informatici alla base dei social media"),h.k0s()()(),h.j41(20,"div",5),h.nrm(21,"img",6),h.j41(22,"div")(23,"h1"),h.EFF(24,"Digitalizzazione e automatismi"),h.k0s(),h.j41(25,"p")(26,"strong"),h.EFF(27,"Aumenta la produttivit\xe0 e il fatturato della tua impresa "),h.k0s(),h.EFF(28,"grazie alle nostre "),h.j41(29,"strong"),h.EFF(30,"soluzioni informatiche personalizzate"),h.k0s()(),h.j41(31,"p"),h.EFF(32,"Permetti ai tuoi clienti di trovare e "),h.j41(33,"strong"),h.EFF(34,"ottenere informazioni sulla tua attivit\xe0 in qualsiasi momento"),h.k0s()()()()(),h.j41(35,"div",2)(36,"div",7),h.nrm(37,"img",8),h.j41(38,"div")(39,"h1"),h.EFF(40,"Contabilit\xe0 e fiscalit\xe0"),h.k0s(),h.j41(41,"p"),h.EFF(42,"Ottieni il supporto dedicato di un/a "),h.j41(43,"strong"),h.EFF(44,"commercialista dedicato"),h.k0s(),h.EFF(45," per la "),h.j41(46,"strong"),h.EFF(47,"gestione della contabilit\xe0 e fiscalit\xe0 aziendale"),h.k0s()()()(),h.j41(48,"div",9),h.nrm(49,"img",10),h.j41(50,"div")(51,"h1"),h.EFF(52,"Ottimizzazione e vendite"),h.k0s(),h.j41(53,"p"),h.EFF(54,"Avvantaggiati di un commerciale dedicato, "),h.j41(55,"strong"),h.EFF(56,"identifica e risolvi i problemi aziendali per aumentare la tua produttivit\xe0"),h.k0s()()()()()())},dependencies:[x.N7,_m.Wk]}),e})(),Y4=(()=>{var n;class e{constructor(r){this.generalService=r}ngOnInit(){}applyDiscount(){this.generalService.presentToast("Sconto applicato")}}return(n=e).\u0275fac=function(r){return new(r||n)(h.rXU(Mw))},n.\u0275cmp=h.VBU({type:n,selectors:[["app-shopping-cart"]],decls:12,vars:0,consts:[[2,"width","100%","height","100%","padding-left","1rem","padding-bottom","1rem","padding-right","1rem","display","flex","flex-direction","column"],[2,"margin-top","1rem","margin-bottom","1rem","font-size","1.8rem"],[2,"display","flex","flex-direction","row","flex-wrap","wrap","gap","1rem","width","100%"],["src","assets\\svg\\undraw_business_deal_re_up4u.svg",2,"width","18rem","margin-bottom","-1.3rem"],[2,"height","1rem","width","100%","background","#00B0FF",3,"click"],[2,"margin-top","0rem","font-size","2rem"],[2,"font-weight","normal"]],template:function(r,s){1&r&&(h.j41(0,"div",0)(1,"h1",1),h.EFF(2,"Checkout"),h.k0s(),h.j41(3,"div",2)(4,"div"),h.nrm(5,"img",3),h.j41(6,"div",4),h.bIt("click",function(){return s.applyDiscount()}),h.nrm(7,"p"),h.k0s()(),h.j41(8,"h1",5),h.EFF(9,"Subtotale: "),h.j41(10,"span",6),h.EFF(11,"\u20ac5000"),h.k0s()()()())}}),e})(),J4=(()=>{var n;class e{constructor(r){this.generalService=r}ngOnInit(){}showAssistenzaCliente(){document.getElementById("assistenza-commerciale").style.display="flex",document.getElementById("first-message-assistenza-commerciale-text").innerText="Ti rispondo dall'ufficio, chiedi assistenza per il cliente "+document.getElementById("ragione-sociale-input").value+" che stai configurando in questo momento?",setTimeout(()=>{document.getElementById("ti-stiamo-collegando-message").style.display="none",document.getElementById("first-message-assistenza-commerciale").style.display="flex"},5e3)}sendMessage(){document.getElementById("second-message-assistenza-commerciale-text").innerText=document.getElementById("assistenza-commerciale-message-input").value,document.getElementById("second-message-assistenza-commerciale").style.display="flex"}showCustomerInput(){document.getElementById("customer-input-container").style.display="flex",document.getElementById("modules-selection-container").style.display="none",document.getElementById("shopping-cart-container").style.display="none",document.getElementById("assistenza-commerciale-button").style.display="none"}showModulesSelection(){document.getElementById("customer-input-container").style.display="none",document.getElementById("modules-selection-container").style.display="flex",document.getElementById("shopping-cart-container").style.display="none",document.getElementById("assistenza-commerciale-button").style.display="none"}showShoppingCart(){document.getElementById("customer-input-container").style.display="none",document.getElementById("modules-selection-container").style.display="none",document.getElementById("shopping-cart-container").style.display="flex",document.getElementById("assistenza-commerciale-button").style.display="flex"}}return(n=e).\u0275fac=function(r){return new(r||n)(h.rXU(Mw))},n.\u0275cmp=h.VBU({type:n,selectors:[["app-alchemizzatore"]],decls:24,vars:0,consts:[[1,"scrollbar-resp-width",2,"position","absolute","z-index","999","height","100%","width","100%","padding-left","1rem","padding-right","1rem","pointer-events","none"],[1,"card1",2,"width","100%","height","2.5rem","margin-top","1rem","pointer-events","all"],[2,"width","100%","height","100%","display","flex","flex-direction","row","align-items","center","gap","1rem","padding-left","1rem"],[1,"step-button",3,"click"],[1,"material-symbols-outlined","notranslate"],[1,"step-button","notranslate",3,"click"],[2,"flex","1"],["id","assistenza-commerciale-button",1,"step-button","notranslate",2,"margin-right","1rem","display","none",3,"click"],[2,"width","100%","height","100%","overflow-y","auto","overflow-x","hidden","padding-top","5rem"],["id","customer-input-container",2,"display","flex"],["id","modules-selection-container",2,"display","none"],["id","shopping-cart-container",2,"display","none"]],template:function(r,s){1&r&&(h.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),h.bIt("click",function(){return s.showCustomerInput()}),h.j41(4,"span",4),h.EFF(5,"person"),h.k0s(),h.EFF(6,"Cliente"),h.k0s(),h.j41(7,"button",3),h.bIt("click",function(){return s.showModulesSelection()}),h.j41(8,"span",4),h.EFF(9,"design_services"),h.k0s(),h.EFF(10,"Moduli"),h.k0s(),h.j41(11,"button",5),h.bIt("click",function(){return s.showShoppingCart()}),h.j41(12,"span",4),h.EFF(13,"shopping_cart"),h.k0s(),h.EFF(14,"Checkout"),h.k0s(),h.nrm(15,"div",6),h.j41(16,"button",7),h.bIt("click",function(){return s.showAssistenzaCliente()}),h.j41(17,"span",4),h.EFF(18,"support_agent"),h.k0s(),h.EFF(19,"Assistenza Commerciale"),h.k0s()()()(),h.j41(20,"div",8),h.nrm(21,"app-customer-info-input",9)(22,"app-modules",10)(23,"app-shopping-cart",11),h.k0s())},dependencies:[X4,Q4,Y4]}),e})(),Z4=(()=>{var n;class e{constructor(){this.arrayImmagine=[0],this.flyerCount=0,this.posterCount=0,this.vetrograficaCount=0}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=h.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();const e$=[{path:"home",loadChildren:()=>ee.e(5075).then(ee.bind(ee,5075)).then(n=>n.HomePageModule)},{path:"",redirectTo:"home",pathMatch:"full"},{path:"customers",component:K4},{path:"alchemizzatore",component:J4},{path:"alchemizzatore/immagine/grafica",component:(()=>{var n;class e{constructor(){}ngOnInit(){}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275cmp=h.VBU({type:n,selectors:[["app-grafica"]],decls:34,vars:0,consts:[[2,"width","100%","height","100%","padding-top","0.5rem","display","flex","flex-wrap","wrap"],[1,"card",2,"width","15rem","height","15rem"],[2,"width","100%","height","100%","padding-left","1rem","padding-bottom","1rem","display","flex","flex-direction","column"],[2,"margin-right","1rem !important","margin-bottom","0.2rem","margin-top","0rem !important","padding-right","1rem"],[2,"flex","1"],[1,"btn",2,"margin-right","0.5rem","width","90%","text-align","center"]],template:function(r,s){1&r&&(h.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),h.EFF(4,"Flyer"),h.k0s(),h.j41(5,"p",3),h.EFF(6,"\u20ac329 "),h.j41(7,"strong"),h.EFF(8,"iva inclusa"),h.k0s()(),h.nrm(9,"div",4),h.j41(10,"a",5),h.EFF(11,"Seleziona"),h.k0s()()(),h.j41(12,"div",1)(13,"div",2)(14,"h2"),h.EFF(15,"Poster"),h.k0s(),h.j41(16,"p",3),h.EFF(17,"\u20ac429 "),h.j41(18,"strong"),h.EFF(19,"iva inclusa"),h.k0s()(),h.nrm(20,"div",4),h.j41(21,"a",5),h.EFF(22,"Seleziona"),h.k0s()()(),h.j41(23,"div",1)(24,"div",2)(25,"h2"),h.EFF(26,"Vetrografia"),h.k0s(),h.j41(27,"p",3),h.EFF(28,"\u20ac649 "),h.j41(29,"strong"),h.EFF(30,"iva inclusa"),h.k0s()(),h.nrm(31,"div",4),h.j41(32,"a",5),h.EFF(33,"Seleziona"),h.k0s()()()())}}),e})()},{path:"alchemizzatore/immagine/logo",component:(()=>{var n;class e{constructor(){}ngOnInit(){}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275cmp=h.VBU({type:n,selectors:[["app-logo"]],decls:23,vars:0,consts:[[2,"width","100%","height","100%","padding-top","0.5rem","display","flex","flex-wrap","wrap"],[1,"card",2,"width","15rem","height","15rem"],[2,"width","100%","height","100%","padding-left","1rem","padding-bottom","1rem","display","flex","flex-direction","column"],[2,"margin-right","1rem !important","margin-bottom","0.2rem","margin-top","0rem !important","padding-right","1rem"],[2,"flex","1"],["target","_blank",1,"btn",2,"margin-right","0.5rem","width","90%","text-align","center"]],template:function(r,s){1&r&&(h.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),h.EFF(4,"Creazione"),h.k0s(),h.j41(5,"p",3),h.EFF(6,"\u20ac329 "),h.j41(7,"strong"),h.EFF(8,"iva inclusa"),h.k0s()(),h.nrm(9,"div",4),h.j41(10,"a",5),h.EFF(11,"Seleziona"),h.k0s()()(),h.j41(12,"div",1)(13,"div",2)(14,"h2"),h.EFF(15,"Importazione"),h.k0s(),h.j41(16,"p",3),h.EFF(17,"\u20ac429 "),h.j41(18,"strong"),h.EFF(19,"iva inclusa"),h.k0s()(),h.nrm(20,"div",4),h.j41(21,"a",5),h.EFF(22,"Seleziona"),h.k0s()()()())}}),e})()},{path:"alchemizzatore/immagine",component:(()=>{var n;class e{constructor(r,s){this.alchemizzatore=r,this.generalService=s}ngOnInit(){}on1(){document.getElementById("float").classList.add("miaClasse"),document.getElementById("float").classList.add("rimbalzo-class"),document.getElementById("float2").classList.add("miaClasse"),document.getElementById("float2").classList.add("rimbalzo-class2"),document.getElementById("text-importazione-sbarrato").classList.add("sbarrato"),document.getElementById("text-importazione-scontato").innerText=" \u20ac400",document.getElementById("text-creazione-sbarrato2").classList.add("sbarrato"),document.getElementById("text-creazione-scontato2").innerText=" \u20ac700"}basic(){this.alchemizzatore.arrayImmagine=this.alchemizzatore.arrayImmagine.filter(r=>330!==r),this.alchemizzatore.arrayImmagine=this.alchemizzatore.arrayImmagine.filter(r=>430!==r),this.alchemizzatore.arrayImmagine=this.alchemizzatore.arrayImmagine.filter(r=>650!==r),this.alchemizzatore.arrayImmagine=[...this.alchemizzatore.arrayImmagine,330],console.log(this.alchemizzatore.arrayImmagine)}standard(){this.alchemizzatore.arrayImmagine=this.alchemizzatore.arrayImmagine.filter(r=>330!==r),this.alchemizzatore.arrayImmagine=this.alchemizzatore.arrayImmagine.filter(r=>430!==r),this.alchemizzatore.arrayImmagine=this.alchemizzatore.arrayImmagine.filter(r=>650!==r),this.alchemizzatore.arrayImmagine=[...this.alchemizzatore.arrayImmagine,430],console.log(this.alchemizzatore.arrayImmagine)}deluxe(){this.alchemizzatore.arrayImmagine=this.alchemizzatore.arrayImmagine.filter(r=>330!==r),this.alchemizzatore.arrayImmagine=this.alchemizzatore.arrayImmagine.filter(r=>430!==r),this.alchemizzatore.arrayImmagine=this.alchemizzatore.arrayImmagine.filter(r=>650!==r),this.alchemizzatore.arrayImmagine=[...this.alchemizzatore.arrayImmagine,650],console.log(this.alchemizzatore.arrayImmagine)}addFlyer(){this.alchemizzatore.flyerCount=this.alchemizzatore.flyerCount+1,document.getElementById("flyer-counter").innerText=this.alchemizzatore.flyerCount+""}removeFlyer(){0!=this.alchemizzatore.flyerCount&&(this.alchemizzatore.flyerCount=this.alchemizzatore.flyerCount-1,document.getElementById("flyer-counter").innerText=this.alchemizzatore.flyerCount+"")}addPoster(){this.alchemizzatore.posterCount=this.alchemizzatore.posterCount+1,document.getElementById("poster-counter").innerText=this.alchemizzatore.posterCount+""}removePoster(){0!=this.alchemizzatore.posterCount&&(this.alchemizzatore.posterCount=this.alchemizzatore.posterCount-1,document.getElementById("poster-counter").innerText=this.alchemizzatore.posterCount+"")}addVetrografica(){this.alchemizzatore.vetrograficaCount=this.alchemizzatore.vetrograficaCount+1,document.getElementById("vetrografica-counter").innerText=this.alchemizzatore.vetrograficaCount+""}removeVetrografica(){0!=this.alchemizzatore.vetrograficaCount&&(this.alchemizzatore.vetrograficaCount=this.alchemizzatore.vetrograficaCount-1,document.getElementById("vetrografica-counter").innerText=this.alchemizzatore.vetrograficaCount+"")}uploadLogo(){const r=di.storage(),c=document.getElementById("logo-input").files[0];if(c){const g=r.ref("alchemizzatore/immagine/loghi/"+c.name).put(c);g.on("state_changed",I=>{this.generalService.presentToast("Caricamento in corso: "+I.bytesTransferred/I.totalBytes*100+"%")},I=>{this.generalService.presentToast("Errore nel caricamento:"+I.message)},()=>{g.snapshot.ref.getDownloadURL().then(I=>{console.log("File disponibile a:",I),this.generalService.presentToast("Logo caricato con successo")})})}else this.generalService.presentToast("Nessun file selezionato:")}}return(n=e).\u0275fac=function(r){return new(r||n)(h.rXU(Z4),h.rXU(Mw))},n.\u0275cmp=h.VBU({type:n,selectors:[["app-immagine"]],decls:217,vars:0,consts:[[2,"width","100%","display","flex","flex-direction","column","gap","1rem","padding-bottom","6rem","padding-left","1rem","padding-right","1rem"],[2,"margin-top","1rem","margin-bottom","1rem","margin-right","1rem","font-size","1.8rem"],[2,"width","100%","display","flex","flex-wrap","wrap","gap","1rem"],["id","modules-input",1,"card",2,"flex","1 1 0","min-width","20rem","padding-left","1rem","cursor","pointer","display","flex","flex-direction","row","gap","1rem","flex-wrap","wrap","padding-top","1rem","align-items","center","padding-bottom","1rem"],[2,"flex","1 1 0","min-width","15rem"],["src","assets\\svg\\undraw_social_ideas_re_j5v4 (1).svg",2,"width","15rem","margin-top","1rem"],[1,"material-symbols-outlined","notranslate",2,"font-size","5rem"],[2,"width","90%","background","#333","height","1px","margin-right","2rem"],[2,"margin-top","0rem","margin-bottom","0rem"],[2,"margin-top","0rem","margin-bottom","0rem","font-weight","bold"],[1,"btn",2,"margin-right","0.5rem","width","90%","text-align","center","margin-top","1rem",3,"click"],["id","float2",1,"card",2,"flex","1 1 0","min-width","20rem","max-width","40rem","padding-left","1rem","cursor","pointer","display","flex","flex-direction","column","gap","1rem","flex-wrap","wrap","padding-top","1rem","align-items","center"],["src","assets\\svg\\undraw_creative_woman_re_u5tk.svg",2,"width","15rem","margin-top","1rem"],[2,"width","100%","display","flex","flex-wrap","wrap","gap","1rem","padding-bottom","1rem"],[1,"btn",2,"margin-right","0.5rem","width","90%","text-align","center","margin-top","1rem","height","3rem"],[2,"width","100%","height","100%","display","flex","flex-direction","row","align-items","center","justify-content","center"],[2,"color","white","font-size","1.8rem",3,"click"],[2,"flex","1"],["id","flyer-counter",2,"color","white","font-size","1.5rem"],["id","poster-counter",2,"color","white","font-size","1.5rem"],[2,"flex","1 1 0","min-width","15rem","display","flex","flex-direction","column","align-items","center"],["id","vetrografica-counter",2,"color","white","font-size","1.5rem"],["id","float",1,"card",2,"flex","1 1 0","min-width","20rem","padding-left","1rem","cursor","pointer"],["src","assets\\svg\\undraw_learning_sketching_nd4f (1).svg",2,"height","14rem","margin-top","1rem"],["id","text-importazione-sbarrato"],["id","text-importazione-scontato"],["type","file","accept","image/*","id","logo-input",1,"btn",2,"margin-right","0.5rem","width","90%","text-align","center","margin-top","1rem"],["id","text-creazione-sbarrato2"],["id","text-creazione-scontato2"],["target","_blank",1,"btn",2,"margin-right","0.5rem","width","90%","text-align","center","margin-top","1rem"]],template:function(r,s){1&r&&(h.j41(0,"div",0)(1,"h1",1),h.EFF(2,"Immagine"),h.k0s(),h.j41(3,"div",2)(4,"div",2)(5,"div",3)(6,"div",4),h.nrm(7,"img",5),h.j41(8,"div")(9,"h1"),h.EFF(10,"Social"),h.k0s(),h.j41(11,"p")(12,"strong"),h.EFF(13,"Raggiungi un pubblico mondiale"),h.k0s(),h.EFF(14," e "),h.j41(15,"strong"),h.EFF(16,"aumenta le vendite"),h.k0s()(),h.j41(17,"p"),h.EFF(18,"Permetti ai tuoi clienti di avere "),h.j41(19,"strong"),h.EFF(20,"informazioni sulla tua attivit\xe0 in qualsiasi momento"),h.k0s(),h.EFF(21," grazie ai potenti algoritmi informatici alla base dei social media"),h.k0s()()(),h.j41(22,"div",4)(23,"span",6),h.EFF(24,"deployed_code"),h.k0s(),h.j41(25,"h3"),h.EFF(26,"Basic"),h.k0s(),h.j41(27,"span")(28,"strong"),h.EFF(29,"\u20ac330/mese"),h.k0s(),h.EFF(30," IVA Inclusa"),h.k0s(),h.nrm(31,"hr",7),h.j41(32,"p",8),h.EFF(33,"-Consulenza dedicata"),h.k0s(),h.j41(34,"p",8),h.EFF(35,"-Pubblicazione"),h.k0s(),h.j41(36,"p",8),h.EFF(37,"-Creazione contenuti sul posto"),h.k0s(),h.j41(38,"p",8),h.EFF(39,"-Creazione calendario editoriale"),h.k0s(),h.j41(40,"p",8),h.EFF(41,"-Rebranding profilo"),h.k0s(),h.j41(42,"p",9),h.EFF(43,"-2 post/mese"),h.k0s(),h.j41(44,"p",9),h.EFF(45,"-15 storie/mese"),h.k0s(),h.j41(46,"a",10),h.bIt("click",function(){return s.basic()}),h.EFF(47,"Seleziona"),h.k0s()(),h.j41(48,"div",4)(49,"span",6),h.EFF(50,"trending_up"),h.k0s(),h.j41(51,"h3"),h.EFF(52,"Standard"),h.k0s(),h.j41(53,"span")(54,"strong"),h.EFF(55,"\u20ac430/mese"),h.k0s(),h.EFF(56," IVA Inclusa"),h.k0s(),h.nrm(57,"hr",7),h.j41(58,"p",8),h.EFF(59,"-Consulenza dedicata"),h.k0s(),h.j41(60,"p",8),h.EFF(61,"-Pubblicazione"),h.k0s(),h.j41(62,"p",8),h.EFF(63,"-Creazione contenuti sul posto"),h.k0s(),h.j41(64,"p",8),h.EFF(65,"-Creazione calendario editoriale"),h.k0s(),h.j41(66,"p",8),h.EFF(67,"-Rebranding profilo"),h.k0s(),h.j41(68,"p",9),h.EFF(69,"-6 post/mese"),h.k0s(),h.j41(70,"p",9),h.EFF(71,"-40 storie/mese"),h.k0s(),h.j41(72,"button",10),h.bIt("click",function(){return s.on1(),s.standard()}),h.EFF(73,"Seleziona"),h.k0s()(),h.j41(74,"div",4)(75,"span",6),h.EFF(76,"diamond"),h.k0s(),h.j41(77,"h3"),h.EFF(78,"Deluxe"),h.k0s(),h.j41(79,"span")(80,"strong"),h.EFF(81,"\u20ac650/mese"),h.k0s(),h.EFF(82," IVA Inclusa"),h.k0s(),h.nrm(83,"hr",7),h.j41(84,"p",8),h.EFF(85,"-Consulenza dedicata"),h.k0s(),h.j41(86,"p",8),h.EFF(87,"-Pubblicazione"),h.k0s(),h.j41(88,"p",8),h.EFF(89,"-Creazione contenuti sul posto"),h.k0s(),h.j41(90,"p",8),h.EFF(91,"-Creazione calendario editoriale"),h.k0s(),h.j41(92,"p",8),h.EFF(93,"-Rebranding profilo"),h.k0s(),h.j41(94,"p",9),h.EFF(95,"-18 post/mese"),h.k0s(),h.j41(96,"p",9),h.EFF(97,"-60 storie/mese"),h.k0s(),h.j41(98,"button",10),h.bIt("click",function(){return s.on1(),s.deluxe()}),h.EFF(99,"Seleziona"),h.k0s()()()(),h.j41(100,"div",2)(101,"div",11)(102,"div",4),h.nrm(103,"img",12),h.j41(104,"div")(105,"h1"),h.EFF(106,"Grafica"),h.k0s(),h.j41(107,"p")(108,"strong"),h.EFF(109,"Aumenta la produttivit\xe0 e il fatturato della tua impresa "),h.k0s(),h.EFF(110,"grazie alle nostre "),h.j41(111,"strong"),h.EFF(112,"soluzioni informatiche personalizzate"),h.k0s()(),h.j41(113,"p"),h.EFF(114,"Permetti ai tuoi clienti di trovare e "),h.j41(115,"strong"),h.EFF(116,"ottenere informazioni sulla tua attivit\xe0 in qualsiasi momento"),h.k0s()()()(),h.j41(117,"div",13)(118,"div",4)(119,"span",6),h.EFF(120,"contact_mail"),h.k0s(),h.j41(121,"h3"),h.EFF(122,"Flyer"),h.k0s(),h.j41(123,"span")(124,"strong"),h.EFF(125,"\u20ac150"),h.k0s(),h.EFF(126," IVA Inclusa"),h.k0s(),h.nrm(127,"hr",7),h.j41(128,"div",14)(129,"div",15)(130,"p",16),h.bIt("click",function(){return s.removeFlyer()}),h.EFF(131,"-"),h.k0s(),h.nrm(132,"div",17),h.j41(133,"p",18),h.EFF(134,"0"),h.k0s(),h.nrm(135,"div",17),h.j41(136,"p",16),h.bIt("click",function(){return s.addFlyer()}),h.EFF(137,"+"),h.k0s()()()(),h.j41(138,"div",4)(139,"span",6),h.EFF(140,"vrpano"),h.k0s(),h.j41(141,"h3"),h.EFF(142,"Poster"),h.k0s(),h.j41(143,"span")(144,"strong"),h.EFF(145,"\u20ac250"),h.k0s(),h.EFF(146," IVA Inclusa"),h.k0s(),h.nrm(147,"hr",7),h.j41(148,"div",14)(149,"div",15)(150,"p",16),h.bIt("click",function(){return s.removePoster()}),h.EFF(151,"-"),h.k0s(),h.nrm(152,"div",17),h.j41(153,"p",19),h.EFF(154,"0"),h.k0s(),h.nrm(155,"div",17),h.j41(156,"p",16),h.bIt("click",function(){return s.addPoster()}),h.EFF(157,"+"),h.k0s()()()(),h.j41(158,"div",20)(159,"span",6),h.EFF(160,"view_compact_alt"),h.k0s(),h.j41(161,"h3"),h.EFF(162,"Vetrografica"),h.k0s(),h.j41(163,"span")(164,"strong"),h.EFF(165,"\u20ac350"),h.k0s(),h.EFF(166," IVA Inclusa"),h.k0s(),h.j41(167,"div",14)(168,"div",15)(169,"p",16),h.bIt("click",function(){return s.removeVetrografica()}),h.EFF(170,"-"),h.k0s(),h.nrm(171,"div",17),h.j41(172,"p",21),h.EFF(173,"0"),h.k0s(),h.nrm(174,"div",17),h.j41(175,"p",16),h.bIt("click",function(){return s.addVetrografica()}),h.EFF(176,"+"),h.k0s()()()()()(),h.j41(177,"div",22),h.nrm(178,"img",23),h.j41(179,"div")(180,"h1"),h.EFF(181,"Logo"),h.k0s(),h.j41(182,"p"),h.EFF(183,"Ottieni il supporto dedicato di un/a "),h.j41(184,"strong"),h.EFF(185,"commercialista dedicato"),h.k0s(),h.EFF(186," per la "),h.j41(187,"strong"),h.EFF(188,"gestione della contabilit\xe0 e fiscalit\xe0 aziendale"),h.k0s()()(),h.j41(189,"div",13)(190,"div",4)(191,"span",6),h.EFF(192,"upload"),h.k0s(),h.j41(193,"h3"),h.EFF(194,"Importazione"),h.k0s(),h.j41(195,"span")(196,"strong",24),h.EFF(197,"\u20ac500"),h.k0s(),h.nrm(198,"strong",25),h.EFF(199," IVA Inclusa"),h.k0s(),h.nrm(200,"hr",7)(201,"input",26),h.j41(202,"button",10),h.bIt("click",function(){return s.uploadLogo()}),h.EFF(203,"Carica"),h.k0s()(),h.j41(204,"div",4)(205,"span",6),h.EFF(206,"brush"),h.k0s(),h.j41(207,"h3"),h.EFF(208,"Creazione da 0"),h.k0s(),h.j41(209,"span")(210,"strong",27),h.EFF(211,"\u20ac1000"),h.k0s(),h.nrm(212,"strong",28),h.EFF(213," IVA Inclusa"),h.k0s(),h.nrm(214,"hr",7),h.j41(215,"a",29),h.EFF(216,"Seleziona"),h.k0s()()()()()()())},styles:[".miaClasse[_ngcontent-%COMP%]{transition:.2s box-shadow ease-in,.2s background ease-in;box-shadow:0 0 10px 5px #ff00f780;padding:1rem 0rem 1rem 1rem;border-radius:1rem;background:#b700ff1d;margin-right:1rem;animation:_ngcontent-%COMP%_rimbalzo 1.5s infinite}@keyframes _ngcontent-%COMP%_rimbalzo{0%{transform:translateY(0)}50%{transform:translateY(-10px)}to{transform:translateY(0)}}.rimbalzo-class[_ngcontent-%COMP%]{transition:.2s box-shadow ease-in,.2s background ease-in;box-shadow:0 0 10px 5px #ff00f780;padding:1rem 0rem 1rem 1rem;border-radius:1rem;background:#b700ff1d;margin-right:1rem;animation:_ngcontent-%COMP%_rimbalzo 1s infinite}.sbarrato[_ngcontent-%COMP%]{text-decoration:line-through}"]}),e})()},{path:"alchemizzatore/contabilit\xe0",component:(()=>{var n;class e{constructor(){}ngOnInit(){}changeContabilita(){const r=document.getElementById("contabilita-gestione-selection");"In gestione"==r.value&&(document.getElementById("contabilita-in-gestione").style.display="flex"),"In revisione"==r.value&&(document.getElementById("contabilita-in-gestione").style.display="none")}changeTipoDiReddito(){const r=document.getElementById("tipi-di-reddito-input");"Persone Fisiche e Societ\xe0"==r.value&&(document.getElementById("numero-persone-container").style.display="flex"),"Societ\xe0"==r.value&&(document.getElementById("numero-persone-container").style.display="none")}changeIntrastat(){document.getElementById("intrastat-input").checked?document.getElementById("intrastat-input-container").style.display="flex":document.getElementById("intrastat-input-container").style.display="none"}changeRedditi(){document.getElementById("redditi-input").checked?document.getElementById("redditi-input-container").style.display="flex":document.getElementById("redditi-input-container").style.display="none"}changeF24(){document.getElementById("f24-input").checked?document.getElementById("f24-input-container").style.display="flex":document.getElementById("f24-input-container").style.display="none"}changeCreditiDaMonitorare(){document.getElementById("crediti-da-monitorare-input").checked?document.getElementById("crediti-da-monitorare-input-container").style.display="flex":document.getElementById("crediti-da-monitorare-input-container").style.display="none"}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275cmp=h.VBU({type:n,selectors:[["app-contabilita"]],decls:232,vars:0,consts:[[2,"width","100%","height","100%","display","flex","flex-direction","row","flex-wrap","wrap","gap","1rem","overflow-y","auto","overflow-x","hidden"],[2,"margin-top","1rem","margin-bottom","0rem","margin-right","1rem","font-size","1.8rem"],[2,"width","100%","display","flex","flex-wrap","wrap","gap","1rem"],["id","modules-input",1,"card",2,"flex","1 1 0","min-width","20rem","padding-left","1rem","cursor","pointer","display","flex","flex-direction","row","gap","1rem","flex-wrap","wrap","padding-top","1rem","align-items","center","padding-bottom","1rem"],[2,"flex","1 1 0","min-width","15rem"],["src","assets\\svg\\undraw_data_trends_re_2cdy (1).svg",2,"width","15rem","margin-top","1rem"],[2,"display","flex","flex-direction","row","align-items","center","padding-top","0.5rem","gap","0.5rem"],["type","checkbox","checked","",2,"height","1.2rem","width","1.2rem"],[2,"margin-top","0rem","margin-bottom","0rem","font-size","1.5rem"],[1,"material-symbols-outlined","notranslate",2,"font-size","5rem"],[2,"width","90%","background","#333","height","1px","margin-right","2rem"],[2,"margin-top","0rem","margin-bottom","0rem"],["target","_blank",1,"btn",2,"margin-right","0.5rem","width","90%","text-align","center","margin-top","2.4rem"],["target","_blank",1,"btn",2,"margin-right","0.5rem","width","90%","text-align","center","margin-top","1rem"],[1,"card",2,"flex","1 1 0","min-width","20rem","padding-left","1rem","cursor","pointer","display","flex","flex-direction","row","gap","1rem","flex-wrap","wrap","padding-bottom","1rem"],[2,"flex","1 1 0","min-width","15rem","padding-right","1rem"],["src","assets\\svg\\undraw_data_processing_yrrv.svg",2,"width","15rem","margin-top","1rem"],[2,"display","flex","flex-direction","row","align-items","center","gap","0.5rem"],[1,"inputGroup",2,"margin-bottom","0rem"],["id","contabilita-gestione-selection",1,"selector1",2,"width","100%","height","2rem",3,"change"],["value","In gestione"],["value","In revisione"],["id","contabilita-in-gestione",2,"flex-direction","column"],[1,"inputGroup"],["id","email-input","type","text",1,"input-field3"],["for","email-input"],["id","pec-input","type","text",1,"input-field3"],["for","pec-input"],[1,"card",2,"flex","1 1 0","min-width","20rem","overflow","hidden"],["src","assets\\svg\\undraw_growth_analytics_re_pyxf.svg",2,"height","10rem","margin-top","1rem"],[2,"width","100%","height","100%","padding-bottom","1rem","display","flex","flex-direction","column","padding-right","1rem","padding-left","1rem"],[2,"margin-bottom","0rem","font-size","1.5rem"],["type","checkbox",2,"height","1.2rem","width","1.2rem"],[2,"display","flex","flex-direction","column","flex","1 1 0","min-width","200px"],[2,"margin-bottom","-1.5rem","z-index","2","background","white","margin-left","1.5rem","font-size","14px","color","rgb(100, 100, 100)","width","8rem","text-align","center"],["id","activity-priority-input",1,"selector1",2,"width","100%"],["value","10"],["value","20"],["value","30"],[1,"card",2,"flex","1 1 0","min-width","20rem","overflow","hidden","display","flex","flex-direction","row","flex-wrap","wrap","padding-left","1rem","gap","1rem","margin-bottom","5rem","padding-bottom","2rem"],["src","assets\\svg\\undraw_statistic_chart_re_w0pk.svg",2,"width","15rem","margin-top","1rem"],[2,"flex","1 1 0","min-width","20rem","overflow","hidden","padding-top","1rem","padding-bottom","8rem"],[2,"margin-bottom","0rem","font-size","1.5rem","margin-top","0rem"],["id","intrastat-input","type","checkbox",2,"height","1.2rem","width","1.2rem",3,"change"],["for","intrastat-input",2,"margin-top","0rem","margin-bottom","0rem"],["id","intrastat-input-container",1,"inputGroup",2,"margin-right","1rem","display","none"],[1,"material-symbols-outlined","notranslate",2,"font-size","5rem","margin-top","1rem"],["id","redditi-input","type","checkbox",2,"height","1.2rem","width","1.2rem",3,"change"],["for","redditi-input",2,"margin-top","0rem","margin-bottom","0rem"],["id","redditi-input-container",1,"inputGroup",2,"margin-right","1rem","display","none","flex-direction","column"],[2,"display","flex","flex-direction","column"],[2,"z-index","2","background","white","margin-left","1.5rem","font-size","14px","color","rgb(100, 100, 100)","text-align","start","margin-top","1rem"],["id","tipi-di-reddito-input",1,"selector1",2,"width","100%",3,"change"],["value","Societ\xe0"],["value","Persone Fisiche e Societ\xe0"],["id","numero-persone-container",1,"inputGroup",2,"margin-right","1rem","display","none"],[2,"flex","1 1 0","min-width","20rem","overflow","hidden"],["id","f24-input","type","checkbox","checked","",2,"height","1.2rem","width","1.2rem",3,"change"],["for","f24-input",2,"margin-top","0rem","margin-bottom","0rem"],["id","f24-input-container",1,"inputGroup",2,"margin-right","1rem","width","8rem","height","3rem"],["type","text",1,"input-field3"],["id","crediti-da-monitorare-input","type","checkbox",2,"height","1.2rem","width","1.2rem",3,"change"],["for","crediti-da-monitorare-input",2,"margin-top","0rem","margin-bottom","0rem"],["id","crediti-da-monitorare-input-container",1,"inputGroup",2,"display","none","margin-right","1rem","width","18rem","height","3rem"],[1,"material-symbols-outlined","notranslate",2,"font-size","5rem","margin-top","2rem"],[1,"inputGroup",2,"margin-right","1rem","height","2rem"]],template:function(r,s){1&r&&(h.j41(0,"div",0)(1,"h1",1),h.EFF(2,"Contabilit\xe0 e fiscalit\xe0"),h.k0s(),h.j41(3,"div",2)(4,"div",3)(5,"div",4),h.nrm(6,"img",5),h.j41(7,"div")(8,"div",6),h.nrm(9,"input",7),h.j41(10,"h2",8),h.EFF(11,"Bilancio"),h.k0s()(),h.j41(12,"p")(13,"strong"),h.EFF(14,"Redazione del bilancio di esercizio"),h.k0s()(),h.j41(15,"p"),h.EFF(16,"Insieme dei documenti contabili che un'impresa deve redigere periodicamente per esporre la propria situazione "),h.j41(17,"strong"),h.EFF(18,"patrimoniale, finanziaria ed economica"),h.k0s()()()(),h.j41(19,"div",4)(20,"span",9),h.EFF(21,"store"),h.k0s(),h.j41(22,"h3"),h.EFF(23,"Micro"),h.k0s(),h.nrm(24,"hr",10),h.j41(25,"p",11),h.EFF(26,"-Attivo Patrimoniale inferiore a \u20ac175.000"),h.k0s(),h.j41(27,"p",11),h.EFF(28,"-Ricavi annuali inferiori \u20ac350.000"),h.k0s(),h.j41(29,"p",11),h.EFF(30,"-Fino a 5 dipendenti"),h.k0s(),h.j41(31,"a",12),h.EFF(32,"Seleziona"),h.k0s()(),h.j41(33,"div",4)(34,"span",9),h.EFF(35,"apartment"),h.k0s(),h.j41(36,"h3"),h.EFF(37,"Abbreviato"),h.k0s(),h.nrm(38,"hr",10),h.j41(39,"p",11),h.EFF(40,"-Attivo Patrimoniale compreso tra \u20ac350.000 a \u20ac4,4 Milioni"),h.k0s(),h.j41(41,"p",11),h.EFF(42,"-Ricavi annuali compresi tra \u20ac175.000 a \u20ac8,8 Milioni"),h.k0s(),h.j41(43,"p",11),h.EFF(44,"-Pi\xf9 di 5 a 49 dipendenti"),h.k0s(),h.j41(45,"a",13),h.EFF(46,"Seleziona"),h.k0s()(),h.j41(47,"div",4)(48,"span",9),h.EFF(49,"domain_add"),h.k0s(),h.j41(50,"h3"),h.EFF(51,"Ordinario"),h.k0s(),h.nrm(52,"hr",10),h.j41(53,"p",11),h.EFF(54,"-Attivo Patrimoniale maggiore di \u20ac4,4 Milioni"),h.k0s(),h.j41(55,"p",11),h.EFF(56,"-Ricavi annuali maggiori di \u20ac8,8 Milioni"),h.k0s(),h.j41(57,"p",11),h.EFF(58,"-Pi\xf9 di 50 dipendenti"),h.k0s(),h.j41(59,"a",13),h.EFF(60,"Seleziona"),h.k0s()()()(),h.j41(61,"div",2)(62,"div",14)(63,"div",15),h.nrm(64,"img",16),h.j41(65,"div")(66,"div",17),h.nrm(67,"input",7),h.j41(68,"h2",8),h.EFF(69,"Contabilit\xe0"),h.k0s(),h.j41(70,"div",18)(71,"select",19),h.bIt("change",function(){return s.changeContabilita()}),h.j41(72,"option",20),h.EFF(73,"In gestione"),h.k0s(),h.j41(74,"option",21),h.EFF(75,"In revisione"),h.k0s()()()(),h.j41(76,"p"),h.EFF(77,"Insieme degli "),h.j41(78,"strong"),h.EFF(79,"spostamenti di capitale aziendale"),h.k0s(),h.EFF(80," raccolti e organizzati secondo un criterio che permetta un "),h.j41(81,"strong"),h.EFF(82,"rapido accesso e elaborazione dei dati"),h.k0s()()(),h.j41(83,"div",22)(84,"div",23),h.nrm(85,"input",24),h.j41(86,"label",25),h.EFF(87,"Numero fatture annuali"),h.k0s()(),h.j41(88,"div",23),h.nrm(89,"input",26),h.j41(90,"label",27),h.EFF(91,"N.Operazioni C/C mensili"),h.k0s()()()()(),h.j41(92,"div",28),h.nrm(93,"img",29),h.j41(94,"div",30)(95,"h2",31),h.EFF(96,"Accessori"),h.k0s(),h.j41(97,"div",6),h.nrm(98,"input",32),h.j41(99,"label",11),h.EFF(100,"IMU"),h.k0s()(),h.j41(101,"div",6),h.nrm(102,"input",32),h.j41(103,"label",11),h.EFF(104,"Contratti di locazione"),h.k0s()(),h.j41(105,"div",6),h.nrm(106,"input",32),h.j41(107,"label",11),h.EFF(108,"Tassa di concessione governativa"),h.k0s()(),h.j41(109,"div",6),h.nrm(110,"input",32),h.j41(111,"label",11),h.EFF(112,"Registrazione marchio"),h.k0s()(),h.j41(113,"h2",31),h.EFF(114,"Consulenza dedicata"),h.k0s(),h.j41(115,"div",33)(116,"label",34),h.EFF(117,"N.Richieste mensili"),h.k0s(),h.j41(118,"div",23)(119,"select",35)(120,"option",36),h.EFF(121,"10"),h.k0s(),h.j41(122,"option",37),h.EFF(123,"20"),h.k0s(),h.j41(124,"option",38),h.EFF(125,"30"),h.k0s()()()()()()(),h.j41(126,"div",2)(127,"div",39)(128,"div",4),h.nrm(129,"img",40),h.j41(130,"div")(131,"h2",8),h.EFF(132,"Fiscalit\xe0"),h.k0s(),h.j41(133,"p")(134,"strong"),h.EFF(135,"Redazione del bilancio di esercizio"),h.k0s()(),h.j41(136,"p"),h.EFF(137,"Insieme dei documenti contabili che un'impresa deve redigere periodicamente per esporre la propria situazione"),h.j41(138,"strong"),h.EFF(139," patrimoniale, finanziaria ed economica"),h.k0s()()()(),h.j41(140,"div",41)(141,"span",9),h.EFF(142,"currency_exchange"),h.k0s(),h.j41(143,"h2",42),h.EFF(144,"Iva"),h.k0s(),h.j41(145,"div",6),h.nrm(146,"input",7),h.j41(147,"label",11),h.EFF(148,"Liquidazione mensile"),h.k0s()(),h.j41(149,"div",6),h.nrm(150,"input",7),h.j41(151,"label",11),h.EFF(152,"LIPE"),h.k0s()(),h.j41(153,"div",6),h.nrm(154,"input",7),h.j41(155,"label",11),h.EFF(156,"Dichiarazione iva"),h.k0s()(),h.j41(157,"div",6),h.nrm(158,"input",7),h.j41(159,"label",11),h.EFF(160,"Visto di conformit\xe0"),h.k0s()(),h.j41(161,"div",6),h.nrm(162,"input",32),h.j41(163,"label",11),h.EFF(164,"Rimborsi iva trimestrale"),h.k0s()(),h.j41(165,"div",6)(166,"input",43),h.bIt("change",function(){return s.changeIntrastat()}),h.k0s(),h.j41(167,"label",44),h.EFF(168,"Intrastat"),h.k0s()(),h.j41(169,"div",45),h.nrm(170,"input",26),h.j41(171,"label",27),h.EFF(172,"N.Fatt.Intrastat mensili"),h.k0s()(),h.j41(173,"span",46),h.EFF(174,"credit_score"),h.k0s(),h.j41(175,"h2",42),h.EFF(176,"Redditi"),h.k0s(),h.j41(177,"div",6)(178,"input",47),h.bIt("change",function(){return s.changeRedditi()}),h.k0s(),h.j41(179,"label",48),h.EFF(180,"Gestione redditi"),h.k0s()(),h.j41(181,"div",49)(182,"div",50)(183,"label",51),h.EFF(184,"Tipi di reddito"),h.k0s(),h.j41(185,"div",23)(186,"select",52),h.bIt("change",function(){return s.changeTipoDiReddito()}),h.j41(187,"option",53),h.EFF(188,"Societ\xe0"),h.k0s(),h.j41(189,"option",54),h.EFF(190,"Persone Fisiche e Societ\xe0"),h.k0s()()()(),h.j41(191,"div",55),h.nrm(192,"input",26),h.j41(193,"label",27),h.EFF(194,"N.Persone fisiche"),h.k0s()()()(),h.j41(195,"div",56)(196,"span",46),h.EFF(197,"price_check"),h.k0s(),h.j41(198,"h2",42),h.EFF(199,"Pagamenti"),h.k0s(),h.j41(200,"div",6)(201,"input",57),h.bIt("change",function(){return s.changeF24()}),h.k0s(),h.j41(202,"label",58),h.EFF(203,"F24"),h.k0s()(),h.j41(204,"div",59),h.nrm(205,"input",60),h.j41(206,"label",27),h.EFF(207,"N.F24 annui"),h.k0s()(),h.j41(208,"div",6)(209,"input",61),h.bIt("change",function(){return s.changeCreditiDaMonitorare()}),h.k0s(),h.j41(210,"label",62),h.EFF(211,"Crediti da monitorare"),h.k0s()(),h.j41(212,"div",63),h.nrm(213,"input",60),h.j41(214,"label",27),h.EFF(215,"N.Crediti da monitorare annui"),h.k0s()(),h.j41(216,"span",64),h.EFF(217,"point_of_sale"),h.k0s(),h.j41(218,"h2",31),h.EFF(219,"CU/770"),h.k0s(),h.j41(220,"div",6),h.nrm(221,"input",7),h.j41(222,"label",11),h.EFF(223,"CU"),h.k0s()(),h.j41(224,"div",6),h.nrm(225,"input",7),h.j41(226,"label",11),h.EFF(227,"770"),h.k0s()(),h.j41(228,"div",65),h.nrm(229,"input",26),h.j41(230,"label",27),h.EFF(231,"N.Percipienti annui"),h.k0s()()()()()())}}),e})()},{path:"alchemizzatore/management",component:(()=>{var n;class e{constructor(){}ngOnInit(){}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275cmp=h.VBU({type:n,selectors:[["app-management"]],decls:99,vars:0,consts:[[2,"width","100%","display","flex","flex-direction","column","gap","1rem","padding-bottom","6rem","padding-left","1rem","padding-right","1rem"],[2,"margin-top","1rem","margin-bottom","1rem","margin-right","1rem","font-size","1.8rem"],[2,"width","100%","display","flex","flex-wrap","wrap","gap","1rem"],["id","modules-input",1,"card",2,"flex","1 1 0","min-width","20rem","padding-left","1rem","cursor","pointer","display","flex","flex-direction","row","gap","1rem","flex-wrap","wrap","padding-top","1rem","align-items","center","padding-bottom","1rem"],[2,"flex","1 1 0","min-width","15rem"],["src","assets\\svg\\undraw_co_workers_re_1i6i (1).svg",2,"width","15rem","margin-top","1rem"],[1,"material-symbols-outlined","notranslate",2,"font-size","5rem"],[2,"width","90%","background","#333","height","1px","margin-right","2rem"],[2,"margin-top","0rem","margin-bottom","0rem"],[2,"margin-top","0rem","margin-bottom","0rem","font-weight","bold"],["target","_blank",1,"btn",2,"margin-right","0.5rem","width","90%","text-align","center","margin-top","1rem"]],template:function(r,s){1&r&&(h.j41(0,"div",0)(1,"h1",1),h.EFF(2,"Management"),h.k0s(),h.j41(3,"div",2)(4,"div",2)(5,"div",3)(6,"div",4),h.nrm(7,"img",5),h.j41(8,"div")(9,"h1"),h.EFF(10,"Management e vendite"),h.k0s(),h.j41(11,"p")(12,"strong"),h.EFF(13,"Analizza la tua azienda con l'aiuto dei dati"),h.k0s(),h.EFF(14," e "),h.j41(15,"strong"),h.EFF(16,"incrementa le vendite"),h.k0s()(),h.j41(17,"p")(18,"strong"),h.EFF(19,"Migliora i processi produttivi"),h.k0s(),h.EFF(20," e analizza la tua azienda "),h.j41(21,"strong"),h.EFF(22,"ottimizzando costi e tempo"),h.k0s()(),h.j41(23,"p")(24,"strong"),h.EFF(25,"Incrementa le vendite"),h.k0s(),h.EFF(26," analizzando l'intero branding e marketing"),h.k0s()()(),h.j41(27,"div",4)(28,"span",6),h.EFF(29,"deployed_code"),h.k0s(),h.j41(30,"h3"),h.EFF(31,"Basic"),h.k0s(),h.j41(32,"span")(33,"strong"),h.EFF(34,"\u20ac300"),h.k0s(),h.EFF(35," IVA Inclusa"),h.k0s(),h.nrm(36,"hr",7),h.j41(37,"p",8),h.EFF(38,"-Consulenza aziendale"),h.k0s(),h.j41(39,"p",8),h.EFF(40,"-Analisi dei processi"),h.k0s(),h.j41(41,"p",8),h.EFF(42,"-Gestione del tempo"),h.k0s(),h.j41(43,"p",8),h.EFF(44,"-Ottimizzazione vendite"),h.k0s(),h.j41(45,"p",9),h.EFF(46,"-1 consulenza"),h.k0s(),h.j41(47,"p",9),h.EFF(48,"-1 processo ottimizzato"),h.k0s(),h.j41(49,"a",10),h.EFF(50,"Seleziona"),h.k0s()(),h.j41(51,"div",4)(52,"span",6),h.EFF(53,"trending_up"),h.k0s(),h.j41(54,"h3"),h.EFF(55,"Standard"),h.k0s(),h.j41(56,"span")(57,"strong"),h.EFF(58,"\u20ac500"),h.k0s(),h.EFF(59," IVA Inclusa"),h.k0s(),h.nrm(60,"hr",7),h.j41(61,"p",8),h.EFF(62,"-Consulenza aziendale"),h.k0s(),h.j41(63,"p",8),h.EFF(64,"-Analisi dei processi"),h.k0s(),h.j41(65,"p",8),h.EFF(66,"-Gestione del tempo"),h.k0s(),h.j41(67,"p",8),h.EFF(68,"-Ottimizzazione vendite"),h.k0s(),h.j41(69,"p",9),h.EFF(70,"-5 consulenze"),h.k0s(),h.j41(71,"p",9),h.EFF(72,"-2 processi ottimizzati"),h.k0s(),h.j41(73,"a",10),h.EFF(74,"Seleziona"),h.k0s()(),h.j41(75,"div",4)(76,"span",6),h.EFF(77,"diamond"),h.k0s(),h.j41(78,"h3"),h.EFF(79,"Deluxe"),h.k0s(),h.j41(80,"span")(81,"strong"),h.EFF(82,"\u20ac1000"),h.k0s(),h.EFF(83," IVA Inclusa"),h.k0s(),h.nrm(84,"hr",7),h.j41(85,"p",8),h.EFF(86,"-Consulenza aziendale"),h.k0s(),h.j41(87,"p",8),h.EFF(88,"-Analisi dei processi"),h.k0s(),h.j41(89,"p",8),h.EFF(90,"-Gestione del tempo"),h.k0s(),h.j41(91,"p",8),h.EFF(92,"-Ottimizzazione vendite"),h.k0s(),h.j41(93,"p",9),h.EFF(94,"-10 consulenze"),h.k0s(),h.j41(95,"p",9),h.EFF(96,"-3 processi ottimizzati"),h.k0s(),h.j41(97,"a",10),h.EFF(98,"Seleziona"),h.k0s()()()()()())}}),e})()},{path:"alchemizzatore/digitalizzazione",component:(()=>{var n;class e{constructor(){}ngOnInit(){}on(){document.getElementById("mioElemento").classList.add("miaClasse"),document.getElementById("rimbalzo2").classList.add("rimbalzo-class"),document.getElementById("text-sbarrato").classList.add("sbarrato"),document.getElementById("text-sbarrato2").classList.add("sbarrato"),document.getElementById("text-prezzo scontato").innerText=" \u20ac2800",document.getElementById("text-prezzo scontato2").innerText=" \u20ac5000"}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275cmp=h.VBU({type:n,selectors:[["app-digitalizzazione"]],decls:262,vars:0,consts:[[2,"width","100%","display","flex","flex-direction","column","gap","1rem","padding-bottom","6rem","padding-left","1rem","padding-right","1rem"],[2,"margin-top","1rem","margin-bottom","1rem","margin-right","1rem","font-size","1.8rem"],[2,"width","100%","display","flex","flex-wrap","wrap","gap","1rem"],["id","modules-input",1,"card",2,"flex","1 1 0","min-width","20rem","padding-left","1rem","cursor","pointer","display","flex","flex-direction","row","gap","1rem","flex-wrap","wrap","padding-top","1rem","align-items","center","padding-bottom","1rem"],[2,"flex","1 1 0","min-width","15rem"],["src","assets\\svg\\undraw_programming_re_kg9v (1).svg",2,"width","15rem","margin-top","1rem"],[1,"material-symbols-outlined","notranslate",2,"font-size","5rem"],[2,"margin-top","0.2rem","margin-bottom","0rem","font-size","1rem"],[2,"width","90%","background","#333","height","1px","margin-right","2rem"],[2,"margin-top","0rem","margin-bottom","0rem"],[2,"margin-top","0rem","margin-bottom","0rem","font-weight","bold"],["target","_blank",1,"btn",2,"margin-right","0.5rem","width","90%","text-align","center","margin-top","1rem"],[1,"btn",2,"margin-right","0.5rem","width","90%","text-align","center","margin-top","1rem",3,"click"],["src","assets\\svg\\undraw_dashboard_re_3b76.svg",2,"width","15rem","margin-top","1rem"],["id","mioElemento",2,"flex","1 1 0","min-width","15rem"],["id","text-sbarrato"],["id","text-prezzo scontato"],["id","rimbalzo2",2,"flex","1 1 0","min-width","15rem"],["id","text-sbarrato2"],["id","text-prezzo scontato2"],["src","assets\\svg\\undraw_firmware_re_fgdy.svg",2,"width","15rem","margin-top","1rem"],[1,"material-symbols-outlined","notranslate"]],template:function(r,s){1&r&&(h.j41(0,"div",0)(1,"h1",1),h.EFF(2,"Digitalizzazione e automatismi"),h.k0s(),h.j41(3,"div",2)(4,"div",2)(5,"div",3)(6,"div",4),h.nrm(7,"img",5),h.j41(8,"div")(9,"h1"),h.EFF(10,"Sito web"),h.k0s(),h.j41(11,"p")(12,"strong"),h.EFF(13,"Raggiungi un pubblico mondiale"),h.k0s(),h.EFF(14," e "),h.j41(15,"strong"),h.EFF(16,"aumenta le vendite"),h.k0s()(),h.j41(17,"p"),h.EFF(18,"Permetti ai tuoi clienti di avere "),h.j41(19,"strong"),h.EFF(20,"informazioni sulla tua attivit\xe0 in qualsiasi momento"),h.k0s(),h.EFF(21," grazie ai potenti algoritmi informatici alla base dei motori di ricerca"),h.k0s()()(),h.j41(22,"div",4)(23,"span",6),h.EFF(24,"deployed_code"),h.k0s(),h.j41(25,"h3"),h.EFF(26,"Basic"),h.k0s(),h.j41(27,"span")(28,"strong"),h.EFF(29,"\u20ac650"),h.k0s(),h.EFF(30," IVA Inclusa +"),h.k0s(),h.j41(31,"p",7)(32,"strong"),h.EFF(33,"\u20ac50/mese"),h.k0s(),h.EFF(34," IVA Inclusa"),h.k0s(),h.nrm(35,"hr",8),h.j41(36,"p",9),h.EFF(37,"-Sito vetrina"),h.k0s(),h.j41(38,"p",9),h.EFF(39,"-Men\xf9 negozio"),h.k0s(),h.j41(40,"p",9),h.EFF(41,"-Landing page"),h.k0s(),h.nrm(42,"hr",8),h.j41(43,"p",9),h.EFF(44,"-Pubblicazione"),h.k0s(),h.j41(45,"p",9),h.EFF(46,"-Modifica foto, testi e video"),h.k0s(),h.j41(47,"p",10),h.EFF(48,"-1 funzione nuova/mese"),h.k0s(),h.j41(49,"a",11),h.EFF(50,"Seleziona"),h.k0s()(),h.j41(51,"div",4)(52,"span",6),h.EFF(53,"trending_up"),h.k0s(),h.j41(54,"h3"),h.EFF(55,"Standard"),h.k0s(),h.j41(56,"span")(57,"strong"),h.EFF(58,"\u20ac1000"),h.k0s(),h.EFF(59," IVA Inclusa +"),h.k0s(),h.j41(60,"p",7)(61,"strong"),h.EFF(62,"\u20ac60/mese"),h.k0s(),h.EFF(63," IVA Inclusa"),h.k0s(),h.nrm(64,"hr",8),h.j41(65,"p",9),h.EFF(66,"-Sito aziendale"),h.k0s(),h.j41(67,"p",9),h.EFF(68,"-Form (raccolta informazioni es: raccolta preventivo)"),h.k0s(),h.nrm(69,"hr",8),h.j41(70,"p",9),h.EFF(71,"-Pubblicazione"),h.k0s(),h.j41(72,"p",9),h.EFF(73,"-Modifica foto, testi e video"),h.k0s(),h.j41(74,"p",10),h.EFF(75,"-3 funzioni nuove/mese"),h.k0s(),h.j41(76,"button",12),h.bIt("click",function(){return s.on()}),h.EFF(77,"Seleziona"),h.k0s()(),h.j41(78,"div",4)(79,"span",6),h.EFF(80,"diamond"),h.k0s(),h.j41(81,"h3"),h.EFF(82,"Deluxe"),h.k0s(),h.j41(83,"span")(84,"strong"),h.EFF(85,"\u20ac2000"),h.k0s(),h.EFF(86," IVA Inclusa +"),h.k0s(),h.j41(87,"p",7)(88,"strong"),h.EFF(89,"\u20ac100/mese"),h.k0s(),h.EFF(90," IVA Inclusa"),h.k0s(),h.nrm(91,"hr",8),h.j41(92,"p",9),h.EFF(93,"-Sito aziendale professionale e scalabile"),h.k0s(),h.j41(94,"p",9),h.EFF(95,"-Interconnesso con web app"),h.k0s(),h.nrm(96,"hr",8),h.j41(97,"p",9),h.EFF(98,"-Pubblicazione"),h.k0s(),h.j41(99,"p",9),h.EFF(100,"-Modifica foto, testi e video"),h.k0s(),h.j41(101,"p",10),h.EFF(102,"-5 funzioni nuove/mese"),h.k0s(),h.j41(103,"button",12),h.bIt("click",function(){return s.on()}),h.EFF(104,"Seleziona"),h.k0s()()()(),h.j41(105,"div",2)(106,"div",3)(107,"div",4),h.nrm(108,"img",13),h.j41(109,"div")(110,"h1"),h.EFF(111,"Applicazioni"),h.k0s(),h.j41(112,"p")(113,"strong"),h.EFF(114,"Trasforma la tua idea in realt\xe0 grazie ai nostri supporti digitali dedicati"),h.k0s(),h.EFF(115,", ottieni un' "),h.j41(116,"strong"),h.EFF(117,"organizzazione migliore"),h.k0s(),h.EFF(118," e "),h.j41(119,"strong"),h.EFF(120,"aumenta la tua produttivit\xe0"),h.k0s()()()(),h.j41(121,"div",4)(122,"span",6),h.EFF(123,"deployed_code"),h.k0s(),h.j41(124,"h3"),h.EFF(125,"Basic"),h.k0s(),h.j41(126,"span")(127,"strong"),h.EFF(128,"\u20ac2000"),h.k0s(),h.EFF(129," IVA Inclusa +"),h.k0s(),h.j41(130,"p",7)(131,"strong"),h.EFF(132,"\u20ac90/mese"),h.k0s(),h.EFF(133," IVA Inclusa"),h.k0s(),h.nrm(134,"hr",8),h.j41(135,"p",9),h.EFF(136,"-Pubblicazione online"),h.k0s(),h.j41(137,"p",9),h.EFF(138,"-Creazione contenuti sul posto"),h.k0s(),h.j41(139,"p",9),h.EFF(140,"-Creazione calendario editoriale"),h.k0s(),h.j41(141,"p",9),h.EFF(142,"-Rebranding profilo"),h.k0s(),h.nrm(143,"hr",8),h.j41(144,"p",10),h.EFF(145,"-2 post/mese"),h.k0s(),h.j41(146,"p",10),h.EFF(147,"-15 storie/mese"),h.k0s(),h.j41(148,"a",11),h.EFF(149,"Seleziona"),h.k0s()(),h.j41(150,"div",14)(151,"span",6),h.EFF(152,"trending_up"),h.k0s(),h.j41(153,"h3"),h.EFF(154,"Standard"),h.k0s(),h.j41(155,"span")(156,"strong",15),h.EFF(157,"\u20ac3000"),h.k0s(),h.nrm(158,"strong",16),h.EFF(159," IVA Inclusa +"),h.k0s(),h.j41(160,"p",7)(161,"strong"),h.EFF(162,"\u20ac150/mese"),h.k0s(),h.EFF(163," IVA Inclusa"),h.k0s(),h.nrm(164,"hr",8),h.j41(165,"p",9),h.EFF(166,"-Web app o Nativa"),h.k0s(),h.j41(167,"p",9),h.EFF(168,"-Pubblicazione online"),h.k0s(),h.j41(169,"p",9),h.EFF(170,"-Connettibile all'IOT"),h.k0s(),h.j41(171,"p",9),h.EFF(172,"-Creazione calendario editoriale"),h.k0s(),h.j41(173,"p",9),h.EFF(174,"-Rebranding profilo"),h.k0s(),h.j41(175,"p",10),h.EFF(176,"-6 post/mese"),h.k0s(),h.j41(177,"p",10),h.EFF(178,"-40 storie/mese"),h.k0s(),h.j41(179,"a",11),h.EFF(180,"Seleziona"),h.k0s()(),h.j41(181,"div",17)(182,"span",6),h.EFF(183,"diamond"),h.k0s(),h.j41(184,"h3"),h.EFF(185,"Deluxe"),h.k0s(),h.j41(186,"span")(187,"strong",18),h.EFF(188,"\u20ac6000"),h.k0s(),h.nrm(189,"strong",19),h.EFF(190," IVA Inclusa +"),h.k0s(),h.j41(191,"p",7)(192,"strong"),h.EFF(193,"\u20ac250/mese"),h.k0s(),h.EFF(194," IVA Inclusa"),h.k0s(),h.nrm(195,"hr",8),h.j41(196,"p",9),h.EFF(197,"-Web app o Nativa"),h.k0s(),h.j41(198,"p",9),h.EFF(199,"-Pubblicazione online"),h.k0s(),h.j41(200,"p",9),h.EFF(201,"-Connettibile all'IOT"),h.k0s(),h.j41(202,"p",9),h.EFF(203,"-Creazione calendario editoriale"),h.k0s(),h.j41(204,"p",9),h.EFF(205,"-Rebranding profilo"),h.k0s(),h.j41(206,"p",10),h.EFF(207,"-18 post/mese"),h.k0s(),h.j41(208,"p",10),h.EFF(209,"-60 storie/mese"),h.k0s(),h.j41(210,"a",11),h.EFF(211,"Seleziona"),h.k0s()()()()(),h.j41(212,"div",2)(213,"div",3)(214,"div",4),h.nrm(215,"img",20),h.j41(216,"div")(217,"h1"),h.EFF(218,"Iot | internet delle cose"),h.k0s(),h.j41(219,"p")(220,"strong"),h.EFF(221,"Monitora automaticamente i tuoi processi produttivi"),h.k0s(),h.EFF(222," grazie ad appositi "),h.j41(223,"strong"),h.EFF(224,"soluzioni hardware connesse alle nostre soluzioni software"),h.k0s()()()(),h.j41(225,"div",4)(226,"span",6),h.EFF(227,"precision_manufacturing"),h.k0s(),h.nrm(228,"h3"),h.j41(229,"span"),h.EFF(230,"a partire da "),h.j41(231,"strong"),h.EFF(232,"\u20ac2500"),h.k0s(),h.EFF(233," IVA Inclusa +"),h.k0s(),h.j41(234,"p",7),h.EFF(235,"a partire da "),h.j41(236,"strong"),h.EFF(237,"\u20ac100/mese"),h.k0s(),h.EFF(238," IVA Inclusa"),h.k0s(),h.nrm(239,"hr",8),h.j41(240,"p",9)(241,"span",21),h.EFF(242,"notifications"),h.k0s(),h.EFF(243,"Allarme"),h.k0s(),h.j41(244,"p",9)(245,"span",21),h.EFF(246,"counter_3"),h.k0s(),h.EFF(247,"Contatore pezzi lavorati"),h.k0s(),h.j41(248,"p",9)(249,"span",21),h.EFF(250,"weight"),h.k0s(),h.EFF(251,"Bilance smart"),h.k0s(),h.j41(252,"p",9)(253,"span",21),h.EFF(254,"share_location"),h.k0s(),h.EFF(255,"Tracciamento"),h.k0s(),h.j41(256,"p",9)(257,"span",21),h.EFF(258,"table_restaurant"),h.k0s(),h.EFF(259,"Avviso pietanze pronte"),h.k0s(),h.j41(260,"a",11),h.EFF(261,"Seleziona"),h.k0s()()()()())},styles:[".miaClasse[_ngcontent-%COMP%]{transition:.2s box-shadow ease-in,.2s background ease-in;box-shadow:0 0 10px 5px #ffd70080;padding:1rem 0rem 1rem 1rem;border-radius:1rem;background:#ffd9001d;margin-right:1rem;animation:_ngcontent-%COMP%_rimbalzo 1.5s infinite}@keyframes _ngcontent-%COMP%_rimbalzo{0%{transform:translateY(0)}50%{transform:translateY(-10px)}to{transform:translateY(0)}}.rimbalzo-class[_ngcontent-%COMP%]{transition:.2s box-shadow ease-in,.2s background ease-in;box-shadow:0 0 10px 5px #00a6ff80;padding:1rem 0rem 1rem 1rem;border-radius:1rem;background:#00bbff1d;margin-right:1rem;animation:_ngcontent-%COMP%_rimbalzo 1s infinite}.sbarrato[_ngcontent-%COMP%]{text-decoration:line-through}"]}),e})()}];let t$=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=h.$C({type:n}),n.\u0275inj=h.G2t({imports:[_m.iI.forRoot(e$,{preloadingStrategy:_m.Kp}),_m.iI]}),e})(),n$=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=h.$C({type:n,bootstrap:[q4]}),n.\u0275inj=h.G2t({providers:[{provide:v.hb,useClass:v.fw}],imports:[Q.Bb,x.bv.forRoot(),t$]}),e})();(0,h.SmG)(),Q.sG().bootstrapModule(n$).catch(n=>console.log(n))},4412:(hn,Ct,ee)=>{"use strict";ee.d(Ct,{t:()=>Q});var M=ee(1413);class Q extends M.B{constructor(x){super(),this._value=x}get value(){return this.getValue()}_subscribe(x){const v=super._subscribe(x);return!v.closed&&x.next(this._value),v}getValue(){const{hasError:x,thrownError:v,_value:He}=this;if(x)throw v;return this._throwIfClosed(),He}next(x){super.next(this._value=x)}}},1985:(hn,Ct,ee)=>{"use strict";ee.d(Ct,{c:()=>Se});var M=ee(7707),Q=ee(8359),h=ee(3494),x=ee(1203),v=ee(1026),He=ee(8071),re=ee(9786);let Se=(()=>{class Ne{constructor(Te){Te&&(this._subscribe=Te)}lift(Te){const Ke=new Ne;return Ke.source=this,Ke.operator=Te,Ke}subscribe(Te,Ke,it){const Xe=function me(Ne){return Ne&&Ne instanceof M.vU||function qe(Ne){return Ne&&(0,He.T)(Ne.next)&&(0,He.T)(Ne.error)&&(0,He.T)(Ne.complete)}(Ne)&&(0,Q.Uv)(Ne)}(Te)?Te:new M.Ms(Te,Ke,it);return(0,re.Y)(()=>{const{operator:Qe,source:vt}=this;Xe.add(Qe?Qe.call(Xe,vt):vt?this._subscribe(Xe):this._trySubscribe(Xe))}),Xe}_trySubscribe(Te){try{return this._subscribe(Te)}catch(Ke){Te.error(Ke)}}forEach(Te,Ke){return new(Ke=Ge(Ke))((it,Xe)=>{const Qe=new M.Ms({next:vt=>{try{Te(vt)}catch(We){Xe(We),Qe.unsubscribe()}},error:Xe,complete:it});this.subscribe(Qe)})}_subscribe(Te){var Ke;return null===(Ke=this.source)||void 0===Ke?void 0:Ke.subscribe(Te)}[h.s](){return this}pipe(...Te){return(0,x.m)(Te)(this)}toPromise(Te){return new(Te=Ge(Te))((Ke,it)=>{let Xe;this.subscribe(Qe=>Xe=Qe,Qe=>it(Qe),()=>Ke(Xe))})}}return Ne.create=Re=>new Ne(Re),Ne})();function Ge(Ne){var Re;return null!==(Re=null!=Ne?Ne:v.$.Promise)&&void 0!==Re?Re:Promise}},1413:(hn,Ct,ee)=>{"use strict";ee.d(Ct,{B:()=>re});var M=ee(1985),Q=ee(8359);const x=(0,ee(1853).L)(Ge=>function(){Ge(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var v=ee(7908),He=ee(9786);let re=(()=>{class Ge extends M.c{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(me){const Ne=new Se(this,this);return Ne.operator=me,Ne}_throwIfClosed(){if(this.closed)throw new x}next(me){(0,He.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Ne of this.currentObservers)Ne.next(me)}})}error(me){(0,He.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=me;const{observers:Ne}=this;for(;Ne.length;)Ne.shift().error(me)}})}complete(){(0,He.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:me}=this;for(;me.length;)me.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var me;return(null===(me=this.observers)||void 0===me?void 0:me.length)>0}_trySubscribe(me){return this._throwIfClosed(),super._trySubscribe(me)}_subscribe(me){return this._throwIfClosed(),this._checkFinalizedStatuses(me),this._innerSubscribe(me)}_innerSubscribe(me){const{hasError:Ne,isStopped:Re,observers:Te}=this;return Ne||Re?Q.Kn:(this.currentObservers=null,Te.push(me),new Q.yU(()=>{this.currentObservers=null,(0,v.o)(Te,me)}))}_checkFinalizedStatuses(me){const{hasError:Ne,thrownError:Re,isStopped:Te}=this;Ne?me.error(Re):Te&&me.complete()}asObservable(){const me=new M.c;return me.source=this,me}}return Ge.create=(qe,me)=>new Se(qe,me),Ge})();class Se extends re{constructor(qe,me){super(),this.destination=qe,this.source=me}next(qe){var me,Ne;null===(Ne=null===(me=this.destination)||void 0===me?void 0:me.next)||void 0===Ne||Ne.call(me,qe)}error(qe){var me,Ne;null===(Ne=null===(me=this.destination)||void 0===me?void 0:me.error)||void 0===Ne||Ne.call(me,qe)}complete(){var qe,me;null===(me=null===(qe=this.destination)||void 0===qe?void 0:qe.complete)||void 0===me||me.call(qe)}_subscribe(qe){var me,Ne;return null!==(Ne=null===(me=this.source)||void 0===me?void 0:me.subscribe(qe))&&void 0!==Ne?Ne:Q.Kn}}},7707:(hn,Ct,ee)=>{"use strict";ee.d(Ct,{Ms:()=>it,vU:()=>Ne});var M=ee(8071),Q=ee(8359),h=ee(1026),x=ee(5334),v=ee(5343);const He=Ge("C",void 0,void 0);function Ge(at,pe,ke){return{kind:at,value:pe,error:ke}}var qe=ee(9270),me=ee(9786);class Ne extends Q.yU{constructor(pe){super(),this.isStopped=!1,pe?(this.destination=pe,(0,Q.Uv)(pe)&&pe.add(this)):this.destination=We}static create(pe,ke,$e){return new it(pe,ke,$e)}next(pe){this.isStopped?vt(function Se(at){return Ge("N",at,void 0)}(pe),this):this._next(pe)}error(pe){this.isStopped?vt(function re(at){return Ge("E",void 0,at)}(pe),this):(this.isStopped=!0,this._error(pe))}complete(){this.isStopped?vt(He,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(pe){this.destination.next(pe)}_error(pe){try{this.destination.error(pe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Re=Function.prototype.bind;function Te(at,pe){return Re.call(at,pe)}class Ke{constructor(pe){this.partialObserver=pe}next(pe){const{partialObserver:ke}=this;if(ke.next)try{ke.next(pe)}catch($e){Xe($e)}}error(pe){const{partialObserver:ke}=this;if(ke.error)try{ke.error(pe)}catch($e){Xe($e)}else Xe(pe)}complete(){const{partialObserver:pe}=this;if(pe.complete)try{pe.complete()}catch(ke){Xe(ke)}}}class it extends Ne{constructor(pe,ke,$e){let tt;if(super(),(0,M.T)(pe)||!pe)tt={next:null!=pe?pe:void 0,error:null!=ke?ke:void 0,complete:null!=$e?$e:void 0};else{let nt;this&&h.$.useDeprecatedNextContext?(nt=Object.create(pe),nt.unsubscribe=()=>this.unsubscribe(),tt={next:pe.next&&Te(pe.next,nt),error:pe.error&&Te(pe.error,nt),complete:pe.complete&&Te(pe.complete,nt)}):tt=pe}this.destination=new Ke(tt)}}function Xe(at){h.$.useDeprecatedSynchronousErrorHandling?(0,me.l)(at):(0,x.m)(at)}function vt(at,pe){const{onStoppedNotification:ke}=h.$;ke&&qe.f.setTimeout(()=>ke(at,pe))}const We={closed:!0,next:v.l,error:function Qe(at){throw at},complete:v.l}},8359:(hn,Ct,ee)=>{"use strict";ee.d(Ct,{Kn:()=>He,yU:()=>v,Uv:()=>re});var M=ee(8071);const h=(0,ee(1853).L)(Ge=>function(me){Ge(this),this.message=me?`${me.length} errors occurred during unsubscription:\n${me.map((Ne,Re)=>`${Re+1}) ${Ne.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=me});var x=ee(7908);class v{constructor(qe){this.initialTeardown=qe,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let qe;if(!this.closed){this.closed=!0;const{_parentage:me}=this;if(me)if(this._parentage=null,Array.isArray(me))for(const Te of me)Te.remove(this);else me.remove(this);const{initialTeardown:Ne}=this;if((0,M.T)(Ne))try{Ne()}catch(Te){qe=Te instanceof h?Te.errors:[Te]}const{_finalizers:Re}=this;if(Re){this._finalizers=null;for(const Te of Re)try{Se(Te)}catch(Ke){qe=null!=qe?qe:[],Ke instanceof h?qe=[...qe,...Ke.errors]:qe.push(Ke)}}if(qe)throw new h(qe)}}add(qe){var me;if(qe&&qe!==this)if(this.closed)Se(qe);else{if(qe instanceof v){if(qe.closed||qe._hasParent(this))return;qe._addParent(this)}(this._finalizers=null!==(me=this._finalizers)&&void 0!==me?me:[]).push(qe)}}_hasParent(qe){const{_parentage:me}=this;return me===qe||Array.isArray(me)&&me.includes(qe)}_addParent(qe){const{_parentage:me}=this;this._parentage=Array.isArray(me)?(me.push(qe),me):me?[me,qe]:qe}_removeParent(qe){const{_parentage:me}=this;me===qe?this._parentage=null:Array.isArray(me)&&(0,x.o)(me,qe)}remove(qe){const{_finalizers:me}=this;me&&(0,x.o)(me,qe),qe instanceof v&&qe._removeParent(this)}}v.EMPTY=(()=>{const Ge=new v;return Ge.closed=!0,Ge})();const He=v.EMPTY;function re(Ge){return Ge instanceof v||Ge&&"closed"in Ge&&(0,M.T)(Ge.remove)&&(0,M.T)(Ge.add)&&(0,M.T)(Ge.unsubscribe)}function Se(Ge){(0,M.T)(Ge)?Ge():Ge.unsubscribe()}},1026:(hn,Ct,ee)=>{"use strict";ee.d(Ct,{$:()=>M});const M={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},4572:(hn,Ct,ee)=>{"use strict";ee.d(Ct,{z:()=>qe});var M=ee(1985),Q=ee(3073),h=ee(6648),x=ee(3669),v=ee(6450),He=ee(3794),re=ee(8496),Se=ee(4360),Ge=ee(5225);function qe(...Re){const Te=(0,He.lI)(Re),Ke=(0,He.ms)(Re),{args:it,keys:Xe}=(0,Q.D)(Re);if(0===it.length)return(0,h.H)([],Te);const Qe=new M.c(function me(Re,Te,Ke=x.D){return it=>{Ne(Te,()=>{const{length:Xe}=Re,Qe=new Array(Xe);let vt=Xe,We=Xe;for(let at=0;at<Xe;at++)Ne(Te,()=>{const pe=(0,h.H)(Re[at],Te);let ke=!1;pe.subscribe((0,Se._)(it,$e=>{Qe[at]=$e,ke||(ke=!0,We--),We||it.next(Ke(Qe.slice()))},()=>{--vt||it.complete()}))},it)},it)}}(it,Te,Xe?vt=>(0,re.e)(Xe,vt):x.D));return Ke?Qe.pipe((0,v.I)(Ke)):Qe}function Ne(Re,Te,Ke){Re?(0,Ge.N)(Ke,Re,Te):Te()}},6648:(hn,Ct,ee)=>{"use strict";ee.d(Ct,{H:()=>$e});var M=ee(8750),Q=ee(5225),h=ee(9974),x=ee(4360);function v(tt,nt=0){return(0,h.N)((_t,Ye)=>{_t.subscribe((0,x._)(Ye,Pt=>(0,Q.N)(Ye,tt,()=>Ye.next(Pt),nt),()=>(0,Q.N)(Ye,tt,()=>Ye.complete(),nt),Pt=>(0,Q.N)(Ye,tt,()=>Ye.error(Pt),nt)))})}function He(tt,nt=0){return(0,h.N)((_t,Ye)=>{Ye.add(tt.schedule(()=>_t.subscribe(Ye),nt))})}var Ge=ee(1985),me=ee(4761),Ne=ee(8071);function Te(tt,nt){if(!tt)throw new Error("Iterable cannot be null");return new Ge.c(_t=>{(0,Q.N)(_t,nt,()=>{const Ye=tt[Symbol.asyncIterator]();(0,Q.N)(_t,nt,()=>{Ye.next().then(Pt=>{Pt.done?_t.complete():_t.next(Pt.value)})},0,!0)})})}var Ke=ee(5055),it=ee(9858),Xe=ee(7441),Qe=ee(5397),vt=ee(7953),We=ee(591),at=ee(5196);function $e(tt,nt){return nt?function ke(tt,nt){if(null!=tt){if((0,Ke.l)(tt))return function re(tt,nt){return(0,M.Tg)(tt).pipe(He(nt),v(nt))}(tt,nt);if((0,Xe.X)(tt))return function qe(tt,nt){return new Ge.c(_t=>{let Ye=0;return nt.schedule(function(){Ye===tt.length?_t.complete():(_t.next(tt[Ye++]),_t.closed||this.schedule())})})}(tt,nt);if((0,it.y)(tt))return function Se(tt,nt){return(0,M.Tg)(tt).pipe(He(nt),v(nt))}(tt,nt);if((0,vt.T)(tt))return Te(tt,nt);if((0,Qe.x)(tt))return function Re(tt,nt){return new Ge.c(_t=>{let Ye;return(0,Q.N)(_t,nt,()=>{Ye=tt[me.l](),(0,Q.N)(_t,nt,()=>{let Pt,Ft;try{({value:Pt,done:Ft}=Ye.next())}catch(nn){return void _t.error(nn)}Ft?_t.complete():_t.next(Pt)},0,!0)}),()=>(0,Ne.T)(null==Ye?void 0:Ye.return)&&Ye.return()})}(tt,nt);if((0,at.U)(tt))return function pe(tt,nt){return Te((0,at.C)(tt),nt)}(tt,nt)}throw(0,We.L)(tt)}(tt,nt):(0,M.Tg)(tt)}},8750:(hn,Ct,ee)=>{"use strict";ee.d(Ct,{Tg:()=>Re});var M=ee(1635),Q=ee(7441),h=ee(9858),x=ee(1985),v=ee(5055),He=ee(7953),re=ee(591),Se=ee(5397),Ge=ee(5196),qe=ee(8071),me=ee(5334),Ne=ee(3494);function Re(at){if(at instanceof x.c)return at;if(null!=at){if((0,v.l)(at))return function Te(at){return new x.c(pe=>{const ke=at[Ne.s]();if((0,qe.T)(ke.subscribe))return ke.subscribe(pe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(at);if((0,Q.X)(at))return function Ke(at){return new x.c(pe=>{for(let ke=0;ke<at.length&&!pe.closed;ke++)pe.next(at[ke]);pe.complete()})}(at);if((0,h.y)(at))return function it(at){return new x.c(pe=>{at.then(ke=>{pe.closed||(pe.next(ke),pe.complete())},ke=>pe.error(ke)).then(null,me.m)})}(at);if((0,He.T)(at))return Qe(at);if((0,Se.x)(at))return function Xe(at){return new x.c(pe=>{for(const ke of at)if(pe.next(ke),pe.closed)return;pe.complete()})}(at);if((0,Ge.U)(at))return function vt(at){return Qe((0,Ge.C)(at))}(at)}throw(0,re.L)(at)}function Qe(at){return new x.c(pe=>{(function We(at,pe){var ke,$e,tt,nt;return(0,M.sH)(this,void 0,void 0,function*(){try{for(ke=(0,M.xN)(at);!($e=yield ke.next()).done;)if(pe.next($e.value),pe.closed)return}catch(_t){tt={error:_t}}finally{try{$e&&!$e.done&&(nt=ke.return)&&(yield nt.call(ke))}finally{if(tt)throw tt.error}}pe.complete()})})(at,pe).catch(ke=>pe.error(ke))})}},7673:(hn,Ct,ee)=>{"use strict";ee.d(Ct,{of:()=>h});var M=ee(3794),Q=ee(6648);function h(...x){const v=(0,M.lI)(x);return(0,Q.H)(x,v)}},4360:(hn,Ct,ee)=>{"use strict";ee.d(Ct,{_:()=>Q});var M=ee(7707);function Q(x,v,He,re,Se){return new h(x,v,He,re,Se)}class h extends M.vU{constructor(v,He,re,Se,Ge,qe){super(v),this.onFinalize=Ge,this.shouldUnsubscribe=qe,this._next=He?function(me){try{He(me)}catch(Ne){v.error(Ne)}}:super._next,this._error=Se?function(me){try{Se(me)}catch(Ne){v.error(Ne)}finally{this.unsubscribe()}}:super._error,this._complete=re?function(){try{re()}catch(me){v.error(me)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var v;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:He}=this;super.unsubscribe(),!He&&(null===(v=this.onFinalize)||void 0===v||v.call(this))}}}},5964:(hn,Ct,ee)=>{"use strict";ee.d(Ct,{p:()=>h});var M=ee(9974),Q=ee(4360);function h(x,v){return(0,M.N)((He,re)=>{let Se=0;He.subscribe((0,Q._)(re,Ge=>x.call(v,Ge,Se++)&&re.next(Ge)))})}},6354:(hn,Ct,ee)=>{"use strict";ee.d(Ct,{T:()=>h});var M=ee(9974),Q=ee(4360);function h(x,v){return(0,M.N)((He,re)=>{let Se=0;He.subscribe((0,Q._)(re,Ge=>{re.next(x.call(v,Ge,Se++))}))})}},1397:(hn,Ct,ee)=>{"use strict";ee.d(Ct,{Z:()=>Se});var M=ee(6354),Q=ee(8750),h=ee(9974),x=ee(5225),v=ee(4360),re=ee(8071);function Se(Ge,qe,me=1/0){return(0,re.T)(qe)?Se((Ne,Re)=>(0,M.T)((Te,Ke)=>qe(Ne,Te,Re,Ke))((0,Q.Tg)(Ge(Ne,Re))),me):("number"==typeof qe&&(me=qe),(0,h.N)((Ne,Re)=>function He(Ge,qe,me,Ne,Re,Te,Ke,it){const Xe=[];let Qe=0,vt=0,We=!1;const at=()=>{We&&!Xe.length&&!Qe&&qe.complete()},pe=$e=>Qe<Ne?ke($e):Xe.push($e),ke=$e=>{Te&&qe.next($e),Qe++;let tt=!1;(0,Q.Tg)(me($e,vt++)).subscribe((0,v._)(qe,nt=>{null==Re||Re(nt),Te?pe(nt):qe.next(nt)},()=>{tt=!0},void 0,()=>{if(tt)try{for(Qe--;Xe.length&&Qe<Ne;){const nt=Xe.shift();Ke?(0,x.N)(qe,Ke,()=>ke(nt)):ke(nt)}at()}catch(nt){qe.error(nt)}}))};return Ge.subscribe((0,v._)(qe,pe,()=>{We=!0,at()})),()=>{null==it||it()}}(Ne,Re,Ge,me)))}},5558:(hn,Ct,ee)=>{"use strict";ee.d(Ct,{n:()=>x});var M=ee(8750),Q=ee(9974),h=ee(4360);function x(v,He){return(0,Q.N)((re,Se)=>{let Ge=null,qe=0,me=!1;const Ne=()=>me&&!Ge&&Se.complete();re.subscribe((0,h._)(Se,Re=>{null==Ge||Ge.unsubscribe();let Te=0;const Ke=qe++;(0,M.Tg)(v(Re,Ke)).subscribe(Ge=(0,h._)(Se,it=>Se.next(He?He(Re,it,Ke,Te++):it),()=>{Ge=null,Ne()}))},()=>{me=!0,Ne()}))})}},9270:(hn,Ct,ee)=>{"use strict";ee.d(Ct,{f:()=>M});const M={setTimeout(Q,h,...x){const{delegate:v}=M;return null!=v&&v.setTimeout?v.setTimeout(Q,h,...x):setTimeout(Q,h,...x)},clearTimeout(Q){const{delegate:h}=M;return((null==h?void 0:h.clearTimeout)||clearTimeout)(Q)},delegate:void 0}},4761:(hn,Ct,ee)=>{"use strict";ee.d(Ct,{l:()=>Q});const Q=function M(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3494:(hn,Ct,ee)=>{"use strict";ee.d(Ct,{s:()=>M});const M="function"==typeof Symbol&&Symbol.observable||"@@observable"},3794:(hn,Ct,ee)=>{"use strict";ee.d(Ct,{ms:()=>x,lI:()=>v});var M=ee(8071);function h(re){return re[re.length-1]}function x(re){return(0,M.T)(h(re))?re.pop():void 0}function v(re){return function Q(re){return re&&(0,M.T)(re.schedule)}(h(re))?re.pop():void 0}},3073:(hn,Ct,ee)=>{"use strict";ee.d(Ct,{D:()=>v});const{isArray:M}=Array,{getPrototypeOf:Q,prototype:h,keys:x}=Object;function v(re){if(1===re.length){const Se=re[0];if(M(Se))return{args:Se,keys:null};if(function He(re){return re&&"object"==typeof re&&Q(re)===h}(Se)){const Ge=x(Se);return{args:Ge.map(qe=>Se[qe]),keys:Ge}}}return{args:re,keys:null}}},7908:(hn,Ct,ee)=>{"use strict";function M(Q,h){if(Q){const x=Q.indexOf(h);0<=x&&Q.splice(x,1)}}ee.d(Ct,{o:()=>M})},1853:(hn,Ct,ee)=>{"use strict";function M(Q){const x=Q(v=>{Error.call(v),v.stack=(new Error).stack});return x.prototype=Object.create(Error.prototype),x.prototype.constructor=x,x}ee.d(Ct,{L:()=>M})},8496:(hn,Ct,ee)=>{"use strict";function M(Q,h){return Q.reduce((x,v,He)=>(x[v]=h[He],x),{})}ee.d(Ct,{e:()=>M})},9786:(hn,Ct,ee)=>{"use strict";ee.d(Ct,{Y:()=>h,l:()=>x});var M=ee(1026);let Q=null;function h(v){if(M.$.useDeprecatedSynchronousErrorHandling){const He=!Q;if(He&&(Q={errorThrown:!1,error:null}),v(),He){const{errorThrown:re,error:Se}=Q;if(Q=null,re)throw Se}}else v()}function x(v){M.$.useDeprecatedSynchronousErrorHandling&&Q&&(Q.errorThrown=!0,Q.error=v)}},5225:(hn,Ct,ee)=>{"use strict";function M(Q,h,x,v=0,He=!1){const re=h.schedule(function(){x(),He?Q.add(this.schedule(null,v)):this.unsubscribe()},v);if(Q.add(re),!He)return re}ee.d(Ct,{N:()=>M})},3669:(hn,Ct,ee)=>{"use strict";function M(Q){return Q}ee.d(Ct,{D:()=>M})},7441:(hn,Ct,ee)=>{"use strict";ee.d(Ct,{X:()=>M});const M=Q=>Q&&"number"==typeof Q.length&&"function"!=typeof Q},7953:(hn,Ct,ee)=>{"use strict";ee.d(Ct,{T:()=>Q});var M=ee(8071);function Q(h){return Symbol.asyncIterator&&(0,M.T)(null==h?void 0:h[Symbol.asyncIterator])}},8071:(hn,Ct,ee)=>{"use strict";function M(Q){return"function"==typeof Q}ee.d(Ct,{T:()=>M})},5055:(hn,Ct,ee)=>{"use strict";ee.d(Ct,{l:()=>h});var M=ee(3494),Q=ee(8071);function h(x){return(0,Q.T)(x[M.s])}},5397:(hn,Ct,ee)=>{"use strict";ee.d(Ct,{x:()=>h});var M=ee(4761),Q=ee(8071);function h(x){return(0,Q.T)(null==x?void 0:x[M.l])}},9858:(hn,Ct,ee)=>{"use strict";ee.d(Ct,{y:()=>Q});var M=ee(8071);function Q(h){return(0,M.T)(null==h?void 0:h.then)}},5196:(hn,Ct,ee)=>{"use strict";ee.d(Ct,{C:()=>h,U:()=>x});var M=ee(1635),Q=ee(8071);function h(v){return(0,M.AQ)(this,arguments,function*(){const re=v.getReader();try{for(;;){const{value:Se,done:Ge}=yield(0,M.N3)(re.read());if(Ge)return yield(0,M.N3)(void 0);yield yield(0,M.N3)(Se)}}finally{re.releaseLock()}})}function x(v){return(0,Q.T)(null==v?void 0:v.getReader)}},9974:(hn,Ct,ee)=>{"use strict";ee.d(Ct,{N:()=>h,S:()=>Q});var M=ee(8071);function Q(x){return(0,M.T)(null==x?void 0:x.lift)}function h(x){return v=>{if(Q(v))return v.lift(function(He){try{return x(He,this)}catch(re){this.error(re)}});throw new TypeError("Unable to lift unknown Observable type")}}},6450:(hn,Ct,ee)=>{"use strict";ee.d(Ct,{I:()=>x});var M=ee(6354);const{isArray:Q}=Array;function x(v){return(0,M.T)(He=>function h(v,He){return Q(He)?v(...He):v(He)}(v,He))}},5343:(hn,Ct,ee)=>{"use strict";function M(){}ee.d(Ct,{l:()=>M})},1203:(hn,Ct,ee)=>{"use strict";ee.d(Ct,{F:()=>Q,m:()=>h});var M=ee(3669);function Q(...x){return h(x)}function h(x){return 0===x.length?M.D:1===x.length?x[0]:function(He){return x.reduce((re,Se)=>Se(re),He)}}},5334:(hn,Ct,ee)=>{"use strict";ee.d(Ct,{m:()=>h});var M=ee(1026),Q=ee(9270);function h(x){Q.f.setTimeout(()=>{const{onUnhandledError:v}=M.$;if(!v)throw x;v(x)})}},591:(hn,Ct,ee)=>{"use strict";function M(Q){return new TypeError(`You provided ${null!==Q&&"object"==typeof Q?"an invalid object":`'${Q}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}ee.d(Ct,{L:()=>M})},8996:(hn,Ct,ee)=>{var M={"./ion-accordion_2.entry.js":[2375,2076,2375],"./ion-action-sheet.entry.js":[8814,2076,8814],"./ion-alert.entry.js":[5222,2076,5222],"./ion-app_8.entry.js":[7720,2076,7720],"./ion-avatar_3.entry.js":[1049,1049],"./ion-back-button.entry.js":[3162,2076,3162],"./ion-backdrop.entry.js":[7240,7240],"./ion-breadcrumb_2.entry.js":[8314,2076,8314],"./ion-button_2.entry.js":[4591,4591],"./ion-card_5.entry.js":[8584,8584],"./ion-checkbox.entry.js":[3511,3511],"./ion-chip.entry.js":[6024,6024],"./ion-col_3.entry.js":[5100,5100],"./ion-datetime-button.entry.js":[7428,1293,7428],"./ion-datetime_3.entry.js":[2885,1293,2076,2885],"./ion-fab_3.entry.js":[4463,2076,4463],"./ion-img.entry.js":[4183,4183],"./ion-infinite-scroll_2.entry.js":[4171,2076,4171],"./ion-input-password-toggle.entry.js":[6521,2076,6521],"./ion-input.entry.js":[9344,2076,9344],"./ion-item-option_3.entry.js":[5949,2076,5949],"./ion-item_8.entry.js":[3506,2076,3506],"./ion-loading.entry.js":[7372,2076,7372],"./ion-menu_3.entry.js":[2075,2076,2075],"./ion-modal.entry.js":[441,2076,441],"./ion-nav_2.entry.js":[5712,2076,5712],"./ion-picker-column-option.entry.js":[9013,9013],"./ion-picker-column.entry.js":[1459,2076,1459],"./ion-picker.entry.js":[6840,6840],"./ion-popover.entry.js":[6433,2076,6433],"./ion-progress-bar.entry.js":[9977,9977],"./ion-radio_2.entry.js":[8066,2076,8066],"./ion-range.entry.js":[8477,2076,8477],"./ion-refresher_2.entry.js":[5197,2076,5197],"./ion-reorder_2.entry.js":[7030,2076,7030],"./ion-ripple-effect.entry.js":[964,964],"./ion-route_4.entry.js":[8970,8970],"./ion-searchbar.entry.js":[8193,2076,8193],"./ion-segment_2.entry.js":[2560,2076,2560],"./ion-select_3.entry.js":[7076,2076,7076],"./ion-spinner.entry.js":[8805,2076,8805],"./ion-split-pane.entry.js":[5887,5887],"./ion-tab-bar_2.entry.js":[4406,2076,4406],"./ion-tab_2.entry.js":[1102,1102],"./ion-text.entry.js":[1577,1577],"./ion-textarea.entry.js":[2348,2076,2348],"./ion-toast.entry.js":[2415,2076,2415],"./ion-toggle.entry.js":[3814,2076,3814]};function Q(h){if(!ee.o(M,h))return Promise.resolve().then(()=>{var He=new Error("Cannot find module '"+h+"'");throw He.code="MODULE_NOT_FOUND",He});var x=M[h],v=x[0];return Promise.all(x.slice(1).map(ee.e)).then(()=>ee(v))}Q.keys=()=>Object.keys(M),Q.id=8996,hn.exports=Q},177:(hn,Ct,ee)=>{"use strict";ee.d(Ct,{AJ:()=>ut,MD:()=>Ee,N0:()=>qr,QT:()=>h,Sm:()=>it,T3:()=>or,VF:()=>v,Vy:()=>Yt,Xr:()=>vr,ZD:()=>x,_b:()=>lt,aZ:()=>Qe,bT:()=>Br,fw:()=>Xe,hb:()=>Te,hj:()=>Ge,qQ:()=>re});var M=ee(4438);let Q=null;function h(){return Q}function x(m){var p;null!==(p=Q)&&void 0!==p||(Q=m)}class v{}const re=new M.nKC("");let Se=(()=>{var m;class p{historyGo(C){throw new Error("")}}return(m=p).\u0275fac=function(C){return new(C||m)},m.\u0275prov=M.jDH({token:m,factory:()=>(0,M.WQX)(qe),providedIn:"platform"}),p})();const Ge=new M.nKC("");let qe=(()=>{var m;class p extends Se{constructor(){super(),this._doc=(0,M.WQX)(re),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return h().getBaseHref(this._doc)}onPopState(C){const z=h().getGlobalEventTarget(this._doc,"window");return z.addEventListener("popstate",C,!1),()=>z.removeEventListener("popstate",C)}onHashChange(C){const z=h().getGlobalEventTarget(this._doc,"window");return z.addEventListener("hashchange",C,!1),()=>z.removeEventListener("hashchange",C)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(C){this._location.pathname=C}pushState(C,z,te){this._history.pushState(C,z,te)}replaceState(C,z,te){this._history.replaceState(C,z,te)}forward(){this._history.forward()}back(){this._history.back()}historyGo(C=0){this._history.go(C)}getState(){return this._history.state}}return(m=p).\u0275fac=function(C){return new(C||m)},m.\u0275prov=M.jDH({token:m,factory:()=>new m,providedIn:"platform"}),p})();function me(m,p){if(0==m.length)return p;if(0==p.length)return m;let A=0;return m.endsWith("/")&&A++,p.startsWith("/")&&A++,2==A?m+p.substring(1):1==A?m+p:m+"/"+p}function Ne(m){const p=m.match(/#|\?|$/),A=p&&p.index||m.length;return m.slice(0,A-("/"===m[A-1]?1:0))+m.slice(A)}function Re(m){return m&&"?"!==m[0]?"?"+m:m}let Te=(()=>{var m;class p{historyGo(C){throw new Error("")}}return(m=p).\u0275fac=function(C){return new(C||m)},m.\u0275prov=M.jDH({token:m,factory:()=>(0,M.WQX)(it),providedIn:"root"}),p})();const Ke=new M.nKC("");let it=(()=>{var m;class p extends Te{constructor(C,z){var te,ve,ft;super(),this._platformLocation=C,this._removeListenerFns=[],this._baseHref=null!==(te=null!==(ve=null!=z?z:this._platformLocation.getBaseHrefFromDOM())&&void 0!==ve?ve:null===(ft=(0,M.WQX)(re).location)||void 0===ft?void 0:ft.origin)&&void 0!==te?te:""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(C){this._removeListenerFns.push(this._platformLocation.onPopState(C),this._platformLocation.onHashChange(C))}getBaseHref(){return this._baseHref}prepareExternalUrl(C){return me(this._baseHref,C)}path(C=!1){const z=this._platformLocation.pathname+Re(this._platformLocation.search),te=this._platformLocation.hash;return te&&C?`${z}${te}`:z}pushState(C,z,te,ve){const ft=this.prepareExternalUrl(te+Re(ve));this._platformLocation.pushState(C,z,ft)}replaceState(C,z,te,ve){const ft=this.prepareExternalUrl(te+Re(ve));this._platformLocation.replaceState(C,z,ft)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(C=0){var z,te;null===(z=(te=this._platformLocation).historyGo)||void 0===z||z.call(te,C)}}return(m=p).\u0275fac=function(C){return new(C||m)(M.KVO(Se),M.KVO(Ke,8))},m.\u0275prov=M.jDH({token:m,factory:m.\u0275fac,providedIn:"root"}),p})(),Xe=(()=>{var m;class p extends Te{constructor(C,z){super(),this._platformLocation=C,this._baseHref="",this._removeListenerFns=[],null!=z&&(this._baseHref=z)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(C){this._removeListenerFns.push(this._platformLocation.onPopState(C),this._platformLocation.onHashChange(C))}getBaseHref(){return this._baseHref}path(C=!1){var z;const te=null!==(z=this._platformLocation.hash)&&void 0!==z?z:"#";return te.length>0?te.substring(1):te}prepareExternalUrl(C){const z=me(this._baseHref,C);return z.length>0?"#"+z:z}pushState(C,z,te,ve){let ft=this.prepareExternalUrl(te+Re(ve));0==ft.length&&(ft=this._platformLocation.pathname),this._platformLocation.pushState(C,z,ft)}replaceState(C,z,te,ve){let ft=this.prepareExternalUrl(te+Re(ve));0==ft.length&&(ft=this._platformLocation.pathname),this._platformLocation.replaceState(C,z,ft)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(C=0){var z,te;null===(z=(te=this._platformLocation).historyGo)||void 0===z||z.call(te,C)}}return(m=p).\u0275fac=function(C){return new(C||m)(M.KVO(Se),M.KVO(Ke,8))},m.\u0275prov=M.jDH({token:m,factory:m.\u0275fac}),p})(),Qe=(()=>{var m;class p{constructor(C){this._subject=new M.bkB,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=C;const z=this._locationStrategy.getBaseHref();this._basePath=function pe(m){if(new RegExp("^(https?:)?//").test(m)){const[,A]=m.split(/\/\/[^\/]+/);return A}return m}(Ne(at(z))),this._locationStrategy.onPopState(te=>{this._subject.emit({url:this.path(!0),pop:!0,state:te.state,type:te.type})})}ngOnDestroy(){var C;null===(C=this._urlChangeSubscription)||void 0===C||C.unsubscribe(),this._urlChangeListeners=[]}path(C=!1){return this.normalize(this._locationStrategy.path(C))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(C,z=""){return this.path()==this.normalize(C+Re(z))}normalize(C){return p.stripTrailingSlash(function We(m,p){if(!m||!p.startsWith(m))return p;const A=p.substring(m.length);return""===A||["/",";","?","#"].includes(A[0])?A:p}(this._basePath,at(C)))}prepareExternalUrl(C){return C&&"/"!==C[0]&&(C="/"+C),this._locationStrategy.prepareExternalUrl(C)}go(C,z="",te=null){this._locationStrategy.pushState(te,"",C,z),this._notifyUrlChangeListeners(this.prepareExternalUrl(C+Re(z)),te)}replaceState(C,z="",te=null){this._locationStrategy.replaceState(te,"",C,z),this._notifyUrlChangeListeners(this.prepareExternalUrl(C+Re(z)),te)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(C=0){var z,te;null===(z=(te=this._locationStrategy).historyGo)||void 0===z||z.call(te,C)}onUrlChange(C){var z;return this._urlChangeListeners.push(C),null!==(z=this._urlChangeSubscription)&&void 0!==z||(this._urlChangeSubscription=this.subscribe(te=>{this._notifyUrlChangeListeners(te.url,te.state)})),()=>{const te=this._urlChangeListeners.indexOf(C);var ve;this._urlChangeListeners.splice(te,1),0===this._urlChangeListeners.length&&(null===(ve=this._urlChangeSubscription)||void 0===ve||ve.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(C="",z){this._urlChangeListeners.forEach(te=>te(C,z))}subscribe(C,z,te){return this._subject.subscribe({next:C,error:z,complete:te})}}return(m=p).normalizeQueryParams=Re,m.joinWithSlash=me,m.stripTrailingSlash=Ne,m.\u0275fac=function(C){return new(C||m)(M.KVO(Te))},m.\u0275prov=M.jDH({token:m,factory:()=>function vt(){return new Qe((0,M.KVO)(Te))}(),providedIn:"root"}),p})();function at(m){return m.replace(/\/index.html$/,"")}function lt(m,p){p=encodeURIComponent(p);for(const A of m.split(";")){const C=A.indexOf("="),[z,te]=-1==C?[A,""]:[A.slice(0,C),A.slice(C+1)];if(z.trim()===p)return decodeURIComponent(te)}return null}let Br=(()=>{var m;class p{constructor(C,z){this._viewContainer=C,this._context=new ea,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=z}set ngIf(C){this._context.$implicit=this._context.ngIf=C,this._updateView()}set ngIfThen(C){Ho("ngIfThen",C),this._thenTemplateRef=C,this._thenViewRef=null,this._updateView()}set ngIfElse(C){Ho("ngIfElse",C),this._elseTemplateRef=C,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(C,z){return!0}}return(m=p).\u0275fac=function(C){return new(C||m)(M.rXU(M.c1b),M.rXU(M.C4Q))},m.\u0275dir=M.FsC({type:m,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),p})();class ea{constructor(){this.$implicit=null,this.ngIf=null}}function Ho(m,p){if(p&&!p.createEmbeddedView)throw new Error(`${m} must be a TemplateRef, but received '${(0,M.Tbb)(p)}'.`)}let or=(()=>{var m;class p{constructor(C){this._viewContainerRef=C,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(C){if(this._shouldRecreateView(C)){var z;const te=this._viewContainerRef;if(this._viewRef&&te.remove(te.indexOf(this._viewRef)),!this.ngTemplateOutlet)return void(this._viewRef=null);const ve=this._createContextForwardProxy();this._viewRef=te.createEmbeddedView(this.ngTemplateOutlet,ve,{injector:null!==(z=this.ngTemplateOutletInjector)&&void 0!==z?z:void 0})}}_shouldRecreateView(C){return!!C.ngTemplateOutlet||!!C.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(C,z,te)=>!!this.ngTemplateOutletContext&&Reflect.set(this.ngTemplateOutletContext,z,te),get:(C,z,te)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,z,te)}})}}return(m=p).\u0275fac=function(C){return new(C||m)(M.rXU(M.c1b))},m.\u0275dir=M.FsC({type:m,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[M.OA$]}),p})(),Ee=(()=>{var m;class p{}return(m=p).\u0275fac=function(C){return new(C||m)},m.\u0275mod=M.$C({type:m}),m.\u0275inj=M.G2t({}),p})();const ut="browser",Tt="server";function Yt(m){return m===Tt}let vr=(()=>{var m;class p{}return(m=p).\u0275prov=(0,M.jDH)({token:m,providedIn:"root",factory:()=>function zt(m){return m===ut}((0,M.WQX)(M.Agw))?new Xn((0,M.WQX)(re),window):new Er}),p})();class Xn{constructor(p,A){this.document=p,this.window=A,this.offset=()=>[0,0]}setOffset(p){this.offset=Array.isArray(p)?()=>p:p}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(p){this.window.scrollTo(p[0],p[1])}scrollToAnchor(p){const A=function Ir(m,p){const A=m.getElementById(p)||m.getElementsByName(p)[0];if(A)return A;if("function"==typeof m.createTreeWalker&&m.body&&"function"==typeof m.body.attachShadow){const C=m.createTreeWalker(m.body,NodeFilter.SHOW_ELEMENT);let z=C.currentNode;for(;z;){const te=z.shadowRoot;if(te){const ve=te.getElementById(p)||te.querySelector(`[name="${p}"]`);if(ve)return ve}z=C.nextNode()}}return null}(this.document,p);A&&(this.scrollToElement(A),A.focus())}setHistoryScrollRestoration(p){this.window.history.scrollRestoration=p}scrollToElement(p){const A=p.getBoundingClientRect(),C=A.left+this.window.pageXOffset,z=A.top+this.window.pageYOffset,te=this.offset();this.window.scrollTo(C-te[0],z-te[1])}}class Er{setOffset(p){}getScrollPosition(){return[0,0]}scrollToPosition(p){}scrollToAnchor(p){}setHistoryScrollRestoration(p){}}class qr{}},4438:(hn,Ct,ee)=>{"use strict";ee.d(Ct,{iLQ:()=>UC,sZ2:()=>xh,hnV:()=>VC,Hbi:()=>YC,o8S:()=>Ca,BIS:()=>pP,gRc:()=>LS,Ql9:()=>NN,Ocv:()=>PS,Z63:()=>Ps,aKT:()=>Zc,uvJ:()=>qo,zcH:()=>fc,bkB:()=>jl,$GK:()=>Fn,nKC:()=>cn,zZn:()=>fa,_q3:()=>hy,MKu:()=>QC,xe9:()=>Oc,Co$:()=>J_,Vns:()=>xd,SKi:()=>Fr,Xx1:()=>zt,Agw:()=>Up,PLl:()=>kb,sFG:()=>B_,_9s:()=>U_,czy:()=>qp,kdw:()=>qt,C4Q:()=>$a,NYb:()=>tm,giA:()=>TS,RxE:()=>Jg,c1b:()=>af,gXe:()=>is,mal:()=>lg,L39:()=>Ey,a0P:()=>A1,Ol2:()=>tv,w6W:()=>Z_,oH4:()=>Gu,SmG:()=>GC,Rfq:()=>ci,WQX:()=>ae,QuC:()=>Yi,fpN:()=>QS,HJs:()=>D1,N4e:()=>Vs,O8t:()=>E1,H3F:()=>ry,H8p:()=>Ml,KH2:()=>Ou,TgB:()=>ma,wOt:()=>Pe,WHO:()=>em,e01:()=>bS,H5H:()=>HE,Zy3:()=>Ze,mq5:()=>nD,JZv:()=>Rn,LfX:()=>_i,plB:()=>qs,jNT:()=>LC,zjR:()=>sy,TL$:()=>I0,Tbb:()=>pn,Vt3:()=>XI,Mj6:()=>ho,GFd:()=>_g,OA$:()=>Me,Jv_:()=>Xx,aNF:()=>mC,R7$:()=>tn,BMQ:()=>Iv,AVh:()=>Og,wni:()=>Kg,VBU:()=>Ja,FsC:()=>zc,jDH:()=>qn,G2t:()=>Do,$C:()=>oa,EJ8:()=>cc,rXU:()=>su,nrm:()=>Nv,eu8:()=>Ug,bVm:()=>Ov,qex:()=>Df,k0s:()=>Af,j41:()=>xv,RV6:()=>Yd,xGo:()=>GR,KVO:()=>U,kS0:()=>s0,QTQ:()=>au,bIt:()=>oC,lsd:()=>Xg,XpG:()=>aC,SdG:()=>xc,NAR:()=>Ff,Y8G:()=>Ng,mGM:()=>kD,Njj:()=>Hy,eBV:()=>id,n$t:()=>oT,DNE:()=>Od,EFF:()=>jD,GBs:()=>ND}),ee(467);let h=null,v=1;const He=Symbol("SIGNAL");function re(i){const o=h;return h=i,o}function Te(i){if((!$e(i)||i.dirty)&&(i.dirty||i.lastCleanEpoch!==v)){if(!i.producerMustRecompute(i)&&!We(i))return i.dirty=!1,void(i.lastCleanEpoch=v);i.producerRecomputeValue(i),i.dirty=!1,i.lastCleanEpoch=v}}function We(i){tt(i);for(let o=0;o<i.producerNode.length;o++){const a=i.producerNode[o],l=i.producerLastReadVersion[o];if(l!==a.version||(Te(a),l!==a.version))return!0}return!1}function ke(i,o){if(function nt(i){var o,a;null!==(o=i.liveConsumerNode)&&void 0!==o||(i.liveConsumerNode=[]),null!==(a=i.liveConsumerIndexOfThis)&&void 0!==a||(i.liveConsumerIndexOfThis=[])}(i),tt(i),1===i.liveConsumerNode.length)for(let l=0;l<i.producerNode.length;l++)ke(i.producerNode[l],i.producerIndexOfThis[l]);const a=i.liveConsumerNode.length-1;if(i.liveConsumerNode[o]=i.liveConsumerNode[a],i.liveConsumerIndexOfThis[o]=i.liveConsumerIndexOfThis[a],i.liveConsumerNode.length--,i.liveConsumerIndexOfThis.length--,o<i.liveConsumerNode.length){const l=i.liveConsumerIndexOfThis[o],u=i.liveConsumerNode[o];tt(u),u.producerIndexOfThis[l]=o}}function $e(i){var o,a;return i.consumerIsAlwaysLive||(null!==(o=null==i||null===(a=i.liveConsumerNode)||void 0===a?void 0:a.length)&&void 0!==o?o:0)>0}function tt(i){var o,a,l;null!==(o=i.producerNode)&&void 0!==o||(i.producerNode=[]),null!==(a=i.producerIndexOfThis)&&void 0!==a||(i.producerIndexOfThis=[]),null!==(l=i.producerLastReadVersion)&&void 0!==l||(i.producerLastReadVersion=[])}let Kt=null;var Mn=ee(1413),er=ee(8359),En=ee(4412),Dt=ee(6354);const Ht="https://g.co/ng/security#xss";class Pe extends Error{constructor(o,a){super(Ze(o,a)),this.code=o}}function Ze(i,o){return`NG0${Math.abs(i)}${o?": "+o:""}`}function rn(i){return{toString:i}.toString()}const Ln="__parameters__";function kr(i,o,a){return rn(()=>{const l=function Wr(i){return function(...a){if(i){const l=i(...a);for(const u in l)this[u]=l[u]}}}(o);function u(...f){if(this instanceof u)return l.apply(this,f),this;const _=new u(...f);return b.annotation=_,b;function b(D,V,H){const W=D.hasOwnProperty(Ln)?D[Ln]:Object.defineProperty(D,Ln,{value:[]})[Ln];for(;W.length<=H;)W.push(null);return(W[H]=W[H]||[]).push(_),D}}return a&&(u.prototype=Object.create(a.prototype)),u.prototype.ngMetadataName=i,u.annotationCls=u,u})}const Rn=globalThis;function jt(i){for(let o in i)if(i[o]===jt)return o;throw Error("Could not find renamed property on target object.")}function mr(i,o){for(const a in o)o.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=o[a])}function pn(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(pn).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function tr(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const qi=jt({__forward_ref__:jt});function ci(i){return i.__forward_ref__=ci,i.toString=function(){return pn(this())},i}function Ae(i){return ye(i)?i():i}function ye(i){return"function"==typeof i&&i.hasOwnProperty(qi)&&i.__forward_ref__===ci}function qn(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Do(i){return{providers:i.providers||[],imports:i.imports||[]}}function Ki(i){return So(i,Ro)||So(i,Qt)}function _i(i){return null!==Ki(i)}function So(i,o){return i.hasOwnProperty(o)?i[o]:null}function jo(i){return i&&(i.hasOwnProperty(lt)||i.hasOwnProperty(On))?i[lt]:null}const Ro=jt({\u0275prov:jt}),lt=jt({\u0275inj:jt}),Qt=jt({ngInjectableDef:jt}),On=jt({ngInjectorDef:jt});class cn{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=qn({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function so(i){return i&&!!i.\u0275providers}const Si=jt({\u0275cmp:jt}),ao=jt({\u0275dir:jt}),Kn=jt({\u0275pipe:jt}),to=jt({\u0275mod:jt}),lo=jt({\u0275fac:jt}),ni=jt({__NG_ELEMENT_ID__:jt}),yr=jt({__NG_ENV_ID__:jt});function yn(i){return"string"==typeof i?i:null==i?"":String(i)}function Ds(i,o){throw new Pe(-201,!1)}var Fn=function(i){return i[i.Default=0]="Default",i[i.Host=1]="Host",i[i.Self=2]="Self",i[i.SkipSelf=4]="SkipSelf",i[i.Optional=8]="Optional",i}(Fn||{});let $r;function Qa(){return $r}function gt(i){const o=$r;return $r=i,o}function Da(i,o,a){const l=Ki(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&Fn.Optional?null:void 0!==o?o:void Ds()}const Go={},ds="__NG_DI_FLAG__",co="ngTempTokenPath",Sa=/\n/gm,Ss="__source";let Vi;function wn(i){const o=Vi;return Vi=i,o}function ns(i,o=Fn.Default){if(void 0===Vi)throw new Pe(-203,!1);return null===Vi?Da(i,void 0,o):Vi.get(i,o&Fn.Optional?null:void 0,o)}function U(i,o=Fn.Default){return(Qa()||ns)(Ae(i),o)}function ae(i,o=Fn.Default){return U(i,he(o))}function he(i){return typeof i>"u"||"number"==typeof i?i:(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function be(i){const o=[];for(let a=0;a<i.length;a++){const l=Ae(i[a]);if(Array.isArray(l)){if(0===l.length)throw new Pe(900,!1);let u,f=Fn.Default;for(let _=0;_<l.length;_++){const b=l[_],D=ut(b);"number"==typeof D?-1===D?u=b.token:f|=D:u=b}o.push(U(u,f))}else o.push(U(l))}return o}function Ee(i,o){return i[ds]=o,i.prototype[ds]=o,i}function ut(i){return i[ds]}const zt=Ee(kr("Optional"),8),qt=Ee(kr("SkipSelf"),4);function nr(i,o){return i.hasOwnProperty(lo)?i[lo]:null}function Ir(i,o){i.forEach(a=>Array.isArray(a)?Ir(a,o):o(a))}function Er(i,o,a){o>=i.length?i.push(a):i.splice(o,0,a)}function qr(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}function Cr(i,o,a){let l=uo(i,o);return l>=0?i[1|l]=a:(l=~l,function Ya(i,o,a,l){let u=i.length;if(u==o)i.push(a,l);else if(1===u)i.push(l,i[0]),i[0]=a;else{for(u--,i.push(i[u-1],i[u]);u>o;)i[u]=i[u-2],u--;i[o]=a,i[o+1]=l}}(i,l,o,a)),l}function Ra(i,o){const a=uo(i,o);if(a>=0)return i[1|a]}function uo(i,o){return function ac(i,o,a){let l=0,u=i.length>>a;for(;u!==l;){const f=l+(u-l>>1),_=i[f<<a];if(o===_)return f<<a;_>o?u=f:l=f+1}return~(u<<a)}(i,o,1)}const Ui={},lr=[],Ps=new cn(""),bl=new cn("",-1),Pa=new cn("");class Ms{get(o,a=Go){if(a===Go){const l=new Error(`NullInjectorError: No provider for ${pn(o)}!`);throw l.name="NullInjectorError",l}return a}}var Bi=function(i){return i[i.OnPush=0]="OnPush",i[i.Default=1]="Default",i}(Bi||{}),is=function(i){return i[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",i}(is||{}),ho=function(i){return i[i.None=0]="None",i[i.SignalBased=1]="SignalBased",i[i.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",i}(ho||{});function Xu(i,o,a){let l=i.length;for(;;){const u=i.indexOf(o,a);if(-1===u)return u;if(0===u||i.charCodeAt(u-1)<=32){const f=o.length;if(u+f===l||i.charCodeAt(u+f)<=32)return u}a=u+1}}function Tl(i,o,a){let l=0;for(;l<a.length;){const u=a[l];if("number"==typeof u){if(0!==u)break;l++;const f=a[l++],_=a[l++],b=a[l++];i.setAttribute(o,_,b,f)}else{const f=u,_=a[++l];Dl(f)?i.setProperty(o,f,_):i.setAttribute(o,f,_),l++}}return l}function Al(i){return 3===i||4===i||6===i}function Dl(i){return 64===i.charCodeAt(0)}function xs(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const u=o[l];"number"==typeof u?a=u:0===a||Sl(i,a,u,null,-1===a||2===a?o[++l]:null)}}return i}function Sl(i,o,a,l,u){let f=0,_=i.length;if(-1===o)_=-1;else for(;f<i.length;){const b=i[f++];if("number"==typeof b){if(b===o){_=-1;break}if(b>o){_=f-1;break}}}for(;f<i.length;){const b=i[f];if("number"==typeof b)break;if(b===a){if(null===l)return void(null!==u&&(i[f+1]=u));if(l===i[f+1])return void(i[f+2]=u)}f++,null!==l&&f++,null!==u&&f++}-1!==_&&(i.splice(_,0,o),f=_+1),i.splice(f++,0,a),null!==l&&i.splice(f++,0,l),null!==u&&i.splice(f++,0,u)}const lc="ng-template";function Ns(i,o,a,l){let u=0;if(l){for(;u<o.length&&"string"==typeof o[u];u+=2)if("class"===o[u]&&-1!==Xu(o[u+1].toLowerCase(),a,0))return!0}else if(ia(i))return!1;if(u=o.indexOf(1,u),u>-1){let f;for(;++u<o.length&&"string"==typeof(f=o[u]);)if(f.toLowerCase()===a)return!0}return!1}function ia(i){return 4===i.type&&i.value!==lc}function j(i,o,a){return o===(4!==i.type||a?i.value:lc)}function F(i,o,a){let l=4;const u=i.attrs,f=null!==u?function bn(i){for(let o=0;o<i.length;o++)if(Al(i[o]))return o;return i.length}(u):0;let _=!1;for(let b=0;b<o.length;b++){const D=o[b];if("number"!=typeof D){if(!_)if(4&l){if(l=2|1&l,""!==D&&!j(i,D,a)||""===D&&1===o.length){if(ne(l))return!1;_=!0}}else if(8&l){if(null===u||!Ns(i,u,D,a)){if(ne(l))return!1;_=!0}}else{const V=o[++b],H=$(D,u,ia(i),a);if(-1===H){if(ne(l))return!1;_=!0;continue}if(""!==V){let W;if(W=H>f?"":u[H+1].toLowerCase(),2&l&&V!==W){if(ne(l))return!1;_=!0}}}}else{if(!_&&!ne(l)&&!ne(D))return!1;if(_&&ne(D))continue;_=!1,l=D|1&l}}return ne(l)||_}function ne(i){return!(1&i)}function $(i,o,a,l){if(null===o)return-1;let u=0;if(l||!a){let f=!1;for(;u<o.length;){const _=o[u];if(_===i)return u;if(3===_||6===_)f=!0;else{if(1===_||2===_){let b=o[++u];for(;"string"==typeof b;)b=o[++u];continue}if(4===_)break;if(0===_){u+=4;continue}}u+=f?1:2}return-1}return function xn(i,o){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,i)}function le(i,o,a=!1){for(let l=0;l<o.length;l++)if(F(i,o[l],a))return!0;return!1}function di(i,o){e:for(let a=0;a<o.length;a++){const l=o[a];if(i.length===l.length){for(let u=0;u<i.length;u++)if(i[u]!==l[u])continue e;return!0}}return!1}function hs(i,o){return i?":not("+o.trim()+")":o}function os(i){let o=i[0],a=1,l=2,u="",f=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&l){const b=i[++a];u+="["+_+(b.length>0?'="'+b+'"':"")+"]"}else 8&l?u+="."+_:4&l&&(u+=" "+_);else""!==u&&!ne(_)&&(o+=hs(f,u),u=""),l=_,f=f||!ne(l);a++}return""!==u&&(o+=hs(f,u)),o}function Ja(i){return rn(()=>{var o;const a=ks(i),l={...a,decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===Bi.OnPush,directiveDefs:null,pipeDefs:null,dependencies:a.standalone&&i.dependencies||null,getStandaloneInjector:null,signals:null!==(o=i.signals)&&void 0!==o&&o,data:i.data||{},encapsulation:i.encapsulation||is.Emulated,styles:i.styles||lr,_:null,schemas:i.schemas||null,tView:null,id:""};jr(l);const u=i.dependencies;return l.directiveDefs=ii(u,!1),l.pipeDefs=ii(u,!0),l.id=function Pi(i){let o=0;const a=[i.selectors,i.ngContentSelectors,i.hostVars,i.hostAttrs,i.consts,i.vars,i.decls,i.encapsulation,i.standalone,i.signals,i.exportAs,JSON.stringify(i.inputs),JSON.stringify(i.outputs),Object.getOwnPropertyNames(i.type.prototype),!!i.contentQueries,!!i.viewQuery].join("|");for(const u of a)o=Math.imul(31,o)+u.charCodeAt(0)|0;return o+=2147483648,"c"+o}(l),l})}function lp(i){return sr(i)||pi(i)}function uh(i){return null!==i}function oa(i){return rn(()=>({type:i.type,bootstrap:i.bootstrap||lr,declarations:i.declarations||lr,imports:i.imports||lr,exports:i.exports||lr,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function Qu(i,o){if(null==i)return Ui;const a={};for(const u in i)if(i.hasOwnProperty(u)){const f=i[u];let _,b,D=ho.None;var l;Array.isArray(f)?(D=f[0],_=f[1],b=null!==(l=f[2])&&void 0!==l?l:_):(_=f,b=f),o?(a[_]=D!==ho.None?[u,D]:u,o[_]=b):a[_]=u}return a}function zc(i){return rn(()=>{const o=ks(i);return jr(o),o})}function cc(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function sr(i){return i[Si]||null}function pi(i){return i[ao]||null}function vi(i){return i[Kn]||null}function Yi(i){const o=sr(i)||pi(i)||vi(i);return null!==o&&o.standalone}function Ri(i,o){const a=i[to]||null;if(!a&&!0===o)throw new Error(`Type ${pn(i)} does not have '\u0275mod' property.`);return a}function ks(i){const o={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:o,inputTransforms:null,inputConfig:i.inputs||Ui,exportAs:i.exportAs||null,standalone:!0===i.standalone,signals:!0===i.signals,selectors:i.selectors||lr,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Qu(i.inputs,o),outputs:Qu(i.outputs),debugInfo:null}}function jr(i){var o;null===(o=i.features)||void 0===o||o.forEach(a=>a(i))}function ii(i,o){if(!i)return null;const a=o?vi:lp;return()=>("function"==typeof i?i():i).map(l=>a(l)).filter(uh)}function xa(...i){return{\u0275providers:Bt(0,i),\u0275fromNgModule:!0}}function Bt(i,...o){const a=[],l=new Set;let u;const f=_=>{a.push(_)};return Ir(o,_=>{const b=_;$i(b,f,[],l)&&(u||(u=[]),u.push(b))}),void 0!==u&&fo(u,f),a}function fo(i,o){for(let a=0;a<i.length;a++){const{ngModule:l,providers:u}=i[a];Pl(u,f=>{o(f,l)})}}function $i(i,o,a,l){if(!(i=Ae(i)))return!1;let u=null,f=jo(i);const _=!f&&sr(i);if(f||_){if(_&&!_.standalone)return!1;u=i}else{const D=i.ngModule;if(f=jo(D),!f)return!1;u=D}const b=l.has(u);if(_){if(b)return!1;if(l.add(u),_.dependencies){const D="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const V of D)$i(V,o,a,l)}}else{if(!f)return!1;{if(null!=f.imports&&!b){let V;l.add(u);try{Ir(f.imports,H=>{$i(H,o,a,l)&&(V||(V=[]),V.push(H))})}finally{}void 0!==V&&fo(V,o)}if(!b){const V=nr(u)||(()=>new u);o({provide:u,useFactory:V,deps:lr},u),o({provide:Pa,useValue:u,multi:!0},u),o({provide:Ps,useValue:()=>U(u),multi:!0},u)}const D=f.providers;if(null!=D&&!b){const V=i;Pl(D,H=>{o(H,V)})}}}return u!==i&&void 0!==i.providers}function Pl(i,o){for(let a of i)so(a)&&(a=a.\u0275providers),Array.isArray(a)?Pl(a,o):o(a)}const Yu=jt({provide:String,useValue:jt});function uc(i){return null!==i&&"object"==typeof i&&Yu in i}function ps(i){return"function"==typeof i}const Ml=new cn(""),dc={},Lr={};let zr;function Za(){return void 0===zr&&(zr=new Ms),zr}class qo{}class sa extends qo{get destroyed(){return this._destroyed}constructor(o,a,l,u){super(),this.parent=a,this.source=l,this.scopes=u,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Wc(o,_=>this.processProvider(_)),this.records.set(bl,el(void 0,this)),u.has("environment")&&this.records.set(qo,el(void 0,this));const f=this.records.get(Ml);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(Pa,lr,Fn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const o=re(null);try{for(const l of this._ngOnDestroyHooks)l.ngOnDestroy();const a=this._onDestroyHooks;this._onDestroyHooks=[];for(const l of a)l()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),re(o)}}onDestroy(o){return this.assertNotDestroyed(),this._onDestroyHooks.push(o),()=>this.removeOnDestroy(o)}runInContext(o){this.assertNotDestroyed();const a=wn(this),l=gt(void 0);try{return o()}finally{wn(a),gt(l)}}get(o,a=Go,l=Fn.Default){if(this.assertNotDestroyed(),o.hasOwnProperty(yr))return o[yr](this);l=he(l);const f=wn(this),_=gt(void 0);try{if(!(l&Fn.SkipSelf)){let D=this.records.get(o);if(void 0===D){const V=function hh(i){return"function"==typeof i||"object"==typeof i&&i instanceof cn}(o)&&Ki(o);D=V&&this.injectableDefInScope(V)?el(Ls(o),dc):null,this.records.set(o,D)}if(null!=D)return this.hydrate(o,D)}return(l&Fn.Self?Za():this.parent).get(o,a=l&Fn.Optional&&a===Go?null:a)}catch(b){if("NullInjectorError"===b.name){if((b[co]=b[co]||[]).unshift(pn(o)),f)throw b;return function Tt(i,o,a,l){const u=i[co];throw o[Ss]&&u.unshift(o[Ss]),i.message=function Et(i,o,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let u=pn(o);if(Array.isArray(o))u=o.map(pn).join(" -> ");else if("object"==typeof o){let f=[];for(let _ in o)if(o.hasOwnProperty(_)){let b=o[_];f.push(_+":"+("string"==typeof b?JSON.stringify(b):pn(b)))}u=`{${f.join(", ")}}`}return`${a}${l?"("+l+")":""}[${u}]: ${i.replace(Sa,"\n  ")}`}("\n"+i.message,u,a,l),i.ngTokenPath=u,i[co]=null,i}(b,o,"R3InjectorError",this.source)}throw b}finally{gt(_),wn(f)}}resolveInjectorInitializers(){const o=re(null),a=wn(this),l=gt(void 0);try{const f=this.get(Ps,lr,Fn.Self);for(const _ of f)_()}finally{wn(a),gt(l),re(o)}}toString(){const o=[],a=this.records;for(const l of a.keys())o.push(pn(l));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Pe(205,!1)}processProvider(o){let a=ps(o=Ae(o))?o:Ae(o&&o.provide);const l=function ed(i){return uc(i)?el(void 0,i.useValue):el(dh(i),dc)}(o);if(!ps(o)&&!0===o.multi){let u=this.records.get(a);u||(u=el(void 0,dc,!0),u.factory=()=>be(u.multi),this.records.set(a,u)),a=o,u.multi.push(o)}this.records.set(a,l)}hydrate(o,a){const l=re(null);try{return a.value===dc&&(a.value=Lr,a.value=a.factory()),"object"==typeof a.value&&a.value&&function td(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}finally{re(l)}}injectableDefInScope(o){if(!o.providedIn)return!1;const a=Ae(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}removeOnDestroy(o){const a=this._onDestroyHooks.indexOf(o);-1!==a&&this._onDestroyHooks.splice(a,1)}}function Ls(i){const o=Ki(i),a=null!==o?o.factory:nr(i);if(null!==a)return a;if(i instanceof cn)throw new Pe(204,!1);if(i instanceof Function)return function Zu(i){if(i.length>0)throw new Pe(204,!1);const a=function $o(i){return i&&(i[Ro]||i[Qt])||null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Pe(204,!1)}function dh(i,o,a){let l;if(ps(i)){const u=Ae(i);return nr(u)||Ls(u)}if(uc(i))l=()=>Ae(i.useValue);else if(function Fs(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...be(i.deps||[]));else if(function Ju(i){return!(!i||!i.useExisting)}(i))l=()=>U(Ae(i.useExisting));else{const u=Ae(i&&(i.useClass||i.provide));if(!function tl(i){return!!i.deps}(i))return nr(u)||Ls(u);l=()=>new u(...be(i.deps))}return l}function el(i,o,a=!1){return{factory:i,value:o,multi:a?[]:void 0}}function Wc(i,o){for(const a of i)Array.isArray(a)?Wc(a,o):a&&so(a)?Wc(a.\u0275providers,o):o(a)}function Vs(i,o){i instanceof sa&&i.assertNotDestroyed();const l=wn(i),u=gt(void 0);try{return o()}finally{wn(l),gt(u)}}function E(){return void 0!==Qa()||null!=function ts(){return Vi}()}const ur=0,Lt=1,dn=2,wr=3,Yr=4,Kr=5,ji=6,Us=7,oi=8,Nr=9,aa=10,Vn=11,xl=12,fh=13,la=14,Or=15,gs=16,qc=17,Ci=18,Kc=19,Nl=20,ms=21,ca=22,po=23,Jn=25,ph=1,Na=7,kl=9,gi=10;var Ol=function(i){return i[i.None=0]="None",i[i.HasTransplantedViews=2]="HasTransplantedViews",i}(Ol||{});function Mo(i){return Array.isArray(i)&&"object"==typeof i[ph]}function Ko(i){return Array.isArray(i)&&!0===i[ph]}function gh(i){return!!(4&i.flags)}function Fl(i){return i.componentOffset>-1}function cp(i){return!(1&~i.flags)}function ua(i){return!!i.template}function Cm(i){return!!(512&i[dn])}class q{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function oe(i,o,a,l){null!==o?o.applyValueToInputSignal(o,l):i[a]=l}function Me(){return wt}function wt(i){return i.type.prototype.ngOnChanges&&(i.setInput=Jt),Ve}function Ve(){const i=si(this),o=null==i?void 0:i.current;if(o){const a=i.previous;if(a===Ui)i.previous=o;else for(let l in o)a[l]=o[l];i.current=null,this.ngOnChanges(o)}}function Jt(i,o,a,l,u){const f=this.declaredInputs[l],_=si(i)||function Dr(i,o){return i[Pn]=o}(i,{previous:Ui,current:null}),b=_.current||(_.current={}),D=_.previous,V=D[f];b[f]=new q(V&&V.currentValue,a,D===Ui),oe(i,o,u,a)}Me.ngInherit=!0;const Pn="__ngSimpleChanges__";function si(i){return i[Pn]||null}const ss=function(i,o,a){};let Vl=!1;function Hr(i){for(;Array.isArray(i);)i=i[ur];return i}function Xo(i,o){return Hr(o[i.index])}function rd(i,o){return i.data[o]}function _s(i,o){const a=o[i];return Mo(a)?a:a[ur]}function gp(i){return!(128&~i[dn])}function ka(i,o){return null==o?null:i[o]}function rb(i){i[qc]=0}function By(i){1024&i[dn]||(i[dn]|=1024,gp(i)&&_p(i))}function il(i){var o;return!!(9216&i[dn]||null!==(o=i[po])&&void 0!==o&&o.dirty)}function mp(i){var o;if(null===(o=i[aa].changeDetectionScheduler)||void 0===o||o.notify(1),il(i))_p(i);else if(64&i[dn])if(function Uy(){return Vl}())i[dn]|=1024,_p(i);else{var a;null===(a=i[aa].changeDetectionScheduler)||void 0===a||a.notify()}}function _p(i){var o;null===(o=i[aa].changeDetectionScheduler)||void 0===o||o.notify();let a=hc(i);for(;null!==a&&!(8192&a[dn])&&(a[dn]|=8192,gp(a));)a=hc(a)}function da(i,o){if(!(256&~i[dn]))throw new Pe(911,!1);null===i[ms]&&(i[ms]=[]),i[ms].push(o)}function hc(i){const o=i[wr];return Ko(o)?o[wr]:o}const Zn={lFrame:Cp(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Am(){return Zn.bindingsEnabled}function Oa(){return null!==Zn.skipHydrationRootTNode}function yt(){return Zn.lFrame.lView}function dr(){return Zn.lFrame.tView}function id(i){return Zn.lFrame.contextLView=i,i[oi]}function Hy(i){return Zn.lFrame.contextLView=null,i}function Xr(){let i=Gy();for(;null!==i&&64===i.type;)i=i.parent;return i}function Gy(){return Zn.lFrame.currentTNode}function vs(i,o){const a=Zn.lFrame;a.currentTNode=i,a.isParent=o}function Wy(){return Zn.lFrame.isParent}function yh(){Zn.lFrame.isParent=!1}function ha(){return Zn.lFrame.bindingIndex++}function NR(i,o){const a=Zn.lFrame;a.bindingIndex=a.bindingRootIndex=i,Ip(o)}function Ip(i){Zn.lFrame.currentDirectiveIndex=i}function Ih(){return Zn.lFrame.currentQueryIndex}function Eh(i){Zn.lFrame.currentQueryIndex=i}function ab(i){const o=i[Lt];return 2===o.type?o.declTNode:1===o.type?i[Kr]:null}function Sm(i,o,a){if(a&Fn.SkipSelf){let u=o,f=i;for(;!(u=u.parent,null!==u||a&Fn.Host||(u=ab(f),null===u||(f=f[la],10&u.type))););if(null===u)return!1;o=u,i=f}const l=Zn.lFrame=Pm();return l.currentTNode=o,l.lView=i,!0}function Rm(i){const o=Pm(),a=i[Lt];Zn.lFrame=o,o.currentTNode=a.firstChild,o.lView=i,o.tView=a,o.contextLView=i,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function Pm(){const i=Zn.lFrame,o=null===i?null:i.child;return null===o?Cp(i):o}function Cp(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function Mm(){const i=Zn.lFrame;return Zn.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Xy=Mm;function wp(){const i=Mm();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function xo(){return Zn.lFrame.selectedIndex}function od(i){Zn.lFrame.selectedIndex=i}function ai(){const i=Zn.lFrame;return rd(i.tView,i.selectedIndex)}let Tp=!0;function sd(){return Tp}function La(i){Tp=i}function Ch(i,o){for(let V=o.directiveStart,H=o.directiveEnd;V<H;V++){const ce=i.data[V].type.prototype,{ngAfterContentInit:_e,ngAfterContentChecked:Oe,ngAfterViewInit:ot,ngAfterViewChecked:Nt,ngOnDestroy:Ut}=ce;var a,l,u,f,_,b,D;_e&&(null!==(a=i.contentHooks)&&void 0!==a?a:i.contentHooks=[]).push(-V,_e),Oe&&((null!==(l=i.contentHooks)&&void 0!==l?l:i.contentHooks=[]).push(V,Oe),(null!==(u=i.contentCheckHooks)&&void 0!==u?u:i.contentCheckHooks=[]).push(V,Oe)),ot&&(null!==(f=i.viewHooks)&&void 0!==f?f:i.viewHooks=[]).push(-V,ot),Nt&&((null!==(_=i.viewHooks)&&void 0!==_?_:i.viewHooks=[]).push(V,Nt),(null!==(b=i.viewCheckHooks)&&void 0!==b?b:i.viewCheckHooks=[]).push(V,Nt)),null!=Ut&&(null!==(D=i.destroyHooks)&&void 0!==D?D:i.destroyHooks=[]).push(V,Ut)}}function Nm(i,o,a){km(i,o,3,a)}function wh(i,o,a,l){(3&i[dn])===a&&km(i,o,a,l)}function Jy(i,o){let a=i[dn];(3&a)===o&&(a&=16383,a+=1,i[dn]=a)}function km(i,o,a,l){const f=null!=l?l:-1,_=o.length-1;let b=0;for(let D=void 0!==l?65535&i[qc]:0;D<_;D++)if("number"==typeof o[D+1]){if(b=o[D],null!=l&&b>=l)break}else o[D]<0&&(i[qc]+=65536),(b<f||-1==f)&&(e0(i,a,o,D),i[qc]=(4294901760&i[qc])+D+2),D++}function Zy(i,o){ss(4,i,o);const a=re(null);try{o.call(i)}finally{re(a),ss(5,i,o)}}function e0(i,o,a,l){const u=a[l]<0,f=a[l+1],b=i[u?-a[l]:a[l]];u?i[dn]>>14<i[qc]>>16&&(3&i[dn])===o&&(i[dn]+=16384,Zy(b,f)):Zy(b,f)}const bh=-1;class ad{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function Dp(i){return i!==bh}function Sp(i){return 32767&i}function Rp(i,o){let a=function n0(i){return i>>16}(i),l=o;for(;a>0;)l=l[la],a--;return l}let Pp=!0;function Om(i){const o=Pp;return Pp=i,o}const ub=255,Fm=5;let UR=0;const Va={};function Th(i,o){const a=db(i,o);if(-1!==a)return a;const l=o[Lt];l.firstCreatePass&&(i.injectorIndex=o.length,r0(l.data,i),r0(o,null),r0(l.blueprint,null));const u=Mp(i,o),f=i.injectorIndex;if(Dp(u)){const _=Sp(u),b=Rp(u,o),D=b[Lt].data;for(let V=0;V<8;V++)o[f+V]=b[_+V]|D[_+V]}return o[f+8]=u,f}function r0(i,o){i.push(0,0,0,0,0,0,0,0,o)}function db(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function Mp(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,u=o;for(;null!==u;){if(l=WR(u),null===l)return bh;if(a++,u=u[la],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return bh}function xp(i,o,a){!function BR(i,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(ni)&&(l=a[ni]),null==l&&(l=a[ni]=UR++);const u=l&ub;o.data[i+(u>>Fm)]|=1<<u}(i,o,a)}function ld(i,o,a){if(a&Fn.Optional||void 0!==i)return i;Ds()}function o0(i,o,a,l){if(a&Fn.Optional&&void 0===l&&(l=null),!(a&(Fn.Self|Fn.Host))){const u=i[Nr],f=gt(void 0);try{return u?u.get(o,l,a&Fn.Optional):Da(o,l,a&Fn.Optional)}finally{gt(f)}}return ld(l,0,a)}function hb(i,o,a,l=Fn.Default,u){if(null!==i){if(2048&o[dn]&&!(l&Fn.Self)){const _=function XO(i,o,a,l,u){let f=i,_=o;for(;null!==f&&null!==_&&2048&_[dn]&&!(512&_[dn]);){const b=fb(f,_,a,l|Fn.Self,Va);if(b!==Va)return b;let D=f.parent;if(!D){const V=_[Nl];if(V){const H=V.get(a,Va,l);if(H!==Va)return H}D=WR(_),_=_[la]}f=D}return u}(i,o,a,l,Va);if(_!==Va)return _}const f=fb(i,o,a,l,Va);if(f!==Va)return f}return o0(o,a,l,u)}function fb(i,o,a,l,u){const f=function qO(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(ni)?i[ni]:void 0;return"number"==typeof o?o>=0?o&ub:KO:o}(a);if("function"==typeof f){if(!Sm(o,i,l))return l&Fn.Host?ld(u,0,l):o0(o,a,l,u);try{let _;if(_=f(l),null!=_||l&Fn.Optional)return _;Ds()}finally{Xy()}}else if("number"==typeof f){let _=null,b=db(i,o),D=bh,V=l&Fn.Host?o[Or][Kr]:null;for((-1===b||l&Fn.SkipSelf)&&(D=-1===b?Mp(i,o):o[b+8],D!==bh&&HR(l,!1)?(_=o[Lt],b=Sp(D),o=Rp(D,o)):b=-1);-1!==b;){const H=o[Lt];if(zR(f,b,H.data)){const W=jR(b,o,a,_,l,V);if(W!==Va)return W}D=o[b+8],D!==bh&&HR(l,o[Lt].data[b+8]===V)&&zR(f,b,o)?(_=H,b=Sp(D),o=Rp(D,o)):b=-1}}return u}function jR(i,o,a,l,u,f){const _=o[Lt],b=_.data[i+8],H=Lm(b,_,a,null==l?Fl(b)&&Pp:l!=_&&!!(3&b.type),u&Fn.Host&&f===b);return null!==H?cd(o,_,H,b):Va}function Lm(i,o,a,l,u){const f=i.providerIndexes,_=o.data,b=1048575&f,D=i.directiveStart,H=f>>20,ce=u?b+H:i.directiveEnd;for(let _e=l?b:b+H;_e<ce;_e++){const Oe=_[_e];if(_e<D&&a===Oe||_e>=D&&Oe.type===a)return _e}if(u){const _e=_[D];if(_e&&ua(_e)&&_e.type===a)return D}return null}function cd(i,o,a,l){let u=i[a];const f=o.data;if(function FR(i){return i instanceof ad}(u)){const _=u;_.resolving&&function ta(i,o){throw o&&o.join(" > "),new Pe(-200,i)}(function or(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():yn(i)}(f[a]));const b=Om(_.canSeeViewProviders);_.resolving=!0;const V=_.injectImpl?gt(_.injectImpl):null;Sm(i,l,Fn.Default);try{u=i[a]=_.factory(void 0,f,i,l),o.firstCreatePass&&a>=l.directiveStart&&function OR(i,o,a){const{ngOnChanges:l,ngOnInit:u,ngDoCheck:f}=o.type.prototype;if(l){var _,b;const W=wt(o);(null!==(_=a.preOrderHooks)&&void 0!==_?_:a.preOrderHooks=[]).push(i,W),(null!==(b=a.preOrderCheckHooks)&&void 0!==b?b:a.preOrderCheckHooks=[]).push(i,W)}var D,V,H;u&&(null!==(D=a.preOrderHooks)&&void 0!==D?D:a.preOrderHooks=[]).push(0-i,u),f&&((null!==(V=a.preOrderHooks)&&void 0!==V?V:a.preOrderHooks=[]).push(i,f),(null!==(H=a.preOrderCheckHooks)&&void 0!==H?H:a.preOrderCheckHooks=[]).push(i,f))}(a,f[a],o)}finally{null!==V&&gt(V),Om(b),_.resolving=!1,Xy()}}return u}function zR(i,o,a){return!!(a[o+(i>>Fm)]&1<<i)}function HR(i,o){return!(i&Fn.Self||i&Fn.Host&&o)}class go{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return hb(this._tNode,this._lView,o,he(l),a)}}function KO(){return new go(Xr(),yt())}function GR(i){return rn(()=>{const o=i.prototype.constructor,a=o[lo]||pb(o),l=Object.prototype;let u=Object.getPrototypeOf(i.prototype).constructor;for(;u&&u!==l;){const f=u[lo]||pb(u);if(f&&f!==a)return f;u=Object.getPrototypeOf(u)}return f=>new f})}function pb(i){return ye(i)?()=>{const o=pb(Ae(i));return o&&o()}:nr(i)}function WR(i){const o=i[Lt],a=o.type;return 2===a?o.declTNode:1===a?i[Kr]:null}function s0(i){return function $R(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const a=i.attrs;if(a){const l=a.length;let u=0;for(;u<l;){const f=a[u];if(Al(f))break;if(0===f)u+=2;else if("number"==typeof f)for(u++;u<l&&"string"==typeof a[u];)u++;else{if(f===o)return a[u+1];u+=2}}}return null}(Xr(),i)}function _b(i,o=null,a=null,l){const u=vb(i,o,a,l);return u.resolveInjectorInitializers(),u}function vb(i,o=null,a=null,l,u=new Set){const f=[a||lr,xa(i)];return l=l||("object"==typeof i?void 0:pn(i)),new sa(f,o||Za(),l||null,u)}let fa=(()=>{var i;class o{static create(l,u){if(Array.isArray(l))return _b({name:""},u,l,"");{var f;const _=null!==(f=l.name)&&void 0!==f?f:"";return _b({name:_},l.parent,l.providers,_)}}}return(i=o).THROW_IF_NOT_FOUND=Go,i.NULL=new Ms,i.\u0275prov=qn({token:i,providedIn:"any",factory:()=>U(bl)}),i.__NG_ELEMENT_ID__=-1,o})();function Bl(i){return i.ngOriginalError}class fc{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&Bl(o);for(;a&&Bl(a);)a=Bl(a);return a||null}}const yb=new cn("",{providedIn:"root",factory:()=>ae(fc).handleError.bind(void 0)});let $l=(()=>{var i;class o{}return(i=o).__NG_ELEMENT_ID__=ro,i.__NG_ENV_ID__=a=>a,o})();class YR extends $l{constructor(o){super(),this._lView=o}onDestroy(o){return da(this._lView,o),()=>function $y(i,o){if(null===i[ms])return;const a=i[ms].indexOf(o);-1!==a&&i[ms].splice(a,1)}(this._lView,o)}}function ro(){return new YR(yt())}function wb(){return Dh(Xr(),yt())}function Dh(i,o){return new Zc(Xo(i,o))}let Zc=(()=>{class o{constructor(l){this.nativeElement=l}}return o.__NG_ELEMENT_ID__=wb,o})();function c0(i){return i instanceof Zc?i.nativeElement:i}function Sh(i){return o=>{setTimeout(i,void 0,o)}}const jl=class Op extends Mn.B{constructor(o=!1){var a;super(),this.destroyRef=void 0,this.__isAsync=o,E()&&(this.destroyRef=null!==(a=ae($l,{optional:!0}))&&void 0!==a?a:void 0)}emit(o){const a=re(null);try{super.next(o)}finally{re(a)}}subscribe(o,a,l){let u=o,f=a||(()=>null),_=l;if(o&&"object"==typeof o){var b,D,V;const W=o;u=null===(b=W.next)||void 0===b?void 0:b.bind(W),f=null===(D=W.error)||void 0===D?void 0:D.bind(W),_=null===(V=W.complete)||void 0===V?void 0:V.bind(W)}this.__isAsync&&(f=Sh(f),u&&(u=Sh(u)),_&&(_=Sh(_)));const H=super.subscribe({next:u,error:f,complete:_});return o instanceof er.yU&&o.add(H),H}};function u0(){return this._results[Symbol.iterator]()}class $m{get changes(){var o;return null!==(o=this._changes)&&void 0!==o?o:this._changes=new jl}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const a=$m.prototype;a[Symbol.iterator]||(a[Symbol.iterator]=u0)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){this.dirty=!1;const l=function Xn(i){return i.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function vr(i,o,a){if(i.length!==o.length)return!1;for(let l=0;l<i.length;l++){let u=i[l],f=o[l];if(a&&(u=a(u),f=a(f)),f!==u)return!1}return!0}(this._results,l,a))&&(this._results=l,this.length=l.length,this.last=l[this.length-1],this.first=l[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(o){this._onDirty=o}setDirty(){var o;this.dirty=!0,null===(o=this._onDirty)||void 0===o||o.call(this)}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function zm(i){return!(128&~i.flags)}const bb=new Map;let Rh=0;const f0="__ngContext__";function No(i,o){Mo(o)?(i[f0]=o[Kc],function eP(i){bb.set(i[Kc],i)}(o)):i[f0]=o}function Pb(i){return Lp(i[xl])}function Wm(i){return Lp(i[Yr])}function Lp(i){for(;null!==i&&!Ko(i);)i=i[Yr];return i}let Vp;function I0(i){Vp=i}const xh=new cn("",{providedIn:"root",factory:()=>fP}),fP="ng",kb=new cn(""),Up=new cn("",{providedIn:"platform",factory:()=>"unknown"}),pP=new cn("",{providedIn:"root",factory:()=>{var i;return(null===(i=function tu(){if(void 0!==Vp)return Vp;if(typeof document<"u")return document;throw new Pe(210,!1)}().body)||void 0===i||null===(i=i.querySelector("[ngCspNonce]"))||void 0===i?void 0:i.getAttribute("ngCspNonce"))||null}});let A0=()=>null;function $p(i,o,a=!1){return A0(i,o,a)}const Wb=new cn("",{providedIn:"root",factory:()=>!1});let t_;function Kb(i){var o;return(null===(o=function x0(){if(void 0===t_&&(t_=null,Rn.trustedTypes))try{t_=Rn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return t_}())||void 0===o?void 0:o.createScriptURL(i))||i}class i_{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ht})`}}function fd(i){return i instanceof i_?i.changingThisBreaksApplicationSecurity:i}function pd(i,o){const a=function Yb(i){return i instanceof i_&&i.getTypeName()||null}(i);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see ${Ht})`)}return a===o}const RP=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Uh=function(i){return i[i.NONE=0]="NONE",i[i.HTML=1]="HTML",i[i.STYLE=2]="STYLE",i[i.SCRIPT=3]="SCRIPT",i[i.URL=4]="URL",i[i.RESOURCE_URL=5]="RESOURCE_URL",i}(Uh||{});function V0(i){const o=Gp();return o?o.sanitize(Uh.URL,i)||"":pd(i,"URL")?fd(i):function eT(i){return(i=String(i)).match(RP)?i:"unsafe:"+i}(yn(i))}function iT(i){const o=Gp();if(o)return Kb(o.sanitize(Uh.RESOURCE_URL,i)||"");if(pd(i,"ResourceURL"))return Kb(fd(i));throw new Pe(904,!1)}function oT(i,o,a){return function Hp(i,o){return"src"===o&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===o&&("base"===i||"link"===i)?iT:V0}(o,a)(i)}function Gp(){const i=yt();return i&&i[aa].sanitizer}const HP=/^>|^->|<!--|-->|--!>|<!-$/g,GP=/(<|>)/g,sT="\u200b$1\u200b";function Yo(i){return i instanceof Function?i():i}var qp=function(i){return i[i.Important=1]="Important",i[i.DashCase=2]="DashCase",i}(qp||{});let gc;function f_(i,o){return gc(i,o)}function $s(i,o,a,l,u){if(null!=l){let f,_=!1;Ko(l)?f=l:Mo(l)&&(_=!0,l=l[ur]);const b=Hr(l);0===i&&null!==a?null==u?un(o,a,b):mc(o,a,b,u||null,!0):1===i&&null!==a?mc(o,a,b,u||null,!0):2===i?function v_(i,o,a){const l=dt(i,o);l&&function JP(i,o,a,l){i.removeChild(o,a,l)}(i,l,o,a)}(o,b,_):3===i&&o.destroyNode(b),null!=f&&function wi(i,o,a,l,u){const f=a[Na];f!==Hr(a)&&$s(o,i,l,f,u);for(let b=gi;b<a.length;b++){const D=a[b];Hn(D[Lt],D,i,o,l,f)}}(o,i,f,a,u)}}function _d(i,o){return i.createComment(function u_(i){return i.replace(HP,o=>o.replace(GP,sT))}(o))}function Kp(i,o,a){return i.createElement(o,a)}function X0(i,o){var a;null===(a=o[aa].changeDetectionScheduler)||void 0===a||a.notify(1),Hn(i,o,o[Vn],2,null,null)}function mo(i,o){const a=i[kl],l=a.indexOf(o);a.splice(l,1)}function zl(i,o){if(i.length<=gi)return;const a=gi+o,l=i[a];if(l){const u=l[gs];null!==u&&u!==i&&mo(u,l),o>0&&(i[a-1][Yr]=l[Yr]);const f=qr(i,gi+o);!function m_(i,o){X0(i,o),o[ur]=null,o[Kr]=null}(l[Lt],l);const _=f[Ci];null!==_&&_.detachView(f[Lt]),l[wr]=null,l[Yr]=null,l[dn]&=-129}return l}function sl(i,o){if(!(256&o[dn])){const a=o[Vn];a.destroyNode&&Hn(i,o,a,3,null,null),function fT(i){let o=i[xl];if(!o)return ou(i[Lt],i);for(;o;){let a=null;if(Mo(o))a=o[xl];else{const l=o[gi];l&&(a=l)}if(!a){for(;o&&!o[Yr]&&o!==i;)Mo(o)&&ou(o[Lt],o),o=o[wr];null===o&&(o=i),Mo(o)&&ou(o[Lt],o),a=o&&o[Yr]}o=a}}(o)}}function ou(i,o){if(256&o[dn])return;const a=re(null);try{o[dn]&=-129,o[dn]|=256,o[po]&&function at(i){if(tt(i),$e(i))for(let o=0;o<i.producerNode.length;o++)ke(i.producerNode[o],i.producerIndexOfThis[o]);i.producerNode.length=i.producerLastReadVersion.length=i.producerIndexOfThis.length=0,i.liveConsumerNode&&(i.liveConsumerNode.length=i.liveConsumerIndexOfThis.length=0)}(o[po]),function Vt(i,o){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const u=o[a[l]];if(!(u instanceof ad)){const f=a[l+1];if(Array.isArray(f))for(let _=0;_<f.length;_+=2){const b=u[f[_]],D=f[_+1];ss(4,b,D);try{D.call(b)}finally{ss(5,b,D)}}else{ss(4,u,f);try{f.call(u)}finally{ss(5,u,f)}}}}}(i,o),function YP(i,o){const a=i.cleanup,l=o[Us];if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const _=a[f+3];_>=0?l[_]():l[-_].unsubscribe(),f+=2}else a[f].call(l[a[f+1]]);null!==l&&(o[Us]=null);const u=o[ms];if(null!==u){o[ms]=null;for(let f=0;f<u.length;f++)(0,u[f])()}}(i,o),1===o[Lt].type&&o[Vn].destroy();const l=o[gs];if(null!==l&&Ko(o[wr])){l!==o[wr]&&mo(l,o);const u=o[Ci];null!==u&&u.detachView(i)}!function tP(i){bb.delete(i[Kc])}(o)}finally{re(a)}}function Mi(i,o,a){return function Is(i,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[ur];{const{componentOffset:u}=l;if(u>-1){const{encapsulation:f}=i.data[l.directiveStart+u];if(f===is.None||f===is.Emulated)return null}return Xo(l,a)}}(i,o.parent,a)}function mc(i,o,a,l,u){i.insertBefore(o,a,l,u)}function un(i,o,a){i.appendChild(o,a)}function Cn(i,o,a,l,u){null!==l?mc(i,o,a,l,u):un(i,o,a)}function dt(i,o){return i.parentNode(o)}function io(i,o,a){return mT(i,o,a)}let Y0,mT=function Q0(i,o,a){return 40&i.type?Xo(i,a):null};function __(i,o,a,l){const u=Mi(i,l,o),f=o[Vn],b=io(l.parent||o[Kr],l,o);if(null!=u)if(Array.isArray(a))for(let D=0;D<a.length;D++)Cn(f,u,a[D],b,!1);else Cn(f,u,a,b,!1);void 0!==Y0&&Y0(f,l,o,a,u)}function Xp(i,o){if(null!==o){const a=o.type;if(3&a)return Xo(o,i);if(4&a)return Z0(-1,i[o.index]);if(8&a){const l=o.child;if(null!==l)return Xp(i,l);{const u=i[o.index];return Ko(u)?Z0(-1,u):Hr(u)}}if(32&a)return f_(o,i)()||Hr(i[o.index]);{const l=J0(i,o);return null!==l?Array.isArray(l)?l[0]:Xp(hc(i[Or]),l):Xp(i,o.next)}}return null}function J0(i,o){return null!==o?i[Or][Kr].projection[o.projection]:null}function Z0(i,o){const a=gi+i+1;if(a<o.length){const l=o[a],u=l[Lt].firstChild;if(null!==u)return Xp(l,u)}return o[Na]}function y_(i,o,a,l,u,f,_){for(;null!=a;){const b=l[a.index],D=a.type;if(_&&0===o&&(b&&No(Hr(b),l),a.flags|=2),32&~a.flags)if(8&D)y_(i,o,a.child,l,u,f,!1),$s(o,i,u,b,f);else if(32&D){const V=f_(a,l);let H;for(;H=V();)$s(o,i,u,H,f);$s(o,i,u,b,f)}else 16&D?eI(i,o,l,a,u,f):$s(o,i,u,b,f);a=_?a.projectionNext:a.next}}function Hn(i,o,a,l,u,f){y_(a,l,i.firstChild,o,u,f,!1)}function eI(i,o,a,l,u,f){const _=a[Or],D=_[Kr].projection[l.projection];if(Array.isArray(D))for(let V=0;V<D.length;V++)$s(o,i,u,D[V],f);else{let V=D;const H=_[wr];zm(l)&&(V.flags|=128),y_(i,o,V,H,u,f,!0)}}function br(i,o,a){""===a?i.removeAttribute(o,"class"):i.setAttribute(o,"class",a)}function yT(i,o,a){const{mergedAttrs:l,classes:u,styles:f}=a;null!==l&&Tl(i,o,l),null!==u&&br(i,o,u),null!==f&&function Qp(i,o,a){i.setAttribute(o,"style",a)}(i,o,f)}const fn={};function tn(i=1){vd(dr(),yt(),xo()+i,!1)}function vd(i,o,a,l){if(!l)if(3&~o[dn]){const f=i.preOrderHooks;null!==f&&wh(o,f,0,a)}else{const f=i.preOrderCheckHooks;null!==f&&Nm(o,f,a)}od(a)}function su(i,o=Fn.Default){const a=yt();return null===a?U(i,o):hb(Xr(),a,Ae(i),o)}function au(){throw new Error("invalid")}function IT(i,o,a,l,u,f){const _=re(null);try{let b=null;u&ho.SignalBased&&(b=o[l][He]),null!==b&&void 0!==b.transformFn&&(f=b.transformFn(f)),u&ho.HasDecoratorInputTransform&&(f=i.inputTransforms[l].call(o,f)),null!==i.setInput?i.setInput(o,b,f,a,l):oe(o,b,l,f)}finally{re(_)}}function I_(i,o,a,l,u,f,_,b,D,V,H){const W=o.blueprint.slice();return W[ur]=u,W[dn]=204|l,(null!==V||i&&2048&i[dn])&&(W[dn]|=2048),rb(W),W[wr]=W[la]=i,W[oi]=a,W[aa]=_||i&&i[aa],W[Vn]=b||i&&i[Vn],W[Nr]=D||i&&i[Nr]||null,W[Kr]=f,W[Kc]=function ZR(){return Rh++}(),W[ji]=H,W[Nl]=V,W[Or]=2==o.type?i[Or]:W,W}function al(i,o,a,l,u){let f=i.data[o];if(null===f)f=function E_(i,o,a,l,u){const f=Gy(),_=Wy(),D=i.data[o]=function eM(i,o,a,l,u,f){let _=o?o.injectorIndex:-1,b=0;return Oa()&&(b|=128),{type:a,index:l,insertBeforeIndex:null,injectorIndex:_,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:b,providerIndexes:0,value:u,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?f:f&&f.parent,a,o,l,u);return null===i.firstChild&&(i.firstChild=D),null!==f&&(_?null==f.child&&null!==D.parent&&(f.child=D):null===f.next&&(f.next=D,D.prev=f)),D}(i,o,a,l,u),function sb(){return Zn.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=a,f.value=l,f.attrs=u;const _=function yp(){const i=Zn.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();f.injectorIndex=null===_?-1:_.injectorIndex}return vs(f,!0),f}function $h(i,o,a,l){if(0===a)return-1;const u=o.length;for(let f=0;f<a;f++)o.push(l),i.blueprint.push(l),i.data.push(null);return u}function js(i,o,a,l,u){const f=xo(),_=2&l;try{od(-1),_&&o.length>Jn&&vd(i,o,Jn,!1),ss(_?2:0,u),a(l,u)}finally{od(f),ss(_?3:1,u)}}function Yp(i,o,a){if(gh(o)){const l=re(null);try{const f=o.directiveEnd;for(let _=o.directiveStart;_<f;_++){const b=i.data[_];b.contentQueries&&b.contentQueries(1,a[_],_)}}finally{re(l)}}}function C_(i,o,a){Am()&&(function Gl(i,o,a,l){const u=a.directiveStart,f=a.directiveEnd;Fl(a)&&function aM(i,o,a){const l=Xo(o,i),u=_c(a);let _=16;a.signals?_=4096:a.onPush&&(_=64);const b=S_(i,I_(i,u,null,_,l,o,null,i[aa].rendererFactory.createRenderer(l,a),null,null,null));i[o.index]=b}(o,a,i.data[u+a.componentOffset]),i.firstCreatePass||Th(a,o),No(l,o);const _=a.initialInputs;for(let b=u;b<f;b++){const D=i.data[b],V=cd(o,i,b,a);No(V,o),null!==_&&lM(0,b-u,V,D,0,_),ua(D)&&(_s(a.index,o)[oi]=cd(o,i,b,a))}}(i,o,a,Xo(a,o)),!(64&~a.flags)&&iI(i,o,a))}function w_(i,o,a=Xo){const l=o.localNames;if(null!==l){let u=o.index+1;for(let f=0;f<l.length;f+=2){const _=l[f+1],b=-1===_?a(o,i):i[_];i[u++]=b}}}function _c(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=Jp(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts,i.id):o}function Jp(i,o,a,l,u,f,_,b,D,V,H){const W=Jn+l,ce=W+u,_e=function ze(i,o){const a=[];for(let l=0;l<o;l++)a.push(l<i?null:fn);return a}(W,ce),Oe="function"==typeof V?V():V;return _e[Lt]={type:i,blueprint:_e,template:a,queries:null,viewQuery:b,declTNode:o,data:_e.slice().fill(null,W),bindingStartIndex:W,expandoStartIndex:ce,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:D,consts:Oe,incompleteFirstPass:!1,ssrId:H}}let tI=()=>null;function cu(i,o,a,l,u){for(let _ in o){var f;if(!o.hasOwnProperty(_))continue;const b=o[_];if(void 0===b)continue;null!==(f=l)&&void 0!==f||(l={});let D,V=ho.None;Array.isArray(b)?(D=b[0],V=b[1]):D=b;let H=_;if(null!==u){if(!u.hasOwnProperty(_))continue;H=u[_]}0===i?nI(l,a,H,D,V):nI(l,a,H,D)}return l}function nI(i,o,a,l,u){let f;i.hasOwnProperty(a)?(f=i[a]).push(o,l):f=i[a]=[o,l],void 0!==u&&f.push(u)}function A_(i,o,a,l){if(Am()){const u=null===l?null:{"":-1},f=function CT(i,o){const a=i.directiveRegistry;let l=null,u=null;if(a)for(let _=0;_<a.length;_++){const b=a[_];if(le(o,b.selectors,!1))if(l||(l=[]),ua(b))if(null!==b.findHostDirectiveDefs){const D=[];u=u||new Map,b.findHostDirectiveDefs(b,D,u),l.unshift(...D,b),oI(i,o,D.length)}else l.unshift(b),oI(i,o,0);else{var f;u=u||new Map,null===(f=b.findHostDirectiveDefs)||void 0===f||f.call(b,b,l,u),l.push(b)}}return null===l?null:[l,u]}(i,a);let _,b;null===f?_=b=null:[_,b]=f,null!==_&&Jo(i,o,a,_,u,b),u&&function rM(i,o,a){if(o){const l=i.localNames=[];for(let u=0;u<o.length;u+=2){const f=a[o[u+1]];if(null==f)throw new Pe(-301,!1);l.push(o[u],f)}}}(a,l,u)}a.mergedAttrs=xs(a.mergedAttrs,a.attrs)}function Jo(i,o,a,l,u,f){for(let W=0;W<l.length;W++)xp(Th(a,o),i,l[W].type);!function oM(i,o,a){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+a,i.providerIndexes=o}(a,i.data.length,l.length);for(let W=0;W<l.length;W++){const ce=l[W];ce.providersResolver&&ce.providersResolver(ce)}let _=!1,b=!1,D=$h(i,o,l.length,null);for(let W=0;W<l.length;W++){const ce=l[W];a.mergedAttrs=xs(a.mergedAttrs,ce.hostAttrs),sM(i,a,o,D,ce),iM(D,ce,u),null!==ce.contentQueries&&(a.flags|=4),(null!==ce.hostBindings||null!==ce.hostAttrs||0!==ce.hostVars)&&(a.flags|=64);const _e=ce.type.prototype;var V,H;!_&&(_e.ngOnChanges||_e.ngOnInit||_e.ngDoCheck)&&((null!==(V=i.preOrderHooks)&&void 0!==V?V:i.preOrderHooks=[]).push(a.index),_=!0),b||!_e.ngOnChanges&&!_e.ngDoCheck||((null!==(H=i.preOrderCheckHooks)&&void 0!==H?H:i.preOrderCheckHooks=[]).push(a.index),b=!0),D++}!function rI(i,o,a){const u=o.directiveEnd,f=i.data,_=o.attrs,b=[];let D=null,V=null;for(let H=o.directiveStart;H<u;H++){const W=f[H],ce=a?a.get(W):null,Oe=ce?ce.outputs:null;D=cu(0,W.inputs,H,D,ce?ce.inputs:null),V=cu(1,W.outputs,H,V,Oe);const ot=null===D||null===_||ia(o)?null:cM(D,H,_);b.push(ot)}null!==D&&(D.hasOwnProperty("class")&&(o.flags|=8),D.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=b,o.inputs=D,o.outputs=V}(i,a,f)}function iI(i,o,a){const l=a.directiveStart,u=a.directiveEnd,f=a.index,_=function Ky(){return Zn.lFrame.currentDirectiveIndex}();try{od(f);for(let b=l;b<u;b++){const D=i.data[b],V=o[b];Ip(b),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&D_(D,V)}}finally{od(-1),Ip(_)}}function D_(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function oI(i,o,a){var l;o.componentOffset=a,(null!==(l=i.components)&&void 0!==l?l:i.components=[]).push(o.index)}function iM(i,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=i;ua(o)&&(a[""]=i)}}function sM(i,o,a,l,u){i.data[l]=u;const f=u.factory||(u.factory=nr(u.type)),_=new ad(f,ua(u),su);i.blueprint[l]=_,a[l]=_,function nM(i,o,a,l,u){const f=u.hostBindings;if(f){let _=i.hostBindingOpCodes;null===_&&(_=i.hostBindingOpCodes=[]);const b=~o.index;(function ET(i){let o=i.length;for(;o>0;){const a=i[--o];if("number"==typeof a&&a<0)return a}return 0})(_)!=b&&_.push(b),_.push(a,l,f)}}(i,o,l,$h(i,a,u.hostVars,fn),u)}function Wl(i,o,a,l,u,f){const _=Xo(i,o);!function sI(i,o,a,l,u,f,_){if(null==f)i.removeAttribute(o,u,a);else{const b=null==_?yn(f):_(f,l||"",u);i.setAttribute(o,u,b,a)}}(o[Vn],_,f,i.value,a,l,u)}function lM(i,o,a,l,u,f){const _=f[o];if(null!==_)for(let b=0;b<_.length;)IT(l,a,_[b++],_[b++],_[b++],_[b++])}function cM(i,o,a){let l=null,u=0;for(;u<a.length;){const f=a[u];if(0!==f)if(5!==f){if("number"==typeof f)break;if(i.hasOwnProperty(f)){null===l&&(l=[]);const _=i[f];for(let b=0;b<_.length;b+=3)if(_[b]===o){l.push(f,_[b+1],_[b+2],a[u+1]);break}}u+=2}else u+=2;else u+=4}return l}function wT(i,o,a,l){return[i,!0,0,o,null,l,null,a,null,null]}function bT(i,o){const a=i.contentQueries;if(null!==a){const l=re(null);try{for(let u=0;u<a.length;u+=2){const _=a[u+1];if(-1!==_){const b=i.data[_];Eh(a[u]),b.contentQueries(2,o[_],_)}}}finally{re(l)}}}function S_(i,o){return i[xl]?i[fh][Yr]=o:i[xl]=o,i[fh]=o,o}function aI(i,o,a){Eh(0);const l=re(null);try{o(i,a)}finally{re(l)}}function lI(i){return i[Us]||(i[Us]=[])}function TT(i){return i.cleanup||(i.cleanup=[])}function tg(i,o){const a=i[Nr],l=a?a.get(fc,null):null;l&&l.handleError(o)}function R_(i,o,a,l,u){for(let f=0;f<a.length;){const _=a[f++],b=a[f++],D=a[f++];IT(i.data[_],o[_],l,b,D,u)}}function uI(i,o){const a=_s(o,i),l=a[Lt];!function ko(i,o){for(let a=o.length;a<i.blueprint.length;a++)o.push(i.blueprint[a])}(l,a);const u=a[ur];null!==u&&null===a[ji]&&(a[ji]=$p(u,a[Nr])),P_(l,a,a[oi])}function P_(i,o,a){Rm(o);try{var l;const u=i.viewQuery;null!==u&&aI(1,u,a);const f=i.template;null!==f&&js(i,o,f,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),null===(l=o[Ci])||void 0===l||l.finishViewCreation(i),i.staticContentQueries&&bT(i,o),i.staticViewQueries&&aI(2,i.viewQuery,a);const _=i.components;null!==_&&function uu(i,o){for(let a=0;a<o.length;a++)uI(i,o[a])}(o,_)}catch(u){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),u}finally{o[dn]&=-5,wp()}}function Gr(i,o){return!o||null===o.firstChild||zm(i)}function du(i,o,a,l=!0){const u=o[Lt];if(function pT(i,o,a,l){const u=gi+l,f=a.length;l>0&&(a[u-1][Yr]=o),l<f-gi?(o[Yr]=a[u],Er(a,gi+l,o)):(a.push(o),o[Yr]=null),o[wr]=a;const _=o[gs];null!==_&&a!==_&&function gT(i,o){const a=i[kl];o[Or]!==o[wr][wr][Or]&&(i[dn]|=Ol.HasTransplantedViews),null===a?i[kl]=[o]:a.push(o)}(_,o);const b=o[Ci];null!==b&&b.insertView(i),mp(o),o[dn]|=128}(u,o,i,a),l){const _=Z0(a,i),b=o[Vn],D=dt(b,i[Na]);null!==D&&function K0(i,o,a,l,u,f){l[ur]=u,l[Kr]=o,Hn(i,l,a,1,u,f)}(u,i[Kr],b,o,D,_)}const f=o[ji];null!==f&&null!==f.firstChild&&(f.firstChild=null)}function Vr(i,o,a,l,u=!1){for(;null!==a;){const f=o[a.index];null!==f&&l.push(Hr(f)),Ko(f)&&hI(f,l);const _=a.type;if(8&_)Vr(i,o,a.child,l);else if(32&_){const b=f_(a,o);let D;for(;D=b();)l.push(D)}else if(16&_){const b=J0(o,a);if(Array.isArray(b))l.push(...b);else{const D=hc(o[Or]);Vr(D[Lt],D,b,l,!0)}}a=u?a.projectionNext:a.next}return l}function hI(i,o){for(let a=gi;a<i.length;a++){const l=i[a],u=l[Lt].firstChild;null!==u&&Vr(l[Lt],l,u,o)}i[Na]!==i[ur]&&o.push(i[Na])}let Id=[];const vo={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{},consumerIsAlwaysLive:!0,consumerMarkedDirty:i=>{_p(i.lView)},consumerOnSignalRead(){this.lView[po]=this}},DT=100;function Ba(i,o=!0,a=0){const l=i[aa],u=l.rendererFactory;var _;null===(_=u.begin)||void 0===_||_.call(u);try{!function zi(i,o){Hh(i,o);let a=0;for(;il(i);){if(a===DT)throw new Pe(103,!1);a++,Hh(i,1)}}(i,a)}catch(V){throw o&&tg(i,V),V}finally{var b,D;null===(b=u.end)||void 0===b||b.call(u),null===(D=l.inlineEffectRunner)||void 0===D||D.flush()}}function M_(i,o,a,l){var u;const f=o[dn];if(!(256&~f))return;null===(u=o[aa].inlineEffectRunner)||void 0===u||u.flush(),Rm(o);let b=null,D=null;(function x_(i){return 2!==i.type})(i)&&(D=function Hs(i){var o;return null!==(o=i[po])&&void 0!==o?o:function AT(i){var o;const a=null!==(o=Id.pop())&&void 0!==o?o:Object.create(vo);return a.lView=i,a}(i)}(o),b=function Qe(i){return i&&(i.nextProducerIndex=0),re(i)}(D));try{rb(o),function ob(i){return Zn.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&js(i,o,a,2,l);const V=!(3&~f);if(V){const ce=i.preOrderCheckHooks;null!==ce&&Nm(o,ce,null)}else{const ce=i.preOrderHooks;null!==ce&&wh(o,ce,0,null),Jy(o,0)}if(function dM(i){for(let o=Pb(i);null!==o;o=Wm(o)){if(!(o[dn]&Ol.HasTransplantedViews))continue;const a=o[kl];for(let l=0;l<a.length;l++){By(a[l])}}}(o),zh(o,0),null!==i.contentQueries&&bT(i,o),V){const ce=i.contentCheckHooks;null!==ce&&Nm(o,ce)}else{const ce=i.contentHooks;null!==ce&&wh(o,ce,1),Jy(o,1)}!function yd(i,o){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const u=a[l];if(u<0)od(~u);else{const f=u,_=a[++l],b=a[++l];NR(_,f),b(2,o[f])}}}finally{od(-1)}}(i,o);const H=i.components;null!==H&&Ic(o,H,0);const W=i.viewQuery;if(null!==W&&aI(2,W,l),V){const ce=i.viewCheckHooks;null!==ce&&Nm(o,ce)}else{const ce=i.viewHooks;null!==ce&&wh(o,ce,2),Jy(o,2)}if(!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),o[ca]){for(const ce of o[ca])ce();o[ca]=null}o[dn]&=-73}catch(V){throw _p(o),V}finally{null!==D&&(function vt(i,o){if(re(o),i&&void 0!==i.producerNode&&void 0!==i.producerIndexOfThis&&void 0!==i.producerLastReadVersion){if($e(i))for(let a=i.nextProducerIndex;a<i.producerNode.length;a++)ke(i.producerNode[a],i.producerIndexOfThis[a]);for(;i.producerNode.length>i.nextProducerIndex;)i.producerNode.pop(),i.producerLastReadVersion.pop(),i.producerIndexOfThis.pop()}}(D,b),function uM(i){i.lView[po]!==i&&(i.lView=null,Id.push(i))}(D)),wp()}}function zh(i,o){for(let a=Pb(i);null!==a;a=Wm(a))for(let l=gi;l<a.length;l++)yc(a[l],o)}function fu(i,o,a){yc(_s(o,i),a)}function yc(i,o){gp(i)&&Hh(i,o)}function Hh(i,o){const l=i[Lt],u=i[dn],f=i[po];let _=!!(0===o&&16&u);if(_||(_=!!(64&u&&0===o)),_||(_=!!(1024&u)),_||(_=!(null==f||!f.dirty||!We(f))),f&&(f.dirty=!1),i[dn]&=-9217,_)M_(l,i,l.template,i[oi]);else if(8192&u){zh(i,1);const b=l.components;null!==b&&Ic(i,b,1)}}function Ic(i,o,a){for(let l=0;l<o.length;l++)fu(i,o[l],a)}function Gs(i){var o;for(null===(o=i[aa].changeDetectionScheduler)||void 0===o||o.notify();i;){i[dn]|=64;const a=hc(i);if(Cm(i)&&!a)return i;i=a}return null}class Ec{get rootNodes(){const o=this._lView,a=o[Lt];return Vr(a,o,a.firstChild,[])}constructor(o,a,l=!0){this._lView=o,this._cdRefInjectingView=a,this.notifyErrorHandler=l,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[oi]}set context(o){this._lView[oi]=o}get destroyed(){return!(256&~this._lView[dn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[wr];if(Ko(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(zl(o,l),qr(a,l))}this._attachedToViewContainer=!1}sl(this._lView[Lt],this._lView)}onDestroy(o){da(this._lView,o)}markForCheck(){Gs(this._cdRefInjectingView||this._lView)}detach(){this._lView[dn]&=-129}reattach(){mp(this._lView),this._lView[dn]|=128}detectChanges(){this._lView[dn]|=1024,Ba(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Pe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,X0(this._lView[Lt],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Pe(902,!1);this._appRef=o,mp(this._lView)}}let $a=(()=>{class o{}return o.__NG_ELEMENT_ID__=fI,o})();const ST=$a,Gh=class extends ST{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}get ssrId(){var o;return(null===(o=this._declarationTContainer.tView)||void 0===o?void 0:o.ssrId)||null}createEmbeddedView(o,a){return this.createEmbeddedViewImpl(o,a)}createEmbeddedViewImpl(o,a,l){const u=function jh(i,o,a,l){const u=re(null);try{var f,_,b;const D=o.tView,W=I_(i,D,a,4096&i[dn]?4096:16,null,o,null,null,null!==(f=null==l?void 0:l.injector)&&void 0!==f?f:null,null!==(_=null==l?void 0:l.embeddedViewInjector)&&void 0!==_?_:null,null!==(b=null==l?void 0:l.dehydratedView)&&void 0!==b?b:null);W[gs]=i[o.index];const _e=i[Ci];return null!==_e&&(W[Ci]=_e.createEmbeddedView(D)),P_(D,W,a),W}finally{re(u)}}(this._declarationLView,this._declarationTContainer,o,{embeddedViewInjector:a,dehydratedView:l});return new Ec(u)}};function fI(){return Ed(Xr(),yt())}function Ed(i,o){return 4&i.type?new Gh(o,i,Dh(i,o)):null}class V_{}class Yh{}class EI{}class UT{resolveComponentFactory(o){throw function CI(i){const o=Error(`No component factory found for ${pn(i)}.`);return o.ngComponent=i,o}(o)}}let sg=(()=>{class o{}return o.NULL=new UT,o})();class U_{}let B_=(()=>{class o{constructor(){this.destroyNode=null}}return o.__NG_ELEMENT_ID__=()=>function ag(){const i=yt(),a=_s(Xr().index,i);return(Mo(a)?a:i)[Vn]}(),o})(),BT=(()=>{var i;class o{}return(i=o).\u0275prov=qn({token:i,providedIn:"root",factory:()=>null}),o})();const gu={},wI=new Set;function cl(i){var o,a;wI.has(i)||(wI.add(i),null===(o=performance)||void 0===o||null===(a=o.mark)||void 0===a||a.call(o,"mark_feature_usage",{detail:{feature:i}}))}function $T(...i){}class Fr{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new jl(!1),this.onMicrotaskEmpty=new jl(!1),this.onStable=new jl(!1),this.onError=new jl(!1),typeof Zone>"u")throw new Pe(908,!1);Zone.assertZonePatched();const u=this;u._nesting=0,u._outer=u._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(u._inner=u._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(u._inner=u._inner.fork(Zone.longStackTraceZoneSpec)),u.shouldCoalesceEventChangeDetection=!l&&a,u.shouldCoalesceRunChangeDetection=l,u.lastRequestAnimationFrameId=-1,u.nativeRequestAnimationFrame=function wc(){const i="function"==typeof Rn.requestAnimationFrame;let o=Rn[i?"requestAnimationFrame":"setTimeout"],a=Rn[i?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&o&&a){const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l);const u=a[Zone.__symbol__("OriginalDelegate")];u&&(a=u)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function ql(i){const o=()=>{!function zT(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Rn,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,j_(i),i.isCheckStableRunning=!0,bd(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),j_(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,u,f,_,b)=>{if(function hr(i){var o;return!(!Array.isArray(i)||1!==i.length)&&!0===(null===(o=i[0].data)||void 0===o?void 0:o.__ignore_ng_zone__)}(b))return a.invokeTask(u,f,_,b);try{return Jh(i),a.invokeTask(u,f,_,b)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&o(),HT(i)}},onInvoke:(a,l,u,f,_,b,D)=>{try{return Jh(i),a.invoke(u,f,_,b,D)}finally{i.shouldCoalesceRunChangeDetection&&o(),HT(i)}},onHasTask:(a,l,u,f)=>{a.hasTask(u,f),l===u&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,j_(i),bd(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,l,u,f)=>(a.handleError(u,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(u)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Fr.isInAngularZone())throw new Pe(909,!1)}static assertNotInAngularZone(){if(Fr.isInAngularZone())throw new Pe(909,!1)}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,u){const f=this._inner,_=f.scheduleEventTask("NgZoneEvent: "+u,o,jT,$T,$T);try{return f.runTask(_,a,l)}finally{f.cancelTask(_)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const jT={};function bd(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function j_(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Jh(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function HT(i){i._nesting--,bd(i)}class GT{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new jl,this.onMicrotaskEmpty=new jl,this.onStable=new jl,this.onError=new jl}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,u){return o.apply(a,l)}}var bc=function(i){return i[i.EarlyRead=0]="EarlyRead",i[i.Write=1]="Write",i[i.MixedReadWrite=2]="MixedReadWrite",i[i.Read=3]="Read",i}(bc||{});const bI={destroy(){}};function lg(i,o){var a,l,u;!o&&function P(i){if(!E())throw new Pe(-203,!1)}();const f=null!==(a=null==o?void 0:o.injector)&&void 0!==a?a:ae(fa);if(!function Ua(i){return"browser"===(null!=i?i:ae(fa)).get(Up)}(f))return bI;cl("NgAfterNextRender");const _=f.get(Zh),b=null!==(l=_.handler)&&void 0!==l?l:_.handler=new KT,D=null!==(u=null==o?void 0:o.phase)&&void 0!==u?u:bc.MixedReadWrite,V=()=>{b.unregister(W),H()},H=f.get($l).onDestroy(V),W=Vs(f,()=>new qT(D,()=>{V(),i()}));return b.register(W),{destroy:V}}class qT{constructor(o,a){var l;this.phase=o,this.callbackFn=a,this.zone=ae(Fr),this.errorHandler=ae(fc,{optional:!0}),null===(l=ae(V_,{optional:!0}))||void 0===l||l.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(a){var o;null===(o=this.errorHandler)||void 0===o||o.handleError(a)}}}class KT{constructor(){this.executingCallbacks=!1,this.buckets={[bc.EarlyRead]:new Set,[bc.Write]:new Set,[bc.MixedReadWrite]:new Set,[bc.Read]:new Set},this.deferredCallbacks=new Set}register(o){(this.executingCallbacks?this.deferredCallbacks:this.buckets[o.phase]).add(o)}unregister(o){this.buckets[o.phase].delete(o),this.deferredCallbacks.delete(o)}execute(){this.executingCallbacks=!0;for(const o of Object.values(this.buckets))for(const a of o)a.invoke();this.executingCallbacks=!1;for(const o of this.deferredCallbacks)this.buckets[o.phase].add(o);this.deferredCallbacks.clear()}destroy(){for(const o of Object.values(this.buckets))o.clear();this.deferredCallbacks.clear()}}let Zh=(()=>{var i;class o{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){var l;this.executeInternalCallbacks(),null===(l=this.handler)||void 0===l||l.execute()}executeInternalCallbacks(){const l=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const u of l)u()}ngOnDestroy(){var l;null===(l=this.handler)||void 0===l||l.destroy(),this.handler=null,this.internalCallbacks.length=0}}return(i=o).\u0275prov=qn({token:i,providedIn:"root",factory:()=>new i}),o})();function qs(i){return!!Ri(i)}function Td(i,o,a){let l=a?i.styles:null,u=a?i.classes:null,f=0;if(null!==o)for(let _=0;_<o.length;_++){const b=o[_];"number"==typeof b?f=b:1==f?u=tr(u,b):2==f&&(l=tr(l,b+": "+o[++_]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=u:i.classesWithoutHost=u}class dg extends sg{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=sr(o);return new hg(a,this.ngModule)}}function TI(i){const o=[];for(const a in i){if(!i.hasOwnProperty(a))continue;const l=i[a];void 0!==l&&o.push({propName:Array.isArray(l)?l[0]:l,templateName:a})}return o}class yu{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,l){l=he(l);const u=this.injector.get(o,gu,l);return u!==gu||a===gu?u:this.parentInjector.get(o,a,l)}}class hg extends EI{get inputs(){const o=this.componentDef,a=o.inputTransforms,l=TI(o.inputs);if(null!==a)for(const u of l)a.hasOwnProperty(u.propName)&&(u.transform=a[u.propName]);return l}get outputs(){return TI(this.componentDef.outputs)}constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function fs(i){return i.map(os).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}create(o,a,l,u){const f=re(null);try{var b;let D=(u=u||this.ngModule)instanceof qo?u:null===(b=u)||void 0===b?void 0:b.injector;D&&null!==this.componentDef.getStandaloneInjector&&(D=this.componentDef.getStandaloneInjector(D)||D);const V=D?new yu(o,D):o,H=V.get(U_,null);if(null===H)throw new Pe(407,!1);const W=V.get(BT,null),Oe={rendererFactory:H,sanitizer:W,inlineEffectRunner:null,afterRenderEventManager:V.get(Zh,null),changeDetectionScheduler:V.get(V_,null)},ot=H.createRenderer(null,this.componentDef),Nt=this.componentDef.selectors[0][0]||"div",Ut=l?function b_(i,o,a,l){const f=l.get(Wb,!1)||a===is.ShadowDom,_=i.selectRootElement(o,f);return function Hl(i){tI(i)}(_),_}(ot,l,this.componentDef.encapsulation,V):Kp(ot,Nt,function IM(i){const o=i.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(Nt));let bt=512;this.componentDef.signals?bt|=4096:this.componentDef.onPush||(bt|=16);let Un=null;null!==Ut&&(Un=$p(Ut,V,!0));const Gn=Jp(0,null,null,1,0,null,null,null,null,null,null),Ar=I_(null,Gn,null,bt,null,null,Oe,ot,V,null,Un);let Zi,Ga;Rm(Ar);try{const Wa=this.componentDef;let oh,cw=null;Wa.findHostDirectiveDefs?(oh=[],cw=new Map,Wa.findHostDirectiveDefs(Wa,oh,cw),oh.push(Wa)):oh=[Wa];const Ck=function rf(i,o){const a=i[Lt],l=Jn;return i[l]=o,al(a,l,2,"#host",null)}(Ar,Ut),S1=function Tc(i,o,a,l,u,f,_){const b=u[Lt];!function YT(i,o,a,l){for(const u of i)o.mergedAttrs=xs(o.mergedAttrs,u.hostAttrs);null!==o.mergedAttrs&&(Td(o,o.mergedAttrs,!0),null!==a&&yT(l,a,o))}(l,i,o,_);let D=null;null!==o&&(D=$p(o,u[Nr]));const V=f.rendererFactory.createRenderer(o,a);let H=16;a.signals?H=4096:a.onPush&&(H=64);const W=I_(u,_c(a),null,H,u[i.index],i,f,V,null,null,D);return b.firstCreatePass&&oI(b,i,l.length-1),S_(u,W),u[i.index]=W}(Ck,Ut,Wa,oh,Ar,Oe,ot);Ga=rd(Gn,Jn),Ut&&function ZT(i,o,a,l){if(l)Tl(i,a,["ng-version","17.3.10"]);else{const{attrs:u,classes:f}=function Ma(i){const o=[],a=[];let l=1,u=2;for(;l<i.length;){let f=i[l];if("string"==typeof f)2===u?""!==f&&o.push(f,i[++l]):8===u&&a.push(f);else{if(!ne(u))break;u=f}l++}return{attrs:o,classes:a}}(o.selectors[0]);u&&Tl(i,a,u),f&&f.length>0&&br(i,a,f.join(" "))}}(ot,Wa,Ut,l),void 0!==a&&function sf(i,o,a){const l=i.projection=[];for(let u=0;u<o.length;u++){const f=a[u];l.push(null!=f?Array.from(f):null)}}(Ga,this.ngContentSelectors,a),Zi=function JT(i,o,a,l,u,f){const _=Xr(),b=u[Lt],D=Xo(_,u);Jo(b,u,_,a,null,l);for(let H=0;H<a.length;H++)No(cd(u,b,_.directiveStart+H,_),u);iI(b,u,_),D&&No(D,u);const V=cd(u,b,_.directiveStart+_.componentOffset,_);if(i[oi]=u[oi]=V,null!==f)for(const H of f)H(V,o);return Yp(b,_,u),V}(S1,Wa,oh,cw,Ar,[AI]),P_(Gn,Ar,null)}finally{wp()}return new QT(this.componentType,Zi,Dh(Ga,Ar),Ar,Ga)}finally{re(f)}}}class QT extends Yh{constructor(o,a,l,u,f){super(),this.location=l,this._rootLView=u,this._tNode=f,this.previousInputValues=null,this.instance=a,this.hostView=this.changeDetectorRef=new Ec(u,void 0,!1),this.componentType=o}setInput(o,a){const l=this._tNode.inputs;let u;if(null!==l&&(u=l[o])){var f;if(null!==(f=this.previousInputValues)&&void 0!==f||(this.previousInputValues=new Map),this.previousInputValues.has(o)&&Object.is(this.previousInputValues.get(o),a))return;const _=this._rootLView;R_(_[Lt],_,u,o,a),this.previousInputValues.set(o,a),Gs(_s(this._tNode.index,_))}}get injector(){return new go(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function AI(){const i=Xr();Ch(yt()[Lt],i)}let af=(()=>{class o{}return o.__NG_ELEMENT_ID__=DI,o})();function DI(){return Mr(Xr(),yt())}const SI=af,RI=class extends SI{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return Dh(this._hostTNode,this._hostLView)}get injector(){return new go(this._hostTNode,this._hostLView)}get parentInjector(){const o=Mp(this._hostTNode,this._hostLView);if(Dp(o)){const a=Rp(o,this._hostLView),l=Sp(o);return new go(a[Lt].data[l+8],a)}return new go(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=eA(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-gi}createEmbeddedView(o,a,l){let u,f;"number"==typeof l?u=l:null!=l&&(u=l.index,f=l.injector);const b=o.createEmbeddedViewImpl(a||{},f,null);return this.insertImpl(b,u,Gr(this._hostTNode,null)),b}createComponent(o,a,l,u,f){var _,D;const V=o&&!function ve(i){return"function"==typeof i}(o);let H;if(V)H=a;else{const Ut=a||{};H=Ut.index,l=Ut.injector,u=Ut.projectableNodes,f=Ut.environmentInjector||Ut.ngModuleRef}const W=V?o:new hg(sr(o)),ce=l||this.parentInjector;if(!f&&null==W.ngModule){const bt=(V?ce:this.parentInjector).get(qo,null);bt&&(f=bt)}const _e=sr(null!==(_=W.componentType)&&void 0!==_?_:{}),Oe=(null==_e?void 0:_e.id,null),ot=null!==(D=null==Oe?void 0:Oe.firstChild)&&void 0!==D?D:null,Nt=W.create(ce,u,ot,f);return this.insertImpl(Nt.hostView,H,Gr(this._hostTNode,Oe)),Nt}insert(o,a){return this.insertImpl(o,a,!0)}insertImpl(o,a,l){const u=o._lView;if(function DR(i){return Ko(i[wr])}(u)){const b=this.indexOf(o);if(-1!==b)this.detach(b);else{const D=u[wr],V=new RI(D,D[Kr],D[wr]);V.detach(V.indexOf(o))}}const f=this._adjustIndex(a),_=this._lContainer;return du(_,u,f,l),o.attachToViewContainerRef(),Er(Hi(_),f,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=eA(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=zl(this._lContainer,a);l&&(qr(Hi(this._lContainer),a),sl(l[Lt],l))}detach(o){const a=this._adjustIndex(o,-1),l=zl(this._lContainer,a);return l&&null!=qr(Hi(this._lContainer),a)?new Ec(l):null}_adjustIndex(o,a=0){return null==o?this.length+a:o}};function eA(i){return i[8]}function Hi(i){return i[8]||(i[8]=[])}function Mr(i,o){let a;const l=o[i.index];return Ko(l)?a=l:(a=wT(l,o,null,i),o[i.index]=a,S_(o,a)),PI(a,o,i,l),new RI(a,i,o)}let PI=function nA(i,o,a,l){if(i[Na])return;let u;u=8&a.type?Hr(l):function tA(i,o){const a=i[Vn],l=a.createComment(""),u=Xo(o,i);return mc(a,dt(a,u),l,function kt(i,o){return i.nextSibling(o)}(a,u),!1),l}(o,a),i[Na]=u},lf=()=>!1;class Ad{constructor(o){this.queryList=o,this.matches=null}clone(){return new Ad(this.queryList)}setDirty(){this.queryList.setDirty()}}class Dd{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,u=[];for(let f=0;f<l;f++){const _=a.getByIndex(f);u.push(this.queries[_.indexInDeclarationView].clone())}return new Dd(u)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}finishViewCreation(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==Ni(o,a).matches&&this.queries[a].setDirty()}}class cf{constructor(o,a,l=null){this.flags=a,this.read=l,this.predicate="string"==typeof o?function df(i){return i.split(",").map(o=>o.trim())}(o):o}}class uf{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const u=null!==a?a.length:0,f=this.getByIndex(l).embeddedTView(o,u);f&&(f.indexInDeclarationView=l,null!==a?a.push(f):a=[f])}return null!==a?new uf(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class G_{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new G_(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1&~this.metadata.flags){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let u=0;u<l.length;u++){const f=l[u];this.matchTNodeWithReadOption(o,a,oA(a,f)),this.matchTNodeWithReadOption(o,a,Lm(a,o,f,!1,!1))}else l===$a?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,Lm(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const u=this.metadata.read;if(null!==u)if(u===Zc||u===af||u===$a&&4&a.type)this.addMatch(a.index,-2);else{const f=Lm(a,o,u,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function oA(i,o){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function EM(i,o,a,l){return-1===a?function sA(i,o){return 11&i.type?Dh(i,o):4&i.type?Ed(i,o):null}(o,i):-2===a?function aA(i,o,a){return a===Zc?Dh(o,i):a===$a?Ed(o,i):a===af?Mr(o,i):void 0}(i,o,l):cd(i,i[Lt],a,o)}function NI(i,o,a,l){const u=o[Ci].queries[l];if(null===u.matches){const f=i.data,_=a.matches,b=[];for(let D=0;null!==_&&D<_.length;D+=2){const V=_[D];b.push(V<0?null:EM(o,f[V],_[D+1],a.metadata.read))}u.matches=b}return u.matches}function kI(i,o,a,l){const u=i.queries.getByIndex(a),f=u.matches;if(null!==f){const _=NI(i,o,u,a);for(let b=0;b<f.length;b+=2){const D=f[b];if(D>0)l.push(_[b/2]);else{const V=f[b+1],H=o[-D];for(let W=gi;W<H.length;W++){const ce=H[W];ce[gs]===ce[wr]&&kI(ce[Lt],ce,V,l)}if(null!==H[kl]){const W=H[kl];for(let ce=0;ce<W.length;ce++){const _e=W[ce];kI(_e[Lt],_e,V,l)}}}}}return l}function lA(i,o,a){var l;const u=new $m(!(4&~a));return function lu(i,o,a,l){const u=lI(o);u.push(a),i.firstCreatePass&&TT(i).push(l,u.length-1)}(i,o,u,u.destroy),(null!==(l=o[Ci])&&void 0!==l?l:o[Ci]=new Dd).queries.push(new Ad(u))-1}function FI(i,o,a){null===i.queries&&(i.queries=new uf),i.queries.track(new G_(o,a))}function Ni(i,o){return i.queries.getByIndex(o)}function q_(i,o){const a=i[Lt],l=Ni(a,o);return l.crossesNgTemplate?kI(a,i,o,[]):NI(a,i,l,o)}function XI(i){let o=function KI(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;o;){let u;if(ua(i))u=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Pe(903,!1);u=o.\u0275dir}if(u){if(a){l.push(u);const _=i;_.inputs=wu(i.inputs),_.inputTransforms=wu(i.inputTransforms),_.declaredInputs=wu(i.declaredInputs),_.outputs=wu(i.outputs);const b=u.hostBindings;b&&mA(i,b);const D=u.viewQuery,V=u.contentQueries;if(D&&Md(i,D),V&&bu(i,V),kM(i,u),mr(i.outputs,u.outputs),ua(u)&&u.data.animation){const H=i.data;H.animation=(H.animation||[]).concat(u.data.animation)}}const f=u.features;if(f)for(let _=0;_<f.length;_++){const b=f[_];b&&b.ngInherit&&b(i),b===XI&&(a=!1)}}o=Object.getPrototypeOf(o)}!function OM(i){let o=0,a=null;for(let l=i.length-1;l>=0;l--){const u=i[l];u.hostVars=o+=u.hostVars,u.hostAttrs=xs(u.hostAttrs,a=xs(a,u.hostAttrs))}}(l)}function kM(i,o){for(const l in o.inputs){if(!o.inputs.hasOwnProperty(l)||i.inputs.hasOwnProperty(l))continue;const u=o.inputs[l];if(void 0!==u&&(i.inputs[l]=u,i.declaredInputs[l]=o.declaredInputs[l],null!==o.inputTransforms)){var a;const f=Array.isArray(u)?u[0]:u;if(!o.inputTransforms.hasOwnProperty(f))continue;null!==(a=i.inputTransforms)&&void 0!==a||(i.inputTransforms={}),i.inputTransforms[f]=o.inputTransforms[f]}}}function wu(i){return i===Ui?{}:i===lr?[]:i}function Md(i,o){const a=i.viewQuery;i.viewQuery=a?(l,u)=>{o(l,u),a(l,u)}:o}function bu(i,o){const a=i.contentQueries;i.contentQueries=a?(l,u,f)=>{o(l,u,f),a(l,u,f)}:o}function mA(i,o){const a=i.hostBindings;i.hostBindings=a?(l,u)=>{o(l,u),a(l,u)}:o}function _g(i){const o=i.inputConfig,a={};for(const l in o)if(o.hasOwnProperty(l)){const u=o[l];Array.isArray(u)&&u[3]&&(a[l]=u[3])}i.inputTransforms=a}class xd{}class J_{}function Z_(i,o){return new ev(i,null!=o?o:null,[])}class ev extends xd{constructor(o,a,l){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new dg(this);const u=Ri(o);this._bootstrapComponents=Yo(u.bootstrap),this._r3Injector=vb(o,a,[{provide:xd,useValue:this},{provide:sg,useValue:this.componentFactoryResolver},...l],pn(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Tu extends J_{constructor(o){super(),this.moduleType=o}create(o){return new ev(this.moduleType,o,[])}}class Nd extends xd{constructor(o){super(),this.componentFactoryResolver=new dg(this),this.instance=null;const a=new sa([...o.providers,{provide:xd,useValue:this},{provide:sg,useValue:this.componentFactoryResolver}],o.parent||Za(),o.debugName,new Set(["environment"]));this.injector=a,o.runEnvironmentInitializers&&a.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function tv(i,o,a=null){return new Nd({providers:i,parent:o,debugName:a,runEnvironmentInitializers:!0}).injector}let ma=(()=>{var i;class o{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new En.t(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const l=this.taskId++;return this.pendingTasks.add(l),l}remove(l){this.pendingTasks.delete(l),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}}return(i=o).\u0275fac=function(l){return new(l||i)},i.\u0275prov=qn({token:i,factory:i.\u0275fac,providedIn:"root"}),o})();function Ig(i){return!!Au(i)&&(Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i)}function Au(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Ji(i,o,a){return!Object.is(i[o],a)&&(i[o]=a,!0)}function Od(i,o,a,l,u,f,_,b){const D=yt(),V=dr(),H=i+Jn,W=V.firstCreatePass?function iv(i,o,a,l,u,f,_,b,D){const V=o.consts,H=al(o,i,4,_||null,ka(V,b));A_(o,a,H,ka(V,D)),Ch(o,H);const W=H.tView=Jp(2,H,l,u,f,o.directiveRegistry,o.pipeRegistry,null,o.schemas,V,null);return null!==o.queries&&(o.queries.template(o,H),W.queries=o.queries.embeddedTView(H)),H}(H,V,D,o,a,l,u,f,_):V.data[H];vs(W,!1);const ce=CA(V,D,W,i);sd()&&__(V,D,ce,W),No(ce,D);const _e=wT(ce,D,ce,W);return D[H]=_e,S_(D,_e),function MI(i,o,a){return lf(i,o,a)}(_e,W,D),cp(W)&&C_(V,D,W),null!=_&&w_(D,W,b),Od}let CA=function tE(i,o,a,l){return La(!0),o[Vn].createComment("")};function Iv(i,o,a,l){const u=yt();return Ji(u,ha(),o)&&(dr(),Wl(ai(),u,i,o,a,l)),Iv}function Tv(i,o){return i<<17|o<<2}function Dc(i){return i>>17&32767}function Pg(i){return 2|i}function Wd(i){return(131068&i)>>2}function Mg(i,o){return-131069&i|o<<2}function xg(i){return 1|i}function Av(i,o,a,l){const u=i[a+1],f=null===o;let _=l?Dc(u):Wd(u),b=!1;for(;0!==_&&(!1===b||f);){const V=i[_+1];vE(i[_],o)&&(b=!0,i[_+1]=l?xg(V):Pg(V)),_=l?Dc(V):Wd(V)}b&&(i[a+1]=l?Pg(u):xg(u))}function vE(i,o){return null===i||null==o||(Array.isArray(i)?i[1]:i)===o||!(!Array.isArray(i)||"string"!=typeof o)&&uo(i,o)>=0}function Ng(i,o,a){const l=yt();return Ji(l,ha(),o)&&function zs(i,o,a,l,u,f,_,b){const D=Xo(o,a);let H,V=o.inputs;!b&&null!=V&&(H=V[l])?(R_(i,a,H,l,u),Fl(o)&&function ga(i,o){const a=_s(o,i);16&a[dn]||(a[dn]|=64)}(a,o.index)):3&o.type&&(l=function tM(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),u=null!=_?_(u,o.value||"",l):u,f.setProperty(D,l,u))}(dr(),ai(),l,i,o,l[Vn],a,!1),Ng}function kg(i,o,a,l,u){const _=u?"class":"style";R_(i,a,o.inputs[_],_,l)}function Og(i,o){return function ja(i,o,a,l){const u=yt(),f=dr(),_=function Fa(i){const o=Zn.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,a}(2);f.firstUpdatePass&&function qA(i,o,a,l){const u=i.data;if(null===u[a+1]){const f=u[xo()],_=function bE(i,o){return o>=i.expandoStartIndex}(i,a);(function QA(i,o){return!!(i.flags&(o?8:16))})(f,l)&&null===o&&!_&&(o=!1),o=function ex(i,o,a,l){const u=function Ep(i){const o=Zn.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}(i);let f=l?o.residualClasses:o.residualStyles;if(null===u)0===(l?o.classBindings:o.styleBindings)&&(a=Xd(a=AE(null,i,o,a,l),o.attrs,l),f=null);else{const _=o.directiveStylingLast;if(-1===_||i[_]!==u)if(a=AE(u,i,o,a,l),null===f){let D=function tx(i,o,a){const l=a?o.classBindings:o.styleBindings;if(0!==Wd(l))return i[Dc(l)]}(i,o,l);void 0!==D&&Array.isArray(D)&&(D=AE(null,i,o,D[1],l),D=Xd(D,o.attrs,l),function nx(i,o,a,l){i[Dc(a?o.classBindings:o.styleBindings)]=l}(i,o,l,D))}else f=function TE(i,o,a){let l;const u=o.directiveEnd;for(let f=1+o.directiveStylingLast;f<u;f++)l=Xd(l,i[f].hostAttrs,a);return Xd(l,o.attrs,a)}(i,o,l)}return void 0!==f&&(l?o.residualClasses=f:o.residualStyles=f),a}(u,f,o,l),function jA(i,o,a,l,u,f){let _=f?o.classBindings:o.styleBindings,b=Dc(_),D=Wd(_);i[l]=a;let H,V=!1;if(Array.isArray(a)?(H=a[1],(null===H||uo(a,H)>0)&&(V=!0)):H=a,u)if(0!==D){const ce=Dc(i[b+1]);i[l+1]=Tv(ce,b),0!==ce&&(i[ce+1]=Mg(i[ce+1],l)),i[b+1]=function YM(i,o){return 131071&i|o<<17}(i[b+1],l)}else i[l+1]=Tv(b,0),0!==b&&(i[b+1]=Mg(i[b+1],l)),b=l;else i[l+1]=Tv(D,0),0===b?b=l:i[D+1]=Mg(i[D+1],l),D=l;V&&(i[l+1]=Pg(i[l+1])),Av(i,H,l,!0),Av(i,H,l,!1),function _E(i,o,a,l,u){const f=u?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof o&&uo(f,o)>=0&&(a[l+1]=xg(a[l+1]))}(o,H,i,l,f),_=Tv(b,D),f?o.classBindings=_:o.styleBindings=_}(u,f,o,a,_,l)}}(f,i,_,l),o!==fn&&Ji(u,_,o)&&function XA(i,o,a,l,u,f,_,b){if(!(3&o.type))return;const D=i.data,V=D[b+1],H=function JM(i){return!(1&~i)}(V)?Rv(D,o,a,u,Wd(V),_):void 0;Pv(H)||(Pv(f)||function BA(i){return!(2&~i)}(V)&&(f=Rv(D,null,a,u,b,_)),function Sn(i,o,a,l,u){if(o)u?i.addClass(a,l):i.removeClass(a,l);else{let f=-1===l.indexOf("-")?void 0:qp.DashCase;null==u?i.removeStyle(a,l,f):("string"==typeof u&&u.endsWith("!important")&&(u=u.slice(0,-10),f|=qp.Important),i.setStyle(a,l,u,f))}}(l,_,function pp(i,o){return Hr(o[i])}(xo(),a),u,f))}(f,f.data[xo()],u,u[Vn],i,u[_+1]=function RE(i,o){return null==i||""===i||("string"==typeof o?i+=o:"object"==typeof i&&(i=pn(fd(i)))),i}(o,a),l,_)}(i,o,null,!0),Og}function AE(i,o,a,l,u){let f=null;const _=a.directiveEnd;let b=a.directiveStylingLast;for(-1===b?b=a.directiveStart:b++;b<_&&(f=o[b],l=Xd(l,f.hostAttrs,u),f!==i);)b++;return null!==i&&(a.directiveStylingLast=b),l}function Xd(i,o,a){const l=a?1:2;let u=-1;if(null!==o)for(let f=0;f<o.length;f++){const _=o[f];"number"==typeof _?u=_:u===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Cr(i,_,!!a||o[++f]))}return void 0===i?null:i}function Rv(i,o,a,l,u,f){const _=null===o;let b;for(;u>0;){const D=i[u],V=Array.isArray(D),H=V?D[1]:D,W=null===H;let ce=a[u+1];ce===fn&&(ce=W?lr:void 0);let _e=W?Ra(ce,l):H===l?ce:void 0;if(V&&!Pv(_e)&&(_e=Ra(D,l)),Pv(_e)&&(b=_e,_))return b;const Oe=i[u+1];u=_?Dc(Oe):Wd(Oe)}if(null!==o){let D=f?o.residualClasses:o.residualStyles;null!=D&&(b=Ra(D,l))}return b}function Pv(i){return void 0!==i}function xv(i,o,a,l){const u=yt(),f=dr(),_=Jn+i,b=u[Vn],D=f.firstCreatePass?function jE(i,o,a,l,u,f){const _=o.consts,D=al(o,i,2,l,ka(_,u));return A_(o,a,D,ka(_,f)),null!==D.attrs&&Td(D,D.attrs,!1),null!==D.mergedAttrs&&Td(D,D.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,D),D}(_,f,u,o,a,l):f.data[_],V=kv(f,u,D,b,o,i);u[_]=V;const H=cp(D);return vs(D,!0),yT(b,V,D),!function Eg(i){return!(32&~i.flags)}(D)&&sd()&&__(f,u,V,D),0===function jy(){return Zn.lFrame.elementDepthCount}()&&No(V,u),function SR(){Zn.lFrame.elementDepthCount++}(),H&&(C_(f,u,D),Yp(f,D,u)),null!==l&&w_(u,D),xv}function Af(){let i=Xr();Wy()?yh():(i=i.parent,vs(i,!1));const o=i;(function PR(i){return Zn.skipHydrationRootTNode===i})(o)&&function zy(){Zn.skipHydrationRootTNode=null}(),function RR(){Zn.lFrame.elementDepthCount--}();const a=dr();return a.firstCreatePass&&(Ch(a,i),gh(i)&&a.queries.elementEnd(i)),null!=o.classesWithoutHost&&function VR(i){return!!(8&i.flags)}(o)&&kg(a,o,yt(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function t0(i){return!!(16&i.flags)}(o)&&kg(a,o,yt(),o.stylesWithoutHost,!1),Af}function Nv(i,o,a,l){return xv(i,o,a,l),Af(),Nv}let kv=(i,o,a,l,u,f)=>(La(!0),Kp(l,u,function xm(){return Zn.lFrame.currentNamespace}()));function Df(i,o,a){const l=yt(),u=dr(),f=i+Jn,_=u.firstCreatePass?function fx(i,o,a,l,u){const f=o.consts,_=ka(f,l),b=al(o,i,8,"ng-container",_);return null!==_&&Td(b,_,!0),A_(o,a,b,ka(f,u)),null!==o.queries&&o.queries.elementStart(o,b),b}(f,u,l,o,a):u.data[f];vs(_,!0);const b=Bg(u,l,_,i);return l[f]=b,sd()&&__(u,l,b,_),No(b,l),cp(_)&&(C_(u,l,_),Yp(u,_,l)),null!=a&&w_(l,_),Df}function Ov(){let i=Xr();const o=dr();return Wy()?yh():(i=i.parent,vs(i,!1)),o.firstCreatePass&&(Ch(o,i),gh(i)&&o.queries.elementEnd(i)),Ov}function Ug(i,o,a){return Df(i,o,a),Ov(),Ug}let Bg=(i,o,a,l)=>(La(!0),_d(o[Vn],""));function Yd(){return yt()}const ku=void 0;var tD=["en",[["a","p"],["AM","PM"],ku],[["AM","PM"],ku,ku],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ku,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ku,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ku,"{1} 'at' {0}",ku],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Sf(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let Pc={};function HE(i){const o=function GE(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=$g(o);if(a)return a;const l=o.split("-")[0];if(a=$g(l),a)return a;if("en"===l)return tD;throw new Pe(701,!1)}function nD(i){return HE(i)[Ou.PluralCase]}function $g(i){return i in Pc||(Pc[i]=Rn.ng&&Rn.ng.common&&Rn.ng.common.locales&&Rn.ng.common.locales[i]),Pc[i]}var Ou=function(i){return i[i.LocaleId=0]="LocaleId",i[i.DayPeriodsFormat=1]="DayPeriodsFormat",i[i.DayPeriodsStandalone=2]="DayPeriodsStandalone",i[i.DaysFormat=3]="DaysFormat",i[i.DaysStandalone=4]="DaysStandalone",i[i.MonthsFormat=5]="MonthsFormat",i[i.MonthsStandalone=6]="MonthsStandalone",i[i.Eras=7]="Eras",i[i.FirstDayOfWeek=8]="FirstDayOfWeek",i[i.WeekendRange=9]="WeekendRange",i[i.DateFormat=10]="DateFormat",i[i.TimeFormat=11]="TimeFormat",i[i.DateTimeFormat=12]="DateTimeFormat",i[i.NumberSymbols=13]="NumberSymbols",i[i.NumberFormats=14]="NumberFormats",i[i.CurrencyCode=15]="CurrencyCode",i[i.CurrencySymbol=16]="CurrencySymbol",i[i.CurrencyName=17]="CurrencyName",i[i.Currencies=18]="Currencies",i[i.Directionality=19]="Directionality",i[i.PluralCase=20]="PluralCase",i[i.ExtraData=21]="ExtraData",i}(Ou||{});const Fu="en-US";let qE=Fu;function oC(i,o,a,l){const u=yt(),f=dr(),_=Xr();return function Kv(i,o,a,l,u,f,_){const b=cp(l),V=i.firstCreatePass&&TT(i),H=o[oi],W=lI(o);let ce=!0;if(3&l.type||_){const ot=Xo(l,o),Nt=_?_(ot):ot,Ut=W.length,bt=_?Gn=>_(Hr(Gn[l.index])):l.index;let Un=null;if(!_&&b&&(Un=function qv(i,o,a,l){const u=i.cleanup;if(null!=u)for(let f=0;f<u.length-1;f+=2){const _=u[f];if(_===a&&u[f+1]===l){const b=o[Us],D=u[f+2];return b.length>D?b[D]:null}"string"==typeof _&&(f+=2)}return null}(i,o,u,l.index)),null!==Un)(Un.__ngLastListenerFn__||Un).__ngNextListenerFn__=f,Un.__ngLastListenerFn__=f,ce=!1;else{f=RD(l,o,H,f,!1);const Gn=a.listen(Nt,u,f);W.push(f,Gn),V&&V.push(u,bt,Ut,Ut+1)}}else f=RD(l,o,H,f,!1);const _e=l.outputs;let Oe;if(ce&&null!==_e&&(Oe=_e[u])){const ot=Oe.length;if(ot)for(let Nt=0;Nt<ot;Nt+=2){const Ar=o[Oe[Nt]][Oe[Nt+1]].subscribe(f),Zi=W.length;W.push(f,Ar),V&&V.push(u,l.index,Zi,-(Zi+1))}}}(f,u,u[Vn],_,i,o,l),oC}function Of(i,o,a,l){const u=re(null);try{return ss(6,o,a),!1!==a(l)}catch(f){return tg(i,f),!1}finally{ss(7,o,a),re(u)}}function RD(i,o,a,l,u){return function f(_){if(_===Function)return l;Gs(i.componentOffset>-1?_s(i.index,o):o);let D=Of(o,a,l,_),V=f.__ngNextListenerFn__;for(;V;)D=Of(o,a,V,_)&&D,V=V.__ngNextListenerFn__;return u&&!1===D&&_.preventDefault(),D}}function aC(i=1){return function lb(i){return(Zn.lFrame.contextLView=function vh(i,o){for(;i>0;)o=o[la],i--;return o}(i,Zn.lFrame.contextLView))[oi]}(i)}function lC(i,o){let a=null;const l=function Ot(i){const o=i.attrs;if(null!=o){const a=o.indexOf(5);if(!(1&a))return o[a+1]}return null}(i);for(let u=0;u<o.length;u++){const f=o[u];if("*"!==f){if(null===l?le(i,f,!0):di(l,f))return u}else a=u}return a}function Ff(i){const o=yt()[Or][Kr];if(!o.projection){const l=o.projection=function Qi(i,o){const a=[];for(let l=0;l<i;l++)a.push(o);return a}(i?i.length:1,null),u=l.slice();let f=o.child;for(;null!==f;){const _=i?lC(f,i):0;null!==_&&(u[_]?u[_].projectionNext=f:l[_]=f,u[_]=f),f=f.next}}}function xc(i,o=0,a){const l=yt(),u=dr(),f=al(u,Jn+i,16,null,a||null);null===f.projection&&(f.projection=o),yh(),(!l[ji]||Oa())&&32&~f.flags&&function Bh(i,o,a){eI(o[Vn],0,o,a,Mi(i,a,o),io(a.parent||o[Kr],a,o))}(u,l,f)}function Kg(i,o,a,l){!function W_(i,o,a,l){const u=dr();if(u.firstCreatePass){const f=Xr();FI(u,new cf(o,a,l),f.index),function CM(i,o){const a=i.contentQueries||(i.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,o)}(u,i),!(2&~a)&&(u.staticContentQueries=!0)}return lA(u,yt(),a)}(i,o,a,l)}function ND(i,o,a){!function cA(i,o,a){const l=dr();return l.firstCreatePass&&(FI(l,new cf(i,o,a),-1),!(2&~o)&&(l.staticViewQueries=!0)),lA(l,yt(),o)}(i,o,a)}function kD(i){const o=yt(),a=dr(),l=Ih();Eh(l+1);const u=Ni(a,l);if(i.dirty&&function AR(i){return!(4&~i[dn])}(o)===!(2&~u.metadata.flags)){if(null===u.matches)i.reset([]);else{const f=q_(o,l);i.reset(f,c0),i.notifyOnChanges()}return!0}return!1}function Xg(){return function OI(i,o){return i[Ci].queries[o].queryList}(yt(),Ih())}function jD(i,o=""){const a=yt(),l=dr(),u=i+Jn,f=l.firstCreatePass?al(l,u,1,o,null):l.data[u],_=zD(l,a,f,o,i);a[u]=_,sd()&&__(l,a,_,f),vs(f,!1)}let zD=(i,o,a,l,u)=>(La(!0),function g_(i,o){return i.createText(o)}(o[Vn],l));function pC(i,o,a,l,u){if(i=Ae(i),Array.isArray(i))for(let f=0;f<i.length;f++)pC(i[f],o,a,l,u);else{const f=dr(),_=yt(),b=Xr();let D=ps(i)?i:Ae(i.provide);const V=dh(i),H=1048575&b.providerIndexes,W=b.directiveStart,ce=b.providerIndexes>>20;if(ps(i)||!i.multi){const _e=new ad(V,u,su),Oe=YD(D,o,u?H:H+ce,W);-1===Oe?(xp(Th(b,_),f,D),QD(f,i,o.length),o.push(D),b.directiveStart++,b.directiveEnd++,u&&(b.providerIndexes+=1048576),a.push(_e),_.push(_e)):(a[Oe]=_e,_[Oe]=_e)}else{const _e=YD(D,o,H+ce,W),Oe=YD(D,o,H,H+ce),Nt=Oe>=0&&a[Oe];if(u&&!Nt||!u&&!(_e>=0&&a[_e])){xp(Th(b,_),f,D);const Ut=function Kx(i,o,a,l,u){const f=new ad(i,a,su);return f.multi=[],f.index=o,f.componentProviders=0,Wx(f,u,l&&!a),f}(u?qx:kF,a.length,u,l,V);!u&&Nt&&(a[Oe].providerFactory=Ut),QD(f,i,o.length,0),o.push(D),b.directiveStart++,b.directiveEnd++,u&&(b.providerIndexes+=1048576),a.push(Ut),_.push(Ut)}else QD(f,i,_e>-1?_e:Oe,Wx(a[u?Oe:_e],V,!u&&l));!u&&l&&Nt&&a[Oe].componentProviders++}}}function QD(i,o,a,l){const u=ps(o),f=function Gc(i){return!!i.useClass}(o);if(u||f){const D=(f?Ae(o.useClass):o).prototype.ngOnDestroy;if(D){const V=i.destroyHooks||(i.destroyHooks=[]);if(!u&&o.multi){const H=V.indexOf(a);-1===H?V.push(a,[l,D]):V[H+1].push(l,D)}else V.push(a,D)}}}function Wx(i,o,a){return a&&i.componentProviders++,i.multi.push(o)-1}function YD(i,o,a,l){for(let u=a;u<l;u++)if(o[u]===i)return u;return-1}function kF(i,o,a,l){return gC(this.multi,[])}function qx(i,o,a,l){const u=this.multi;let f;if(this.providerFactory){const _=this.providerFactory.componentProviders,b=cd(a,a[Lt],this.providerFactory.index,l);f=b.slice(0,_),gC(u,f);for(let D=_;D<b.length;D++)f.push(b[D])}else f=[],gC(u,f);return f}function gC(i,o){for(let a=0;a<i.length;a++)o.push((0,i[a])());return o}function Xx(i,o=[]){return a=>{a.providersResolver=(l,u)=>function Gx(i,o,a){const l=dr();if(l.firstCreatePass){const u=ua(i);pC(a,l.data,l.blueprint,u,!0),pC(o,l.data,l.blueprint,u,!1)}}(l,u?u(i):i,o)}}let Qx=(()=>{var i;class o{constructor(l){this._injector=l,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(l){if(!l.standalone)return null;if(!this.cachedInjectors.has(l)){const u=Bt(0,l.type),f=u.length>0?tv([u],this._injector,`Standalone[${l.type.name}]`):null;this.cachedInjectors.set(l,f)}return this.cachedInjectors.get(l)}ngOnDestroy(){try{for(const l of this.cachedInjectors.values())null!==l&&l.destroy()}finally{this.cachedInjectors.clear()}}}return(i=o).\u0275prov=qn({token:i,providedIn:"environment",factory:()=>new i(U(qo))}),o})();function mC(i){cl("NgStandalone"),i.getStandaloneInjector=o=>o.get(Qx).getOrCreateStandaloneInjector(i)}class Jg{constructor(o){this.full=o;const a=o.split(".");this.major=a[0],this.minor=a[1],this.patch=a.slice(2).join(".")}}let ry=(()=>{var i;class o{log(l){console.log(l)}warn(l){console.warn(l)}}return(i=o).\u0275fac=function(l){return new(l||i)},i.\u0275prov=qn({token:i,factory:i.\u0275fac,providedIn:"platform"}),o})();const em=new cn(""),bS=new cn("");let oy,tm=(()=>{var i;class o{constructor(l,u,f){this._ngZone=l,this.registry=u,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,oy||(function RN(i){oy=i}(f),f.addToWindow(u)),this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Fr.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb()}});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(l)||(clearTimeout(u.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,u,f){let _=-1;u&&u>0&&(_=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==_),l()},u)),this._callbacks.push({doneCb:l,timeoutId:_,updateCb:f})}whenStable(l,u,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,u,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(l){this.registry.registerApplication(l,this)}unregisterApplication(l){this.registry.unregisterApplication(l)}findProviders(l,u,f){return[]}}return(i=o).\u0275fac=function(l){return new(l||i)(U(Fr),U(TS),U(bS))},i.\u0275prov=qn({token:i,factory:i.\u0275fac}),o})(),TS=(()=>{var i;class o{constructor(){this._applications=new Map}registerApplication(l,u){this._applications.set(l,u)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,u=!0){var f,_;return null!==(f=null===(_=oy)||void 0===_?void 0:_.findTestabilityInTree(this,l,u))&&void 0!==f?f:null}}return(i=o).\u0275fac=function(l){return new(l||i)},i.\u0275prov=qn({token:i,factory:i.\u0275fac,providedIn:"platform"}),o})();function LC(i){return!!i&&"function"==typeof i.then}function sy(i){return!!i&&"function"==typeof i.subscribe}const VC=new cn("");let ay=(()=>{var i;class o{constructor(){var l;this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,f)=>{this.resolve=u,this.reject=f}),this.appInits=null!==(l=ae(VC,{optional:!0}))&&void 0!==l?l:[]}runInitializers(){if(this.initialized)return;const l=[];for(const f of this.appInits){const _=f();if(LC(_))l.push(_);else if(sy(_)){const b=new Promise((D,V)=>{_.subscribe({complete:D,error:V})});l.push(b)}}const u=()=>{this.done=!0,this.resolve()};Promise.all(l).then(()=>{u()}).catch(f=>{this.reject(f)}),0===l.length&&u(),this.initialized=!0}}return(i=o).\u0275fac=function(l){return new(l||i)},i.\u0275prov=qn({token:i,factory:i.\u0275fac,providedIn:"root"}),o})();const UC=new cn("");function DS(i,o){return Array.isArray(o)?o.reduce(DS,i):{...i,...o}}let Ca=(()=>{var i;class o{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=ae(yb),this.afterRenderEffectManager=ae(Zh),this.externalTestViews=new Set,this.beforeRender=new Mn.B,this.afterTick=new Mn.B,this.componentTypes=[],this.components=[],this.isStable=ae(ma).hasPendingTasks.pipe((0,Dt.T)(l=>!l)),this._injector=ae(qo)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(l,u){const f=l instanceof EI;if(!this._injector.get(ay).done)throw!f&&Yi(l),new Pe(405,!1);let b;b=f?l:this._injector.get(sg).resolveComponentFactory(l),this.componentTypes.push(b.componentType);const D=function tc(i){return i.isBoundToModule}(b)?void 0:this._injector.get(xd),H=b.create(fa.NULL,[],u||b.selector,D),W=H.location.nativeElement,ce=H.injector.get(em,null);return null==ce||ce.registerApplication(W),H.onDestroy(()=>{this.detachView(H.hostView),zu(this.components,H),null==ce||ce.unregisterApplication(W)}),this._loadComponent(H),H}tick(){this._tick(!0)}_tick(l){if(this._runningTick)throw new Pe(101,!1);const u=re(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(l)}catch(f){this.internalErrorHandler(f)}finally{this.afterTick.next(),this._runningTick=!1,re(u)}}detectChangesInAttachedViews(l){let u=0;const f=this.afterRenderEffectManager;for(;;){if(u===DT)throw new Pe(103,!1);if(l){const _=0===u;this.beforeRender.next(_);for(let{_lView:b,notifyErrorHandler:D}of this._views)SS(b,_,D)}if(u++,f.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:_})=>$C(_))&&(f.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:_})=>$C(_))))break}}attachView(l){const u=l;this._views.push(u),u.attachToAppRef(this)}detachView(l){const u=l;zu(this._views,u),u.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l);const u=this._injector.get(UC,[]);[...this._bootstrapListeners,...u].forEach(f=>f(l))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(l=>l()),this._views.slice().forEach(l=>l.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(l){return this._destroyListeners.push(l),()=>zu(this._destroyListeners,l)}destroy(){if(this._destroyed)throw new Pe(406,!1);const l=this._injector;l.destroy&&!l.destroyed&&l.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return(i=o).\u0275fac=function(l){return new(l||i)},i.\u0275prov=qn({token:i,factory:i.\u0275fac,providedIn:"root"}),o})();function zu(i,o){const a=i.indexOf(o);a>-1&&i.splice(a,1)}function SS(i,o,a){!o&&!$C(i)||function MN(i,o,a){let l;a?(l=0,i[dn]|=1024):l=64&i[dn]?0:1,Ba(i,o,l)}(i,a,o)}function $C(i){return il(i)}class xN{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let NN=(()=>{var i;class o{compileModuleSync(l){return new Tu(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const u=this.compileModuleSync(l),_=Yo(Ri(l).declarations).reduce((b,D)=>{const V=sr(D);return V&&b.push(new hg(V)),b},[]);return new xN(u,_)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return(i=o).\u0275fac=function(l){return new(l||i)},i.\u0275prov=qn({token:i,factory:i.\u0275fac,providedIn:"root"}),o})(),ON=(()=>{var i;class o{constructor(){this.zone=ae(Fr),this.applicationRef=ae(Ca)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){var l;null===(l=this._onMicrotaskEmptySubscription)||void 0===l||l.unsubscribe()}}return(i=o).\u0275fac=function(l){return new(l||i)},i.\u0275prov=qn({token:i,factory:i.\u0275fac,providedIn:"root"}),o})();function FN(){const i=ae(Fr),o=ae(fc);return a=>i.runOutsideAngular(()=>o.handleError(a))}let zC=(()=>{var i;class o{constructor(){this.subscription=new er.yU,this.initialized=!1,this.zone=ae(Fr),this.pendingTasks=ae(ma)}initialize(){if(this.initialized)return;this.initialized=!0;let l=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(l=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Fr.assertNotInAngularZone(),queueMicrotask(()=>{null!==l&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(l),l=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{var u;Fr.assertInAngularZone(),null!==(u=l)&&void 0!==u||(l=this.pendingTasks.add())}))}ngOnDestroy(){this.subscription.unsubscribe()}}return(i=o).\u0275fac=function(l){return new(l||i)},i.\u0275prov=qn({token:i,factory:i.\u0275fac,providedIn:"root"}),o})();const Oc=new cn("",{providedIn:"root",factory:()=>ae(Oc,Fn.Optional|Fn.SkipSelf)||function VN(){return typeof $localize<"u"&&$localize.locale||Fu}()}),PS=new cn("",{providedIn:"root",factory:()=>"USD"}),HC=new cn("");let MS=(()=>{var i;class o{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,u){const f=function yM(i="zone.js",o){return"noop"===i?new GT:"zone.js"===i?new Fr(o):i}(null==u?void 0:u.ngZone,function ls(i){var o,a;return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:null!==(o=null==i?void 0:i.eventCoalescing)&&void 0!==o&&o,shouldCoalesceRunChangeDetection:null!==(a=null==i?void 0:i.runCoalescing)&&void 0!==a&&a}}({eventCoalescing:null==u?void 0:u.ngZoneEventCoalescing,runCoalescing:null==u?void 0:u.ngZoneRunCoalescing}));return f.run(()=>{const _=function vg(i,o,a){return new ev(i,o,a)}(l.moduleType,this.injector,function jC(i){return[{provide:Fr,useFactory:i},{provide:Ps,multi:!0,useFactory:()=>{const o=ae(ON,{optional:!0});return()=>o.initialize()}},{provide:Ps,multi:!0,useFactory:()=>{const o=ae(zC);return()=>{o.initialize()}}},{provide:yb,useFactory:FN}]}(()=>f)),b=_.injector.get(fc,null);return f.runOutsideAngular(()=>{const D=f.onError.subscribe({next:V=>{b.handleError(V)}});_.onDestroy(()=>{zu(this._modules,_),D.unsubscribe()})}),function AS(i,o,a){try{const l=a();return LC(l)?l.catch(u=>{throw o.runOutsideAngular(()=>i.handleError(u)),u}):l}catch(l){throw o.runOutsideAngular(()=>i.handleError(l)),l}}(b,f,()=>{const D=_.injector.get(ay);return D.runInitializers(),D.donePromise.then(()=>(function Vv(i){"string"==typeof i&&(qE=i.toLowerCase().replace(/_/g,"-"))}(_.injector.get(Oc,Fu)||Fu),this._moduleDoBootstrap(_),_))})})}bootstrapModule(l,u=[]){const f=DS({},u);return function ly(i,o,a){const l=new Tu(a);return Promise.resolve(l)}(0,0,l).then(_=>this.bootstrapModuleFactory(_,f))}_moduleDoBootstrap(l){const u=l.injector.get(Ca);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(f=>u.bootstrap(f));else{if(!l.instance.ngDoBootstrap)throw new Pe(-403,!1);l.instance.ngDoBootstrap(u)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Pe(404,!1);this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const l=this._injector.get(HC,null);l&&(l.forEach(u=>u()),l.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return(i=o).\u0275fac=function(l){return new(l||i)(U(fa))},i.\u0275prov=qn({token:i,factory:i.\u0275fac,providedIn:"platform"}),o})(),Hu=null;const xS=new cn("");function Gu(i,o,a=[]){const l=`Platform: ${o}`,u=new cn(l);return(f=[])=>{let _=uy();if(!_||_.injector.get(xS,!1)){const b=[...a,...f,{provide:u,useValue:!0}];i?i(b):function NS(i){if(Hu&&!Hu.get(xS,!1))throw new Pe(400,!1);(function pl(){!function fe(i){Kt=i}(()=>{throw new Pe(600,!1)})})(),Hu=i;const o=i.get(MS);(function OS(i){const o=i.get(kb,null);null==o||o.forEach(a=>a())})(i)}(function kS(i=[],o){return fa.create({name:o,providers:[{provide:Ml,useValue:"platform"},{provide:HC,useValue:new Set([()=>Hu=null])},...i]})}(b,l))}return function UN(i){const o=uy();if(!o)throw new Pe(401,!1);return o}()}}function uy(){var i,o;return null!==(i=null===(o=Hu)||void 0===o?void 0:o.get(MS))&&void 0!==i?i:null}function GC(){}let LS=(()=>{class o{}return o.__NG_ELEMENT_ID__=zN,o})();function zN(i){return function VS(i,o,a){if(Fl(i)&&!a){const l=_s(i.index,o);return new Ec(l,l)}return 47&i.type?new Ec(o[Or],o):null}(Xr(),yt(),!(16&~i))}class zS{constructor(){}supports(o){return Ig(o)}create(o){return new HS(o)}}const sL=(i,o)=>o;class HS{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||sL}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,u=0,f=null;for(;a||l;){const _=!l||a&&a.currentIndex<WS(l,u,f)?a:l,b=WS(_,u,f),D=_.currentIndex;if(_===l)u--,l=l._nextRemoved;else if(a=a._next,null==_.previousIndex)u++;else{f||(f=[]);const V=b-u,H=D-u;if(V!=H){for(let ce=0;ce<V;ce++){const _e=ce<f.length?f[ce]:f[ce]=0,Oe=_e+ce;H<=Oe&&Oe<V&&(f[ce]=_e+1)}f[_.previousIndex]=H-V}}b!==D&&o(_,b,D)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!Ig(o))throw new Pe(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u,f,_,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let b=0;b<this.length;b++)f=o[b],_=this._trackByFn(b,f),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,f,_,b)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,_,b),l=!0),a=a._next}else u=0,function UM(i,o){if(Array.isArray(i))for(let a=0;a<i.length;a++)o(i[a]);else{const a=i[Symbol.iterator]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,b=>{_=this._trackByFn(u,b),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,b,_,u)),Object.is(a.item,b)||this._addIdentityChange(a,b)):(a=this._mismatch(a,b,_,u),l=!0),a=a._next,u++}),this.length=u;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,u){let f;return null===o?f=this._itTail:(f=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,f,u)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,u))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,f,u)):o=this._addAfter(new aL(a,l),f,u),o}_verifyReinsertion(o,a,l,u){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==f?o=this._reinsertAfter(f,o._prev,u):o.currentIndex!=u&&(o.currentIndex=u,this._addToMoves(o,u)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const u=o._prevRemoved,f=o._nextRemoved;return null===u?this._removalsHead=f:u._nextRemoved=f,null===f?this._removalsTail=u:f._prevRemoved=u,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const u=null===a?this._itHead:a._next;return o._next=u,o._prev=a,null===u?this._itTail=o:u._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new GS),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new GS),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class aL{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class lL{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class GS{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new lL,this.map.set(a,l)),l.add(o)}get(o,a){const u=this.map.get(o);return u?u.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function WS(i,o,a){const l=i.previousIndex;if(null===l)return l;let u=0;return a&&l<a.length&&(u=a[l]),l+o+u}class nm{constructor(){}supports(o){return o instanceof Map||Au(o)}create(){return new qS}}class qS{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||Au(o)))throw new Pe(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,u)=>{if(a&&a.key===u)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(u,l);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const u=this._records.get(o);this._maybeAddToChanges(u,a);const f=u._prev,_=u._next;return f&&(f._next=_),_&&(_._prev=f),u._next=null,u._prev=null,u}const l=new KS(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class KS{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function nc(){return new hy([new zS])}let hy=(()=>{var i;class o{constructor(l){this.factories=l}static create(l,u){if(null!=u){const f=u.factories.slice();l=l.concat(f)}return new o(l)}static extend(l){return{provide:o,useFactory:u=>o.create(l,u||nc()),deps:[[o,new qt,new zt]]}}find(l){const u=this.factories.find(f=>f.supports(l));if(null!=u)return u;throw new Pe(901,!1)}}return(i=o).\u0275prov=qn({token:i,providedIn:"root",factory:nc}),o})();function XS(){return new QC([new nm])}let QC=(()=>{var i;class o{constructor(l){this.factories=l}static create(l,u){if(u){const f=u.factories.slice();l=l.concat(f)}return new o(l)}static extend(l){return{provide:o,useFactory:u=>o.create(l,u||XS()),deps:[[o,new qt,new zt]]}}find(l){const u=this.factories.find(f=>f.supports(l));if(u)return u;throw new Pe(901,!1)}}return(i=o).\u0275prov=qn({token:i,providedIn:"root",factory:XS}),o})();const QS=Gu(null,"core",[]);let YC=(()=>{var i;class o{constructor(l){}}return(i=o).\u0275fac=function(l){return new(l||i)(U(Ca))},i.\u0275mod=oa({type:i}),i.\u0275inj=Do({}),o})();function Ey(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}function E1(i){const o=re(null);try{return i()}finally{re(o)}}function A1(i,o){const a=sr(i),l=o.elementInjector||Za();return new hg(a).create(l,o.projectableNodes,o.hostElement,o.environmentInjector)}function D1(i){const o=sr(i);if(!o)return null;const a=new hg(o);return{get selector(){return a.selector},get type(){return a.componentType},get inputs(){return a.inputs},get outputs(){return a.outputs},get ngContentSelectors(){return a.ngContentSelectors},get isStandalone(){return o.standalone},get isSignal(){return o.signals}}}},4341:(hn,Ct,ee)=>{"use strict";ee.d(Ct,{YN:()=>Ns,zX:()=>qr,VZ:()=>rs,cz:()=>$e,kq:()=>Ke,vO:()=>et});var M=ee(4438),h=(ee(177),ee(6648)),x=ee(1985),v=ee(3073),He=ee(8750),re=ee(3794),Se=ee(4360),Ge=ee(6450),qe=ee(8496),Ne=ee(6354);const Ke=new M.nKC("");function pe(j){return null==j||("string"==typeof j||Array.isArray(j))&&0===j.length}const $e=new M.nKC("");function Y(j){return null}function J(j){return null!=j}function ie(j){return(0,M.jNT)(j)?(0,h.H)(j):j}function de(j){let F={};return j.forEach(ne=>{F=null!=ne?{...F,...ne}:F}),0===Object.keys(F).length?null:F}function Ue(j,F){return F.map(ne=>ne(j))}function pt(j){return j.map(F=>function Le(j){return!j.validate}(F)?F:ne=>F.validate(ne))}function Dn(j){return null!=j?function Mt(j){if(!j)return null;const F=j.filter(J);return 0==F.length?null:function(ne){return de(Ue(ne,F))}}(pt(j)):null}function gn(j){return null!=j?function $t(j){if(!j)return null;const F=j.filter(J);return 0==F.length?null:function(ne){return function me(...j){const F=(0,re.ms)(j),{args:ne,keys:$}=(0,v.D)(j),le=new x.c(Ot=>{const{length:bn}=ne;if(!bn)return void Ot.complete();const xn=new Array(bn);let di=bn,hs=bn;for(let os=0;os<bn;os++){let fs=!1;(0,He.Tg)(ne[os]).subscribe((0,Se._)(Ot,Ma=>{fs||(fs=!0,hs--),xn[os]=Ma},()=>di--,void 0,()=>{(!di||!fs)&&(hs||Ot.next($?(0,qe.e)($,xn):xn),Ot.complete())}))}});return F?le.pipe((0,Ge.I)(F)):le}(Ue(ne,F).map(ie)).pipe((0,Ne.T)(de))}}(pt(j)):null}class Pe{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(F){this._rawValidators=F||[],this._composedValidatorFn=Dn(this._rawValidators)}_setAsyncValidators(F){this._rawAsyncValidators=F||[],this._composedAsyncValidatorFn=gn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(F){this._onDestroyCallbacks.push(F)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(F=>F()),this._onDestroyCallbacks=[]}reset(F=void 0){this.control&&this.control.reset(F)}hasError(F,ne){return!!this.control&&this.control.hasError(F,ne)}getError(F,ne){return this.control?this.control.getError(F,ne):null}}class et extends Pe{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}const Fi=new M.nKC("CallSetDisabledState",{providedIn:"root",factory:()=>Li}),Li="always";function Xn(j){return"number"==typeof j?j:parseFloat(j)}Promise.resolve(),Promise.resolve();let Ir=(()=>{var j;class F{constructor(){this._validator=Y}ngOnChanges($){if(this.inputName in $){const le=this.normalizeInput($[this.inputName].currentValue);this._enabled=this.enabled(le),this._validator=this._enabled?this.createValidator(le):Y,this._onChange&&this._onChange()}}validate($){return this._validator($)}registerOnValidatorChange($){this._onChange=$}enabled($){return null!=$}}return(j=F).\u0275fac=function($){return new($||j)},j.\u0275dir=M.FsC({type:j,features:[M.OA$]}),F})();const Er={provide:$e,useExisting:(0,M.Rfq)(()=>qr),multi:!0};let qr=(()=>{var j;class F extends Ir{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=$=>Xn($),this.createValidator=$=>function Pt(j){return F=>{if(pe(F.value)||pe(j))return null;const ne=parseFloat(F.value);return!isNaN(ne)&&ne>j?{max:{max:j,actual:F.value}}:null}}($)}}return(j=F).\u0275fac=(()=>{let ne;return function(le){return(ne||(ne=M.xGo(j)))(le||j)}})(),j.\u0275dir=M.FsC({type:j,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function($,le){2&$&&M.BMQ("max",le._enabled?le.max:null)},inputs:{max:"max"},features:[M.Jv_([Er]),M.Vt3]}),F})();const Qi={provide:$e,useExisting:(0,M.Rfq)(()=>rs),multi:!0};let rs=(()=>{var j;class F extends Ir{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=$=>Xn($),this.createValidator=$=>function Ye(j){return F=>{if(pe(F.value)||pe(j))return null;const ne=parseFloat(F.value);return!isNaN(ne)&&ne<j?{min:{min:j,actual:F.value}}:null}}($)}}return(j=F).\u0275fac=(()=>{let ne;return function(le){return(ne||(ne=M.xGo(j)))(le||j)}})(),j.\u0275dir=M.FsC({type:j,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function($,le){2&$&&M.BMQ("min",le._enabled?le.min:null)},inputs:{min:"min"},features:[M.Jv_([Qi]),M.Vt3]}),F})(),is=(()=>{var j;class F{}return(j=F).\u0275fac=function($){return new($||j)},j.\u0275mod=M.$C({type:j}),j.\u0275inj=M.G2t({}),F})(),Ns=(()=>{var j;class F{static withConfig($){var le;return{ngModule:F,providers:[{provide:Fi,useValue:null!==(le=$.callSetDisabledState)&&void 0!==le?le:Li}]}}}return(j=F).\u0275fac=function($){return new($||j)},j.\u0275mod=M.$C({type:j}),j.\u0275inj=M.G2t({imports:[is]}),F})()},345:(hn,Ct,ee)=>{"use strict";ee.d(Ct,{Bb:()=>En,hE:()=>Ht,sG:()=>gn});var M=ee(4438),Q=ee(177);class h extends Q.VF{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class x extends h{static makeCurrent(){(0,Q.ZD)(new x)}onAndCancel(ye,Je,we){return ye.addEventListener(Je,we),()=>{ye.removeEventListener(Je,we)}}dispatchEvent(ye,Je){ye.dispatchEvent(Je)}remove(ye){ye.parentNode&&ye.parentNode.removeChild(ye)}createElement(ye,Je){return(Je=Je||this.getDefaultDocument()).createElement(ye)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ye){return ye.nodeType===Node.ELEMENT_NODE}isShadowRoot(ye){return ye instanceof DocumentFragment}getGlobalEventTarget(ye,Je){return"window"===Je?window:"document"===Je?ye:"body"===Je?ye.body:null}getBaseHref(ye){const Je=function He(){return v=v||document.querySelector("base"),v?v.getAttribute("href"):null}();return null==Je?null:function re(Ae){return new URL(Ae,document.baseURI).pathname}(Je)}resetBaseElement(){v=null}getUserAgent(){return window.navigator.userAgent}getCookie(ye){return(0,Q._b)(document.cookie,ye)}}let v=null,Ge=(()=>{var Ae;class ye{build(){return new XMLHttpRequest}}return(Ae=ye).\u0275fac=function(we){return new(we||Ae)},Ae.\u0275prov=M.jDH({token:Ae,factory:Ae.\u0275fac}),ye})();const qe=new M.nKC("");let me=(()=>{var Ae;class ye{constructor(we,rt){this._zone=rt,this._eventNameToPlugin=new Map,we.forEach(St=>{St.manager=this}),this._plugins=we.slice().reverse()}addEventListener(we,rt,St){return this._findPluginFor(rt).addEventListener(we,rt,St)}getZone(){return this._zone}_findPluginFor(we){let rt=this._eventNameToPlugin.get(we);if(rt)return rt;if(rt=this._plugins.find(Wt=>Wt.supports(we)),!rt)throw new M.wOt(5101,!1);return this._eventNameToPlugin.set(we,rt),rt}}return(Ae=ye).\u0275fac=function(we){return new(we||Ae)(M.KVO(qe),M.KVO(M.SKi))},Ae.\u0275prov=M.jDH({token:Ae,factory:Ae.\u0275fac}),ye})();class Ne{constructor(ye){this._doc=ye}}const Re="ng-app-id";let Te=(()=>{var Ae;class ye{constructor(we,rt,St,Wt={}){this.doc=we,this.appId=rt,this.nonce=St,this.platformId=Wt,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,Q.Vy)(Wt),this.resetHostNodes()}addStyles(we){for(const rt of we)1===this.changeUsageCount(rt,1)&&this.onStyleAdded(rt)}removeStyles(we){for(const rt of we)this.changeUsageCount(rt,-1)<=0&&this.onStyleRemoved(rt)}ngOnDestroy(){const we=this.styleNodesInDOM;we&&(we.forEach(rt=>rt.remove()),we.clear());for(const rt of this.getAllStyles())this.onStyleRemoved(rt);this.resetHostNodes()}addHost(we){this.hostNodes.add(we);for(const rt of this.getAllStyles())this.addStyleToHost(we,rt)}removeHost(we){this.hostNodes.delete(we)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(we){for(const rt of this.hostNodes)this.addStyleToHost(rt,we)}onStyleRemoved(we){var rt;const St=this.styleRef;null===(rt=St.get(we))||void 0===rt||null===(rt=rt.elements)||void 0===rt||rt.forEach(Wt=>Wt.remove()),St.delete(we)}collectServerRenderedStyles(){var we;const rt=null===(we=this.doc.head)||void 0===we?void 0:we.querySelectorAll(`style[${Re}="${this.appId}"]`);if(null!=rt&&rt.length){const St=new Map;return rt.forEach(Wt=>{null!=Wt.textContent&&St.set(Wt.textContent,Wt)}),St}return null}changeUsageCount(we,rt){const St=this.styleRef;if(St.has(we)){const Wt=St.get(we);return Wt.usage+=rt,Wt.usage}return St.set(we,{usage:rt,elements:[]}),rt}getStyleElement(we,rt){const St=this.styleNodesInDOM,Wt=null==St?void 0:St.get(rt);if((null==Wt?void 0:Wt.parentNode)===we)return St.delete(rt),Wt.removeAttribute(Re),Wt;{const kn=this.doc.createElement("style");return this.nonce&&kn.setAttribute("nonce",this.nonce),kn.textContent=rt,this.platformIsServer&&kn.setAttribute(Re,this.appId),we.appendChild(kn),kn}}addStyleToHost(we,rt){var St;const Wt=this.getStyleElement(we,rt),kn=this.styleRef,xt=null===(St=kn.get(rt))||void 0===St?void 0:St.elements;xt?xt.push(Wt):kn.set(rt,{elements:[Wt],usage:1})}resetHostNodes(){const we=this.hostNodes;we.clear(),we.add(this.doc.head)}}return(Ae=ye).\u0275fac=function(we){return new(we||Ae)(M.KVO(Q.qQ),M.KVO(M.sZ2),M.KVO(M.BIS,8),M.KVO(M.Agw))},Ae.\u0275prov=M.jDH({token:Ae,factory:Ae.\u0275fac}),ye})();const Ke={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},it=/%COMP%/g,at=new M.nKC("",{providedIn:"root",factory:()=>!0});function $e(Ae,ye){return ye.map(Je=>Je.replace(it,Ae))}let tt=(()=>{var Ae;class ye{constructor(we,rt,St,Wt,kn,xt,X,ar=null){this.eventManager=we,this.sharedStylesHost=rt,this.appId=St,this.removeStylesOnCompDestroy=Wt,this.doc=kn,this.platformId=xt,this.ngZone=X,this.nonce=ar,this.rendererByCompId=new Map,this.platformIsServer=(0,Q.Vy)(xt),this.defaultRenderer=new nt(we,kn,X,this.platformIsServer)}createRenderer(we,rt){if(!we||!rt)return this.defaultRenderer;this.platformIsServer&&rt.encapsulation===M.gXe.ShadowDom&&(rt={...rt,encapsulation:M.gXe.Emulated});const St=this.getOrCreateRenderer(we,rt);return St instanceof At?St.applyToHost(we):St instanceof nn&&St.applyStyles(),St}getOrCreateRenderer(we,rt){const St=this.rendererByCompId;let Wt=St.get(rt.id);if(!Wt){const kn=this.doc,xt=this.ngZone,X=this.eventManager,ar=this.sharedStylesHost,Rr=this.removeStylesOnCompDestroy,ti=this.platformIsServer;switch(rt.encapsulation){case M.gXe.Emulated:Wt=new At(X,ar,rt,this.appId,Rr,kn,xt,ti);break;case M.gXe.ShadowDom:return new Ft(X,ar,we,rt,kn,xt,this.nonce,ti);default:Wt=new nn(X,ar,rt,Rr,kn,xt,ti)}St.set(rt.id,Wt)}return Wt}ngOnDestroy(){this.rendererByCompId.clear()}}return(Ae=ye).\u0275fac=function(we){return new(we||Ae)(M.KVO(me),M.KVO(Te),M.KVO(M.sZ2),M.KVO(at),M.KVO(Q.qQ),M.KVO(M.Agw),M.KVO(M.SKi),M.KVO(M.BIS))},Ae.\u0275prov=M.jDH({token:Ae,factory:Ae.\u0275fac}),ye})();class nt{constructor(ye,Je,we,rt){this.eventManager=ye,this.doc=Je,this.ngZone=we,this.platformIsServer=rt,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(ye,Je){return Je?this.doc.createElementNS(Ke[Je]||Je,ye):this.doc.createElement(ye)}createComment(ye){return this.doc.createComment(ye)}createText(ye){return this.doc.createTextNode(ye)}appendChild(ye,Je){(Pt(ye)?ye.content:ye).appendChild(Je)}insertBefore(ye,Je,we){ye&&(Pt(ye)?ye.content:ye).insertBefore(Je,we)}removeChild(ye,Je){ye&&ye.removeChild(Je)}selectRootElement(ye,Je){let we="string"==typeof ye?this.doc.querySelector(ye):ye;if(!we)throw new M.wOt(-5104,!1);return Je||(we.textContent=""),we}parentNode(ye){return ye.parentNode}nextSibling(ye){return ye.nextSibling}setAttribute(ye,Je,we,rt){if(rt){Je=rt+":"+Je;const St=Ke[rt];St?ye.setAttributeNS(St,Je,we):ye.setAttribute(Je,we)}else ye.setAttribute(Je,we)}removeAttribute(ye,Je,we){if(we){const rt=Ke[we];rt?ye.removeAttributeNS(rt,Je):ye.removeAttribute(`${we}:${Je}`)}else ye.removeAttribute(Je)}addClass(ye,Je){ye.classList.add(Je)}removeClass(ye,Je){ye.classList.remove(Je)}setStyle(ye,Je,we,rt){rt&(M.czy.DashCase|M.czy.Important)?ye.style.setProperty(Je,we,rt&M.czy.Important?"important":""):ye.style[Je]=we}removeStyle(ye,Je,we){we&M.czy.DashCase?ye.style.removeProperty(Je):ye.style[Je]=""}setProperty(ye,Je,we){null!=ye&&(ye[Je]=we)}setValue(ye,Je){ye.nodeValue=Je}listen(ye,Je,we){if("string"==typeof ye&&!(ye=(0,Q.QT)().getGlobalEventTarget(this.doc,ye)))throw new Error(`Unsupported event target ${ye} for event ${Je}`);return this.eventManager.addEventListener(ye,Je,this.decoratePreventDefault(we))}decoratePreventDefault(ye){return Je=>{if("__ngUnwrap__"===Je)return ye;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>ye(Je)):ye(Je))&&Je.preventDefault()}}}function Pt(Ae){return"TEMPLATE"===Ae.tagName&&void 0!==Ae.content}class Ft extends nt{constructor(ye,Je,we,rt,St,Wt,kn,xt){super(ye,St,Wt,xt),this.sharedStylesHost=Je,this.hostEl=we,this.shadowRoot=we.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const X=$e(rt.id,rt.styles);for(const ar of X){const Rr=document.createElement("style");kn&&Rr.setAttribute("nonce",kn),Rr.textContent=ar,this.shadowRoot.appendChild(Rr)}}nodeOrShadowRoot(ye){return ye===this.hostEl?this.shadowRoot:ye}appendChild(ye,Je){return super.appendChild(this.nodeOrShadowRoot(ye),Je)}insertBefore(ye,Je,we){return super.insertBefore(this.nodeOrShadowRoot(ye),Je,we)}removeChild(ye,Je){return super.removeChild(this.nodeOrShadowRoot(ye),Je)}parentNode(ye){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ye)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class nn extends nt{constructor(ye,Je,we,rt,St,Wt,kn,xt){super(ye,St,Wt,kn),this.sharedStylesHost=Je,this.removeStylesOnCompDestroy=rt,this.styles=xt?$e(xt,we.styles):we.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class At extends nn{constructor(ye,Je,we,rt,St,Wt,kn,xt){const X=rt+"-"+we.id;super(ye,Je,we,St,Wt,kn,xt,X),this.contentAttr=function pe(Ae){return"_ngcontent-%COMP%".replace(it,Ae)}(X),this.hostAttr=function ke(Ae){return"_nghost-%COMP%".replace(it,Ae)}(X)}applyToHost(ye){this.applyStyles(),this.setAttribute(ye,this.hostAttr,"")}createElement(ye,Je){const we=super.createElement(ye,Je);return super.setAttribute(we,this.contentAttr,""),we}}let Kt=(()=>{var Ae;class ye extends Ne{constructor(we){super(we)}supports(we){return!0}addEventListener(we,rt,St){return we.addEventListener(rt,St,!1),()=>this.removeEventListener(we,rt,St)}removeEventListener(we,rt,St){return we.removeEventListener(rt,St)}}return(Ae=ye).\u0275fac=function(we){return new(we||Ae)(M.KVO(Q.qQ))},Ae.\u0275prov=M.jDH({token:Ae,factory:Ae.\u0275fac}),ye})();const ct=["alt","control","meta","shift"],fe={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Y={alt:Ae=>Ae.altKey,control:Ae=>Ae.ctrlKey,meta:Ae=>Ae.metaKey,shift:Ae=>Ae.shiftKey};let J=(()=>{var Ae;class ye extends Ne{constructor(we){super(we)}supports(we){return null!=ye.parseEventName(we)}addEventListener(we,rt,St){const Wt=ye.parseEventName(rt),kn=ye.eventCallback(Wt.fullKey,St,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,Q.QT)().onAndCancel(we,Wt.domEventName,kn))}static parseEventName(we){const rt=we.toLowerCase().split("."),St=rt.shift();if(0===rt.length||"keydown"!==St&&"keyup"!==St)return null;const Wt=ye._normalizeKey(rt.pop());let kn="",xt=rt.indexOf("code");if(xt>-1&&(rt.splice(xt,1),kn="code."),ct.forEach(ar=>{const Rr=rt.indexOf(ar);Rr>-1&&(rt.splice(Rr,1),kn+=ar+".")}),kn+=Wt,0!=rt.length||0===Wt.length)return null;const X={};return X.domEventName=St,X.fullKey=kn,X}static matchEventFullKeyCode(we,rt){let St=fe[we.key]||we.key,Wt="";return rt.indexOf("code.")>-1&&(St=we.code,Wt="code."),!(null==St||!St)&&(St=St.toLowerCase()," "===St?St="space":"."===St&&(St="dot"),ct.forEach(kn=>{kn!==St&&(0,Y[kn])(we)&&(Wt+=kn+".")}),Wt+=St,Wt===rt)}static eventCallback(we,rt,St){return Wt=>{ye.matchEventFullKeyCode(Wt,we)&&St.runGuarded(()=>rt(Wt))}}static _normalizeKey(we){return"esc"===we?"escape":we}}return(Ae=ye).\u0275fac=function(we){return new(we||Ae)(M.KVO(Q.qQ))},Ae.\u0275prov=M.jDH({token:Ae,factory:Ae.\u0275fac}),ye})();const gn=(0,M.oH4)(M.fpN,"browser",[{provide:M.Agw,useValue:Q.AJ},{provide:M.PLl,useValue:function pt(){x.makeCurrent()},multi:!0},{provide:Q.qQ,useFactory:function Dn(){return(0,M.TL$)(document),document},deps:[]}]),In=new M.nKC(""),Mn=[{provide:M.e01,useClass:class Se{addToWindow(ye){M.JZv.getAngularTestability=(we,rt=!0)=>{const St=ye.findTestabilityInTree(we,rt);if(null==St)throw new M.wOt(5103,!1);return St},M.JZv.getAllAngularTestabilities=()=>ye.getAllTestabilities(),M.JZv.getAllAngularRootElements=()=>ye.getAllRootElements(),M.JZv.frameworkStabilizers||(M.JZv.frameworkStabilizers=[]),M.JZv.frameworkStabilizers.push(we=>{const rt=M.JZv.getAllAngularTestabilities();let St=rt.length;const Wt=function(){St--,0==St&&we()};rt.forEach(kn=>{kn.whenStable(Wt)})})}findTestabilityInTree(ye,Je,we){if(null==Je)return null;const rt=ye.getTestability(Je);return null!=rt?rt:we?(0,Q.QT)().isShadowRoot(Je)?this.findTestabilityInTree(ye,Je.host,!0):this.findTestabilityInTree(ye,Je.parentElement,!0):null}},deps:[]},{provide:M.WHO,useClass:M.NYb,deps:[M.SKi,M.giA,M.e01]},{provide:M.NYb,useClass:M.NYb,deps:[M.SKi,M.giA,M.e01]}],er=[{provide:M.H8p,useValue:"root"},{provide:M.zcH,useFactory:function Mt(){return new M.zcH},deps:[]},{provide:qe,useClass:Kt,multi:!0,deps:[Q.qQ,M.SKi,M.Agw]},{provide:qe,useClass:J,multi:!0,deps:[Q.qQ]},tt,Te,me,{provide:M._9s,useExisting:tt},{provide:Q.N0,useClass:Ge,deps:[]},[]];let En=(()=>{var Ae;class ye{constructor(we){}static withServerTransition(we){return{ngModule:ye,providers:[{provide:M.sZ2,useValue:we.appId}]}}}return(Ae=ye).\u0275fac=function(we){return new(we||Ae)(M.KVO(In,12))},Ae.\u0275mod=M.$C({type:Ae}),Ae.\u0275inj=M.G2t({providers:[...er,...Mn],imports:[Q.MD,M.Hbi]}),ye})(),Ht=(()=>{var Ae;class ye{constructor(we){this._doc=we}getTitle(){return this._doc.title}setTitle(we){this._doc.title=we||""}}return(Ae=ye).\u0275fac=function(we){return new(we||Ae)(M.KVO(Q.qQ))},Ae.\u0275prov=M.jDH({token:Ae,factory:Ae.\u0275fac,providedIn:"root"}),ye})()},70:(hn,Ct,ee)=>{"use strict";ee.d(Ct,{nX:()=>he,Zp:()=>Po,Z:()=>lo,Xk:()=>Ht,Kp:()=>gs,Ix:()=>Nr,Wk:()=>xl,iI:()=>Jr,n3:()=>qt,Sd:()=>Ae});var M=ee(467),Q=ee(4438),h=ee(1985),x=ee(8071),He=ee(6648),re=ee(7673),Se=ee(4412),Ge=ee(4572);const me=(0,ee(1853).L)(w=>function(){w(this),this.name="EmptyError",this.message="no elements in sequence"});var Ne=ee(1397),Re=ee(3669);function Te(w=1/0){return(0,Ne.Z)(Re.D,w)}var it=ee(3794);function Xe(...w){return function Ke(){return Te(1)}()((0,He.H)(w,(0,it.lI)(w)))}var Qe=ee(8750);function vt(w){return new h.c(R=>{(0,Qe.Tg)(w()).subscribe(R)})}var We=ee(1203);function at(w,R){const N=(0,x.T)(w)?w:()=>w,S=O=>O.error(N());return new h.c(R?O=>R.schedule(S,0,O):S)}const pe=new h.c(w=>w.complete());var tt=ee(8359),nt=ee(9974),_t=ee(4360);function Ye(){return(0,nt.N)((w,R)=>{let N=null;w._refCount++;const S=(0,_t._)(R,void 0,void 0,void 0,()=>{if(!w||w._refCount<=0||0<--w._refCount)return void(N=null);const O=w._connection,q=N;N=null,O&&(!q||O===q)&&O.unsubscribe(),R.unsubscribe()});w.subscribe(S),S.closed||(N=w.connect())})}class Pt extends h.c{constructor(R,N){super(),this.source=R,this.subjectFactory=N,this._subject=null,this._refCount=0,this._connection=null,(0,nt.S)(R)&&(this.lift=R.lift)}_subscribe(R){return this.getSubject().subscribe(R)}getSubject(){const R=this._subject;return(!R||R.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:R}=this;this._subject=this._connection=null,null==R||R.unsubscribe()}connect(){let R=this._connection;if(!R){R=this._connection=new tt.yU;const N=this.getSubject();R.add(this.source.subscribe((0,_t._)(N,void 0,()=>{this._teardown(),N.complete()},S=>{this._teardown(),N.error(S)},()=>this._teardown()))),R.closed&&(this._connection=null,R=tt.yU.EMPTY)}return R}refCount(){return Ye()(this)}}var Ft=ee(1413),nn=ee(177),At=ee(6354),Kt=ee(5558);function ct(w){return w<=0?()=>pe:(0,nt.N)((R,N)=>{let S=0;R.subscribe((0,_t._)(N,O=>{++S<=w&&(N.next(O),w<=S&&N.complete())}))})}var Y=ee(5964);function J(w){return(0,nt.N)((R,N)=>{let S=!1;R.subscribe((0,_t._)(N,O=>{S=!0,N.next(O)},()=>{S||N.next(w),N.complete()}))})}function ie(w=de){return(0,nt.N)((R,N)=>{let S=!1;R.subscribe((0,_t._)(N,O=>{S=!0,N.next(O)},()=>S?N.complete():N.error(w())))})}function de(){return new me}function Ue(w,R){const N=arguments.length>=2;return S=>S.pipe(w?(0,Y.p)((O,q)=>w(O,q,S)):Re.D,ct(1),N?J(R):ie(()=>new me))}function Le(w,R){return(0,x.T)(R)?(0,Ne.Z)(w,R,1):(0,Ne.Z)(w,1)}function pt(w,R,N){const S=(0,x.T)(w)||R||N?{next:w,error:R,complete:N}:w;return S?(0,nt.N)((O,q)=>{var oe;null===(oe=S.subscribe)||void 0===oe||oe.call(S);let Me=!0;O.subscribe((0,_t._)(q,wt=>{var Ve;null===(Ve=S.next)||void 0===Ve||Ve.call(S,wt),q.next(wt)},()=>{var wt;Me=!1,null===(wt=S.complete)||void 0===wt||wt.call(S),q.complete()},wt=>{var Ve;Me=!1,null===(Ve=S.error)||void 0===Ve||Ve.call(S,wt),q.error(wt)},()=>{var wt,Ve;Me&&(null===(wt=S.unsubscribe)||void 0===wt||wt.call(S)),null===(Ve=S.finalize)||void 0===Ve||Ve.call(S)}))}):Re.D}function Mt(w){return(0,nt.N)((R,N)=>{let q,S=null,O=!1;S=R.subscribe((0,_t._)(N,void 0,void 0,oe=>{q=(0,Qe.Tg)(w(oe,Mt(w)(R))),S?(S.unsubscribe(),S=null,q.subscribe(N)):O=!0})),O&&(S.unsubscribe(),S=null,q.subscribe(N))})}function gn(w){return w<=0?()=>pe:(0,nt.N)((R,N)=>{let S=[];R.subscribe((0,_t._)(N,O=>{S.push(O),w<S.length&&S.shift()},()=>{for(const O of S)N.next(O);N.complete()},void 0,()=>{S=null}))})}function er(w){return(0,nt.N)((R,N)=>{try{R.subscribe(N)}finally{N.add(w)}})}var En=ee(5343),rr=ee(345);const Ht="primary",Pe=Symbol("RouteTitle");class Ze{constructor(R){this.params=R||{}}has(R){return Object.prototype.hasOwnProperty.call(this.params,R)}get(R){if(this.has(R)){const N=this.params[R];return Array.isArray(N)?N[0]:N}return null}getAll(R){if(this.has(R)){const N=this.params[R];return Array.isArray(N)?N:[N]}return[]}get keys(){return Object.keys(this.params)}}function et(w){return new Ze(w)}function Gt(w,R,N){const S=N.path.split("/");if(S.length>w.length||"full"===N.pathMatch&&(R.hasChildren()||S.length<w.length))return null;const O={};for(let q=0;q<S.length;q++){const oe=S[q],Me=w[q];if(oe.startsWith(":"))O[oe.substring(1)]=Me;else if(oe!==Me.path)return null}return{consumed:w.slice(0,S.length),posParams:O}}function ir(w,R){const N=w?$n(w):void 0,S=R?$n(R):void 0;if(!N||!S||N.length!=S.length)return!1;let O;for(let q=0;q<N.length;q++)if(O=N[q],!rn(w[O],R[O]))return!1;return!0}function $n(w){return[...Object.keys(w),...Object.getOwnPropertySymbols(w)]}function rn(w,R){if(Array.isArray(w)&&Array.isArray(R)){if(w.length!==R.length)return!1;const N=[...w].sort(),S=[...R].sort();return N.every((O,q)=>S[q]===O)}return w===R}function sn(w){return w.length>0?w[w.length-1]:null}function Ln(w){return function v(w){return!!w&&(w instanceof h.c||(0,x.T)(w.lift)&&(0,x.T)(w.subscribe))}(w)?w:(0,Q.jNT)(w)?(0,He.H)(Promise.resolve(w)):(0,re.of)(w)}const pr={exact:function ei(w,R,N){if(!qi(w.segments,R.segments)||!jt(w.segments,R.segments,N)||w.numberOfChildren!==R.numberOfChildren)return!1;for(const S in R.children)if(!w.children[S]||!ei(w.children[S],R.children[S],N))return!1;return!0},subset:Wi},cr={exact:function kr(w,R){return ir(w,R)},subset:function Rn(w,R){return Object.keys(R).length<=Object.keys(w).length&&Object.keys(R).every(N=>rn(w[N],R[N]))},ignored:()=>!0};function Wr(w,R,N){return pr[N.paths](w.root,R.root,N.matrixParams)&&cr[N.queryParams](w.queryParams,R.queryParams)&&!("exact"===N.fragment&&w.fragment!==R.fragment)}function Wi(w,R,N){return jn(w,R,R.segments,N)}function jn(w,R,N,S){if(w.segments.length>N.length){const O=w.segments.slice(0,N.length);return!(!qi(O,N)||R.hasChildren()||!jt(O,N,S))}if(w.segments.length===N.length){if(!qi(w.segments,N)||!jt(w.segments,N,S))return!1;for(const O in R.children)if(!w.children[O]||!Wi(w.children[O],R.children[O],S))return!1;return!0}{const O=N.slice(0,w.segments.length),q=N.slice(w.segments.length);return!!(qi(w.segments,O)&&jt(w.segments,O,S)&&w.children[Ht])&&jn(w.children[Ht],R,q,S)}}function jt(w,R,N){return R.every((S,O)=>cr[N](w[O].parameters,S.parameters))}class mr{constructor(R=new pn([],{}),N={},S=null){this.root=R,this.queryParams=N,this.fragment=S}get queryParamMap(){var R;return null!==(R=this._queryParamMap)&&void 0!==R||(this._queryParamMap=et(this.queryParams)),this._queryParamMap}toString(){return Je.serialize(this)}}class pn{constructor(R,N){this.segments=R,this.children=N,this.parent=null,Object.values(N).forEach(S=>S.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return we(this)}}class tr{constructor(R,N){this.path=R,this.parameters=N}get parameterMap(){var R;return null!==(R=this._parameterMap)&&void 0!==R||(this._parameterMap=et(this.parameters)),this._parameterMap}toString(){return Rr(this)}}function qi(w,R){return w.length===R.length&&w.every((N,S)=>N.path===R[S].path)}let Ae=(()=>{var w;class R{}return(w=R).\u0275fac=function(S){return new(S||w)},w.\u0275prov=Q.jDH({token:w,factory:()=>new ye,providedIn:"root"}),R})();class ye{parse(R){const N=new qn(R);return new mr(N.parseRootSegment(),N.parseQueryParams(),N.parseFragment())}serialize(R){const N=`/${rt(R.root,!0)}`,S=function Aa(w){const R=Object.entries(w).map(([N,S])=>Array.isArray(S)?S.map(O=>`${Wt(N)}=${Wt(O)}`).join("&"):`${Wt(N)}=${Wt(S)}`).filter(N=>N);return R.length?`?${R.join("&")}`:""}(R.queryParams);return`${N}${S}${"string"==typeof R.fragment?`#${function kn(w){return encodeURI(w)}(R.fragment)}`:""}`}}const Je=new ye;function we(w){return w.segments.map(R=>Rr(R)).join("/")}function rt(w,R){if(!w.hasChildren())return we(w);if(R){const N=w.children[Ht]?rt(w.children[Ht],!1):"",S=[];return Object.entries(w.children).forEach(([O,q])=>{O!==Ht&&S.push(`${O}:${rt(q,!1)}`)}),S.length>0?`${N}(${S.join("//")})`:N}{const N=function ci(w,R){let N=[];return Object.entries(w.children).forEach(([S,O])=>{S===Ht&&(N=N.concat(R(O,S)))}),Object.entries(w.children).forEach(([S,O])=>{S!==Ht&&(N=N.concat(R(O,S)))}),N}(w,(S,O)=>O===Ht?[rt(w.children[Ht],!1)]:[`${O}:${rt(S,!1)}`]);return 1===Object.keys(w.children).length&&null!=w.children[Ht]?`${we(w)}/${N[0]}`:`${we(w)}/(${N.join("//")})`}}function St(w){return encodeURIComponent(w).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Wt(w){return St(w).replace(/%3B/gi,";")}function xt(w){return St(w).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function X(w){return decodeURIComponent(w)}function ar(w){return X(w.replace(/\+/g,"%20"))}function Rr(w){return`${xt(w.path)}${function ti(w){return Object.entries(w).map(([R,N])=>`;${xt(R)}=${xt(N)}`).join("")}(w.parameters)}`}const Js=/^[^\/()?;#]+/;function xr(w){const R=w.match(Js);return R?R[0]:""}const mn=/^[^\/()?;=#]+/,Fi=/^[^=?&#]+/,Uo=/^[^&#]+/;class qn{constructor(R){this.url=R,this.remaining=R}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new pn([],{}):new pn([],this.parseChildren())}parseQueryParams(){const R={};if(this.consumeOptional("?"))do{this.parseQueryParam(R)}while(this.consumeOptional("&"));return R}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const R=[];for(this.peekStartsWith("(")||R.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),R.push(this.parseSegment());let N={};this.peekStartsWith("/(")&&(this.capture("/"),N=this.parseParens(!0));let S={};return this.peekStartsWith("(")&&(S=this.parseParens(!1)),(R.length>0||Object.keys(N).length>0)&&(S[Ht]=new pn(R,N)),S}parseSegment(){const R=xr(this.remaining);if(""===R&&this.peekStartsWith(";"))throw new Q.wOt(4009,!1);return this.capture(R),new tr(X(R),this.parseMatrixParams())}parseMatrixParams(){const R={};for(;this.consumeOptional(";");)this.parseParam(R);return R}parseParam(R){const N=function Tn(w){const R=w.match(mn);return R?R[0]:""}(this.remaining);if(!N)return;this.capture(N);let S="";if(this.consumeOptional("=")){const O=xr(this.remaining);O&&(S=O,this.capture(S))}R[X(N)]=X(S)}parseQueryParam(R){const N=function Li(w){const R=w.match(Fi);return R?R[0]:""}(this.remaining);if(!N)return;this.capture(N);let S="";if(this.consumeOptional("=")){const oe=function Ao(w){const R=w.match(Uo);return R?R[0]:""}(this.remaining);oe&&(S=oe,this.capture(S))}const O=ar(N),q=ar(S);if(R.hasOwnProperty(O)){let oe=R[O];Array.isArray(oe)||(oe=[oe],R[O]=oe),oe.push(q)}else R[O]=q}parseParens(R){const N={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const S=xr(this.remaining),O=this.remaining[S.length];if("/"!==O&&")"!==O&&";"!==O)throw new Q.wOt(4010,!1);let q;S.indexOf(":")>-1?(q=S.slice(0,S.indexOf(":")),this.capture(q),this.capture(":")):R&&(q=Ht);const oe=this.parseChildren();N[q]=1===Object.keys(oe).length?oe[Ht]:new pn([],oe),this.consumeOptional("//")}return N}peekStartsWith(R){return this.remaining.startsWith(R)}consumeOptional(R){return!!this.peekStartsWith(R)&&(this.remaining=this.remaining.substring(R.length),!0)}capture(R){if(!this.consumeOptional(R))throw new Q.wOt(4011,!1)}}function Bo(w){return w.segments.length>0?new pn([],{[Ht]:w}):w}function Do(w){const R={};for(const[S,O]of Object.entries(w.children)){const q=Do(O);if(S===Ht&&0===q.segments.length&&q.hasChildren())for(const[oe,Me]of Object.entries(q.children))R[oe]=Me;else(q.segments.length>0||q.hasChildren())&&(R[S]=q)}return function Ki(w){if(1===w.numberOfChildren&&w.children[Ht]){const R=w.children[Ht];return new pn(w.segments.concat(R.segments),R.children)}return w}(new pn(w.segments,R))}function _i(w){return w instanceof mr}function $o(w){var R;let N;const q=Bo(function S(oe){const Me={};for(const Ve of oe.children){const Jt=S(Ve);Me[Ve.outlet]=Jt}const wt=new pn(oe.url,Me);return oe===w&&(N=wt),wt}(w.root));return null!==(R=N)&&void 0!==R?R:q}function jo(w,R,N,S){let O=w;for(;O.parent;)O=O.parent;if(0===R.length)return Qt(O,O,O,N,S);const q=function Ur(w){if("string"==typeof w[0]&&1===w.length&&"/"===w[0])return new cn(!0,0,w);let R=0,N=!1;const S=w.reduce((O,q,oe)=>{if("object"==typeof q&&null!=q){if(q.outlets){const Me={};return Object.entries(q.outlets).forEach(([wt,Ve])=>{Me[wt]="string"==typeof Ve?Ve.split("/"):Ve}),[...O,{outlets:Me}]}if(q.segmentPath)return[...O,q.segmentPath]}return"string"!=typeof q?[...O,q]:0===oe?(q.split("/").forEach((Me,wt)=>{0==wt&&"."===Me||(0==wt&&""===Me?N=!0:".."===Me?R++:""!=Me&&O.push(Me))}),O):[...O,q]},[]);return new cn(N,R,S)}(R);if(q.toRoot())return Qt(O,O,new pn([],{}),N,S);const oe=function Xi(w,R,N){if(w.isAbsolute)return new ui(R,!0,0);if(!N)return new ui(R,!1,NaN);if(null===N.parent)return new ui(N,!0,0);const S=Ro(w.commands[0])?0:1;return function us(w,R,N){let S=w,O=R,q=N;for(;q>O;){if(q-=O,S=S.parent,!S)throw new Q.wOt(4005,!1);O=S.segments.length}return new ui(S,!1,O-q)}(N,N.segments.length-1+S,w.numberOfDoubleDots)}(q,O,w),Me=oe.processChildren?Br(oe.segmentGroup,oe.index,q.commands):zo(oe.segmentGroup,oe.index,q.commands);return Qt(O,oe.segmentGroup,Me,N,S)}function Ro(w){return"object"==typeof w&&null!=w&&!w.outlets&&!w.segmentPath}function lt(w){return"object"==typeof w&&null!=w&&w.outlets}function Qt(w,R,N,S,O){let oe,q={};S&&Object.entries(S).forEach(([wt,Ve])=>{q[wt]=Array.isArray(Ve)?Ve.map(Jt=>`${Jt}`):`${Ve}`}),oe=w===R?N:On(w,R,N);const Me=Bo(Do(oe));return new mr(Me,q,O)}function On(w,R,N){const S={};return Object.entries(w.children).forEach(([O,q])=>{S[O]=q===R?N:On(q,R,N)}),new pn(w.segments,S)}class cn{constructor(R,N,S){if(this.isAbsolute=R,this.numberOfDoubleDots=N,this.commands=S,R&&S.length>0&&Ro(S[0]))throw new Q.wOt(4003,!1);const O=S.find(lt);if(O&&O!==sn(S))throw new Q.wOt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ui{constructor(R,N,S){this.segmentGroup=R,this.processChildren=N,this.index=S}}function zo(w,R,N){var S;if(null!==(S=w)&&void 0!==S||(w=new pn([],{})),0===w.segments.length&&w.hasChildren())return Br(w,R,N);const O=function ea(w,R,N){let S=0,O=R;const q={match:!1,pathIndex:0,commandIndex:0};for(;O<w.segments.length;){if(S>=N.length)return q;const oe=w.segments[O],Me=N[S];if(lt(Me))break;const wt=`${Me}`,Ve=S<N.length-1?N[S+1]:null;if(O>0&&void 0===wt)break;if(wt&&Ve&&"object"==typeof Ve&&void 0===Ve.outlets){if(!Si(wt,Ve,oe))return q;S+=2}else{if(!Si(wt,{},oe))return q;S++}O++}return{match:!0,pathIndex:O,commandIndex:S}}(w,R,N),q=N.slice(O.commandIndex);if(O.match&&O.pathIndex<w.segments.length){const oe=new pn(w.segments.slice(0,O.pathIndex),{});return oe.children[Ht]=new pn(w.segments.slice(O.pathIndex),w.children),Br(oe,0,q)}return O.match&&0===q.length?new pn(w.segments,{}):O.match&&!w.hasChildren()?Ho(w,R,N):O.match?Br(w,0,q):Ho(w,R,N)}function Br(w,R,N){if(0===N.length)return new pn(w.segments,{});{const S=function Zs(w){return lt(w[0])?w[0].outlets:{[Ht]:w}}(N),O={};if(Object.keys(S).some(q=>q!==Ht)&&w.children[Ht]&&1===w.numberOfChildren&&0===w.children[Ht].segments.length){const q=Br(w.children[Ht],R,N);return new pn(w.segments,q.children)}return Object.entries(S).forEach(([q,oe])=>{"string"==typeof oe&&(oe=[oe]),null!==oe&&(O[q]=zo(w.children[q],R,oe))}),Object.entries(w.children).forEach(([q,oe])=>{void 0===S[q]&&(O[q]=oe)}),new pn(w.segments,O)}}function Ho(w,R,N){const S=w.segments.slice(0,R);let O=0;for(;O<N.length;){const q=N[O];if(lt(q)){const wt=Xa(q.outlets);return new pn(S,wt)}if(0===O&&Ro(N[0])){S.push(new tr(w.segments[R].path,so(N[0]))),O++;continue}const oe=lt(q)?q.outlets[Ht]:`${q}`,Me=O<N.length-1?N[O+1]:null;oe&&Me&&Ro(Me)?(S.push(new tr(oe,so(Me))),O+=2):(S.push(new tr(oe,{})),O++)}return new pn(S,{})}function Xa(w){const R={};return Object.entries(w).forEach(([N,S])=>{"string"==typeof S&&(S=[S]),null!==S&&(R[N]=Ho(new pn([],{}),0,S))}),R}function so(w){const R={};return Object.entries(w).forEach(([N,S])=>R[N]=`${S}`),R}function Si(w,R,N){return w==N.path&&ir(R,N.parameters)}const ao="imperative";var Kn=function(w){return w[w.NavigationStart=0]="NavigationStart",w[w.NavigationEnd=1]="NavigationEnd",w[w.NavigationCancel=2]="NavigationCancel",w[w.NavigationError=3]="NavigationError",w[w.RoutesRecognized=4]="RoutesRecognized",w[w.ResolveStart=5]="ResolveStart",w[w.ResolveEnd=6]="ResolveEnd",w[w.GuardsCheckStart=7]="GuardsCheckStart",w[w.GuardsCheckEnd=8]="GuardsCheckEnd",w[w.RouteConfigLoadStart=9]="RouteConfigLoadStart",w[w.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",w[w.ChildActivationStart=11]="ChildActivationStart",w[w.ChildActivationEnd=12]="ChildActivationEnd",w[w.ActivationStart=13]="ActivationStart",w[w.ActivationEnd=14]="ActivationEnd",w[w.Scroll=15]="Scroll",w[w.NavigationSkipped=16]="NavigationSkipped",w}(Kn||{});class to{constructor(R,N){this.id=R,this.url=N}}class lo extends to{constructor(R,N,S="imperative",O=null){super(R,N),this.type=Kn.NavigationStart,this.navigationTrigger=S,this.restoredState=O}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ni extends to{constructor(R,N,S){super(R,N),this.urlAfterRedirects=S,this.type=Kn.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var yr=function(w){return w[w.Redirect=0]="Redirect",w[w.SupersededByNewNavigation=1]="SupersededByNewNavigation",w[w.NoDataFromResolver=2]="NoDataFromResolver",w[w.GuardRejected=3]="GuardRejected",w}(yr||{}),yn=function(w){return w[w.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",w[w.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",w}(yn||{});class or extends to{constructor(R,N,S,O){super(R,N),this.reason=S,this.code=O,this.type=Kn.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class es extends to{constructor(R,N,S,O){super(R,N),this.reason=S,this.code=O,this.type=Kn.NavigationSkipped}}class ri extends to{constructor(R,N,S,O){super(R,N),this.error=S,this.target=O,this.type=Kn.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ta extends to{constructor(R,N,S,O){super(R,N),this.urlAfterRedirects=S,this.state=O,this.type=Kn.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class El extends to{constructor(R,N,S,O){super(R,N),this.urlAfterRedirects=S,this.state=O,this.type=Kn.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class na extends to{constructor(R,N,S,O,q){super(R,N),this.urlAfterRedirects=S,this.state=O,this.shouldActivate=q,this.type=Kn.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ds extends to{constructor(R,N,S,O){super(R,N),this.urlAfterRedirects=S,this.state=O,this.type=Kn.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fn extends to{constructor(R,N,S,O){super(R,N),this.urlAfterRedirects=S,this.state=O,this.type=Kn.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $r{constructor(R){this.route=R,this.type=Kn.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Qa{constructor(R){this.route=R,this.type=Kn.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class gt{constructor(R){this.snapshot=R,this.type=Kn.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Da{constructor(R){this.snapshot=R,this.type=Kn.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Cl{constructor(R){this.snapshot=R,this.type=Kn.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wl{constructor(R){this.snapshot=R,this.type=Kn.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Go{constructor(R,N,S){this.routerEvent=R,this.position=N,this.anchor=S,this.type=Kn.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class ds{}class co{constructor(R){this.url=R}}class Sa{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Po,this.attachRef=null}}let Po=(()=>{var w;class R{constructor(){this.contexts=new Map}onChildOutletCreated(S,O){const q=this.getOrCreateContext(S);q.outlet=O,this.contexts.set(S,q)}onChildOutletDestroyed(S){const O=this.getContext(S);O&&(O.outlet=null,O.attachRef=null)}onOutletDeactivated(){const S=this.contexts;return this.contexts=new Map,S}onOutletReAttached(S){this.contexts=S}getOrCreateContext(S){let O=this.getContext(S);return O||(O=new Sa,this.contexts.set(S,O)),O}getContext(S){return this.contexts.get(S)||null}}return(w=R).\u0275fac=function(S){return new(S||w)},w.\u0275prov=Q.jDH({token:w,factory:w.\u0275fac,providedIn:"root"}),R})();class Ss{constructor(R){this._root=R}get root(){return this._root.value}parent(R){const N=this.pathFromRoot(R);return N.length>1?N[N.length-2]:null}children(R){const N=Vi(R,this._root);return N?N.children.map(S=>S.value):[]}firstChild(R){const N=Vi(R,this._root);return N&&N.children.length>0?N.children[0].value:null}siblings(R){const N=ts(R,this._root);return N.length<2?[]:N[N.length-2].children.map(O=>O.value).filter(O=>O!==R)}pathFromRoot(R){return ts(R,this._root).map(N=>N.value)}}function Vi(w,R){if(w===R.value)return R;for(const N of R.children){const S=Vi(w,N);if(S)return S}return null}function ts(w,R){if(w===R.value)return[R];for(const N of R.children){const S=ts(w,N);if(S.length)return S.unshift(R),S}return[]}class wn{constructor(R,N){this.value=R,this.children=N}toString(){return`TreeNode(${this.value})`}}function ns(w){const R={};return w&&w.children.forEach(N=>R[N.value.outlet]=N),R}class U extends Ss{constructor(R,N){super(R),this.snapshot=N,Tt(this,R)}toString(){return this.snapshot.toString()}}function Z(w){const R=function ae(w){const q=new Ee([],{},{},"",{},Ht,w,null,{});return new ut("",new wn(q,[]))}(w),N=new Se.t([new tr("",{})]),S=new Se.t({}),O=new Se.t({}),q=new Se.t({}),oe=new Se.t(""),Me=new he(N,S,q,oe,O,Ht,w,R.root);return Me.snapshot=R.root,new U(new wn(Me,[]),R)}class he{constructor(R,N,S,O,q,oe,Me,wt){var Ve,Jt;this.urlSubject=R,this.paramsSubject=N,this.queryParamsSubject=S,this.fragmentSubject=O,this.dataSubject=q,this.outlet=oe,this.component=Me,this._futureSnapshot=wt,this.title=null!==(Ve=null===(Jt=this.dataSubject)||void 0===Jt?void 0:Jt.pipe((0,At.T)(Pn=>Pn[Pe])))&&void 0!==Ve?Ve:(0,re.of)(void 0),this.url=R,this.params=N,this.queryParams=S,this.fragment=O,this.data=q}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){var R;return null!==(R=this._paramMap)&&void 0!==R||(this._paramMap=this.params.pipe((0,At.T)(N=>et(N)))),this._paramMap}get queryParamMap(){var R;return null!==(R=this._queryParamMap)&&void 0!==R||(this._queryParamMap=this.queryParams.pipe((0,At.T)(N=>et(N)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function be(w,R,N="emptyOnly"){var S;let O;const{routeConfig:q}=w;var oe;return O=null===R||"always"!==N&&""!==(null==q?void 0:q.path)&&(R.component||null!==(S=R.routeConfig)&&void 0!==S&&S.loadComponent)?{params:{...w.params},data:{...w.data},resolve:{...w.data,...null!==(oe=w._resolvedData)&&void 0!==oe?oe:{}}}:{params:{...R.params,...w.params},data:{...R.data,...w.data},resolve:{...w.data,...R.data,...null==q?void 0:q.data,...w._resolvedData}},q&&Yt(q)&&(O.resolve[Pe]=q.title),O}class Ee{get title(){var R;return null===(R=this.data)||void 0===R?void 0:R[Pe]}constructor(R,N,S,O,q,oe,Me,wt,Ve){this.url=R,this.params=N,this.queryParams=S,this.fragment=O,this.data=q,this.outlet=oe,this.component=Me,this.routeConfig=wt,this._resolve=Ve}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){var R;return null!==(R=this._paramMap)&&void 0!==R||(this._paramMap=et(this.params)),this._paramMap}get queryParamMap(){var R;return null!==(R=this._queryParamMap)&&void 0!==R||(this._queryParamMap=et(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(S=>S.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ut extends Ss{constructor(R,N){super(N),this.url=R,Tt(this,N)}toString(){return Et(this._root)}}function Tt(w,R){R.value._routerState=w,R.children.forEach(N=>Tt(w,N))}function Et(w){const R=w.children.length>0?` { ${w.children.map(Et).join(", ")} } `:"";return`${w.value}${R}`}function Rt(w){if(w.snapshot){const R=w.snapshot,N=w._futureSnapshot;w.snapshot=N,ir(R.queryParams,N.queryParams)||w.queryParamsSubject.next(N.queryParams),R.fragment!==N.fragment&&w.fragmentSubject.next(N.fragment),ir(R.params,N.params)||w.paramsSubject.next(N.params),function Bn(w,R){if(w.length!==R.length)return!1;for(let N=0;N<w.length;++N)if(!ir(w[N],R[N]))return!1;return!0}(R.url,N.url)||w.urlSubject.next(N.url),ir(R.data,N.data)||w.dataSubject.next(N.data)}else w.snapshot=w._futureSnapshot,w.dataSubject.next(w._futureSnapshot.data)}function zt(w,R){const N=ir(w.params,R.params)&&function Vo(w,R){return qi(w,R)&&w.every((N,S)=>ir(N.parameters,R[S].parameters))}(w.url,R.url);return N&&!(!w.parent!=!R.parent)&&(!w.parent||zt(w.parent,R.parent))}function Yt(w){return"string"==typeof w.title||null===w.title}let qt=(()=>{var w;class R{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ht,this.activateEvents=new Q.bkB,this.deactivateEvents=new Q.bkB,this.attachEvents=new Q.bkB,this.detachEvents=new Q.bkB,this.parentContexts=(0,Q.WQX)(Po),this.location=(0,Q.WQX)(Q.c1b),this.changeDetector=(0,Q.WQX)(Q.gRc),this.environmentInjector=(0,Q.WQX)(Q.uvJ),this.inputBinder=(0,Q.WQX)(nr,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(S){if(S.name){const{firstChange:O,previousValue:q}=S.name;if(O)return;this.isTrackedInParentContexts(q)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(q)),this.initializeOutletWithName()}}ngOnDestroy(){var S;this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),null===(S=this.inputBinder)||void 0===S||S.unsubscribeFromRouteData(this)}isTrackedInParentContexts(S){var O;return(null===(O=this.parentContexts.getContext(S))||void 0===O?void 0:O.outlet)===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const S=this.parentContexts.getContext(this.name);null!=S&&S.route&&(S.attachRef?this.attach(S.attachRef,S.route):this.activateWith(S.route,S.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Q.wOt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Q.wOt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Q.wOt(4012,!1);this.location.detach();const S=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(S.instance),S}attach(S,O){var q;this.activated=S,this._activatedRoute=O,this.location.insert(S.hostView),null===(q=this.inputBinder)||void 0===q||q.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(S.instance)}deactivate(){if(this.activated){const S=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(S)}}activateWith(S,O){var q;if(this.isActivated)throw new Q.wOt(4013,!1);this._activatedRoute=S;const oe=this.location,wt=S.snapshot.component,Ve=this.parentContexts.getOrCreateContext(this.name).children,Jt=new _n(S,Ve,oe.injector);this.activated=oe.createComponent(wt,{index:oe.length,injector:Jt,environmentInjector:null!=O?O:this.environmentInjector}),this.changeDetector.markForCheck(),null===(q=this.inputBinder)||void 0===q||q.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return(w=R).\u0275fac=function(S){return new(S||w)},w.\u0275dir=Q.FsC({type:w,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Q.OA$]}),R})();class _n{__ngOutletInjector(R){return new _n(this.route,this.childContexts,R)}constructor(R,N,S){this.route=R,this.childContexts=N,this.parent=S}get(R,N){return R===he?this.route:R===Po?this.childContexts:this.parent.get(R,N)}}const nr=new Q.nKC("");let vr=(()=>{var w;class R{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(S){this.unsubscribeFromRouteData(S),this.subscribeToRouteData(S)}unsubscribeFromRouteData(S){var O;null===(O=this.outletDataSubscriptions.get(S))||void 0===O||O.unsubscribe(),this.outletDataSubscriptions.delete(S)}subscribeToRouteData(S){const{activatedRoute:O}=S,q=(0,Ge.z)([O.queryParams,O.params,O.data]).pipe((0,Kt.n)(([oe,Me,wt],Ve)=>(wt={...oe,...Me,...wt},0===Ve?(0,re.of)(wt):Promise.resolve(wt)))).subscribe(oe=>{if(!S.isActivated||!S.activatedComponentRef||S.activatedRoute!==O||null===O.component)return void this.unsubscribeFromRouteData(S);const Me=(0,Q.HJs)(O.component);if(Me)for(const{templateName:wt}of Me.inputs)S.activatedComponentRef.setInput(wt,oe[wt]);else this.unsubscribeFromRouteData(S)});this.outletDataSubscriptions.set(S,q)}}return(w=R).\u0275fac=function(S){return new(S||w)},w.\u0275prov=Q.jDH({token:w,factory:w.\u0275fac}),R})();function Ir(w,R,N){if(N&&w.shouldReuseRoute(R.value,N.value.snapshot)){const S=N.value;S._futureSnapshot=R.value;const O=function Er(w,R,N){return R.children.map(S=>{for(const O of N.children)if(w.shouldReuseRoute(S.value,O.value.snapshot))return Ir(w,S,O);return Ir(w,S)})}(w,R,N);return new wn(S,O)}{if(w.shouldAttach(R.value)){const q=w.retrieve(R.value);if(null!==q){const oe=q.route;return oe.value._futureSnapshot=R.value,oe.children=R.children.map(Me=>Ir(w,Me)),oe}}const S=function qr(w){return new he(new Se.t(w.url),new Se.t(w.params),new Se.t(w.queryParams),new Se.t(w.fragment),new Se.t(w.data),w.outlet,w.component,w)}(R.value),O=R.children.map(q=>Ir(w,q));return new wn(S,O)}}const Qi="ngNavigationCancelingError";function rs(w,R){const{redirectTo:N,navigationBehaviorOptions:S}=_i(R)?{redirectTo:R,navigationBehaviorOptions:void 0}:R,O=Wo(!1,yr.Redirect);return O.url=N,O.navigationBehaviorOptions=S,O}function Wo(w,R){const N=new Error(`NavigationCancelingError: ${w||""}`);return N[Qi]=!0,N.cancellationCode=R,N}function Rs(w){return!!w&&w[Qi]}let Cr=(()=>{var w;class R{}return(w=R).\u0275fac=function(S){return new(S||w)},w.\u0275cmp=Q.VBU({type:w,selectors:[["ng-component"]],standalone:!0,features:[Q.aNF],decls:1,vars:0,template:function(S,O){1&S&&Q.nrm(0,"router-outlet")},dependencies:[qt],encapsulation:2}),R})();function Ms(w){const R=w.children&&w.children.map(Ms),N=R?{...w,children:R}:{...w};return!N.component&&!N.loadComponent&&(R||N.loadChildren)&&N.outlet&&N.outlet!==Ht&&(N.component=Cr),N}function Bi(w){return w.outlet||Ht}function ho(w){var R;if(!w)return null;if(null!==(R=w.routeConfig)&&void 0!==R&&R._injector)return w.routeConfig._injector;for(let N=w.parent;N;N=N.parent){const S=N.routeConfig;if(null!=S&&S._loadedInjector)return S._loadedInjector;if(null!=S&&S._injector)return S._injector}return null}class Al{constructor(R,N,S,O,q){this.routeReuseStrategy=R,this.futureState=N,this.currState=S,this.forwardEvent=O,this.inputBindingEnabled=q}activate(R){const N=this.futureState._root,S=this.currState?this.currState._root:null;this.deactivateChildRoutes(N,S,R),Rt(this.futureState.root),this.activateChildRoutes(N,S,R)}deactivateChildRoutes(R,N,S){const O=ns(N);R.children.forEach(q=>{const oe=q.value.outlet;this.deactivateRoutes(q,O[oe],S),delete O[oe]}),Object.values(O).forEach(q=>{this.deactivateRouteAndItsChildren(q,S)})}deactivateRoutes(R,N,S){const O=R.value,q=N?N.value:null;if(O===q)if(O.component){const oe=S.getContext(O.outlet);oe&&this.deactivateChildRoutes(R,N,oe.children)}else this.deactivateChildRoutes(R,N,S);else q&&this.deactivateRouteAndItsChildren(N,S)}deactivateRouteAndItsChildren(R,N){R.value.component&&this.routeReuseStrategy.shouldDetach(R.value.snapshot)?this.detachAndStoreRouteSubtree(R,N):this.deactivateRouteAndOutlet(R,N)}detachAndStoreRouteSubtree(R,N){const S=N.getContext(R.value.outlet),O=S&&R.value.component?S.children:N,q=ns(R);for(const oe of Object.values(q))this.deactivateRouteAndItsChildren(oe,O);if(S&&S.outlet){const oe=S.outlet.detach(),Me=S.children.onOutletDeactivated();this.routeReuseStrategy.store(R.value.snapshot,{componentRef:oe,route:R,contexts:Me})}}deactivateRouteAndOutlet(R,N){const S=N.getContext(R.value.outlet),O=S&&R.value.component?S.children:N,q=ns(R);for(const oe of Object.values(q))this.deactivateRouteAndItsChildren(oe,O);S&&(S.outlet&&(S.outlet.deactivate(),S.children.onOutletDeactivated()),S.attachRef=null,S.route=null)}activateChildRoutes(R,N,S){const O=ns(N);R.children.forEach(q=>{this.activateRoutes(q,O[q.value.outlet],S),this.forwardEvent(new wl(q.value.snapshot))}),R.children.length&&this.forwardEvent(new Da(R.value.snapshot))}activateRoutes(R,N,S){const O=R.value,q=N?N.value:null;if(Rt(O),O===q)if(O.component){const oe=S.getOrCreateContext(O.outlet);this.activateChildRoutes(R,N,oe.children)}else this.activateChildRoutes(R,N,S);else if(O.component){const oe=S.getOrCreateContext(O.outlet);if(this.routeReuseStrategy.shouldAttach(O.snapshot)){const Me=this.routeReuseStrategy.retrieve(O.snapshot);this.routeReuseStrategy.store(O.snapshot,null),oe.children.onOutletReAttached(Me.contexts),oe.attachRef=Me.componentRef,oe.route=Me.route.value,oe.outlet&&oe.outlet.attach(Me.componentRef,Me.route.value),Rt(Me.route.value),this.activateChildRoutes(R,null,oe.children)}else{const Me=ho(O.snapshot);oe.attachRef=null,oe.route=O,oe.injector=Me,oe.outlet&&oe.outlet.activateWith(O,oe.injector),this.activateChildRoutes(R,null,oe.children)}}else this.activateChildRoutes(R,null,S)}}class Dl{constructor(R){this.path=R,this.route=this.path[this.path.length-1]}}class xs{constructor(R,N){this.component=R,this.route=N}}function Sl(w,R,N){const S=w._root;return ia(S,R?R._root:null,N,[S.value])}function Ns(w,R){const N=Symbol(),S=R.get(w,N);return S===N?"function"!=typeof w||(0,Q.LfX)(w)?R.get(w):w:S}function ia(w,R,N,S,O={canDeactivateChecks:[],canActivateChecks:[]}){const q=ns(R);return w.children.forEach(oe=>{(function j(w,R,N,S,O={canDeactivateChecks:[],canActivateChecks:[]}){const q=w.value,oe=R?R.value:null,Me=N?N.getContext(w.value.outlet):null;if(oe&&q.routeConfig===oe.routeConfig){const wt=function F(w,R,N){if("function"==typeof N)return N(w,R);switch(N){case"pathParamsChange":return!qi(w.url,R.url);case"pathParamsOrQueryParamsChange":return!qi(w.url,R.url)||!ir(w.queryParams,R.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!zt(w,R)||!ir(w.queryParams,R.queryParams);default:return!zt(w,R)}}(oe,q,q.routeConfig.runGuardsAndResolvers);wt?O.canActivateChecks.push(new Dl(S)):(q.data=oe.data,q._resolvedData=oe._resolvedData),ia(w,R,q.component?Me?Me.children:null:N,S,O),wt&&Me&&Me.outlet&&Me.outlet.isActivated&&O.canDeactivateChecks.push(new xs(Me.outlet.component,oe))}else oe&&ne(R,Me,O),O.canActivateChecks.push(new Dl(S)),ia(w,null,q.component?Me?Me.children:null:N,S,O)})(oe,q[oe.value.outlet],N,S.concat([oe.value]),O),delete q[oe.value.outlet]}),Object.entries(q).forEach(([oe,Me])=>ne(Me,N.getContext(oe),O)),O}function ne(w,R,N){const S=ns(w),O=w.value;Object.entries(S).forEach(([q,oe])=>{ne(oe,O.component?R?R.children.getContext(q):null:R,N)}),N.canDeactivateChecks.push(new xs(O.component&&R&&R.outlet&&R.outlet.isActivated?R.outlet.component:null,O))}function $(w){return"function"==typeof w}function os(w){return w instanceof me||"EmptyError"===(null==w?void 0:w.name)}const fs=Symbol("INITIAL_VALUE");function Ma(){return(0,Kt.n)(w=>(0,Ge.z)(w.map(R=>R.pipe(ct(1),function fe(...w){const R=(0,it.lI)(w);return(0,nt.N)((N,S)=>{(R?Xe(w,N,R):Xe(w,N)).subscribe(S)})}(fs)))).pipe((0,At.T)(R=>{for(const N of R)if(!0!==N){if(N===fs)return fs;if(!1===N||N instanceof mr)return N}return!0}),(0,Y.p)(R=>R!==fs),ct(1)))}function vi(w){return(0,We.F)(pt(R=>{if(_i(R))throw rs(0,R)}),(0,At.T)(R=>!0===R))}class Ri{constructor(R){this.segmentGroup=R||null}}class ks extends Error{constructor(R){super(),this.urlTree=R}}function jr(w){return at(new Ri(w))}class Os{constructor(R,N){this.urlSerializer=R,this.urlTree=N}lineralizeSegments(R,N){let S=[],O=N.root;for(;;){if(S=S.concat(O.segments),0===O.numberOfChildren)return(0,re.of)(S);if(O.numberOfChildren>1||!O.children[Ht])return at(new Q.wOt(4e3,!1));O=O.children[Ht]}}applyRedirectCommands(R,N,S){const O=this.applyRedirectCreateUrlTree(N,this.urlSerializer.parse(N),R,S);if(N.startsWith("/"))throw new ks(O);return O}applyRedirectCreateUrlTree(R,N,S,O){const q=this.createSegmentGroup(R,N.root,S,O);return new mr(q,this.createQueryParams(N.queryParams,this.urlTree.queryParams),N.fragment)}createQueryParams(R,N){const S={};return Object.entries(R).forEach(([O,q])=>{if("string"==typeof q&&q.startsWith(":")){const Me=q.substring(1);S[O]=N[Me]}else S[O]=q}),S}createSegmentGroup(R,N,S,O){const q=this.createSegments(R,N.segments,S,O);let oe={};return Object.entries(N.children).forEach(([Me,wt])=>{oe[Me]=this.createSegmentGroup(R,wt,S,O)}),new pn(q,oe)}createSegments(R,N,S,O){return N.map(q=>q.path.startsWith(":")?this.findPosParam(R,q,O):this.findOrReturn(q,S))}findPosParam(R,N,S){const O=S[N.path.substring(1)];if(!O)throw new Q.wOt(4001,!1);return O}findOrReturn(R,N){let S=0;for(const O of N){if(O.path===R.path)return N.splice(S),O;S++}return R}}const xa={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Bt(w,R,N,S,O){const q=fo(w,R,N);return q.matched?(S=function Ra(w,R){var N;return w.providers&&!w._injector&&(w._injector=(0,Q.Ol2)(w.providers,R,`Route: ${w.path}`)),null!==(N=w._injector)&&void 0!==N?N:R}(R,S),function Yi(w,R,N,S){const O=R.canMatch;if(!O||0===O.length)return(0,re.of)(!0);const q=O.map(oe=>{const Me=Ns(oe,w);return Ln(function hs(w){return w&&$(w.canMatch)}(Me)?Me.canMatch(R,N):(0,Q.N4e)(w,()=>Me(R,N)))});return(0,re.of)(q).pipe(Ma(),vi())}(S,R,N).pipe((0,At.T)(oe=>!0===oe?q:{...xa}))):(0,re.of)(q)}function fo(w,R,N){var S,O;if("**"===R.path)return function $i(w){return{matched:!0,parameters:w.length>0?sn(w).parameters:{},consumedSegments:w,remainingSegments:[],positionalParamSegments:{}}}(N);if(""===R.path)return"full"===R.pathMatch&&(w.hasChildren()||N.length>0)?{...xa}:{matched:!0,consumedSegments:[],remainingSegments:N,parameters:{},positionalParamSegments:{}};const oe=(R.matcher||Gt)(N,w,R);if(!oe)return{...xa};const Me={};Object.entries(null!==(S=oe.posParams)&&void 0!==S?S:{}).forEach(([Ve,Jt])=>{Me[Ve]=Jt.path});const wt=oe.consumed.length>0?{...Me,...oe.consumed[oe.consumed.length-1].parameters}:Me;return{matched:!0,consumedSegments:oe.consumed,remainingSegments:N.slice(oe.consumed.length),parameters:wt,positionalParamSegments:null!==(O=oe.posParams)&&void 0!==O?O:{}}}function Rl(w,R,N,S){return N.length>0&&function uc(w,R,N){return N.some(S=>Fs(w,R,S)&&Bi(S)!==Ht)}(w,N,S)?{segmentGroup:new pn(R,Yu(S,new pn(N,w.children))),slicedSegments:[]}:0===N.length&&function Ju(w,R,N){return N.some(S=>Fs(w,R,S))}(w,N,S)?{segmentGroup:new pn(w.segments,Pl(w,N,S,w.children)),slicedSegments:N}:{segmentGroup:new pn(w.segments,w.children),slicedSegments:N}}function Pl(w,R,N,S){const O={};for(const q of N)if(Fs(w,R,q)&&!S[Bi(q)]){const oe=new pn([],{});O[Bi(q)]=oe}return{...S,...O}}function Yu(w,R){const N={};N[Ht]=R;for(const S of w)if(""===S.path&&Bi(S)!==Ht){const O=new pn([],{});N[Bi(S)]=O}return N}function Fs(w,R,N){return(!(w.hasChildren()||R.length>0)||"full"!==N.pathMatch)&&""===N.path}class Ml{}class zr{constructor(R,N,S,O,q,oe,Me){this.injector=R,this.configLoader=N,this.rootComponentType=S,this.config=O,this.urlTree=q,this.paramsInheritanceStrategy=oe,this.urlSerializer=Me,this.applyRedirects=new Os(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(R){return new Q.wOt(4002,`'${R.segmentGroup}'`)}recognize(){const R=Rl(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(R).pipe((0,At.T)(N=>{const S=new Ee([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ht,this.rootComponentType,null,{}),O=new wn(S,N),q=new ut("",O),oe=function So(w,R,N=null,S=null){return jo($o(w),R,N,S)}(S,[],this.urlTree.queryParams,this.urlTree.fragment);return oe.queryParams=this.urlTree.queryParams,q.url=this.urlSerializer.serialize(oe),this.inheritParamsAndData(q._root,null),{state:q,tree:oe}}))}match(R){return this.processSegmentGroup(this.injector,this.config,R,Ht).pipe(Mt(S=>{if(S instanceof ks)return this.urlTree=S.urlTree,this.match(S.urlTree.root);throw S instanceof Ri?this.noMatchError(S):S}))}inheritParamsAndData(R,N){const S=R.value,O=be(S,N,this.paramsInheritanceStrategy);S.params=Object.freeze(O.params),S.data=Object.freeze(O.data),R.children.forEach(q=>this.inheritParamsAndData(q,S))}processSegmentGroup(R,N,S,O){return 0===S.segments.length&&S.hasChildren()?this.processChildren(R,N,S):this.processSegment(R,N,S,S.segments,O,!0).pipe((0,At.T)(q=>q instanceof wn?[q]:[]))}processChildren(R,N,S){const O=[];for(const q of Object.keys(S.children))"primary"===q?O.unshift(q):O.push(q);return(0,He.H)(O).pipe(Le(q=>{const oe=S.children[q],Me=function is(w,R){const N=w.filter(S=>Bi(S)===R);return N.push(...w.filter(S=>Bi(S)!==R)),N}(N,q);return this.processSegmentGroup(R,Me,oe,q)}),function $t(w,R){return(0,nt.N)(function Dn(w,R,N,S,O){return(q,oe)=>{let Me=N,wt=R,Ve=0;q.subscribe((0,_t._)(oe,Jt=>{const Pn=Ve++;wt=Me?w(wt,Jt,Pn):(Me=!0,Jt),S&&oe.next(wt)},O&&(()=>{Me&&oe.next(wt),oe.complete()})))}}(w,R,arguments.length>=2,!0))}((q,oe)=>(q.push(...oe),q)),J(null),function In(w,R){const N=arguments.length>=2;return S=>S.pipe(w?(0,Y.p)((O,q)=>w(O,q,S)):Re.D,gn(1),N?J(R):ie(()=>new me))}(),(0,Ne.Z)(q=>{if(null===q)return jr(S);const oe=sa(q);return function Za(w){w.sort((R,N)=>R.value.outlet===Ht?-1:N.value.outlet===Ht?1:R.value.outlet.localeCompare(N.value.outlet))}(oe),(0,re.of)(oe)}))}processSegment(R,N,S,O,q,oe){return(0,He.H)(N).pipe(Le(Me=>{var wt;return this.processSegmentAgainstRoute(null!==(wt=Me._injector)&&void 0!==wt?wt:R,N,Me,S,O,q,oe).pipe(Mt(Ve=>{if(Ve instanceof Ri)return(0,re.of)(null);throw Ve}))}),Ue(Me=>!!Me),Mt(Me=>{if(os(Me))return function Gc(w,R,N){return 0===R.length&&!w.children[N]}(S,O,q)?(0,re.of)(new Ml):jr(S);throw Me}))}processSegmentAgainstRoute(R,N,S,O,q,oe,Me){return function ps(w,R,N,S){return!!(Bi(w)===S||S!==Ht&&Fs(R,N,w))&&fo(R,w,N).matched}(S,O,q,oe)?void 0===S.redirectTo?this.matchSegmentAgainstRoute(R,O,S,q,oe):this.allowRedirects&&Me?this.expandSegmentAgainstRouteUsingRedirect(R,O,N,S,q,oe):jr(O):jr(O)}expandSegmentAgainstRouteUsingRedirect(R,N,S,O,q,oe){const{matched:Me,consumedSegments:wt,positionalParamSegments:Ve,remainingSegments:Jt}=fo(N,O,q);if(!Me)return jr(N);O.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const Pn=this.applyRedirects.applyRedirectCommands(wt,O.redirectTo,Ve);return this.applyRedirects.lineralizeSegments(O,Pn).pipe((0,Ne.Z)(si=>this.processSegment(R,S,N,si.concat(Jt),oe,!1)))}matchSegmentAgainstRoute(R,N,S,O,q){const oe=Bt(N,S,O,R);return"**"===S.path&&(N.children={}),oe.pipe((0,Kt.n)(Me=>{var wt;return Me.matched?(R=null!==(wt=S._injector)&&void 0!==wt?wt:R,this.getChildConfig(R,S,O).pipe((0,Kt.n)(({routes:Ve})=>{var Jt,Pn,si;const Dr=null!==(Jt=S._loadedInjector)&&void 0!==Jt?Jt:R,{consumedSegments:no,remainingSegments:rl,parameters:ss}=Me,Ll=new Ee(no,ss,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,function Zu(w){return w.data||{}}(S),Bi(S),null!==(Pn=null!==(si=S.component)&&void 0!==si?si:S._loadedComponent)&&void 0!==Pn?Pn:null,S,function ed(w){return w.resolve||{}}(S)),{segmentGroup:Xc,slicedSegments:Vl}=Rl(N,no,rl,Ve);if(0===Vl.length&&Xc.hasChildren())return this.processChildren(Dr,Ve,Xc).pipe((0,At.T)(Qc=>null===Qc?null:new wn(Ll,Qc)));if(0===Ve.length&&0===Vl.length)return(0,re.of)(new wn(Ll,[]));const Uy=Bi(S)===q;return this.processSegment(Dr,Ve,Xc,Vl,Uy?Ht:q,!0).pipe((0,At.T)(Qc=>new wn(Ll,Qc instanceof wn?[Qc]:[])))}))):jr(N)}))}getChildConfig(R,N,S){return N.children?(0,re.of)({routes:N.children,injector:R}):N.loadChildren?void 0!==N._loadedRoutes?(0,re.of)({routes:N._loadedRoutes,injector:N._loadedInjector}):function pi(w,R,N,S){const O=R.canLoad;if(void 0===O||0===O.length)return(0,re.of)(!0);const q=O.map(oe=>{const Me=Ns(oe,w);return Ln(function Ot(w){return w&&$(w.canLoad)}(Me)?Me.canLoad(R,N):(0,Q.N4e)(w,()=>Me(R,N)))});return(0,re.of)(q).pipe(Ma(),vi())}(R,N,S).pipe((0,Ne.Z)(O=>O?this.configLoader.loadChildren(R,N).pipe(pt(q=>{N._loadedRoutes=q.routes,N._loadedInjector=q.injector})):function Pi(w){return at(Wo(!1,yr.GuardRejected))}())):(0,re.of)({routes:[],injector:R})}}function qo(w){const R=w.value.routeConfig;return R&&""===R.path}function sa(w){const R=[],N=new Set;for(const S of w){if(!qo(S)){R.push(S);continue}const O=R.find(q=>S.value.routeConfig===q.value.routeConfig);void 0!==O?(O.children.push(...S.children),N.add(O)):R.push(S)}for(const S of N){const O=sa(S.children);R.push(new wn(S.value,O))}return R.filter(S=>!N.has(S))}function tl(w){const R=w.children.map(N=>tl(N)).flat();return[w,...R]}function Vs(w){return(0,Kt.n)(R=>{const N=w(R);return N?(0,He.H)(N).pipe((0,At.T)(()=>R)):(0,re.of)(R)})}let E=(()=>{var w;class R{buildTitle(S){let O,q=S.root;for(;void 0!==q;){var oe;O=null!==(oe=this.getResolvedTitleForRoute(q))&&void 0!==oe?oe:O,q=q.children.find(Me=>Me.outlet===Ht)}return O}getResolvedTitleForRoute(S){return S.data[Pe]}}return(w=R).\u0275fac=function(S){return new(S||w)},w.\u0275prov=Q.jDH({token:w,factory:()=>(0,Q.WQX)(P),providedIn:"root"}),R})(),P=(()=>{var w;class R extends E{constructor(S){super(),this.title=S}updateTitle(S){const O=this.buildTitle(S);void 0!==O&&this.title.setTitle(O)}}return(w=R).\u0275fac=function(S){return new(S||w)(Q.KVO(rr.hE))},w.\u0275prov=Q.jDH({token:w,factory:w.\u0275fac,providedIn:"root"}),R})();const m=new Q.nKC("",{providedIn:"root",factory:()=>({})}),p=new Q.nKC("");let A=(()=>{var w;class R{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,Q.WQX)(Q.Ql9)}loadComponent(S){if(this.componentLoaders.get(S))return this.componentLoaders.get(S);if(S._loadedComponent)return(0,re.of)(S._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(S);const O=Ln(S.loadComponent()).pipe((0,At.T)(te),pt(oe=>{this.onLoadEndListener&&this.onLoadEndListener(S),S._loadedComponent=oe}),er(()=>{this.componentLoaders.delete(S)})),q=new Pt(O,()=>new Ft.B).pipe(Ye());return this.componentLoaders.set(S,q),q}loadChildren(S,O){if(this.childrenLoaders.get(O))return this.childrenLoaders.get(O);if(O._loadedRoutes)return(0,re.of)({routes:O._loadedRoutes,injector:O._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(O);const oe=function C(w,R,N,S){return Ln(w.loadChildren()).pipe((0,At.T)(te),(0,Ne.Z)(O=>O instanceof Q.Co$||Array.isArray(O)?(0,re.of)(O):(0,He.H)(R.compileModuleAsync(O))),(0,At.T)(O=>{S&&S(w);let q,oe,Me=!1;return Array.isArray(O)?(oe=O,!0):(q=O.create(N).injector,oe=q.get(p,[],{optional:!0,self:!0}).flat()),{routes:oe.map(Ms),injector:q}}))}(O,this.compiler,S,this.onLoadEndListener).pipe(er(()=>{this.childrenLoaders.delete(O)})),Me=new Pt(oe,()=>new Ft.B).pipe(Ye());return this.childrenLoaders.set(O,Me),Me}}return(w=R).\u0275fac=function(S){return new(S||w)},w.\u0275prov=Q.jDH({token:w,factory:w.\u0275fac,providedIn:"root"}),R})();function te(w){return function z(w){return w&&"object"==typeof w&&"default"in w}(w)?w.default:w}let ve=(()=>{var w;class R{}return(w=R).\u0275fac=function(S){return new(S||w)},w.\u0275prov=Q.jDH({token:w,factory:()=>(0,Q.WQX)(ft),providedIn:"root"}),R})(),ft=(()=>{var w;class R{shouldProcessUrl(S){return!0}extract(S){return S}merge(S,O){return S}}return(w=R).\u0275fac=function(S){return new(S||w)},w.\u0275prov=Q.jDH({token:w,factory:w.\u0275fac,providedIn:"root"}),R})();const an=new Q.nKC(""),Nn=new Q.nKC("");function Qn(w,R,N){const S=w.get(Nn),O=w.get(nn.qQ);return w.get(Q.SKi).runOutsideAngular(()=>{if(!O.startViewTransition||S.skipNextTransition)return S.skipNextTransition=!1,new Promise(Ve=>setTimeout(Ve));let q;const oe=new Promise(Ve=>{q=Ve}),Me=O.startViewTransition(()=>(q(),function An(w){return new Promise(R=>{(0,Q.mal)(R,{injector:w})})}(w))),{onViewTransitionCreated:wt}=S;return wt&&(0,Q.N4e)(w,()=>wt({transition:Me,from:R,to:N})),oe})}let Yn=(()=>{var w;class R{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ft.B,this.transitionAbortSubject=new Ft.B,this.configLoader=(0,Q.WQX)(A),this.environmentInjector=(0,Q.WQX)(Q.uvJ),this.urlSerializer=(0,Q.WQX)(Ae),this.rootContexts=(0,Q.WQX)(Po),this.location=(0,Q.WQX)(nn.aZ),this.inputBindingEnabled=null!==(0,Q.WQX)(nr,{optional:!0}),this.titleStrategy=(0,Q.WQX)(E),this.options=(0,Q.WQX)(m,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=(0,Q.WQX)(ve),this.createViewTransition=(0,Q.WQX)(an,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,re.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=q=>this.events.next(new Qa(q)),this.configLoader.onLoadStartListener=q=>this.events.next(new $r(q))}complete(){var S;null===(S=this.transitions)||void 0===S||S.complete()}handleNavigationRequest(S){var O;const q=++this.navigationId;null===(O=this.transitions)||void 0===O||O.next({...this.transitions.value,...S,id:q})}setupNavigations(S,O,q){return this.transitions=new Se.t({id:0,currentUrlTree:O,currentRawUrl:O,extractedUrl:this.urlHandlingStrategy.extract(O),urlAfterRedirects:this.urlHandlingStrategy.extract(O),rawUrl:O,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ao,restoredState:null,currentSnapshot:q.snapshot,targetSnapshot:null,currentRouterState:q,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Y.p)(oe=>0!==oe.id),(0,At.T)(oe=>({...oe,extractedUrl:this.urlHandlingStrategy.extract(oe.rawUrl)})),(0,Kt.n)(oe=>{let Me=!1,wt=!1;return(0,re.of)(oe).pipe((0,Kt.n)(Ve=>{var Jt;if(this.navigationId>oe.id)return this.cancelNavigationTransition(oe,"",yr.SupersededByNewNavigation),pe;this.currentTransition=oe,this.currentNavigation={id:Ve.id,initialUrl:Ve.rawUrl,extractedUrl:Ve.extractedUrl,trigger:Ve.source,extras:Ve.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const Pn=!S.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),si=null!==(Jt=Ve.extras.onSameUrlNavigation)&&void 0!==Jt?Jt:S.onSameUrlNavigation;if(!Pn&&"reload"!==si){const Dr="";return this.events.next(new es(Ve.id,this.urlSerializer.serialize(Ve.rawUrl),Dr,yn.IgnoredSameUrlNavigation)),Ve.resolve(null),pe}if(this.urlHandlingStrategy.shouldProcessUrl(Ve.rawUrl))return(0,re.of)(Ve).pipe((0,Kt.n)(Dr=>{var no,rl;const ss=null===(no=this.transitions)||void 0===no?void 0:no.getValue();return this.events.next(new lo(Dr.id,this.urlSerializer.serialize(Dr.extractedUrl),Dr.source,Dr.restoredState)),ss!==(null===(rl=this.transitions)||void 0===rl?void 0:rl.getValue())?pe:Promise.resolve(Dr)}),function dh(w,R,N,S,O,q){return(0,Ne.Z)(oe=>function dc(w,R,N,S,O,q,oe="emptyOnly"){return new zr(w,R,N,S,O,oe,q).recognize()}(w,R,N,S,oe.extractedUrl,O,q).pipe((0,At.T)(({state:Me,tree:wt})=>({...oe,targetSnapshot:Me,urlAfterRedirects:wt}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,S.config,this.urlSerializer,this.paramsInheritanceStrategy),pt(Dr=>{oe.targetSnapshot=Dr.targetSnapshot,oe.urlAfterRedirects=Dr.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:Dr.urlAfterRedirects};const no=new ta(Dr.id,this.urlSerializer.serialize(Dr.extractedUrl),this.urlSerializer.serialize(Dr.urlAfterRedirects),Dr.targetSnapshot);this.events.next(no)}));if(Pn&&this.urlHandlingStrategy.shouldProcessUrl(Ve.currentRawUrl)){const{id:Dr,extractedUrl:no,source:rl,restoredState:ss,extras:Ll}=Ve,Xc=new lo(Dr,this.urlSerializer.serialize(no),rl,ss);this.events.next(Xc);const Vl=Z(this.rootComponentType).snapshot;return this.currentTransition=oe={...Ve,targetSnapshot:Vl,urlAfterRedirects:no,extras:{...Ll,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=no,(0,re.of)(oe)}{const Dr="";return this.events.next(new es(Ve.id,this.urlSerializer.serialize(Ve.extractedUrl),Dr,yn.IgnoredByUrlHandlingStrategy)),Ve.resolve(null),pe}}),pt(Ve=>{const Jt=new El(Ve.id,this.urlSerializer.serialize(Ve.extractedUrl),this.urlSerializer.serialize(Ve.urlAfterRedirects),Ve.targetSnapshot);this.events.next(Jt)}),(0,At.T)(Ve=>(this.currentTransition=oe={...Ve,guards:Sl(Ve.targetSnapshot,Ve.currentSnapshot,this.rootContexts)},oe)),function Ja(w,R){return(0,Ne.Z)(N=>{const{targetSnapshot:S,currentSnapshot:O,guards:{canActivateChecks:q,canDeactivateChecks:oe}}=N;return 0===oe.length&&0===q.length?(0,re.of)({...N,guardsResult:!0}):function lp(w,R,N,S){return(0,He.H)(w).pipe((0,Ne.Z)(O=>function sr(w,R,N,S,O){const q=R&&R.routeConfig?R.routeConfig.canDeactivate:null;if(!q||0===q.length)return(0,re.of)(!0);const oe=q.map(Me=>{var wt;const Ve=null!==(wt=ho(R))&&void 0!==wt?wt:O,Jt=Ns(Me,Ve);return Ln(function di(w){return w&&$(w.canDeactivate)}(Jt)?Jt.canDeactivate(w,R,N,S):(0,Q.N4e)(Ve,()=>Jt(w,R,N,S))).pipe(Ue())});return(0,re.of)(oe).pipe(Ma())}(O.component,O.route,N,R,S)),Ue(O=>!0!==O,!0))}(oe,S,O,w).pipe((0,Ne.Z)(Me=>Me&&function le(w){return"boolean"==typeof w}(Me)?function uh(w,R,N,S){return(0,He.H)(R).pipe(Le(O=>Xe(function Qu(w,R){return null!==w&&R&&R(new gt(w)),(0,re.of)(!0)}(O.route.parent,S),function oa(w,R){return null!==w&&R&&R(new Cl(w)),(0,re.of)(!0)}(O.route,S),function cc(w,R,N){const S=R[R.length-1],q=R.slice(0,R.length-1).reverse().map(oe=>function lc(w){const R=w.routeConfig?w.routeConfig.canActivateChild:null;return R&&0!==R.length?{node:w,guards:R}:null}(oe)).filter(oe=>null!==oe).map(oe=>vt(()=>{const Me=oe.guards.map(wt=>{var Ve;const Jt=null!==(Ve=ho(oe.node))&&void 0!==Ve?Ve:N,Pn=Ns(wt,Jt);return Ln(function xn(w){return w&&$(w.canActivateChild)}(Pn)?Pn.canActivateChild(S,w):(0,Q.N4e)(Jt,()=>Pn(S,w))).pipe(Ue())});return(0,re.of)(Me).pipe(Ma())}));return(0,re.of)(q).pipe(Ma())}(w,O.path,N),function zc(w,R,N){const S=R.routeConfig?R.routeConfig.canActivate:null;if(!S||0===S.length)return(0,re.of)(!0);const O=S.map(q=>vt(()=>{var oe;const Me=null!==(oe=ho(R))&&void 0!==oe?oe:N,wt=Ns(q,Me);return Ln(function bn(w){return w&&$(w.canActivate)}(wt)?wt.canActivate(R,w):(0,Q.N4e)(Me,()=>wt(R,w))).pipe(Ue())}));return(0,re.of)(O).pipe(Ma())}(w,O.route,N))),Ue(O=>!0!==O,!0))}(S,q,w,R):(0,re.of)(Me)),(0,At.T)(Me=>({...N,guardsResult:Me})))})}(this.environmentInjector,Ve=>this.events.next(Ve)),pt(Ve=>{if(oe.guardsResult=Ve.guardsResult,_i(Ve.guardsResult))throw rs(0,Ve.guardsResult);const Jt=new na(Ve.id,this.urlSerializer.serialize(Ve.extractedUrl),this.urlSerializer.serialize(Ve.urlAfterRedirects),Ve.targetSnapshot,!!Ve.guardsResult);this.events.next(Jt)}),(0,Y.p)(Ve=>!!Ve.guardsResult||(this.cancelNavigationTransition(Ve,"",yr.GuardRejected),!1)),Vs(Ve=>{if(Ve.guards.canActivateChecks.length)return(0,re.of)(Ve).pipe(pt(Jt=>{const Pn=new Ds(Jt.id,this.urlSerializer.serialize(Jt.extractedUrl),this.urlSerializer.serialize(Jt.urlAfterRedirects),Jt.targetSnapshot);this.events.next(Pn)}),(0,Kt.n)(Jt=>{let Pn=!1;return(0,re.of)(Jt).pipe(function el(w,R){return(0,Ne.Z)(N=>{const{targetSnapshot:S,guards:{canActivateChecks:O}}=N;if(!O.length)return(0,re.of)(N);const q=new Set(O.map(wt=>wt.route)),oe=new Set;for(const wt of q)if(!oe.has(wt))for(const Ve of tl(wt))oe.add(Ve);let Me=0;return(0,He.H)(oe).pipe(Le(wt=>q.has(wt)?function td(w,R,N,S){const O=w.routeConfig,q=w._resolve;return void 0!==(null==O?void 0:O.title)&&!Yt(O)&&(q[Pe]=O.title),function hh(w,R,N,S){const O=$n(w);if(0===O.length)return(0,re.of)({});const q={};return(0,He.H)(O).pipe((0,Ne.Z)(oe=>function Wc(w,R,N,S){var O;const q=null!==(O=ho(R))&&void 0!==O?O:S,oe=Ns(w,q);return Ln(oe.resolve?oe.resolve(R,N):(0,Q.N4e)(q,()=>oe(R,N)))}(w[oe],R,N,S).pipe(Ue(),pt(Me=>{q[oe]=Me}))),gn(1),function Mn(w){return(0,At.T)(()=>w)}(q),Mt(oe=>os(oe)?pe:at(oe)))}(q,w,R,S).pipe((0,At.T)(oe=>(w._resolvedData=oe,w.data=be(w,w.parent,N).resolve,null)))}(wt,S,w,R):(wt.data=be(wt,wt.parent,w).resolve,(0,re.of)(void 0))),pt(()=>Me++),gn(1),(0,Ne.Z)(wt=>Me===oe.size?(0,re.of)(N):pe))})}(this.paramsInheritanceStrategy,this.environmentInjector),pt({next:()=>Pn=!0,complete:()=>{Pn||this.cancelNavigationTransition(Jt,"",yr.NoDataFromResolver)}}))}),pt(Jt=>{const Pn=new Fn(Jt.id,this.urlSerializer.serialize(Jt.extractedUrl),this.urlSerializer.serialize(Jt.urlAfterRedirects),Jt.targetSnapshot);this.events.next(Pn)}))}),Vs(Ve=>{const Jt=Pn=>{var si;const Dr=[];null!==(si=Pn.routeConfig)&&void 0!==si&&si.loadComponent&&!Pn.routeConfig._loadedComponent&&Dr.push(this.configLoader.loadComponent(Pn.routeConfig).pipe(pt(no=>{Pn.component=no}),(0,At.T)(()=>{})));for(const no of Pn.children)Dr.push(...Jt(no));return Dr};return(0,Ge.z)(Jt(Ve.targetSnapshot.root)).pipe(J(null),ct(1))}),Vs(()=>this.afterPreactivation()),(0,Kt.n)(()=>{var Ve;const{currentSnapshot:Jt,targetSnapshot:Pn}=oe,si=null===(Ve=this.createViewTransition)||void 0===Ve?void 0:Ve.call(this,this.environmentInjector,Jt.root,Pn.root);return si?(0,He.H)(si).pipe((0,At.T)(()=>oe)):(0,re.of)(oe)}),(0,At.T)(Ve=>{const Jt=function Xn(w,R,N){const S=Ir(w,R._root,N?N._root:void 0);return new U(S,R)}(S.routeReuseStrategy,Ve.targetSnapshot,Ve.currentRouterState);return this.currentTransition=oe={...Ve,targetRouterState:Jt},this.currentNavigation.targetRouterState=Jt,oe}),pt(()=>{this.events.next(new ds)}),((w,R,N,S)=>(0,At.T)(O=>(new Al(R,O.targetRouterState,O.currentRouterState,N,S).activate(w),O)))(this.rootContexts,S.routeReuseStrategy,Ve=>this.events.next(Ve),this.inputBindingEnabled),ct(1),pt({next:Ve=>{var Jt;Me=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ni(Ve.id,this.urlSerializer.serialize(Ve.extractedUrl),this.urlSerializer.serialize(Ve.urlAfterRedirects))),null===(Jt=this.titleStrategy)||void 0===Jt||Jt.updateTitle(Ve.targetRouterState.snapshot),Ve.resolve(!0)},complete:()=>{Me=!0}}),function Dt(w){return(0,nt.N)((R,N)=>{(0,Qe.Tg)(w).subscribe((0,_t._)(N,()=>N.complete(),En.l)),!N.closed&&R.subscribe(N)})}(this.transitionAbortSubject.pipe(pt(Ve=>{throw Ve}))),er(()=>{var Ve;!Me&&!wt&&this.cancelNavigationTransition(oe,"",yr.SupersededByNewNavigation),(null===(Ve=this.currentTransition)||void 0===Ve?void 0:Ve.id)===oe.id&&(this.currentNavigation=null,this.currentTransition=null)}),Mt(Ve=>{if(wt=!0,Rs(Ve))this.events.next(new or(oe.id,this.urlSerializer.serialize(oe.extractedUrl),Ve.message,Ve.cancellationCode)),function Ya(w){return Rs(w)&&_i(w.url)}(Ve)?this.events.next(new co(Ve.url)):oe.resolve(!1);else{var Jt;this.events.next(new ri(oe.id,this.urlSerializer.serialize(oe.extractedUrl),Ve,null!==(Jt=oe.targetSnapshot)&&void 0!==Jt?Jt:void 0));try{oe.resolve(S.errorHandler(Ve))}catch(Pn){this.options.resolveNavigationPromiseOnError?oe.resolve(!1):oe.reject(Pn)}}return pe}))}))}cancelNavigationTransition(S,O,q){const oe=new or(S.id,this.urlSerializer.serialize(S.extractedUrl),O,q);this.events.next(oe),S.resolve(!1)}isUpdatingInternalState(){var S,O;return(null===(S=this.currentTransition)||void 0===S?void 0:S.extractedUrl.toString())!==(null===(O=this.currentTransition)||void 0===O?void 0:O.currentUrlTree.toString())}isUpdatedBrowserUrl(){var S,O;return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==(null===(S=this.currentTransition)||void 0===S?void 0:S.extractedUrl.toString())&&!(null!==(O=this.currentTransition)&&void 0!==O&&O.extras.skipLocationChange)}}return(w=R).\u0275fac=function(S){return new(S||w)},w.\u0275prov=Q.jDH({token:w,factory:w.\u0275fac,providedIn:"root"}),R})();function zn(w){return w!==ao}let Pr=(()=>{var w;class R{}return(w=R).\u0275fac=function(S){return new(S||w)},w.\u0275prov=Q.jDH({token:w,factory:()=>(0,Q.WQX)(Lt),providedIn:"root"}),R})();class ur{shouldDetach(R){return!1}store(R,N){}shouldAttach(R){return!1}retrieve(R){return null}shouldReuseRoute(R,N){return R.routeConfig===N.routeConfig}}let Lt=(()=>{var w;class R extends ur{}return(w=R).\u0275fac=(()=>{let N;return function(O){return(N||(N=Q.xGo(w)))(O||w)}})(),w.\u0275prov=Q.jDH({token:w,factory:w.\u0275fac,providedIn:"root"}),R})(),dn=(()=>{var w;class R{}return(w=R).\u0275fac=function(S){return new(S||w)},w.\u0275prov=Q.jDH({token:w,factory:()=>(0,Q.WQX)(wr),providedIn:"root"}),R})(),wr=(()=>{var w;class R extends dn{constructor(){super(...arguments),this.location=(0,Q.WQX)(nn.aZ),this.urlSerializer=(0,Q.WQX)(Ae),this.options=(0,Q.WQX)(m,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=(0,Q.WQX)(ve),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new mr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Z(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){var S,O;return"computed"!==this.canceledNavigationResolution?this.currentPageId:null!==(S=null===(O=this.restoredState())||void 0===O?void 0:O.\u0275routerPageId)&&void 0!==S?S:this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(S){return this.location.subscribe(O=>{"popstate"===O.type&&S(O.url,O.state)})}handleRouterEvent(S,O){if(S instanceof lo)this.stateMemento=this.createStateMemento();else if(S instanceof es)this.rawUrlTree=O.initialUrl;else if(S instanceof ta){if("eager"===this.urlUpdateStrategy&&!O.extras.skipLocationChange){const q=this.urlHandlingStrategy.merge(O.finalUrl,O.initialUrl);this.setBrowserUrl(q,O)}}else S instanceof ds?(this.currentUrlTree=O.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(O.finalUrl,O.initialUrl),this.routerState=O.targetRouterState,"deferred"===this.urlUpdateStrategy&&(O.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,O))):S instanceof or&&(S.code===yr.GuardRejected||S.code===yr.NoDataFromResolver)?this.restoreHistory(O):S instanceof ri?this.restoreHistory(O,!0):S instanceof ni&&(this.lastSuccessfulId=S.id,this.currentPageId=this.browserPageId)}setBrowserUrl(S,O){const q=this.urlSerializer.serialize(S);if(this.location.isCurrentPathEqualTo(q)||O.extras.replaceUrl){const Me={...O.extras.state,...this.generateNgRouterState(O.id,this.browserPageId)};this.location.replaceState(q,"",Me)}else{const oe={...O.extras.state,...this.generateNgRouterState(O.id,this.browserPageId+1)};this.location.go(q,"",oe)}}restoreHistory(S,O=!1){if("computed"===this.canceledNavigationResolution){const oe=this.currentPageId-this.browserPageId;0!==oe?this.location.historyGo(oe):this.currentUrlTree===S.finalUrl&&0===oe&&(this.resetState(S),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(O&&this.resetState(S),this.resetUrlToCurrentUrlTree())}resetState(S){var O;this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,null!==(O=S.finalUrl)&&void 0!==O?O:this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(S,O){return"computed"===this.canceledNavigationResolution?{navigationId:S,\u0275routerPageId:O}:{navigationId:S}}}return(w=R).\u0275fac=(()=>{let N;return function(O){return(N||(N=Q.xGo(w)))(O||w)}})(),w.\u0275prov=Q.jDH({token:w,factory:w.\u0275fac,providedIn:"root"}),R})();var Yr=function(w){return w[w.COMPLETE=0]="COMPLETE",w[w.FAILED=1]="FAILED",w[w.REDIRECTING=2]="REDIRECTING",w}(Yr||{});function Kr(w,R){w.events.pipe((0,Y.p)(N=>N instanceof ni||N instanceof or||N instanceof ri||N instanceof es),(0,At.T)(N=>N instanceof ni||N instanceof es?Yr.COMPLETE:N instanceof or&&(N.code===yr.Redirect||N.code===yr.SupersededByNewNavigation)?Yr.REDIRECTING:Yr.FAILED),(0,Y.p)(N=>N!==Yr.REDIRECTING),ct(1)).subscribe(()=>{R()})}function ji(w){throw w}const Us={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},oi={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Nr=(()=>{var w;class R{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){var S,O;this.disposed=!1,this.isNgZoneEnabled=!1,this.console=(0,Q.WQX)(Q.H3F),this.stateManager=(0,Q.WQX)(dn),this.options=(0,Q.WQX)(m,{optional:!0})||{},this.pendingTasks=(0,Q.WQX)(Q.TgB),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=(0,Q.WQX)(Yn),this.urlSerializer=(0,Q.WQX)(Ae),this.location=(0,Q.WQX)(nn.aZ),this.urlHandlingStrategy=(0,Q.WQX)(ve),this._events=new Ft.B,this.errorHandler=this.options.errorHandler||ji,this.navigated=!1,this.routeReuseStrategy=(0,Q.WQX)(Pr),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=null!==(S=null===(O=(0,Q.WQX)(p,{optional:!0}))||void 0===O?void 0:O.flat())&&void 0!==S?S:[],this.componentInputBindingEnabled=!!(0,Q.WQX)(nr,{optional:!0}),this.eventsSubscription=new tt.yU,this.isNgZoneEnabled=(0,Q.WQX)(Q.SKi)instanceof Q.SKi&&Q.SKi.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:q=>{this.console.warn(q)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const S=this.navigationTransitions.events.subscribe(O=>{try{const q=this.navigationTransitions.currentTransition,oe=this.navigationTransitions.currentNavigation;if(null!==q&&null!==oe)if(this.stateManager.handleRouterEvent(O,oe),O instanceof or&&O.code!==yr.Redirect&&O.code!==yr.SupersededByNewNavigation)this.navigated=!0;else if(O instanceof ni)this.navigated=!0;else if(O instanceof co){const Me=this.urlHandlingStrategy.merge(O.url,q.currentRawUrl),wt={info:q.extras.info,skipLocationChange:q.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||zn(q.source)};this.scheduleNavigation(Me,ao,null,wt,{resolve:q.resolve,reject:q.reject,promise:q.promise})}(function Vn(w){return!(w instanceof ds||w instanceof co)})(O)&&this._events.next(O)}catch(q){this.navigationTransitions.transitionAbortSubject.next(q)}});this.eventsSubscription.add(S)}resetRootComponentType(S){this.routerState.root.component=S,this.navigationTransitions.rootComponentType=S}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ao,this.stateManager.restoredState())}setUpLocationChangeListener(){var S;null!==(S=this.nonRouterCurrentEntryChangeSubscription)&&void 0!==S||(this.nonRouterCurrentEntryChangeSubscription=this.stateManager.registerNonRouterCurrentEntryChangeListener((O,q)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(O,"popstate",q)},0)}))}navigateToSyncWithBrowser(S,O,q){const oe={replaceUrl:!0},Me=null!=q&&q.navigationId?q:null;if(q){const Ve={...q};delete Ve.navigationId,delete Ve.\u0275routerPageId,0!==Object.keys(Ve).length&&(oe.state=Ve)}const wt=this.parseUrl(S);this.scheduleNavigation(wt,O,Me,oe)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(S){this.config=S.map(Ms),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(S,O={}){const{relativeTo:q,queryParams:oe,fragment:Me,queryParamsHandling:wt,preserveFragment:Ve}=O,Jt=Ve?this.currentUrlTree.fragment:Me;let si,Pn=null;switch(wt){case"merge":Pn={...this.currentUrlTree.queryParams,...oe};break;case"preserve":Pn=this.currentUrlTree.queryParams;break;default:Pn=oe||null}null!==Pn&&(Pn=this.removeEmptyProps(Pn));try{si=$o(q?q.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof S[0]||!S[0].startsWith("/"))&&(S=[]),si=this.currentUrlTree.root}return jo(si,S,Pn,null!=Jt?Jt:null)}navigateByUrl(S,O={skipLocationChange:!1}){const q=_i(S)?S:this.parseUrl(S),oe=this.urlHandlingStrategy.merge(q,this.rawUrlTree);return this.scheduleNavigation(oe,ao,null,O)}navigate(S,O={skipLocationChange:!1}){return function aa(w){for(let R=0;R<w.length;R++)if(null==w[R])throw new Q.wOt(4008,!1)}(S),this.navigateByUrl(this.createUrlTree(S,O),O)}serializeUrl(S){return this.urlSerializer.serialize(S)}parseUrl(S){try{return this.urlSerializer.parse(S)}catch{return this.urlSerializer.parse("/")}}isActive(S,O){let q;if(q=!0===O?{...Us}:!1===O?{...oi}:O,_i(S))return Wr(this.currentUrlTree,S,q);const oe=this.parseUrl(S);return Wr(this.currentUrlTree,oe,q)}removeEmptyProps(S){return Object.entries(S).reduce((O,[q,oe])=>(null!=oe&&(O[q]=oe),O),{})}scheduleNavigation(S,O,q,oe,Me){if(this.disposed)return Promise.resolve(!1);let wt,Ve,Jt;Me?(wt=Me.resolve,Ve=Me.reject,Jt=Me.promise):Jt=new Promise((si,Dr)=>{wt=si,Ve=Dr});const Pn=this.pendingTasks.add();return Kr(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(Pn))}),this.navigationTransitions.handleNavigationRequest({source:O,restoredState:q,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:S,extras:oe,resolve:wt,reject:Ve,promise:Jt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Jt.catch(si=>Promise.reject(si))}}return(w=R).\u0275fac=function(S){return new(S||w)},w.\u0275prov=Q.jDH({token:w,factory:w.\u0275fac,providedIn:"root"}),R})(),xl=(()=>{var w;class R{constructor(S,O,q,oe,Me,wt){var Ve;this.router=S,this.route=O,this.tabIndexAttribute=q,this.renderer=oe,this.el=Me,this.locationStrategy=wt,this.href=null,this.commands=null,this.onChanges=new Ft.B,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const Jt=null===(Ve=Me.nativeElement.tagName)||void 0===Ve?void 0:Ve.toLowerCase();this.isAnchorElement="a"===Jt||"area"===Jt,this.isAnchorElement?this.subscription=S.events.subscribe(Pn=>{Pn instanceof ni&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(S){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",S)}ngOnChanges(S){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(S){null!=S?(this.commands=Array.isArray(S)?S:[S],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(S,O,q,oe,Me){const wt=this.urlTree;return!!(null===wt||this.isAnchorElement&&(0!==S||O||q||oe||Me||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(wt,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){var S;null===(S=this.subscription)||void 0===S||S.unsubscribe()}updateHref(){var S;const O=this.urlTree;this.href=null!==O&&this.locationStrategy?null===(S=this.locationStrategy)||void 0===S?void 0:S.prepareExternalUrl(this.router.serializeUrl(O)):null;const q=null===this.href?null:(0,Q.n$t)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",q)}applyAttributeValue(S,O){const q=this.renderer,oe=this.el.nativeElement;null!==O?q.setAttribute(oe,S,O):q.removeAttribute(oe,S)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return(w=R).\u0275fac=function(S){return new(S||w)(Q.rXU(Nr),Q.rXU(he),Q.kS0("tabindex"),Q.rXU(Q.sFG),Q.rXU(Q.aKT),Q.rXU(nn.hb))},w.\u0275dir=Q.FsC({type:w,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(S,O){1&S&&Q.bIt("click",function(oe){return O.onClick(oe.button,oe.ctrlKey,oe.shiftKey,oe.altKey,oe.metaKey)}),2&S&&Q.BMQ("target",O.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[Q.Mj6.HasDecoratorInputTransform,"preserveFragment","preserveFragment",Q.L39],skipLocationChange:[Q.Mj6.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",Q.L39],replaceUrl:[Q.Mj6.HasDecoratorInputTransform,"replaceUrl","replaceUrl",Q.L39],routerLink:"routerLink"},standalone:!0,features:[Q.GFd,Q.OA$]}),R})();class Or{}let gs=(()=>{var w;class R{preload(S,O){return O().pipe(Mt(()=>(0,re.of)(null)))}}return(w=R).\u0275fac=function(S){return new(S||w)},w.\u0275prov=Q.jDH({token:w,factory:w.\u0275fac,providedIn:"root"}),R})(),Ci=(()=>{var w;class R{constructor(S,O,q,oe,Me){this.router=S,this.injector=q,this.preloadingStrategy=oe,this.loader=Me}setUpPreloading(){this.subscription=this.router.events.pipe((0,Y.p)(S=>S instanceof ni),Le(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(S,O){const q=[];for(const Ve of O){var oe,Me;Ve.providers&&!Ve._injector&&(Ve._injector=(0,Q.Ol2)(Ve.providers,S,`Route: ${Ve.path}`));const Jt=null!==(oe=Ve._injector)&&void 0!==oe?oe:S,Pn=null!==(Me=Ve._loadedInjector)&&void 0!==Me?Me:Jt;var wt;(Ve.loadChildren&&!Ve._loadedRoutes&&void 0===Ve.canLoad||Ve.loadComponent&&!Ve._loadedComponent)&&q.push(this.preloadConfig(Jt,Ve)),(Ve.children||Ve._loadedRoutes)&&q.push(this.processRoutes(Pn,null!==(wt=Ve.children)&&void 0!==wt?wt:Ve._loadedRoutes))}return(0,He.H)(q).pipe(Te())}preloadConfig(S,O){return this.preloadingStrategy.preload(O,()=>{let q;q=O.loadChildren&&void 0===O.canLoad?this.loader.loadChildren(S,O):(0,re.of)(null);const oe=q.pipe((0,Ne.Z)(Me=>{var wt;return null===Me?(0,re.of)(void 0):(O._loadedRoutes=Me.routes,O._loadedInjector=Me.injector,this.processRoutes(null!==(wt=Me.injector)&&void 0!==wt?wt:S,Me.routes))}));if(O.loadComponent&&!O._loadedComponent){const Me=this.loader.loadComponent(O);return(0,He.H)([oe,Me]).pipe(Te())}return oe})}}return(w=R).\u0275fac=function(S){return new(S||w)(Q.KVO(Nr),Q.KVO(Q.Ql9),Q.KVO(Q.uvJ),Q.KVO(Or),Q.KVO(A))},w.\u0275prov=Q.jDH({token:w,factory:w.\u0275fac,providedIn:"root"}),R})();const Kc=new Q.nKC("");let Nl=(()=>{var w;class R{constructor(S,O,q,oe,Me={}){this.urlSerializer=S,this.transitions=O,this.viewportScroller=q,this.zone=oe,this.options=Me,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=(0,Q.WQX)(Q.uvJ),Me.scrollPositionRestoration||(Me.scrollPositionRestoration="disabled"),Me.anchorScrolling||(Me.anchorScrolling="disabled")}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(S=>{S instanceof lo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=S.navigationTrigger,this.restoredId=S.restoredState?S.restoredState.navigationId:0):S instanceof ni?(this.lastId=S.id,this.scheduleScrollEvent(S,this.urlSerializer.parse(S.urlAfterRedirects).fragment)):S instanceof es&&S.code===yn.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(S,this.urlSerializer.parse(S.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(S=>{S instanceof Go&&(S.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(S.position):S.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(S.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(S,O){var q=this;this.zone.runOutsideAngular((0,M.A)(function*(){yield new Promise(oe=>{setTimeout(()=>{oe()}),(0,Q.mal)(()=>{oe()},{injector:q.environmentInjector})}),q.zone.run(()=>{q.transitions.events.next(new Go(S,"popstate"===q.lastSource?q.store[q.restoredId]:null,O))})}))}ngOnDestroy(){var S,O;null===(S=this.routerEventsSubscription)||void 0===S||S.unsubscribe(),null===(O=this.scrollEventsSubscription)||void 0===O||O.unsubscribe()}}return(w=R).\u0275fac=function(S){Q.QTQ()},w.\u0275prov=Q.jDH({token:w,factory:w.\u0275fac}),R})();function po(w,R){return{\u0275kind:w,\u0275providers:R}}function nl(){const w=(0,Q.WQX)(Q.zZn);return R=>{var N,S;const O=w.get(Q.o8S);if(R!==O.components[0])return;const q=w.get(Nr),oe=w.get(kl);1===w.get(gi)&&q.initialNavigation(),null===(N=w.get(gh,null,Q.$GK.Optional))||void 0===N||N.setUpPreloading(),null===(S=w.get(Kc,null,Q.$GK.Optional))||void 0===S||S.init(),q.resetRootComponentType(O.componentTypes[0]),oe.closed||(oe.next(),oe.complete(),oe.unsubscribe())}}const kl=new Q.nKC("",{factory:()=>new Ft.B}),gi=new Q.nKC("",{providedIn:"root",factory:()=>1}),gh=new Q.nKC("");function Fl(w){return po(0,[{provide:gh,useExisting:Ci},{provide:Or,useExisting:w}])}function up(w){return po(9,[{provide:an,useValue:Qn},{provide:Nn,useValue:{skipNextTransition:!(null==w||!w.skipInitialTransition),...w}}])}const dp=new Q.nKC("ROUTER_FORROOT_GUARD"),Fy=[nn.aZ,{provide:Ae,useClass:ye},Nr,Po,{provide:he,useFactory:function ca(w){return w.routerState.root},deps:[Nr]},A,[]];let Jr=(()=>{var w;class R{constructor(S){}static forRoot(S,O){return{ngModule:R,providers:[Fy,[],{provide:p,multi:!0,useValue:S},{provide:dp,useFactory:bm,deps:[[Nr,new Q.Xx1,new Q.kdw]]},{provide:m,useValue:O||{}},null!=O&&O.useHash?{provide:nn.hb,useClass:nn.fw}:{provide:nn.hb,useClass:nn.Sm},{provide:Kc,useFactory:()=>{const w=(0,Q.WQX)(nn.Xr),R=(0,Q.WQX)(Q.SKi),N=(0,Q.WQX)(m),S=(0,Q.WQX)(Yn),O=(0,Q.WQX)(Ae);return N.scrollOffset&&w.setOffset(N.scrollOffset),new Nl(O,S,w,R,N)}},null!=O&&O.preloadingStrategy?Fl(O.preloadingStrategy).\u0275providers:[],null!=O&&O.initialNavigation?Jw(O):[],null!=O&&O.bindToComponentInputs?po(8,[vr,{provide:nr,useExisting:vr}]).\u0275providers:[],null!=O&&O.enableViewTransitions?up().\u0275providers:[],[{provide:Vy,useFactory:nl},{provide:Q.iLQ,multi:!0,useExisting:Vy}]]}}static forChild(S){return{ngModule:R,providers:[{provide:p,multi:!0,useValue:S}]}}}return(w=R).\u0275fac=function(S){return new(S||w)(Q.KVO(dp,8))},w.\u0275mod=Q.$C({type:w}),w.\u0275inj=Q.G2t({}),R})();function bm(w){return"guarded"}function Jw(w){return["disabled"===w.initialNavigation?po(3,[{provide:Q.hnV,multi:!0,useFactory:()=>{const R=(0,Q.WQX)(Nr);return()=>{R.setUpLocationChangeListener()}}},{provide:gi,useValue:2}]).\u0275providers:[],"enabledBlocking"===w.initialNavigation?po(2,[{provide:gi,useValue:0},{provide:Q.hnV,multi:!0,deps:[Q.zZn],useFactory:R=>{const N=R.get(nn.hj,Promise.resolve());return()=>N.then(()=>new Promise(S=>{const O=R.get(Nr),q=R.get(kl);Kr(O,()=>{S(!0)}),R.get(Yn).afterPreactivation=()=>(S(!0),q.closed?(0,re.of)(void 0):q),O.initialNavigation()}))}}]).\u0275providers:[]]}const Vy=new Q.nKC("")},9246:(hn,Ct,ee)=>{"use strict";function M(E){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(P){return typeof P}:function(P){return P&&"function"==typeof Symbol&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P})(E)}function x(E,P,m){return(P=function h(E){var P=function Q(E,P){if("object"!=M(E)||!E)return E;var m=E[Symbol.toPrimitive];if(void 0!==m){var p=m.call(E,P||"default");if("object"!=M(p))return p;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===P?String:Number)(E)}(E,"string");return"symbol"==M(P)?P:String(P)}(P))in E?Object.defineProperty(E,P,{value:m,enumerable:!0,configurable:!0,writable:!0}):E[P]=m,E}ee.d(Ct,{U1:()=>Ee,iq:()=>Ui,he:()=>Dl,bv:()=>Vs,N7:()=>uc,K_:()=>tl});var v=ee(4438),He=ee(4341),re=ee(467),Se=ee(70),Ge=ee(177),qe=ee(5531),me=ee(4442),Kt=ee(1413);ee(8750),ee(1985),ee(1397),ee(7441),ee(8071),ee(6450),ee(4412);var er=ee(4572),En=ee(7673),Dt=ee(1635),Ht=(ee(5964),ee(5558));ee(3669),ee(9974),ee(4360);let Ln=(()=>{var E;class P{constructor(p,A){x(this,"doc",void 0),x(this,"_readyPromise",void 0),x(this,"win",void 0),x(this,"backButton",new Kt.B),x(this,"keyboardDidShow",new Kt.B),x(this,"keyboardDidHide",new Kt.B),x(this,"pause",new Kt.B),x(this,"resume",new Kt.B),x(this,"resize",new Kt.B),this.doc=p,A.run(()=>{var C;let z;this.win=p.defaultView,this.backButton.subscribeWithPriority=function(te,ve){return this.subscribe(ft=>ft.register(te,an=>A.run(()=>ve(an))))},cr(this.pause,p,"pause",A),cr(this.resume,p,"resume",A),cr(this.backButton,p,"ionBackButton",A),cr(this.resize,this.win,"resize",A),cr(this.keyboardDidShow,this.win,"ionKeyboardDidShow",A),cr(this.keyboardDidHide,this.win,"ionKeyboardDidHide",A),this._readyPromise=new Promise(te=>{z=te}),null!==(C=this.win)&&void 0!==C&&C.cordova?p.addEventListener("deviceready",()=>{z("cordova")},{once:!0}):z("dom")})}is(p){return(0,qe.a)(this.win,p)}platforms(){return(0,qe.g)(this.win)}ready(){return this._readyPromise}get isRTL(){return"rtl"===this.doc.dir}getQueryParam(p){return pr(this.win.location.href,p)}isLandscape(){return!this.isPortrait()}isPortrait(){var p,A;return null===(p=(A=this.win).matchMedia)||void 0===p?void 0:p.call(A,"(orientation: portrait)").matches}testUserAgent(p){const A=this.win.navigator;return!!(null!=A&&A.userAgent&&A.userAgent.indexOf(p)>=0)}url(){return this.win.location.href}width(){return this.win.innerWidth}height(){return this.win.innerHeight}}return E=P,x(P,"\u0275fac",function(p){return new(p||E)(v.KVO(Ge.qQ),v.KVO(v.SKi))}),x(P,"\u0275prov",v.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})),P})();const pr=(E,P)=>{P=P.replace(/[[\]\\]/g,"\\$&");const p=new RegExp("[\\?&]"+P+"=([^&#]*)").exec(E);return p?decodeURIComponent(p[1].replace(/\+/g," ")):null},cr=(E,P,m,p)=>{P&&P.addEventListener(m,A=>{p.run(()=>{E.next(null!=A?A.detail:void 0)})})};let Wr=(()=>{var E;class P{constructor(p,A,C,z){x(this,"location",void 0),x(this,"serializer",void 0),x(this,"router",void 0),x(this,"topOutlet",void 0),x(this,"direction",ei),x(this,"animated",Rn),x(this,"animationBuilder",void 0),x(this,"guessDirection","forward"),x(this,"guessAnimation",void 0),x(this,"lastNavId",-1),this.location=A,this.serializer=C,this.router=z,z&&z.events.subscribe(te=>{if(te instanceof Se.Z){const ve=te.restoredState?te.restoredState.navigationId:te.id;this.guessDirection=this.guessAnimation=ve<this.lastNavId?"back":"forward",this.lastNavId="forward"===this.guessDirection?te.id:ve}}),p.backButton.subscribeWithPriority(0,te=>{this.pop(),te()})}navigateForward(p,A={}){return this.setDirection("forward",A.animated,A.animationDirection,A.animation),this.navigate(p,A)}navigateBack(p,A={}){return this.setDirection("back",A.animated,A.animationDirection,A.animation),this.navigate(p,A)}navigateRoot(p,A={}){return this.setDirection("root",A.animated,A.animationDirection,A.animation),this.navigate(p,A)}back(p={animated:!0,animationDirection:"back"}){return this.setDirection("back",p.animated,p.animationDirection,p.animation),this.location.back()}pop(){var p=this;return(0,re.A)(function*(){let A=p.topOutlet;for(;A;){if(yield A.pop())return!0;A=A.parentOutlet}return!1})()}setDirection(p,A,C,z){this.direction=p,this.animated=kr(p,A,C),this.animationBuilder=z}setTopOutlet(p){this.topOutlet=p}consumeTransition(){let A,p="root";const C=this.animationBuilder;return"auto"===this.direction?(p=this.guessDirection,A=this.guessAnimation):(A=this.animated,p=this.direction),this.direction=ei,this.animated=Rn,this.animationBuilder=void 0,{direction:p,animation:A,animationBuilder:C}}navigate(p,A){if(Array.isArray(p))return this.router.navigate(p,A);{const C=this.serializer.parse(p.toString());return void 0!==A.queryParams&&(C.queryParams={...A.queryParams}),void 0!==A.fragment&&(C.fragment=A.fragment),this.router.navigateByUrl(C,A)}}}return E=P,x(P,"\u0275fac",function(p){return new(p||E)(v.KVO(Ln),v.KVO(Ge.aZ),v.KVO(Se.Sd),v.KVO(Se.Ix,8))}),x(P,"\u0275prov",v.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})),P})();const kr=(E,P,m)=>{if(!1!==P){if(void 0!==m)return m;if("forward"===E||"back"===E)return E;if("root"===E&&!0===P)return"forward"}},ei="auto",Rn=void 0,jn=new v.nKC("USERCONFIG");class mr{constructor(P={}){x(this,"data",void 0),this.data=P,console.warn("[Ionic Warning]: NavParams has been deprecated in favor of using Angular's input API. Developers should migrate to either the @Input decorator or the Signals-based input API.")}get(P){return this.data[P]}}let pn=(()=>{var E;class P{constructor(){x(this,"zone",(0,v.WQX)(v.SKi)),x(this,"applicationRef",(0,v.WQX)(v.o8S)),x(this,"config",(0,v.WQX)(jn))}create(p,A,C){var z;return new tr(p,A,this.applicationRef,this.zone,C,null!==(z=this.config.useSetInputAPI)&&void 0!==z&&z)}}return E=P,x(P,"\u0275fac",function(p){return new(p||E)}),x(P,"\u0275prov",v.jDH({token:E,factory:E.\u0275fac})),P})();class tr{constructor(P,m,p,A,C,z){x(this,"environmentInjector",void 0),x(this,"injector",void 0),x(this,"applicationRef",void 0),x(this,"zone",void 0),x(this,"elementReferenceKey",void 0),x(this,"enableSignalsSupport",void 0),x(this,"elRefMap",new WeakMap),x(this,"elEventsMap",new WeakMap),this.environmentInjector=P,this.injector=m,this.applicationRef=p,this.zone=A,this.elementReferenceKey=C,this.enableSignalsSupport=z}attachViewToDom(P,m,p,A){return this.zone.run(()=>new Promise(C=>{const z={...p};void 0!==this.elementReferenceKey&&(z[this.elementReferenceKey]=P),C(Vo(this.zone,this.environmentInjector,this.injector,this.applicationRef,this.elRefMap,this.elEventsMap,P,m,z,A,this.elementReferenceKey,this.enableSignalsSupport))}))}removeViewFromDom(P,m){return this.zone.run(()=>new Promise(p=>{const A=this.elRefMap.get(m);if(A){A.destroy(),this.elRefMap.delete(m);const C=this.elEventsMap.get(m);C&&(C(),this.elEventsMap.delete(m))}p()}))}}const Vo=(E,P,m,p,A,C,z,te,ve,ft,an,Nn)=>{const Qn=v.zZn.create({providers:ye(ve),parent:m}),An=(0,v.a0P)(te,{environmentInjector:P,elementInjector:Qn}),Yn=An.instance,zn=An.location.nativeElement;if(ve)if(an&&void 0!==Yn[an]&&console.error(`[Ionic Error]: ${an} is a reserved property when using ${z.tagName.toLowerCase()}. Rename or remove the "${an}" property from ${te.name}.`),!0===Nn&&void 0!==An.setInput){const{modal:ur,popover:Lt,...dn}=ve;for(const wr in dn)An.setInput(wr,dn[wr]);void 0!==ur&&Object.assign(Yn,{modal:ur}),void 0!==Lt&&Object.assign(Yn,{popover:Lt})}else Object.assign(Yn,ve);if(ft)for(const ur of ft)zn.classList.add(ur);const Pr=ci(E,Yn,zn);return z.appendChild(zn),p.attachView(An.hostView),A.set(zn,An),C.set(zn,Pr),zn},qi=[me.L,me.a,me.b,me.c,me.d],ci=(E,P,m)=>E.run(()=>{const p=qi.filter(A=>"function"==typeof P[A]).map(A=>{const C=z=>P[A](z.detail);return m.addEventListener(A,C),()=>m.removeEventListener(A,C)});return()=>p.forEach(A=>A())}),Ae=new v.nKC("NavParamsToken"),ye=E=>[{provide:Ae,useValue:E},{provide:mr,useFactory:Je,deps:[Ae]}],Je=E=>new mr(E),So=new v.nKC("");let $o=(()=>{var E;class P{constructor(){x(this,"outletDataSubscriptions",new Map)}bindActivatedRouteToOutletComponent(p){this.unsubscribeFromRouteData(p),this.subscribeToRouteData(p)}unsubscribeFromRouteData(p){var A;null===(A=this.outletDataSubscriptions.get(p))||void 0===A||A.unsubscribe(),this.outletDataSubscriptions.delete(p)}subscribeToRouteData(p){const{activatedRoute:A}=p,C=(0,er.z)([A.queryParams,A.params,A.data]).pipe((0,Ht.n)(([z,te,ve],ft)=>(ve={...z,...te,...ve},0===ft?(0,En.of)(ve):Promise.resolve(ve)))).subscribe(z=>{if(!p.isActivated||!p.activatedComponentRef||p.activatedRoute!==A||null===A.component)return void this.unsubscribeFromRouteData(p);const te=(0,v.HJs)(A.component);if(te)for(const{templateName:ve}of te.inputs)p.activatedComponentRef.setInput(ve,z[ve]);else this.unsubscribeFromRouteData(p)});this.outletDataSubscriptions.set(p,C)}}return E=P,x(P,"\u0275fac",function(p){return new(p||E)}),x(P,"\u0275prov",v.jDH({token:E,factory:E.\u0275fac})),P})();function Ro(E){return null!=E&&E.componentInputBindingEnabled?new $o:null}let On=(()=>{var E;class P{constructor(p,A,C,z,te){x(this,"locationStrategy",void 0),x(this,"navCtrl",void 0),x(this,"elementRef",void 0),x(this,"router",void 0),x(this,"routerLink",void 0),x(this,"routerDirection","forward"),x(this,"routerAnimation",void 0),this.locationStrategy=p,this.navCtrl=A,this.elementRef=C,this.router=z,this.routerLink=te}ngOnInit(){this.updateTargetUrlAndHref()}ngOnChanges(){this.updateTargetUrlAndHref()}updateTargetUrlAndHref(){var p;if(null!==(p=this.routerLink)&&void 0!==p&&p.urlTree){const A=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.routerLink.urlTree));this.elementRef.nativeElement.href=A}}onClick(p){this.navCtrl.setDirection(this.routerDirection,void 0,void 0,this.routerAnimation),p.preventDefault()}}return E=P,x(P,"\u0275fac",function(p){return new(p||E)(v.rXU(Ge.hb),v.rXU(Wr),v.rXU(v.aKT),v.rXU(Se.Ix),v.rXU(Se.Wk,8))}),x(P,"\u0275dir",v.FsC({type:E,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(p,A){1&p&&v.bIt("click",function(z){return A.onClick(z)})},inputs:{routerDirection:"routerDirection",routerAnimation:"routerAnimation"},features:[v.OA$]})),P})();const Zs=E=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(E):"function"==typeof requestAnimationFrame?requestAnimationFrame(E):setTimeout(E);class Si{constructor(P){x(this,"ctrl",void 0),this.ctrl=P}create(P){return this.ctrl.create(P||{})}dismiss(P,m,p){return this.ctrl.dismiss(P,m,p)}getTop(){return this.ctrl.getTop()}}ee(9986),ee(2725),ee(8454),ee(3314),ee(8607);var yr=ee(3664),yn=ee(464),es=(ee(5465),ee(6002)),ta=(ee(8476),ee(9672));ee(1970),ee(6411);const $r=yr.i,Qa=function(){var E=(0,re.A)(function*(P,m){if(!(typeof window>"u"))return yield $r(),(0,ta.b)(JSON.parse('[["ion-menu_3",[[33,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[33,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"]],{"type":["typeChanged"],"disabled":["disabledChanged"],"side":["sideChanged"],"swipeGesture":["swipeGestureChanged"]}],[1,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["ion-input-password-toggle",[[33,"ion-input-password-toggle",{"color":[513],"showIcon":[1,"show-icon"],"hideIcon":[1,"hide-icon"],"type":[1025]},null,{"type":["onTypeChange"]}]]],["ion-fab_3",[[33,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[1,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64],"toggle":[64]},null,{"activated":["activatedChanged"]}],[1,"ion-fab-list",{"activated":[4],"side":[1]},null,{"activated":["activatedChanged"]}]]],["ion-refresher_2",[[0,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[32,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]},null,{"disabled":["disabledChanged"]}]]],["ion-back-button",[[33,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["ion-toast",[[33,"ion-toast",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"layout":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"positionAnchor":[1,"position-anchor"],"buttons":[16],"translucent":[4],"animated":[4],"icon":[1],"htmlAttributes":[16],"swipeGesture":[1,"swipe-gesture"],"isOpen":[4,"is-open"],"trigger":[1],"revealContentToScreenReader":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"swipeGesture":["swipeGestureChanged"],"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-card_5",[[33,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[32,"ion-card-content"],[33,"ion-card-header",{"color":[513],"translucent":[4]}],[33,"ion-card-subtitle",{"color":[513]}],[33,"ion-card-title",{"color":[513]}]]],["ion-item-option_3",[[33,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[32,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[0,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]},null,{"disabled":["disabledChanged"]}]]],["ion-accordion_2",[[49,"ion-accordion",{"value":[1],"disabled":[4],"readonly":[4],"toggleIcon":[1,"toggle-icon"],"toggleIconSlot":[1,"toggle-icon-slot"],"state":[32],"isNext":[32],"isPrevious":[32]},null,{"value":["valueChanged"]}],[33,"ion-accordion-group",{"animated":[4],"multiple":[4],"value":[1025],"disabled":[4],"readonly":[4],"expand":[1],"requestAccordionToggle":[64],"getAccordions":[64]},[[0,"keydown","onKeydown"]],{"value":["valueChanged"],"disabled":["disabledChanged"],"readonly":["readonlyChanged"]}]]],["ion-infinite-scroll_2",[[32,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[0,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]},null,{"threshold":["thresholdChanged"],"disabled":["disabledChanged"]}]]],["ion-reorder_2",[[33,"ion-reorder",null,[[2,"click","onClick"]]],[0,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]},null,{"disabled":["disabledChanged"]}]]],["ion-segment_2",[[33,"ion-segment-button",{"disabled":[1028],"layout":[1],"type":[1],"value":[8],"checked":[32],"setFocus":[64]},null,{"value":["valueChanged"]}],[33,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1032],"selectOnFocus":[4,"select-on-focus"],"activated":[32]},[[0,"keydown","onKeyDown"]],{"color":["colorChanged"],"swipeGesture":["swipeGestureChanged"],"value":["valueChanged"],"disabled":["disabledChanged"]}]]],["ion-tab-bar_2",[[33,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[33,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]},null,{"selectedTab":["selectedTabChanged"]}]]],["ion-chip",[[33,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["ion-datetime-button",[[33,"ion-datetime-button",{"color":[513],"disabled":[516],"datetime":[1],"datetimePresentation":[32],"dateText":[32],"timeText":[32],"datetimeActive":[32],"selectedButton":[32]}]]],["ion-input",[[38,"ion-input",{"color":[513],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearInputIcon":[1,"clear-input-icon"],"clearOnEdit":[4,"clear-on-edit"],"counter":[4],"counterFormatter":[16],"debounce":[2],"disabled":[516],"enterkeyhint":[1],"errorText":[1,"error-text"],"fill":[1],"inputmode":[1],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"max":[8],"maxlength":[2],"min":[8],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[516],"required":[4],"shape":[1],"spellcheck":[4],"step":[1],"type":[1],"value":[1032],"hasFocus":[32],"setFocus":[64],"getInputElement":[64]},null,{"debounce":["debounceChanged"],"type":["onTypeChange"],"value":["valueChanged"]}]]],["ion-searchbar",[[34,"ion-searchbar",{"color":[513],"animated":[4],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]},null,{"lang":["onLangChanged"],"dir":["onDirChanged"],"debounce":["debounceChanged"],"value":["valueChanged"],"showCancelButton":["showCancelButtonChanged"]}]]],["ion-toggle",[[33,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"value":[1],"enableOnOffLabels":[4,"enable-on-off-labels"],"labelPlacement":[1,"label-placement"],"justify":[1],"alignment":[1],"activated":[32]},null,{"disabled":["disabledChanged"]}]]],["ion-nav_2",[[1,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64],"getLength":[64]},null,{"swipeGesture":["swipeGestureChanged"],"root":["rootChanged"]}],[0,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["ion-textarea",[[38,"ion-textarea",{"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"fill":[1],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[514],"rows":[2],"wrap":[1],"autoGrow":[516,"auto-grow"],"value":[1025],"counter":[4],"counterFormatter":[16],"errorText":[1,"error-text"],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"shape":[1],"hasFocus":[32],"setFocus":[64],"getInputElement":[64]},null,{"debounce":["debounceChanged"],"value":["valueChanged"]}]]],["ion-backdrop",[[33,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["ion-loading",[[34,"ion-loading",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-breadcrumb_2",[[33,"ion-breadcrumb",{"collapsed":[4],"last":[4],"showCollapsedIndicator":[4,"show-collapsed-indicator"],"color":[1],"active":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"separator":[4],"target":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}],[33,"ion-breadcrumbs",{"color":[513],"maxItems":[2,"max-items"],"itemsBeforeCollapse":[2,"items-before-collapse"],"itemsAfterCollapse":[2,"items-after-collapse"],"collapsed":[32],"activeChanged":[32]},[[0,"collapsedClick","onCollapsedClick"]],{"maxItems":["maxItemsChanged"],"itemsBeforeCollapse":["maxItemsChanged"],"itemsAfterCollapse":["maxItemsChanged"]}]]],["ion-modal",[[33,"ion-modal",{"hasController":[4,"has-controller"],"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"breakpoints":[16],"initialBreakpoint":[2,"initial-breakpoint"],"backdropBreakpoint":[2,"backdrop-breakpoint"],"handle":[4],"handleBehavior":[1,"handle-behavior"],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"presentingElement":[16],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"keepContentsMounted":[4,"keep-contents-mounted"],"focusTrap":[4,"focus-trap"],"canDismiss":[4,"can-dismiss"],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"setCurrentBreakpoint":[64],"getCurrentBreakpoint":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]},null,{"url":["onUpdate"],"component":["onUpdate"],"componentProps":["onComponentProps"]}],[0,"ion-route-redirect",{"from":[1],"to":[1]},null,{"from":["propDidChange"],"to":["propDidChange"]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[1,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["ion-avatar_3",[[33,"ion-avatar"],[33,"ion-badge",{"color":[513]}],[1,"ion-thumbnail"]]],["ion-col_3",[[1,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[1,"ion-grid",{"fixed":[4]}],[1,"ion-row"]]],["ion-tab_2",[[1,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]},null,{"active":["changeActive"]}],[1,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["ion-img",[[1,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]},null,{"src":["srcChanged"]}]]],["ion-progress-bar",[[33,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["ion-range",[[33,"ion-range",{"color":[513],"debounce":[2],"name":[1],"label":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"pinFormatter":[16],"snaps":[4],"step":[2],"ticks":[4],"activeBarStart":[1026,"active-bar-start"],"disabled":[4],"value":[1026],"labelPlacement":[1,"label-placement"],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]},null,{"debounce":["debounceChanged"],"min":["minChanged"],"max":["maxChanged"],"activeBarStart":["activeBarStartChanged"],"disabled":["disabledChanged"],"value":["valueChanged"]}]]],["ion-split-pane",[[33,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32],"isVisible":[64]},null,{"visible":["visibleChanged"],"disabled":["updateState"],"when":["updateState"]}]]],["ion-text",[[1,"ion-text",{"color":[513]}]]],["ion-select_3",[[33,"ion-select",{"cancelText":[1,"cancel-text"],"color":[513],"compareWith":[1,"compare-with"],"disabled":[4],"fill":[1],"interface":[1],"interfaceOptions":[8,"interface-options"],"justify":[1],"label":[1],"labelPlacement":[1,"label-placement"],"multiple":[4],"name":[1],"okText":[1,"ok-text"],"placeholder":[1],"selectedText":[1,"selected-text"],"toggleIcon":[1,"toggle-icon"],"expandedIcon":[1,"expanded-icon"],"shape":[1],"value":[1032],"isExpanded":[32],"open":[64]},null,{"disabled":["styleChanged"],"isExpanded":["styleChanged"],"placeholder":["styleChanged"],"value":["styleChanged"]}],[1,"ion-select-option",{"disabled":[4],"value":[8]}],[34,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"multiple":[4],"options":[16]}]]],["ion-picker",[[33,"ion-picker",{"exitInputMode":[64]},[[1,"touchstart","preventTouchStartPropagation"]]]]],["ion-picker-column",[[1,"ion-picker-column",{"disabled":[4],"value":[1032],"color":[513],"numericInput":[4,"numeric-input"],"ariaLabel":[32],"isActive":[32],"scrollActiveItemIntoView":[64],"setValue":[64],"setFocus":[64]},null,{"aria-label":["ariaLabelChanged"],"value":["valueChange"]}]]],["ion-datetime_3",[[33,"ion-datetime",{"color":[1],"name":[1],"disabled":[4],"formatOptions":[16],"readonly":[4],"isDateEnabled":[16],"min":[1025],"max":[1025],"presentation":[1],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"clearText":[1,"clear-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"locale":[1],"firstDayOfWeek":[2,"first-day-of-week"],"titleSelectedDatesFormatter":[16],"multiple":[4],"highlightedDates":[16],"value":[1025],"showDefaultTitle":[4,"show-default-title"],"showDefaultButtons":[4,"show-default-buttons"],"showClearButton":[4,"show-clear-button"],"showDefaultTimeLabel":[4,"show-default-time-label"],"hourCycle":[1,"hour-cycle"],"size":[1],"preferWheel":[4,"prefer-wheel"],"showMonthAndYear":[32],"activeParts":[32],"workingParts":[32],"isTimePopoverOpen":[32],"forceRenderDate":[32],"confirm":[64],"reset":[64],"cancel":[64]},null,{"formatOptions":["formatOptionsChanged"],"disabled":["disabledChanged"],"min":["minChanged"],"max":["maxChanged"],"presentation":["presentationChanged"],"yearValues":["yearValuesChanged"],"monthValues":["monthValuesChanged"],"dayValues":["dayValuesChanged"],"hourValues":["hourValuesChanged"],"minuteValues":["minuteValuesChanged"],"value":["valueChanged"]}],[34,"ion-picker-legacy",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}],[32,"ion-picker-legacy-column",{"col":[16]},null,{"col":["colChanged"]}]]],["ion-radio_2",[[33,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"labelPlacement":[1,"label-placement"],"justify":[1],"alignment":[1],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]},null,{"value":["valueChanged"]}],[0,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"compareWith":[1,"compare-with"],"name":[1],"value":[1032]},[[4,"keydown","onKeydown"]],{"value":["valueChanged"]}]]],["ion-ripple-effect",[[1,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["ion-button_2",[[33,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1],"form":[1],"isCircle":[32]},null,{"disabled":["disabledChanged"]}],[1,"ion-icon",{"mode":[1025],"color":[1],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[513],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32]},null,{"name":["loadIcon"],"src":["loadIcon"],"icon":["loadIcon"],"ios":["loadIcon"],"md":["loadIcon"]}]]],["ion-action-sheet",[[34,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-alert",[[34,"ion-alert",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]],{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"],"buttons":["buttonsChanged"],"inputs":["inputsChanged"]}]]],["ion-app_8",[[0,"ion-app",{"setFocus":[64]}],[1,"ion-content",{"color":[513],"fullscreen":[4],"fixedSlotPlacement":[1,"fixed-slot-placement"],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"getScrollElement":[64],"getBackgroundElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[9,"resize","onResize"]]],[36,"ion-footer",{"collapse":[1],"translucent":[4],"keyboardVisible":[32]}],[36,"ion-header",{"collapse":[1],"translucent":[4]}],[1,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]},null,{"swipeHandler":["swipeHandlerChanged"]}],[33,"ion-title",{"color":[513],"size":[1]},null,{"size":["sizeChanged"]}],[33,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]],[38,"ion-buttons",{"collapse":[4]}]]],["ion-picker-column-option",[[33,"ion-picker-column-option",{"disabled":[4],"value":[8],"color":[513],"ariaLabel":[32]},null,{"aria-label":["onAriaLabelChange"]}]]],["ion-popover",[[33,"ion-popover",{"hasController":[4,"has-controller"],"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"triggerAction":[1,"trigger-action"],"trigger":[1],"size":[1],"dismissOnSelect":[4,"dismiss-on-select"],"reference":[1],"side":[1],"alignment":[1025],"arrow":[4],"isOpen":[4,"is-open"],"keyboardEvents":[4,"keyboard-events"],"focusTrap":[4,"focus-trap"],"keepContentsMounted":[4,"keep-contents-mounted"],"presented":[32],"presentFromTrigger":[64],"present":[64],"dismiss":[64],"getParentPopover":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"trigger":["onTriggerChange"],"triggerAction":["onTriggerChange"],"isOpen":["onIsOpenChange"]}]]],["ion-checkbox",[[33,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"value":[8],"labelPlacement":[1,"label-placement"],"justify":[1],"alignment":[1]}]]],["ion-spinner",[[1,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]],["ion-item_8",[[33,"ion-item-divider",{"color":[513],"sticky":[4]}],[32,"ion-item-group"],[33,"ion-note",{"color":[513]}],[1,"ion-skeleton-text",{"animated":[4]}],[33,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[4],"download":[1],"href":[1],"rel":[1],"lines":[1],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"multipleInputs":[32],"focusable":[32]},[[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]],{"button":["buttonChanged"]}],[38,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]},null,{"color":["colorChanged"],"position":["positionChanged"]}],[32,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}],[33,"ion-list-header",{"color":[513],"lines":[1]}]]]]'),m)});return function(m,p){return E.apply(this,arguments)}}(),gt=["*"],Vi=(E,P)=>{const m=E.prototype;P.forEach(p=>{Object.defineProperty(m,p,{get(){return this.el[p]},set(A){this.z.runOutsideAngular(()=>this.el[p]=A)},configurable:!0})})},ts=(E,P)=>{const m=E.prototype;P.forEach(p=>{m[p]=function(){const A=arguments;return this.z.runOutsideAngular(()=>this.el[p].apply(this.el,A))}})};function U(E){return function(m){const{defineCustomElementFn:p,inputs:A,methods:C}=E;return void 0!==p&&p(),A&&Vi(m,A),C&&ts(m,C),m}}let Ee=(()=>{var E;let P=(E=class{constructor(p,A,C){x(this,"z",void 0),x(this,"el",void 0),this.z=C,p.detach(),this.el=A.nativeElement}},x(E,"\u0275fac",function(p){return new(p||E)(v.rXU(v.gRc),v.rXU(v.aKT),v.rXU(v.SKi))}),x(E,"\u0275cmp",v.VBU({type:E,selectors:[["ion-app"]],ngContentSelectors:gt,decls:1,vars:0,template:function(p,A){1&p&&(v.NAR(),v.SdG(0))},encapsulation:2,changeDetection:0})),E);return P=(0,Dt.Cg)([U({})],P),P})(),Ui=(()=>{var E;let P=(E=class{constructor(p,A,C){x(this,"z",void 0),x(this,"el",void 0),this.z=C,p.detach(),this.el=A.nativeElement}},x(E,"\u0275fac",function(p){return new(p||E)(v.rXU(v.gRc),v.rXU(v.aKT),v.rXU(v.SKi))}),x(E,"\u0275cmp",v.VBU({type:E,selectors:[["ion-icon"]],inputs:{color:"color",flipRtl:"flipRtl",icon:"icon",ios:"ios",lazy:"lazy",md:"md",mode:"mode",name:"name",sanitize:"sanitize",size:"size",src:"src"},ngContentSelectors:gt,decls:1,vars:0,template:function(p,A){1&p&&(v.NAR(),v.SdG(0))},encapsulation:2,changeDetection:0})),E);return P=(0,Dt.Cg)([U({inputs:["color","flipRtl","icon","ios","lazy","md","mode","name","sanitize","size","src"]})],P),P})(),Dl=(()=>{var E;let P=(E=class{constructor(p,A,C){x(this,"z",void 0),x(this,"el",void 0),this.z=C,p.detach(),this.el=A.nativeElement}},x(E,"\u0275fac",function(p){return new(p||E)(v.rXU(v.gRc),v.rXU(v.aKT),v.rXU(v.SKi))}),x(E,"\u0275cmp",v.VBU({type:E,selectors:[["ion-label"]],inputs:{color:"color",mode:"mode",position:"position"},ngContentSelectors:gt,decls:1,vars:0,template:function(p,A){1&p&&(v.NAR(),v.SdG(0))},encapsulation:2,changeDetection:0})),E);return P=(0,Dt.Cg)([U({inputs:["color","mode","position"]})],P),P})(),uc=(()=>{var E;class P extends On{}return E=P,x(P,"\u0275fac",(()=>{let m;return function(A){return(m||(m=v.xGo(E)))(A||E)}})()),x(P,"\u0275dir",v.FsC({type:E,selectors:[["","routerLink","",5,"a",5,"area"]],features:[v.Vt3]})),P})();const Gc={provide:He.cz,useExisting:(0,v.Rfq)(()=>Ml),multi:!0};let Ml=(()=>{var E;class P extends He.zX{}return E=P,x(P,"\u0275fac",(()=>{let m;return function(A){return(m||(m=v.xGo(E)))(A||E)}})()),x(P,"\u0275dir",v.FsC({type:E,selectors:[["ion-input","type","number","max","","formControlName",""],["ion-input","type","number","max","","formControl",""],["ion-input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(p,A){2&p&&v.BMQ("max",A._enabled?A.max:null)},features:[v.Jv_([Gc]),v.Vt3]})),P})();const dc={provide:He.cz,useExisting:(0,v.Rfq)(()=>Lr),multi:!0};let Lr=(()=>{var E;class P extends He.VZ{}return E=P,x(P,"\u0275fac",(()=>{let m;return function(A){return(m||(m=v.xGo(E)))(A||E)}})()),x(P,"\u0275dir",v.FsC({type:E,selectors:[["ion-input","type","number","min","","formControlName",""],["ion-input","type","number","min","","formControl",""],["ion-input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(p,A){2&p&&v.BMQ("min",A._enabled?A.min:null)},features:[v.Jv_([dc]),v.Vt3]})),P})(),ed=(()=>{var E;class P extends Si{constructor(){super(es.m),x(this,"angularDelegate",(0,v.WQX)(pn)),x(this,"injector",(0,v.WQX)(v.zZn)),x(this,"environmentInjector",(0,v.WQX)(v.uvJ))}create(p){return super.create({...p,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"modal")})}}return E=P,x(P,"\u0275fac",function(p){return new(p||E)}),x(P,"\u0275prov",v.jDH({token:E,factory:E.\u0275fac})),P})();class el extends Si{constructor(){super(es.c),x(this,"angularDelegate",(0,v.WQX)(pn)),x(this,"injector",(0,v.WQX)(v.zZn)),x(this,"environmentInjector",(0,v.WQX)(v.uvJ))}create(P){return super.create({...P,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"popover")})}}let tl=(()=>{var E;class P extends Si{constructor(){super(es.t)}}return E=P,x(P,"\u0275fac",function(p){return new(p||E)}),x(P,"\u0275prov",v.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})),P})();const td=(E,P,m)=>()=>{const p=P.defaultView;if(p&&typeof window<"u"){(0,yn.s)({...E,_zoneGate:C=>m.run(C)});const A="__zone_symbol__addEventListener"in P.body?"__zone_symbol__addEventListener":"addEventListener";return function Fn(){var E=[];if(typeof window<"u"){var P=window;(!P.customElements||P.Element&&(!P.Element.prototype.closest||!P.Element.prototype.matches||!P.Element.prototype.remove||!P.Element.prototype.getRootNode))&&E.push(ee.e(7278).then(ee.t.bind(ee,2190,23))),("function"!=typeof Object.assign||!Object.entries||!Array.prototype.find||!Array.prototype.includes||!String.prototype.startsWith||!String.prototype.endsWith||P.NodeList&&!P.NodeList.prototype.forEach||!P.fetch||!function(){try{var p=new URL("b","http://a");return p.pathname="c%20d","http://a/c%20d"===p.href&&p.searchParams}catch{return!1}}()||typeof WeakMap>"u")&&E.push(ee.e(9329).then(ee.t.bind(ee,7783,23)))}return Promise.all(E)}().then(()=>Qa(p,{exclude:["ion-tabs","ion-tab"],syncQueue:!0,raf:Zs,jmp:C=>m.runOutsideAngular(C),ael(C,z,te,ve){C[A](z,te,ve)},rel(C,z,te,ve){C.removeEventListener(z,te,ve)}}))}};let Vs=(()=>{var E;class P{static forRoot(p={}){return{ngModule:P,providers:[{provide:jn,useValue:p},{provide:v.hnV,useFactory:td,multi:!0,deps:[jn,Ge.qQ,v.SKi]},pn,{provide:So,useFactory:Ro,deps:[Se.Ix]}]}}}return E=P,x(P,"\u0275fac",function(p){return new(p||E)}),x(P,"\u0275mod",v.$C({type:E})),x(P,"\u0275inj",v.G2t({providers:[ed,el],imports:[Ge.MD]})),P})()},467:(hn,Ct,ee)=>{"use strict";function M(h,x,v,He,re,Se,Ge){try{var qe=h[Se](Ge),me=qe.value}catch(Ne){return void v(Ne)}qe.done?x(me):Promise.resolve(me).then(He,re)}function Q(h){return function(){var x=this,v=arguments;return new Promise(function(He,re){var Se=h.apply(x,v);function Ge(me){M(Se,He,re,Ge,qe,"next",me)}function qe(me){M(Se,He,re,Ge,qe,"throw",me)}Ge(void 0)})}}ee.d(Ct,{A:()=>Q})},1635:(hn,Ct,ee)=>{"use strict";function x(Y,J){var ie={};for(var de in Y)Object.prototype.hasOwnProperty.call(Y,de)&&J.indexOf(de)<0&&(ie[de]=Y[de]);if(null!=Y&&"function"==typeof Object.getOwnPropertySymbols){var Ue=0;for(de=Object.getOwnPropertySymbols(Y);Ue<de.length;Ue++)J.indexOf(de[Ue])<0&&Object.prototype.propertyIsEnumerable.call(Y,de[Ue])&&(ie[de[Ue]]=Y[de[Ue]])}return ie}function v(Y,J,ie,de){var pt,Ue=arguments.length,Le=Ue<3?J:null===de?de=Object.getOwnPropertyDescriptor(J,ie):de;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Le=Reflect.decorate(Y,J,ie,de);else for(var Mt=Y.length-1;Mt>=0;Mt--)(pt=Y[Mt])&&(Le=(Ue<3?pt(Le):Ue>3?pt(J,ie,Le):pt(J,ie))||Le);return Ue>3&&Le&&Object.defineProperty(J,ie,Le),Le}function Ne(Y,J,ie,de){return new(ie||(ie=Promise))(function(Le,pt){function Mt(gn){try{$t(de.next(gn))}catch(In){pt(In)}}function Dn(gn){try{$t(de.throw(gn))}catch(In){pt(In)}}function $t(gn){gn.done?Le(gn.value):function Ue(Le){return Le instanceof ie?Le:new ie(function(pt){pt(Le)})}(gn.value).then(Mt,Dn)}$t((de=de.apply(Y,J||[])).next())})}function at(Y){return this instanceof at?(this.v=Y,this):new at(Y)}function pe(Y,J,ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ue,de=ie.apply(Y,J||[]),Le=[];return Ue={},pt("next"),pt("throw"),pt("return"),Ue[Symbol.asyncIterator]=function(){return this},Ue;function pt(Mn){de[Mn]&&(Ue[Mn]=function(er){return new Promise(function(En,Dt){Le.push([Mn,er,En,Dt])>1||Mt(Mn,er)})})}function Mt(Mn,er){try{!function Dn(Mn){Mn.value instanceof at?Promise.resolve(Mn.value.v).then($t,gn):In(Le[0][2],Mn)}(de[Mn](er))}catch(En){In(Le[0][3],En)}}function $t(Mn){Mt("next",Mn)}function gn(Mn){Mt("throw",Mn)}function In(Mn,er){Mn(er),Le.shift(),Le.length&&Mt(Le[0][0],Le[0][1])}}function $e(Y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ie,J=Y[Symbol.asyncIterator];return J?J.call(Y):(Y=function it(Y){var J="function"==typeof Symbol&&Symbol.iterator,ie=J&&Y[J],de=0;if(ie)return ie.call(Y);if(Y&&"number"==typeof Y.length)return{next:function(){return Y&&de>=Y.length&&(Y=void 0),{value:Y&&Y[de++],done:!Y}}};throw new TypeError(J?"Object is not iterable.":"Symbol.iterator is not defined.")}(Y),ie={},de("next"),de("throw"),de("return"),ie[Symbol.asyncIterator]=function(){return this},ie);function de(Le){ie[Le]=Y[Le]&&function(pt){return new Promise(function(Mt,Dn){!function Ue(Le,pt,Mt,Dn){Promise.resolve(Dn).then(function($t){Le({value:$t,done:Mt})},pt)}(Mt,Dn,(pt=Y[Le](pt)).done,pt.value)})}}}ee.d(Ct,{AQ:()=>pe,Cg:()=>v,N3:()=>at,Tt:()=>x,sH:()=>Ne,xN:()=>$e}),"function"==typeof SuppressedError&&SuppressedError}},hn=>{hn(hn.s=5759)}]);